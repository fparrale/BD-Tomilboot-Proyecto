-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 20-05-2025 a las 17:09:19
-- Versión del servidor: 10.4.32-MariaDB
-- Versión de PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `fersoft_tomilboot`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_rol`
--

CREATE TABLE `tm_rol` (
  `ROL_ID` int(11) NOT NULL,
  `ROL_NOM` varchar(255) NOT NULL,
  `EST` int(11) NOT NULL,
  `FECH_CREA` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `tm_rol`
--

INSERT INTO `tm_rol` (`ROL_ID`, `ROL_NOM`, `EST`, `FECH_CREA`) VALUES
(1, 'Usuario', 1, '2025-04-28 15:38:22'),
(2, 'Soporte', 1, '2025-04-28 15:38:22');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `tm_usuario`
--

CREATE TABLE `tm_usuario` (
  `USU_ID` int(11) NOT NULL,
  `USU_NOM` varchar(150) NOT NULL,
  `USU_APE` varchar(150) NOT NULL,
  `USU_CORREO` varchar(150) NOT NULL,
  `USU_PASS` varchar(150) NOT NULL,
  `ROL_ID` int(11) DEFAULT NULL,
  `FECH_CREA` datetime NOT NULL,
  `EST` int(11) NOT NULL,
  `USU_IMG` text NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_spanish_ci;

--
-- Volcado de datos para la tabla `tm_usuario`
--

INSERT INTO `tm_usuario` (`USU_ID`, `USU_NOM`, `USU_APE`, `USU_CORREO`, `USU_PASS`, `ROL_ID`, `FECH_CREA`, `EST`, `USU_IMG`) VALUES
(1, 'Maria', 'Basurto', 'Mafer12', 'Mafer12', 2, '2025-04-14 18:25:41', 1, 'user-dummy-img.jpg'),
(2, 'Dennys', 'Tierra', 'dennismarlon14@gmail.com', '$2y$10$307tewEwXI5Mz62pM8SEXuifH4aRrtdmqv6CoiqDoOKUvQxo/dM/C', 1, '2025-04-14 18:25:41', 1, 'user-dummy-img.jpg'),
(3, 'luis', 'sellan', 'jluisellan@mail.com', '$2y$10$LJSIqY5ga9qJX5QavA7VSObtDWECTG8Oemrx0BD8K3WJzqf0srFVO', 1, '2025-04-28 20:50:30', 1, 'user-dummy-img.jpg');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `vulnerabilidades`
--

CREATE TABLE `vulnerabilidades` (
  `id` int(11) NOT NULL,
  `archivo` varchar(255) DEFAULT NULL,
  `tipo_vulnerabilidad` varchar(255) DEFAULT NULL,
  `codigo_vulnerable` text DEFAULT NULL,
  `solucion_propuesta` text DEFAULT NULL,
  `fecha_subida` timestamp NOT NULL DEFAULT current_timestamp(),
  `id_zip` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_spanish_ci;

--
-- Volcado de datos para la tabla `vulnerabilidades`
--

INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(1, 'CategoriasController.cs', 'Detectado por GPT', '﻿using ApiPeliculas.Modelos;\r\nusing ApiPeliculas.Modelos.Dtos;\r\nusing ApiPeliculas.Repositorio.IRepositorio;\r\nusing Asp.Versioning;\r\nusing AutoMapper;\r\nusing Microsoft.AspNetCore.Authorization;\r\nusing Microsoft.AspNetCore.Cors;\r\nusing Microsoft.AspNetCore.Http;\r\nusing Microsoft.AspNetCore.Mvc;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nnamespace ApiPeliculas.Controllers.V1\r\n{\r\n\r\n    //[Route(\"api/[controller]\")] //Opción estática\r\n    //[Authorize(Roles = \"Admin\")]\r\n    //[ResponseCache(Duration = 20)]\r\n    [Route(\"api/v{version:apiVersion}/categorias\")]\r\n    [ApiController]\r\n    [ApiVersion(\"1.0\")]\r\n    //[Obsolete(\"Esta versión del controlador está obsoleta\")]\r\n    public class CategoriasController : ControllerBase\r\n    {\r\n        private readonly ICategoriaRepositorio _ctRepo;\r\n        private readonly IMapper _mapper;\r\n\r\n        public CategoriasController(ICategoriaRepositorio ctRepo, IMapper mapper)\r\n        {\r\n            _ctRepo = ctRepo;\r\n            _mapper = mapper;\r\n        }\r\n\r\n        [HttpGet(\"GetString\")]\r\n        [Obsolete(\"Este endpoint esta obsoleto, por favor use el endpoing de la versión 2.0\")]\r\n        //[MapToApiVersion(\"2.0\")]\r\n        public IEnumerable<string> Get()\r\n        {\r\n            return new string[] { \"valor1\", \"valor2\", \"valor3\" };\r\n        }\r\n\r\n\r\n        [AllowAnonymous]\r\n        [HttpGet]\r\n        //[MapToApiVersion(\"1.0\")]\r\n        //[ResponseCache(Duration = 20)]\r\n        [ResponseCache(CacheProfileName = \"PorDefecto30Segundos\")]\r\n        [ProducesResponseType(StatusCodes.Status403Forbidden)]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        //[EnableCors(\"PoliticaCors\")] // Aplica la política CORS a este método\r\n        public IActionResult GetCategorias()\r\n        {\r\n            var listaCategorias = _ctRepo.GetCategorias();\r\n\r\n            var listaCategoriasDto = new List<CategoriaDto>();\r\n\r\n            foreach (var lista in listaCategorias)\r\n            {\r\n                listaCategoriasDto.Add(_mapper.Map<CategoriaDto>(lista));\r\n            }\r\n            return Ok(listaCategoriasDto);\r\n        }\r\n\r\n\r\n\r\n\r\n        [AllowAnonymous]\r\n        [HttpGet(\"{categoriaId:int}\", Name = \"GetCategoria\")]\r\n        //[ResponseCache(Duration = 40)]\r\n        //[ResponseCache(Location = ResponseCacheLocation.None, NoStore = true)]\r\n        [ResponseCache(CacheProfileName = \"PorDefecto30Segundos\")]\r\n        [ProducesResponseType(StatusCodes.Status403Forbidden)]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        public IActionResult GetCategoria(int categoriaId)\r\n        {\r\n            var itemCategoria = _ctRepo.GetCategoria(categoriaId);\r\n\r\n            if (itemCategoria == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var itemCategoriaDto = _mapper.Map<CategoriaDto>(itemCategoria);\r\n\r\n            return Ok(itemCategoriaDto);\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpPost]\r\n        [ProducesResponseType(StatusCodes.Status201Created)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        public IActionResult CrearCategoria([FromBody] CrearCategoriaDto crearCategoriaDto)\r\n        {\r\n            if (!ModelState.IsValid)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (crearCategoriaDto == null)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (_ctRepo.ExisteCategoria(crearCategoriaDto.Nombre))\r\n            {\r\n                ModelState.AddModelError(\"\", \"La categoría ya existe\");\r\n                return StatusCode(404, ModelState);\r\n            }\r\n\r\n            var categoria = _mapper.Map<Categoria>(crearCategoriaDto);\r\n\r\n            if (!_ctRepo.CrearCategoria(categoria))\r\n            {\r\n                ModelState.AddModelError(\"\", $\"Algo salio mal guardando el registro{categoria.Nombre}\");\r\n                return StatusCode(404, ModelState);\r\n            }\r\n\r\n            return CreatedAtRoute(\"GetCategoria\", new { categoriaId = categoria.Id }, categoria);\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpPatch(\"{categoriaId:int}\", Name = \"ActualizarPatchCategoria\")]\r\n        [ProducesResponseType(StatusCodes.Status204NoContent)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        public IActionResult ActualizarPatchCategoria(int categoriaId, [FromBody] CategoriaDto categoriaDto)\r\n        {\r\n            if (!ModelState.IsValid)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (categoriaDto == null || categoriaId != categoriaDto.Id)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            var categoriaExistente = _ctRepo.GetCategoria(categoriaId);\r\n            if (categoriaExistente == null)\r\n            {\r\n                return NotFound($\"No se encontro la categoría con ID {categoriaId}\");\r\n            }\r\n\r\n            var categoria = _mapper.Map<Categoria>(categoriaDto);\r\n\r\n            if (!_ctRepo.ActualizarCategoria(categoria))\r\n            {\r\n                ModelState.AddModelError(\"\", $\"Algo salio mal actualizando el registro{categoria.Nombre}\");\r\n                return StatusCode(500, ModelState);\r\n            }\r\n\r\n            return NoContent();\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpPut(\"{categoriaId:int}\", Name = \"ActualizarPutCategoria\")]\r\n        [ProducesResponseType(StatusCodes.Status204NoContent)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult ActualizarPutCategoria(int categoriaId, [FromBody] CategoriaDto categoriaDto)\r\n        {\r\n            if (!ModelState.IsValid)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (categoriaDto == null || categoriaId != categoriaDto.Id)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            var categoriaExistente = _ctRepo.GetCategoria(categoriaId);\r\n            if (categoriaExistente == null)\r\n            {\r\n                return NotFound($\"No se encontro la categoría con ID {categoriaId}\");\r\n            }\r\n\r\n            var categoria = _mapper.Map<Categoria>(categoriaDto);\r\n\r\n            if (!_ctRepo.ActualizarCategoria(categoria))\r\n            {\r\n                ModelState.AddModelError(\"\", $\"Algo salio mal actualizando el registro{categoria.Nombre}\");\r\n                return StatusCode(500, ModelState);\r\n            }\r\n\r\n            return NoContent();\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpDelete(\"{categoriaId:int}\", Name = \"BorrarCategoria\")]\r\n        [ProducesResponseType(StatusCodes.Status204NoContent)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult BorrarCategoria(int categoriaId)\r\n        {\r\n\r\n            if (!_ctRepo.ExisteCategoria(categoriaId))\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var categoria = _ctRepo.GetCategoria(categoriaId);\r\n\r\n            if (!_ctRepo.BorrarCategoria(categoria))\r\n            {\r\n                ModelState.AddModelError(\"\", $\"Algo salio mal borrando el registro{categoria.Nombre}\");\r\n                return StatusCode(500, ModelState);\r\n            }\r\n\r\n            return NoContent();\r\n        }\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">Vulnerabilidades de Seguridad</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Falta de Autorización Consistente</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Control de acceso inapropiado.\n            <br>\n            <b>Líneas Afectadas:</b> Comentarios `//[Authorize(Roles = \"Admin\")]` en varios métodos (HttpPost, HttpPatch, HttpPut, HttpDelete).\n            <br>\n            <b>Descripción:</b> Aunque hay autorización a nivel de controlador `//[Authorize(Roles = \"Admin\")]`, está comentada.  Los métodos individuales,  HttpPost, HttpPatch, HttpPut, HttpDelete, están protegidos solo si el comentario se elimina y se habilita la autorización, tal cual se ve ahora, no están protegidos.  Esto permite que usuarios no autorizados creen, actualicen y eliminen categorías. La vulnerabilidad se agrava porque `[AllowAnonymous]` esta explícitamente habilitado para Get. Se debe definir una política clara sobre quién puede acceder y modificar los recursos.\n            <br>\n            <b>Mitigación:</b> Eliminar los comentarios `//` de los atributos `[Authorize(Roles = \"Admin\")]` para habilitar la restricción de acceso a los roles administrativos.  Si se requiere granularidad, mantener la autorización a nivel de método.  Validar roles en cada operación sensible.\n            <br>\n            <b>Mejora:</b>  Centralizar la gestión de autorización, posiblemente usando políticas de autorización más complejas que permitan un control más fino sobre quién puede hacer qué.\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">Métricas de Calidad del Código</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Duplicación de Código</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> Existe duplicación de código en los métodos `ActualizarPatchCategoria` y `ActualizarPutCategoria`.  Ambos realizan validaciones similares (ModelState, nulidad de DTO, existencia de la categoría) y lógica de actualización.\n            <br>\n            <b>Mejora:</b> Refactorizar la lógica común en una función privada o un servicio auxiliar reutilizable.  Esto reduce la duplicación, mejora la legibilidad y facilita el mantenimiento. Por ejemplo, crear una función `ValidarCategoria` que contenga la lógica de validación y sea llamada por ambos métodos.\n          </p>\n\n          <h5 class=\"card-title\">Complejidad Ciclomática</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> Algunos métodos, especialmente los de actualización y creación, tienen una complejidad ciclomática moderada debido a múltiples validaciones y comprobaciones de errores.\n            <br>\n            <b>Mejora:</b> Extraer partes de la lógica en métodos separados para reducir la complejidad de cada método individual.  Usar patrones de diseño como \"Guard Clause\" (cláusulas de guarda) para simplificar el flujo de control. Esto hará que el código sea más fácil de entender y probar.\n\n          </p>\n\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> El controlador depende directamente del repositorio `ICategoriaRepositorio` y del mapper `IMapper`.\n            <br>\n            <b>Mejora:</b> Si el acoplamiento se vuelve un problema, considerar el uso de un patrón Mediator o una capa de servicio para desacoplar aún más el controlador de las dependencias directas del repositorio y el mapper. Esto facilitaría las pruebas unitarias y permitiría cambiar las implementaciones subyacentes sin afectar al controlador.\n          </p>\n\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> En general, el código es legible, pero hay margen de mejora en la consistencia del manejo de errores y en la claridad de los mensajes de error.\n            <br>\n            <b>Mejora:</b> Estandarizar el manejo de errores (por ejemplo, usar siempre `return BadRequest()` para errores de validación). Proporcionar mensajes de error más descriptivos y específicos para facilitar la depuración.  Utilizar nombres de variables y métodos que sean autoexplicativos.\n          </p>\n\n          <h5 class=\"card-title\">Manejo de Errores Inconsistente</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> El manejo de errores no es consistente en todos los métodos. Algunos usan `return BadRequest(ModelState)`, otros usan `return StatusCode(404, ModelState)` o `return StatusCode(500, ModelState)`, y otros usan `return NotFound()`.\n            <br>\n            <b>Mejora:</b> Unificar el enfoque de manejo de errores. Considerar el uso de `ProblemDetails` para una respuesta de error más estandarizada y rica en información.  Implementar un middleware de manejo de excepciones para capturar excepciones no controladas y devolver respuestas de error consistentes.\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">Solución Propuesta</div>\n        <div class=\"card-body\">\n          <ol>\n            <li><b>Habilitar Autorización:</b> Descomentar las líneas `[Authorize(Roles = \"Admin\")]` en los métodos que requieran autorización administrativa.</li>\n            <li><b>Refactorizar Lógica Duplicada:</b> Crear métodos o servicios auxiliares para la lógica común en `ActualizarPatchCategoria` y `ActualizarPutCategoria`.</li>\n            <li><b>Mejorar el Manejo de Errores:</b> Unificar el manejo de errores usando `ProblemDetails` y un middleware de manejo de excepciones.</li>\n            <li><b>Simplificar la Complejidad:</b> Extraer la lógica compleja en métodos separados y usar \"Guard Clauses\".</li>\n            <li><b>Estandarizar Mensajes de Error:</b> Proporcionar mensajes de error más descriptivos y específicos.</li>\n          </ol>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 03:35:32', 1),
(2, 'PeliculasController.cs', 'Detectado por GPT', '﻿using ApiPeliculas.Modelos;\r\nusing ApiPeliculas.Modelos.Dtos;\r\nusing ApiPeliculas.Repositorio.IRepositorio;\r\nusing Asp.Versioning;\r\nusing AutoMapper;\r\nusing Microsoft.AspNetCore.Authorization;\r\nusing Microsoft.AspNetCore.Http;\r\nusing Microsoft.AspNetCore.Mvc;\r\n\r\nnamespace ApiPeliculas.Controllers.V1\r\n{\r\n    [Route(\"api/v{version:apiVersion}/peliculas\")]\r\n    [ApiController]\r\n    [ApiVersion(\"1.0\")]\r\n    public class PeliculasController : ControllerBase\r\n    {\r\n        private readonly IPeliculaRepositorio _pelRepo;\r\n        private readonly IMapper _mapper;\r\n\r\n        public PeliculasController(IPeliculaRepositorio pelRepo, IMapper mapper)\r\n        {\r\n            _pelRepo = pelRepo;\r\n            _mapper = mapper;\r\n        }\r\n\r\n        //V1\r\n        //[AllowAnonymous]\r\n        //[HttpGet]\r\n        //[ProducesResponseType(StatusCodes.Status403Forbidden)]\r\n        //[ProducesResponseType(StatusCodes.Status200OK)]\r\n        //public IActionResult GetPeliculas()\r\n        //{\r\n        //    var listaPeliculas = _pelRepo.GetPeliculas();\r\n\r\n        //    var listaPeliculasDto = new List<PeliculaDto>();\r\n\r\n        //    foreach (var lista in listaPeliculas)\r\n        //    {\r\n        //        listaPeliculasDto.Add(_mapper.Map<PeliculaDto>(lista));\r\n        //    }\r\n        //    return Ok(listaPeliculasDto);\r\n        //}\r\n\r\n        //V2 con páginación\r\n        [AllowAnonymous]\r\n        [HttpGet]\r\n        [ProducesResponseType(StatusCodes.Status403Forbidden)]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        public IActionResult GetPeliculas([FromQuery] int pageNumber = 1, [FromQuery] int pageSize = 10)\r\n        {\r\n            try\r\n            {\r\n                var totalPeliculas = _pelRepo.GetTotalPeliculas();\r\n                var peliculas = _pelRepo.GetPeliculas(pageNumber, pageSize);\r\n\r\n                if (peliculas == null || !peliculas.Any())\r\n                {\r\n                    return NotFound(\"No se encontraron películas.\");\r\n                }\r\n\r\n                var peliculasDto = peliculas.Select(p => _mapper.Map<PeliculaDto>(p)).ToList();\r\n\r\n                var response = new\r\n                {\r\n                    PageNumber = pageNumber,\r\n                    PageSize = pageSize,\r\n                    TotalPages = (int)Math.Ceiling(totalPeliculas / (double)pageSize),\r\n                    TotalItems = totalPeliculas,\r\n                    Items = peliculasDto\r\n                };\r\n\r\n                return Ok(response);\r\n\r\n            }\r\n            catch (Exception)\r\n            {\r\n                return StatusCode(StatusCodes.Status500InternalServerError, \"Error recuperando datos de la aplicación\");\r\n            }            \r\n        }\r\n\r\n        [AllowAnonymous]\r\n        [HttpGet(\"{peliculaId:int}\", Name = \"GetPelicula\")]\r\n        [ProducesResponseType(StatusCodes.Status403Forbidden)]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        public IActionResult GetPelicula(int peliculaId)\r\n        {\r\n            var itemPelicula = _pelRepo.GetPelicula(peliculaId);\r\n\r\n            if (itemPelicula == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var itemPeliculaDto = _mapper.Map<PeliculaDto>(itemPelicula);\r\n\r\n            return Ok(itemPeliculaDto);\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpPost]\r\n        [ProducesResponseType(201, Type = typeof(PeliculaDto))]\r\n        [ProducesResponseType(StatusCodes.Status201Created)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult CrearPelicula([FromForm] CrearPeliculaDto crearPeliculaDto)\r\n        {\r\n            if (!ModelState.IsValid)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (crearPeliculaDto == null)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (_pelRepo.ExistePelicula(crearPeliculaDto.Nombre))\r\n            {\r\n                ModelState.AddModelError(\"\", \"La película ya existe\");\r\n                return StatusCode(404, ModelState);\r\n            }\r\n\r\n            var pelicula = _mapper.Map<Pelicula>(crearPeliculaDto);\r\n\r\n            //if (!_pelRepo.CrearPelicula(pelicula))\r\n            //{\r\n            //    ModelState.AddModelError(\"\", $\"Algo salio mal guardando el registro{pelicula.Nombre}\");\r\n            //    return StatusCode(404, ModelState);\r\n            //}\r\n\r\n            //Subida de Archivo\r\n            if (crearPeliculaDto.Imagen != null)\r\n            {\r\n                string nombreArchivo = pelicula.Id + System.Guid.NewGuid().ToString() + Path.GetExtension(crearPeliculaDto.Imagen.FileName);\r\n                string rutaArchivo = @\"wwwroot\\ImagenesPeliculas\\\" + nombreArchivo;\r\n\r\n                var ubicacionDirectorio = Path.Combine(Directory.GetCurrentDirectory(), rutaArchivo);\r\n\r\n                FileInfo file = new FileInfo(ubicacionDirectorio);\r\n\r\n                if (file.Exists)\r\n                {\r\n                    file.Delete();\r\n                }\r\n\r\n                using (var fileStream = new FileStream(ubicacionDirectorio, FileMode.Create))\r\n                {\r\n                    crearPeliculaDto.Imagen.CopyTo(fileStream);\r\n                }\r\n\r\n                var baseUrl = $\"{HttpContext.Request.Scheme}://{HttpContext.Request.Host.Value}{HttpContext.Request.PathBase.Value}\";\r\n                pelicula.RutaIMagen = baseUrl + \"/ImagenesPeliculas/\" + nombreArchivo;\r\n                pelicula.RutaLocalIMagen = rutaArchivo;\r\n            }\r\n            else\r\n            {\r\n                pelicula.RutaIMagen = \"https://placehold.co/600x400\";\r\n            }\r\n\r\n            _pelRepo.CrearPelicula(pelicula);\r\n            return CreatedAtRoute(\"GetPelicula\", new { peliculaId = pelicula.Id }, pelicula);\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpPatch(\"{peliculaId:int}\", Name = \"ActualizarPatchPelicula\")]\r\n        [ProducesResponseType(StatusCodes.Status204NoContent)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        public IActionResult ActualizarPatchPelicula(int peliculaId, [FromForm] ActualizarPeliculaDto actualizarPeliculaDto)\r\n        {\r\n            if (!ModelState.IsValid)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            if (actualizarPeliculaDto == null || peliculaId != actualizarPeliculaDto.Id)\r\n            {\r\n                return BadRequest(ModelState);\r\n            }\r\n\r\n            var peliculaExistente = _pelRepo.GetPelicula(peliculaId);\r\n            if (peliculaExistente == null)\r\n            {\r\n                return NotFound($\"No se encontro la película con ID {peliculaId}\");\r\n            }\r\n\r\n            var pelicula = _mapper.Map<Pelicula>(actualizarPeliculaDto);\r\n\r\n            //if (!_pelRepo.ActualizarPelicula(pelicula))\r\n            //{\r\n            //    ModelState.AddModelError(\"\", $\"Algo salio mal actualizando el registro{pelicula.Nombre}\");\r\n            //    return StatusCode(500, ModelState);\r\n            //}\r\n\r\n            //Subida de Archivo\r\n            if (actualizarPeliculaDto.Imagen != null)\r\n            {\r\n                string nombreArchivo = pelicula.Id + System.Guid.NewGuid().ToString() + Path.GetExtension(actualizarPeliculaDto.Imagen.FileName);\r\n                string rutaArchivo = @\"wwwroot\\ImagenesPeliculas\\\" + nombreArchivo;\r\n\r\n                var ubicacionDirectorio = Path.Combine(Directory.GetCurrentDirectory(), rutaArchivo);\r\n\r\n                FileInfo file = new FileInfo(ubicacionDirectorio);\r\n\r\n                if (file.Exists)\r\n                {\r\n                    file.Delete();\r\n                }\r\n\r\n                using (var fileStream = new FileStream(ubicacionDirectorio, FileMode.Create))\r\n                {\r\n                    actualizarPeliculaDto.Imagen.CopyTo(fileStream);\r\n                }\r\n\r\n                var baseUrl = $\"{HttpContext.Request.Scheme}://{HttpContext.Request.Host.Value}{HttpContext.Request.PathBase.Value}\";\r\n                pelicula.RutaIMagen = baseUrl + \"/ImagenesPeliculas/\" + nombreArchivo;\r\n                pelicula.RutaLocalIMagen = rutaArchivo;\r\n            }\r\n            else\r\n            {\r\n                pelicula.RutaIMagen = \"https://placehold.co/600x400\";\r\n            }\r\n\r\n            _pelRepo.ActualizarPelicula(pelicula);\r\n            return NoContent();\r\n\r\n        }\r\n\r\n        //[Authorize(Roles = \"Admin\")]\r\n        [HttpDelete(\"{peliculaId:int}\", Name = \"BorrarPelicula\")]\r\n        [ProducesResponseType(StatusCodes.Status204NoContent)]\r\n        [ProducesResponseType(StatusCodes.Status400BadRequest)]\r\n        [ProducesResponseType(StatusCodes.Status401Unauthorized)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult BorrarPelicula(int peliculaId)\r\n        {\r\n\r\n            if (!_pelRepo.ExistePelicula(peliculaId))\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var pelicula = _pelRepo.GetPelicula(peliculaId);\r\n\r\n            if (!_pelRepo.BorrarPelicula(pelicula))\r\n            {\r\n                ModelState.AddModelError(\"\", $\"Algo salio mal borrando el registro{pelicula.Nombre}\");\r\n                return StatusCode(500, ModelState);\r\n            }\r\n\r\n            return NoContent();\r\n        }\r\n\r\n        [AllowAnonymous]\r\n        [HttpGet(\"GetPeliculasEnCategoria/{categoriaId:int}\")]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult GetPeliculasEnCategoria(int categoriaId)\r\n        {\r\n            try\r\n            {\r\n                var listaPeliculas = _pelRepo.GetPeliculasEnCategoria(categoriaId);\r\n\r\n                if (listaPeliculas == null || !listaPeliculas.Any())\r\n                {\r\n                    return NotFound($\"No se encontraron películas en la categoría con ID {categoriaId}.\");\r\n                }\r\n\r\n                var itemPelicula = listaPeliculas.Select(pelicula => _mapper.Map<PeliculaDto>(pelicula)).ToList();\r\n                //foreach (var pelicula in listaPeliculas)\r\n                //{\r\n                //    itemPelicula.Add(_mapper.Map<PeliculaDto>(pelicula));\r\n                //}\r\n\r\n                return Ok(itemPelicula);\r\n            }\r\n            catch (Exception)\r\n            {\r\n\r\n                return StatusCode(StatusCodes.Status500InternalServerError, \"rror recuperando datos de la aplicación\");\r\n            }\r\n            \r\n        }\r\n\r\n        [AllowAnonymous]\r\n        [HttpGet(\"Buscar\")]\r\n        [ProducesResponseType(StatusCodes.Status200OK)]\r\n        [ProducesResponseType(StatusCodes.Status404NotFound)]\r\n        [ProducesResponseType(StatusCodes.Status500InternalServerError)]\r\n        public IActionResult Buscar(string nombre)\r\n        {\r\n            try\r\n            {\r\n                var peliculas = _pelRepo.BuscarPelicula(nombre);\r\n                if (!peliculas.Any())\r\n                {\r\n                    return NotFound($\"No se encontraron películas que coincidan con los criterios de búsqueda.\");\r\n                }\r\n\r\n                var peliculasDto = _mapper.Map<IEnumerable<PeliculaDto>>(peliculas);\r\n                return Ok(peliculasDto);\r\n            }\r\n            catch (Exception)\r\n            {\r\n                return StatusCode(StatusCodes.Status500InternalServerError, \"Error recuperando datos de la aplicación\");\r\n            }\r\n        }\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Análisis de Seguridad y Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Vulnerabilidades Identificadas</h5>\n\n                    <div class=\"card-text\">\n                        <ul>\n                            <li>\n                                <b>Vulnerabilidad:</b> Path Traversal / Local File Inclusion (LFI)\n                                <br>\n                                <b>Línea Aproximada:</b> En los métodos `CrearPelicula` y `ActualizarPatchPelicula` (ej., línea 121 y 200 respectivamente).\n                                <br>\n                                <b>Descripción:</b> El código construye rutas de archivo concatenando cadenas directamente con datos proporcionados por el usuario (nombre de archivo), lo que permite a un atacante manipular el nombre del archivo (`crearPeliculaDto.Imagen.FileName` o `actualizarPeliculaDto.Imagen.FileName`) para incluir rutas relativas como `../../` y acceder o sobrescribir archivos fuera del directorio previsto (`wwwroot\\ImagenesPeliculas`).  Además, la validación de la extensión es inexistente, lo que permite subir archivos ejecutables.\n                                <br>\n                                <b>Impacto:</b>  Un atacante podría leer archivos sensibles del servidor, ejecutar código arbitrario (si puede subir un archivo ejecutable y luego ejecutarlo), o sobrescribir archivos de configuración, comprometiendo la seguridad y la integridad del sistema.\n\n                                <br>\n                                <b>Métricas afectadas:</b> Seguridad.\n                            </li>\n\n                            <li>\n                                <b>Vulnerabilidad:</b> Falta de validación y manejo de excepciones robusto en la eliminación de archivos.\n                                <br>\n                                <b>Línea Aproximada:</b> En los métodos `CrearPelicula` y `ActualizarPatchPelicula` (ej., línea 128 y 207 respectivamente).\n                                <br>\n                                <b>Descripción:</b> El código intenta eliminar archivos sin un manejo de excepciones adecuado.  Si la eliminación falla (por permisos, archivo en uso, etc.), la aplicación no lo detecta ni lo maneja correctamente, lo que puede llevar a inconsistencias o fallos inesperados.\n                                <br>\n                                <b>Impacto:</b>  Potencial pérdida de datos, denegación de servicio (si la eliminación falla repetidamente y consume recursos), o inconsistencias en el estado del sistema.\n                                <br>\n                                <b>Métricas afectadas:</b> Confiabilidad.\n\n                            </li>\n\n                            <li>\n                                <b>Vulnerabilidad:</b> Ausencia de autorización en endpoints de creación, actualización y eliminación.\n                                <br>\n                                <b>Línea Aproximada:</b>  Se comentan las directivas `[Authorize(Roles = \"Admin\")]`  en `HttpPost`, `HttpPatch` y `HttpDelete`.\n                                <br>\n                                <b>Descripción:</b> Al comentar las directivas de autorización, se permite que usuarios no autorizados accedan a funciones críticas de creación, actualización y eliminación de películas.\n                                <br>\n                                <b>Impacto:</b>  Usuarios no autorizados podrían modificar o eliminar datos, comprometiendo la integridad de la información y la funcionalidad del sistema.\n                                <br>\n                                <b>Métricas afectadas:</b> Seguridad.\n\n                            </li>\n                        </ul>\n                    </div>\n\n                    <h5 class=\"card-title\">Métricas de Calidad del Código</h5>\n                    <div class=\"card-text\">\n                        <ul>\n                            <li>\n                                <b>Complejidad Ciclomática:</b> Moderada.  Algunos métodos, como `CrearPelicula` y `ActualizarPatchPelicula`, tienen una complejidad alta debido a las múltiples ramas condicionales (if/else) relacionadas con la gestión de la imagen.\n                                <br>\n                                <b>Impacto:</b> Dificultad para entender, mantener y probar el código.\n                            </li>\n                            <li>\n                                <b>Duplicación:</b>  Alta.  La lógica de manejo de archivos (subida, almacenamiento, y generación de URL) se duplica en los métodos `CrearPelicula` y `ActualizarPatchPelicula`.\n                                <br>\n                                <b>Impacto:</b> Incremento del riesgo de errores y dificultad en el mantenimiento. Si se necesita cambiar la forma en que se manejan los archivos, se debe modificar en múltiples lugares.\n                            </li>\n                            <li>\n                                <b>Legibilidad:</b>  Aceptable, pero puede mejorar.  El código es generalmente fácil de entender, pero la presencia de lógica compleja y duplicada dificulta su comprensión.\n                                <br>\n                                <b>Impacto:</b>  Dificultad para que otros desarrolladores entiendan el código y colaboren.\n                            </li>\n                            <li>\n                                <b>Acoplamiento:</b>  Moderado.  La clase depende de `IPeliculaRepositorio`, `IMapper`, `IFormFile` (a través de los DTOs) y `HttpContext`.\n                                <br>\n                                <b>Impacto:</b>  Cambios en las dependencias podrían requerir modificaciones en la clase.\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Mitigación de Vulnerabilidades y Mejora de Calidad</h5>\n                    <div class=\"card-text\">\n                        <ul>\n                            <li>\n                                <b>Mitigación de Path Traversal/LFI:</b>\n                                <ul>\n                                    <li>\n                                        <b>Validar y limpiar el nombre del archivo:</b> Utilizar expresiones regulares o funciones de sanitización para eliminar caracteres no permitidos y evitar rutas relativas (`../`).\n                                    </li>\n                                    <li>\n                                        <b>Validar la extensión del archivo:</b> Asegurarse de que la extensión del archivo sea una extensión permitida (ej., `.jpg`, `.png`).  Usar `Path.GetExtension()` y una lista blanca de extensiones permitidas.\n                                    </li>\n                                    <li>\n                                        <b>Utilizar `Path.Combine()` para construir rutas:</b> En lugar de concatenar cadenas directamente, usar `Path.Combine()` para asegurar que la ruta sea construida correctamente, independientemente del sistema operativo.\n                                    </li>\n                                    <li>\n                                        <b>Generar nombres de archivo aleatorios:</b> Evitar usar el nombre original del archivo proporcionado por el usuario.  Generar un nombre aleatorio y almacenar la extensión original por separado si es necesario.\n                                    </li>\n                                    <li>\n                                        <b>Almacenar archivos fuera del directorio público (wwwroot):</b>  Guardar los archivos en un directorio que no sea accesible directamente a través de la web.  Crear un endpoint que sirva las imágenes, implementando la autorización y validación adecuadas.\n\n                                    </li>\n                                </ul>\n                                <b>Ejemplo de código (parcial):</b>\n                                ```csharp\n                                // Generar nombre de archivo seguro\n                                string extension = Path.GetExtension(crearPeliculaDto.Imagen.FileName);\n                                if (!EsExtensionPermitida(extension)) {\n                                    return BadRequest(\"Extensión de archivo no permitida.\");\n                                }\n                                string nombreArchivo = Guid.NewGuid().ToString() + extension;\n                                string rutaArchivo = Path.Combine(@\"ImagenesPeliculas\", nombreArchivo); //Guardar fuera del wwwroot\n\n                                // Validar y crear directorio si no existe\n                                string directorioBase = Path.Combine(Directory.GetCurrentDirectory(), \"ImagenesPeliculas\");\n                                if (!Directory.Exists(directorioBase))\n                                {\n                                    Directory.CreateDirectory(directorioBase);\n                                }\n\n                                var ubicacionDirectorio = Path.Combine(directorioBase, nombreArchivo);\n\n                                using (var fileStream = new FileStream(ubicacionDirectorio, FileMode.Create))\n                                {\n                                    crearPeliculaDto.Imagen.CopyTo(fileStream);\n                                }\n\n                                pelicula.RutaIMagen = $\"{HttpContext.Request.Scheme}://{HttpContext.Request.Host.Value}/api/imagenes/{nombreArchivo}\"; //Endpoint controlado\n                                pelicula.RutaLocalIMagen = rutaArchivo;\n                                ```\n\n                            </li>\n\n                            <li>\n                                <b>Mejora en el manejo de excepciones en la eliminación de archivos:</b>\n                                <ul>\n                                    <li>\n                                        <b>Usar bloques `try-catch` para capturar excepciones:</b>  Envolver el código de eliminación de archivos en un bloque `try-catch` para capturar excepciones como `IOException` o `UnauthorizedAccessException`.\n                                    </li>\n                                    <li>\n                                        <b>Registrar errores:</b>  Usar un logger para registrar cualquier error que ocurra durante la eliminación de archivos.\n                                    </li>\n                                    <li>\n                                        <b>Implementar una estrategia de reintento:</b>  Si la eliminación falla, intentar de nuevo después de un breve retraso.\n                                    </li>\n                                </ul>\n                                <b>Ejemplo de código (parcial):</b>\n                                ```csharp\n                                try\n                                {\n                                    file.Delete();\n                                }\n                                catch (IOException ex)\n                                {\n                                    // Registrar el error\n                                    _logger.LogError($\"Error al eliminar el archivo: {ex.Message}\");\n                                    // Manejar el error (ej., mostrar un mensaje al usuario)\n                                    return StatusCode(StatusCodes.Status500InternalServerError, \"Error al eliminar el archivo.\");\n                                }\n                                ```\n                            </li>\n\n                            <li>\n                                <b>Implementar Autorización Adecuada:</b>\n                                <ul>\n                                    <li>\n                                        <b>Habilitar la autorización:</b>  Descomentar y configurar correctamente los atributos `[Authorize(Roles = \"Admin\")]` en los métodos `CrearPelicula`, `ActualizarPatchPelicula` y `BorrarPelicula`.\n                                    </li>\n                                    <li>\n                                        <b>Validar roles:</b> Asegurarse de que los roles de usuario están correctamente configurados y asignados en el sistema de autenticación.\n                                    </li>\n                                </ul>\n                                <b>Ejemplo de código:</b>\n                                ```csharp\n                                [Authorize(Roles = \"Admin\")]\n                                [HttpPost]\n                                public IActionResult CrearPelicula([FromForm] CrearPeliculaDto crearPeliculaDto)\n                                {\n                                    // ...\n                                }\n                                ```\n                            </li>\n\n                            <li>\n                                <b>Mejora de la Calidad del Código:</b>\n                                <ul>\n                                    <li>\n                                        <b>Refactorización:</b> Extraer la lógica de manejo de archivos en un método o clase separada para reducir la duplicación y mejorar la legibilidad.  Aplicar el principio DRY (Don\'t Repeat Yourself).\n                                    </li>\n                                    <li>\n                                        <b>Reducción de la complejidad:</b> Dividir los métodos complejos en métodos más pequeños y fáciles de entender.\n                                    </li>\n                                    <li>\n                                        <b>Inyección de dependencias:</b> Utilizar la inyección de dependencias para facilitar las pruebas unitarias y reducir el acoplamiento.  Por ejemplo, inyectar un servicio de manejo de archivos en lugar de instanciarlo directamente en la clase.\n                                    </li>\n                                    <li>\n                                        <b>Mejorar la legibilidad:</b> Utilizar nombres de variables y métodos descriptivos, agregar comentarios para explicar la lógica compleja, y seguir las convenciones de codificación del lenguaje.\n                                    </li>\n                                </ul>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 03:36:13', 1);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(3, 'ICategoriaRepositorio.cs', 'Detectado por GPT', '﻿using ApiPeliculas.Modelos;\r\n\r\nnamespace ApiPeliculas.Repositorio.IRepositorio\r\n{\r\n    public interface ICategoriaRepositorio\r\n    {\r\n        ICollection<Categoria> GetCategorias();\r\n        Categoria GetCategoria(int CategoriaId);\r\n        bool ExisteCategoria(int id);\r\n        bool ExisteCategoria(string nombre);\r\n\r\n        bool CrearCategoria(Categoria categoria);\r\n        bool ActualizarCategoria(Categoria categoria);\r\n        bool BorrarCategoria(Categoria categoria);\r\n        bool Guardar();\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card\">\n        <div class=\"card-header bg-danger text-white\">\n          Análisis de Seguridad y Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">El código proporcionado define una interfaz para un repositorio de categorías. A simple vista, no presenta vulnerabilidades de seguridad directas en el código *mostrado*, ya que solo define la interfaz. Las vulnerabilidades probablemente residirán en la implementación de esta interfaz, en la clase que la implementa, o en el código que usa esta interfaz.</p>\n\n          <h5 class=\"card-title\">Posibles Vulnerabilidades (en la Implementación)</h5>\n          <ul>\n            <li>\n              <strong>Inyección SQL:</strong> Si el repositorio implementa consultas SQL directamente, especialmente en los métodos <code>ExisteCategoria(string nombre)</code>, <code>GetCategoria(int CategoriaId)</code>, <code>CrearCategoria(Categoria categoria)</code>, <code>ActualizarCategoria(Categoria categoria)</code> y <code>BorrarCategoria(Categoria categoria)</code>, y no sanitiza la entrada, es susceptible a inyección SQL.\n              <br>\n              <strong>Línea Aproximada:</strong> Dentro de la implementación de los métodos mencionados.\n              <br>\n              <strong>Mitigación:</strong> Utilizar Entity Framework Core o Dapper con parámetros, o cualquier ORM que escape automáticamente las entradas.  Nunca concatenar directamente cadenas en consultas SQL.\n              <br>\n              <strong>Ejemplo (Incorrecto):</strong> <code>\"SELECT * FROM Categorias WHERE Nombre = \'\" + nombre + \"\'\"</code>\n              <br>\n              <strong>Ejemplo (Correcto - usando EF Core):</strong> <code>_context.Categorias.FirstOrDefault(c => c.Nombre == nombre);</code>\n            </li>\n            <li>\n              <strong>Ataques de Denegación de Servicio (DoS):</strong> Si <code>GetCategorias()</code> devuelve una lista muy grande sin paginación o limitación, podría causar problemas de rendimiento y potencialmente un DoS.\n              <br>\n              <strong>Línea Aproximada:</strong> En la implementación de <code>GetCategorias()</code>.\n              <br>\n              <strong>Mitigación:</strong> Implementar paginación o limitar el número de resultados devueltos.\n            </li>\n            <li>\n              <strong>Condiciones de Carrera:</strong> Si múltiples usuarios acceden concurrentemente a los métodos <code>CrearCategoria</code>, <code>ActualizarCategoria</code> o <code>BorrarCategoria</code> sin una gestión adecuada de la concurrencia, podrían ocurrir problemas de integridad de datos.\n              <br>\n              <strong>Línea Aproximada:</strong> En la implementación de los métodos mencionados.\n              <br>\n              <strong>Mitigación:</strong> Utilizar transacciones y mecanismos de bloqueo (optimistas u pesimistas) para garantizar la consistencia de los datos.\n            </li>\n            <li>\n              <strong>Validación Inadecuada de Datos:</strong>  Si la clase `Categoria` no tiene validaciones adecuadas (por ejemplo, usando atributos `[Required]`, `[MaxLength]`, `[Range]`) y estos no se aplican antes de guardar en la base de datos, se pueden guardar datos inválidos o inconsistentes.\n              <br>\n              <strong>Línea Aproximada:</strong>  Dentro de la clase `Categoria` y antes de llamar a `Guardar()` en la implementación del repositorio.\n              <br>\n              <strong>Mitigación:</strong> Utilizar Data Annotations en el modelo `Categoria` y asegurarse de que se validan los datos antes de persistirlos.\n            </li>\n          </ul>\n\n          <h5 class=\"card-title\">Métricas de Calidad del Código (de la Interfaz)</h5>\n          <ul>\n            <li>\n              <strong>Acoplamiento:</strong>  El acoplamiento es bajo, ya que la interfaz solo depende del modelo `Categoria` y de colecciones. Esto es bueno para la mantenibilidad.\n            </li>\n            <li>\n              <strong>Cohesión:</strong>  La cohesión es alta, ya que la interfaz define operaciones relacionadas con la gestión de categorías.\n            </li>\n            <li>\n              <strong>Legibilidad:</strong> La interfaz es legible y fácil de entender gracias a los nombres descriptivos de los métodos.\n            </li>\n            <li>\n              <strong>Complejidad Ciclomática:</strong>  La complejidad ciclomática es baja, ya que la interfaz solo define métodos sin lógica compleja. La complejidad se trasladará a la implementación del repositorio.\n            </li>\n            <li>\n              <strong>Duplicación:</strong> No hay duplicación en el código mostrado. Sin embargo, es crucial evitar la duplicación en la *implementación* del repositorio.\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">Para abordar las posibles vulnerabilidades y mejorar la calidad del código (en la implementación), se recomienda lo siguiente:</p>\n          <ul>\n            <li>\n              <strong>Utilizar un ORM (Entity Framework Core):</strong> Evita la necesidad de escribir consultas SQL directamente, reduciendo el riesgo de inyección SQL.\n            </li>\n            <li>\n              <strong>Implementar validación de datos:</strong> Utilizar Data Annotations en el modelo `Categoria` y validar los datos antes de guardarlos.\n            </li>\n            <li>\n              <strong>Implementar paginación:</strong> En <code>GetCategorias()</code>, utilizar paginación para evitar la carga excesiva de datos.\n            </li>\n            <li>\n              <strong>Manejar la concurrencia:</strong> Utilizar transacciones y mecanismos de bloqueo para garantizar la consistencia de los datos en operaciones concurrentes.\n            </li>\n            <li>\n              <strong>Implementar logging:</strong> Registrar eventos importantes (errores, accesos, modificaciones) para facilitar la auditoría y el diagnóstico de problemas.\n            </li>\n            <li>\n              <strong>Escribir pruebas unitarias:</strong> Crear pruebas unitarias para verificar la correcta implementación del repositorio y detectar regresiones.\n            </li>\n            <li>\n              <strong>Considerar el patrón Repository con Unit of Work:</strong> Para asegurar que las operaciones se realizan en una única transacción y reducir el acoplamiento al contexto de datos.  La interfaz mostrada ya es el patrón Repository.  Implementar Unit of Work.\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 03:37:39', 2),
(4, 'IPeliculaRepositorio.cs', 'Detectado por GPT', '﻿using ApiPeliculas.Modelos;\r\n\r\nnamespace ApiPeliculas.Repositorio.IRepositorio\r\n{\r\n    public interface IPeliculaRepositorio\r\n    {\r\n        //V1\r\n        //ICollection<Pelicula> GetPeliculas();\r\n\r\n        //V2\r\n        ICollection<Pelicula> GetPeliculas(int pageNumber, int pageSize);\r\n        int GetTotalPeliculas();\r\n        ICollection<Pelicula> GetPeliculasEnCategoria(int catId);\r\n        IEnumerable<Pelicula> BuscarPelicula(string nombre);\r\n        Pelicula GetPelicula(int peliculaId);\r\n        bool ExistePelicula(int id);\r\n        bool ExistePelicula(string nombre);\r\n\r\n        bool CrearPelicula(Pelicula pelicula);\r\n        bool ActualizarPelicula(Pelicula pelicula);\r\n        bool BorrarPelicula(Pelicula pelicula);\r\n        bool Guardar();\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad Detectadas\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Análisis de Seguridad</h5>\n          <p class=\"card-text\">\n            El código proporcionado corresponde a una interfaz, y como tal, no\n            implementa ninguna lógica. Por lo tanto, no presenta\n            vulnerabilidades de seguridad directamente en este archivo. Las\n            vulnerabilidades aparecerán en la clase que *implementa* esta\n            interfaz. Sin embargo, podemos identificar areas donde la\n            implementación podría introducir riesgos.\n          </p>\n\n          <ul>\n            <li>\n              <b>Posible Inyección SQL (en la implementación):</b> Métodos como\n              <code>BuscarPelicula(string nombre)</code>, si la implementación usa\n              Direct SQL queries (ej: concatenación de strings para construir la\n              query), pueden ser susceptibles a inyección SQL.\n              <br>\n              <b>Línea aproximada donde puede estar el problema</b>: En la\n              *implementación* de <code>BuscarPelicula(string nombre)</code>, dentro\n              del repositorio que implemente la interfaz <code>IPeliculaRepositorio</code>\n              al generar la consulta a la base de datos.\n              <br>\n              <b>Cómo mitigarla:</b> Usar ORM (Entity Framework Core) o stored\n              procedures con parámetros. Sanitizar la entrada `nombre` es\n              insuficiente y no recomendable.\n            </li>\n            <li>\n              <b>Ataques de Denegación de Servicio (DoS) (en la implementación):</b>\n              Métodos como\n              <code>GetPeliculas(int pageNumber, int pageSize)</code> y\n              <code>BuscarPelicula(string nombre)</code>, si no se implementan\n              correctamente, pueden consumir demasiados recursos del servidor si\n              <code>pageSize</code> es muy grande o <code>nombre</code> es una búsqueda\n              muy amplia.\n              <br>\n              <b>Línea aproximada donde puede estar el problema</b>: En la\n              *implementación* de <code>GetPeliculas</code> y\n              <code>BuscarPelicula</code>.\n              <br>\n              <b>Cómo mitigarla:</b> Establecer límites razonables para\n              <code>pageSize</code>, implementar paginación eficiente y optimizar las\n              consultas de búsqueda. Considere usar `AsNoTracking()` en Entity\n              Framework Core para mejorar el rendimiento de las consultas de solo\n              lectura.\n            </li>\n            <li>\n              <b>Exposición de información sensible (en la implementación):</b> La\n              interfaz devuelve objetos <code>Pelicula</code> directamente. Es\n              crucial que la implementación asegure que solo los datos necesarios\n              se exponen y que la lógica de serialización no revele información\n              interna sensible.\n              <br>\n              <b>Línea aproximada donde puede estar el problema</b>: En el código\n              que llama a los métodos de la interfaz y serializa el resultado para\n              enviarlo al cliente.\n              <br>\n              <b>Cómo mitigarla:</b> Usar DTOs (Data Transfer Objects) para\n              transferir solo los datos necesarios. Implementar lógica de\n              autorización adecuada para asegurar que solo los usuarios autorizados\n              puedan acceder a ciertas propiedades de <code>Pelicula</code>.\n            </li>\n            <li>\n              <b>Falta de validación de entrada (en la implementación):</b> Los\n              métodos que toman IDs (<code>GetPelicula(int peliculaId)</code>,\n              <code>GetPeliculasEnCategoria(int catId)</code>, etc.) deben validar\n              que los IDs sean positivos y que existan en la base de datos antes\n              de realizar operaciones.\n              <br>\n              <b>Línea aproximada donde puede estar el problema</b>: Dentro de los\n              métodos mencionados al inicio de su implementación.\n              <br>\n              <b>Cómo mitigarla:</b> Agregar validaciones al principio de cada\n              método.  Retornar `NotFound` o `BadRequest` cuando el id es inválido.\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-dark\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Análisis de Calidad</h5>\n          <p class=\"card-text\">\n            Si bien esta es una interfaz, podemos comentar sobre las métricas de\n            calidad en relación a la implementación y cómo la interfaz afecta\n            estas métricas.\n          </p>\n\n          <ul>\n            <li>\n              <b>Acoplamiento:</b> La interfaz reduce el acoplamiento entre el\n              código que la usa y la implementación concreta del repositorio. Esto\n              facilita el testing y la sustitución de implementaciones.\n              <br>\n              <b>Cómo mejorar:</b>  Asegurarse de que la interfaz sea lo más\n              pequeña y cohesiva posible, exponiendo solo la funcionalidad\n              necesaria.\n            </li>\n            <li>\n              <b>Legibilidad:</b> La interfaz es relativamente legible. Los nombres\n              de los métodos son claros y descriptivos.\n              <br>\n              <b>Cómo mejorar:</b> Asegurarse de que los nombres de los parámetros\n              sean significativos. Considerar el uso de comentarios XML para\n              documentar la interfaz.\n            </li>\n            <li>\n              <b>Complejidad:</b> La interfaz en sí misma no introduce complejidad.\n              Sin embargo, la implementación puede ser compleja dependiendo de cómo\n              se implementen las operaciones de base de datos y la lógica de\n              negocio.\n              <br>\n              <b>Cómo mejorar:</b> Usar patrones de diseño como el Repository\n              Pattern y el Unit of Work Pattern para simplificar la implementación.\n              Considerar el uso de CQRS (Command Query Responsibility Segregation)\n              para separar las operaciones de lectura y escritura.\n            </li>\n            <li>\n              <b>Duplicación:</b> La interfaz no introduce duplicación. Sin\n              embargo, es importante evitar la duplicación en la implementación.\n              <br>\n              <b>Cómo mejorar:</b> Extraer lógica común a métodos privados o\n              clases auxiliares. Usar generics para reducir la duplicación de\n              código en métodos que operan en diferentes tipos de entidades.\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Mejoras Sugeridas</h5>\n          <p class=\"card-text\">\n            Si bien la interfaz es correcta, las recomendaciones se orientan a la\n            implementación del repositorio y al código que la utiliza.\n          </p>\n\n          <ol>\n            <li>\n              <b>Implementar validaciones robustas:</b> Validar todas las entradas\n              del usuario en la capa de la API y en la capa del repositorio.  Usar\n              Data Annotations y Fluent Validation. Retornar códigos de error HTTP\n              adecuados (BadRequest, NotFound, etc.).\n            </li>\n            <li>\n              <b>Usar un ORM (Entity Framework Core recomendado):</b> Evitar la\n              construcción manual de consultas SQL. Entity Framework Core ayuda a\n              prevenir inyecciones SQL y simplifica la interacción con la base de\n              datos.\n            </li>\n            <li>\n              <b>Implementar Paginación y Filtrado:</b> Controlar los parámetros\n              <code>pageNumber</code> y <code>pageSize</code>. Implementar\n              filtrado para las búsquedas.  Considerar usar `Skip()` y `Take()` en\n              Entity Framework Core para la paginación.\n            </li>\n            <li>\n              <b>Utilizar DTOs:</b>  Crear DTOs para transferir datos entre la capa\n              de la API y la capa del repositorio.  Esto permite controlar qué\n              datos se exponen al cliente y desacopla la API de la estructura de la\n              base de datos.\n            </li>\n            <li>\n              <b>Manejo de errores centralizado:</b> Implementar un middleware para\n              capturar excepciones no controladas y convertirlas en respuestas HTTP\n              adecuadas.  Usar logging para registrar errores.\n            </li>\n            <li>\n              <b>Implementar un sistema de autorización:</b> Controlar el acceso a\n              los recursos en función de los roles y permisos del usuario.  Usar\n              ASP.NET Core Identity o un sistema de autorización personalizado.\n            </li>\n            <li>\n              <b>Sanitización (como defensa adicional):</b>  Aunque no reemplaza el\n              uso de un ORM, considerar sanitizar entradas de texto antes de\n              usarlas en consultas (especialmente si, por alguna razón, no se puede\n              evitar el uso de SQL directo).\n            </li>\n            <li>\n              <b>Asegurar la atomicidad de las operaciones:</b> Utilizar transacciones\n              de base de datos para garantizar que las operaciones que modifican\n              datos se completen de forma atómica. Usar `TransactionScope` o las\n              transacciones integradas en Entity Framework Core.\n            </li>\n          </ol>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 03:38:05', 2),
(5, 'IUsuarioRepositorio.cs', 'Detectado por GPT', '﻿using ApiPeliculas.Modelos;\r\nusing ApiPeliculas.Modelos.Dtos;\r\n\r\nnamespace ApiPeliculas.Repositorio.IRepositorio\r\n{\r\n    public interface IUsuarioRepositorio\r\n    {\r\n        ICollection<AppUsuario> GetUsuarios();\r\n        AppUsuario GetUsuario(string usuarioId);       \r\n        bool IsUniqueUser(string usuario);\r\n        Task<UsuarioLoginRespuestaDto> Login(UsuarioLoginDto usuarioLoginDto);       \r\n        Task<UsuarioDatosDto> Registro(UsuarioRegistroDto usuarioRegistroDto);\r\n    }\r\n}\r\n', '```html\n<div class=\'container\'>\n    <div class=\'row\'>\n        <div class=\'col-md-6\'>\n            <div class=\'card border-danger\'>\n                <div class=\'card-header bg-danger text-white\'>\n                    Vulnerabilidades y Calidad del Código\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Análisis</h5>\n                    <p class=\'card-text\'>\n                        El código proporcionado es una interfaz (<code>IUsuarioRepositorio</code>) en C#.  Como tal, no contiene implementación, por lo que las vulnerabilidades de seguridad a nivel de código directo son bajas. Sin embargo, la *ausencia* de validación de entradas y manejo de excepciones en la *implementación* de esta interfaz, así como un diseño de la API que exponga datos sensibles, podrían introducir riesgos significativos.\n\n                        <br>\n                        <strong>Vulnerabilidades Potenciales (en la Implementación):</strong>\n                        <ul>\n                            <li><strong>Inyección SQL (si `usuarioId` no se sanitiza en la implementación de `GetUsuario`):</strong>\n                                Si la implementación de `GetUsuario` usa el `usuarioId` directamente en una consulta SQL sin parametrización, un atacante podría inyectar código SQL malicioso.  Imagina una implementación que haga algo como: <code>\"SELECT * FROM Usuarios WHERE Id = \'\" + usuarioId + \"\'\"</code>.  En este caso, la variable `usuarioId` podría ser algo como <code>\"1\' OR \'1\'=\'1\"</code> y dejaría expuestos todos los datos de la tabla.\n                            </li>\n                            <li><strong>Fuerza Bruta/Ataque de Diccionario (en la Implementación de `Login`):</strong>\n                                Si no hay limitación de intentos fallidos de inicio de sesión, un atacante podría intentar adivinar las contraseñas mediante fuerza bruta o un ataque de diccionario.\n                            </li>\n                            <li><strong>Exposición de Información Sensible (a través de los DTOs):</strong>\n                                Si los DTOs (`UsuarioLoginRespuestaDto`, `UsuarioDatosDto`) contienen información innecesaria y sensible (por ejemplo, el hash de la contraseña o detalles internos del sistema), podría facilitar ataques.\n                            </li>\n                            <li><strong>Falta de Validación de Entradas (en la Implementación de `Registro` y `Login`):</strong>\n                                Si no se validan correctamente los datos de entrada (por ejemplo, formato del email, longitud de la contraseña, etc.), se podrían crear usuarios con datos inválidos o explotar vulnerabilidades de desbordamiento de buffer (menos común con C# moderno, pero aún posible en casos extremos).\n                            </li>\n                            <li><strong>Falta de Manejo de Excepciones:</strong>\n                                Si las implementaciones de los métodos no manejan las excepciones correctamente (por ejemplo, al acceder a la base de datos), se podría revelar información sensible a través de mensajes de error.\n                            </li>\n                        </ul>\n\n                        <br>\n                        <strong>Métricas de Calidad del Código (de la Interfaz):</strong>\n                        <ul>\n                            <li><strong>Complejidad:</strong> Baja. La interfaz es simple y define un conjunto reducido de operaciones.</li>\n                            <li><strong>Duplicación:</strong> No aplicable directamente a una interfaz. La duplicación sería un problema en las clases que *implementan* esta interfaz.</li>\n                            <li><strong>Legibilidad:</strong> Buena. Los nombres de los métodos y parámetros son descriptivos.</li>\n                            <li><strong>Acoplamiento:</strong> El acoplamiento es bajo, ya que la interfaz solo define un contrato y no depende de implementaciones concretas.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\'col-md-6\'>\n            <div class=\'card border-success\'>\n                <div class=\'card-header bg-success text-white\'>\n                    Solución Propuesta\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Mitigación y Mejoras</h5>\n                    <p class=\'card-text\'>\n                        <strong>Mitigación de Vulnerabilidades (en la Implementación):</strong>\n                        <ul>\n                            <li><strong>Inyección SQL:</strong>  Usar siempre consultas parametrizadas o ORMs (Entity Framework Core) para evitar la inyección SQL.  Nunca concatenar cadenas directamente en una consulta.</li>\n                            <li><strong>Fuerza Bruta:</strong> Implementar mecanismos de limitación de velocidad (rate limiting) y bloqueo de cuentas después de un número determinado de intentos fallidos de inicio de sesión.  Considerar el uso de CAPTCHA.</li>\n                            <li><strong>Exposición de Información Sensible:</strong> Diseñar cuidadosamente los DTOs para que solo contengan la información necesaria para la funcionalidad requerida.  Evitar exponer datos internos o sensibles.</li>\n                            <li><strong>Validación de Entradas:</strong>  Validar *todas* las entradas del usuario en el backend (y también en el frontend para una mejor experiencia de usuario).  Utilizar anotaciones de validación en los DTOs y/o implementar lógica de validación personalizada.</li>\n                            <li><strong>Manejo de Excepciones:</strong> Implementar bloques `try-catch` para capturar excepciones y registrarlas adecuadamente.  Evitar revelar información sensible en los mensajes de error.  Utilizar logging robusto.</li>\n                            <li><strong>Autenticación y Autorización Robusta:</strong>  Implementar un sistema de autenticación y autorización robusto (por ejemplo, usando JWT y roles) para controlar el acceso a los recursos.</li>\n                        </ul>\n\n                        <br>\n                        <strong>Mejoras de Calidad del Código (Consideraciones para la Implementación):</strong>\n                        <ul>\n                            <li><strong>Single Responsibility Principle (SRP):</strong> Asegurarse de que cada clase tenga una única responsabilidad bien definida.  Separar la lógica de autenticación, autorización, validación y acceso a datos en clases separadas.</li>\n                            <li><strong>Dependency Injection (DI):</strong> Usar la inyección de dependencias para desacoplar las clases y facilitar las pruebas unitarias.</li>\n                            <li><strong>Testing:</strong> Escribir pruebas unitarias para verificar que la implementación de la interfaz funciona correctamente y que los métodos manejan correctamente los casos de borde y los errores.</li>\n                            <li><strong>Código Limpio:</strong> Seguir las convenciones de codificación de C# y escribir código legible y fácil de mantener.  Usar nombres descriptivos para variables, métodos y clases.  Escribir comentarios claros y concisos.  Evitar código duplicado.</li>\n                        </ul>\n\n                        La interfaz actual es un buen punto de partida. Las mejoras más significativas se lograrán al implementar esta interfaz de manera segura y siguiendo las mejores prácticas de desarrollo de software.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 03:38:27', 2);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(6, 'bootstrap.min.css', 'Detectado por GPT', '@charset \"UTF-8\";/*!\r\n * Bootstrap  v5.3.0 (https://getbootstrap.com/)\r\n * Copyright 2011-2023 The Bootstrap Authors\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\r\n */:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",\"Noto Sans\",\"Liberation Sans\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#adb5bd;--bs-body-color-rgb:173,181,189;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(173, 181, 189, 0.75);--bs-secondary-color-rgb:173,181,189;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(173, 181, 189, 0.5);--bs-tertiary-color-rgb:173,181,189;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:\"— \"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-body-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-body-color);--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:var(--bs-body-color);--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:var(--bs-body-color);--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#bacbe6;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#cbccce;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#bcd0c7;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#badce3;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#e6dbb9;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#dfc2c4;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#dfe0e1;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#373b3e;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23343a40\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size=\"1\"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23adb5bd\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'m6 10 3 3 6-6\'/%3e%3c/svg%3e\")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'2\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'M6 10h8\'/%3e%3c/svg%3e\")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%280, 0, 0, 0.25%29\'/%3e%3c/svg%3e\");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%2386b7fe\'/%3e%3c/svg%3e\")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%28255, 255, 255, 0.25%29\'/%3e%3c/svg%3e\")}.form-range{width:100%;height:1.5rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>:disabled~label{color:#6c757d}.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size=\"1\"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size=\"1\"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - va', '```html\n<div class=\'container\'>\n  <div class=\'card border-danger\'>\n    <div class=\'card-header\'>\n      Vulnerabilidades de Seguridad\n    </div>\n    <div class=\'card-body\'>\n\n      <h5 class=\'card-title\'>Ausencia de Sanitización/Validación de Entradas (Potencial XSS)</h5>\n      <p class=\'card-text\'>\n        <strong>Tipo:</strong> Cross-Site Scripting (XSS)<br>\n        <strong>Línea Aproximada:</strong> No aplica, es una vulnerabilidad general de diseño.<br>\n        <strong>Descripción:</strong> El código CSS no realiza operaciones directas con entrada de usuario, no es una vulnerabilidad tipica en este tipo de archivos sin embargo el contenido del mismo (si fuera posible inyectarlo) podría ser usado para alterar la visualización de la pagina de formas maliciosas, por ejemplo usando `content` en pseudo-elementos para mostrar información falsa.\n        <br>\n        <strong>Mitigación:</strong> Dado que este código es CSS, la principal mitigación reside en asegurar que este archivo (o las modificaciones al mismo) provengan de fuentes confiables y se desplieguen correctamente.  En el contexto de la aplicación que utiliza este CSS, se debe implementar una estricta validación y sanitización de cualquier dato que *influya* en el CSS, incluso indirectamente. \n        <br>\n        <strong>Métricas:</strong>\n          <ul>\n            <li><strong>Legibilidad:</strong> El código es legible dentro de los estándares CSS, pero muy extenso.</li>\n          </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning mt-3\'>\n    <div class=\'card-header\'>\n      Calidad del Código y Métricas\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Análisis de Métricas</h5>\n      <p class=\'card-text\'>\n        <strong>Complejidad:</strong> Baja complejidad ciclomática ya que es un archivo de estilos declarativo.<br>\n        <strong>Duplicación:</strong>  Potencialmente alta debido a la repetición de definiciones de variables y propiedades CSS para diferentes estados (hover, active, etc.) y breakpoints. Se podría mitigar con preprocesadores CSS (Sass, Less) para usar mixins y loops. <br>\n        <strong>Acoplamiento:</strong>  Alto acoplamiento a la estructura HTML de la aplicación. Cualquier cambio en el HTML requerirá modificaciones en el CSS.<br>\n        <strong>Legibilidad:</strong>  Relativamente baja debido a la gran extensión del archivo.  Dificulta la búsqueda y el mantenimiento. El uso de comentarios es inexistente.\n      </p>\n      <p>\n      <Strong>Mejoras:</Strong>\n        <ul>\n          <li>Uso de un preprocesador CSS para reducir la duplicación y mejorar la organización.</li>\n          <li>Modularización del CSS en archivos más pequeños y específicos.</li>\n          <li>Agregar comentarios para explicar secciones complejas o decisiones de diseño.</li>\n          <li>Aplicar un formateador de código consistente para mejorar la legibilidad.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success mt-3\'>\n    <div class=\'card-header\'>\n      Solución Propuesta\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Estrategias de Refactorización y Mitigación</h5>\n      <p class=\'card-text\'>\n        1.  <strong>Migración a un Preprocesador CSS (Sass/SCSS):</strong>\n        <ul>\n          <li>Utilizar variables para los valores repetidos (colores, tamaños, etc.).</li>\n          <li>Emplear mixins para agrupar conjuntos de propiedades reutilizables.</li>\n          <li>Organizar el código en múltiples archivos SCSS, cada uno responsable de una sección específica de la interfaz (botones, formularios, navegación, etc.).  Esto reduce la complejidad del archivo único.</li>\n          <li>Considerar el uso de funciones para cálculos dinámicos (por ejemplo, generar variaciones de color).</li>\n        </ul>\n        2.  <strong>Modularización y Atomic CSS (Opcional):</strong>\n        <ul>\n          <li>Dividir el CSS en módulos basados en componentes UI.</li>\n          <li>Investigar el uso de Atomic CSS (ej. Tailwind CSS) para estilizar directamente en el HTML, sacrificando un poco la separación pero ganando en rapidez de desarrollo y consistencia. *Este enfoque tiene trade-offs y no siempre es apropiado*.</li>\n        </ul>\n        3.  <strong>Auditoría de Dependencias y Fuentes:</strong>\n        <ul>\n          <li>Revisar la integridad del archivo CSS descargado.</li>\n          <li>Asegurarse de que las herramientas de compilación (si se usa un preprocesador) también provengan de fuentes confiables.</li>\n        </ul>\n\n        4. <strong>Validación del contenido generado:</strong>\n        <ul>\n          <li>Implementar pruebas de regresión visual automatizadas para detectar cambios inesperados en la apariencia de la interfaz.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n</div>\n```', '2025-05-19 23:23:55', 3);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(7, 'actualizar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$id = $data[\'id\'];\r\n$nombre = $data[\'nombre\'];\r\n$cantidad = $data[\'cantidad\'];\r\n$precio = $data[\'precio\'];\r\n\r\n$sql = \"UPDATE productos SET nombre=\'$nombre\', cantidad=\'$cantidad\', precio=\'$precio\' WHERE id=$id\";\r\n\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto actualizado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al actualizado producto\"]);\r\n}\r\n\r\n?>\r\n', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n\n    <div class=\'col-md-12\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n          <div class=\'card-text\'>\n            <b>Vulnerabilidad:</b> Inyección SQL\n          </div>\n          <div class=\'card-text\'>\n            <b>Línea aproximada:</b> <code>$sql = \"UPDATE productos SET nombre=\'$nombre\', cantidad=\'$cantidad\', precio=\'$precio\' WHERE id=$id\";</code>\n          </div>\n          <div class=\'card-text\'>\n            <b>Descripción:</b> El código construye una consulta SQL directamente concatenando las variables `$nombre`, `$cantidad`, `$precio` e `$id` obtenidas del input JSON.  Si estas variables contienen caracteres especiales o sentencias SQL maliciosas, pueden modificar la consulta original e incluso ejecutar comandos no autorizados en la base de datos. Esto permite a un atacante alterar datos, obtener acceso no autorizado o incluso comprometer el servidor.\n          </div>\n          <div class=\'card-text\'>\n            <b>Mitigación:</b> Utilizar consultas preparadas (prepared statements) con parámetros en lugar de concatenar directamente las variables en la consulta SQL. Esto asegura que los datos se traten como valores literales y no como parte de la sintaxis SQL, previniendo la inyección SQL.  Además, realizar validación y saneamiento de los datos recibidos antes de usarlos, aunque la consulta preparada es la principal defensa.  Asegurarse de que el valor de `id` es un entero.\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-12 mt-3\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n\n          <div class=\'card-text\'>\n            <b>Complejidad:</b> Baja.  El código es sencillo y directo.\n          </div>\n          <div class=\'card-text\'>\n            <b>Duplicación:</b> Baja.  No se observa duplicación significativa en el código proporcionado.\n          </div>\n          <div class=\'card-text\'>\n            <b>Legibilidad:</b> Moderada. El código es relativamente fácil de entender, pero podría mejorarse con comentarios y nombres de variables más descriptivos.  La falta de manejo de errores (excepciones) también reduce la legibilidad en caso de fallos.\n          </div>\n          <div class=\'card-text\'>\n            <b>Acoplamiento:</b> Alto. El código está fuertemente acoplado a la base de datos y al esquema específico de la tabla `productos`.  Cualquier cambio en la base de datos requiere modificaciones en este código. La dependencia directa del archivo `conexion.php` también aumenta el acoplamiento.\n          </div>\n          <div class=\'card-text\'>\n            <b>Mejoras en las métricas:</b>\n            <ul>\n              <li><b>Legibilidad:</b> Añadir comentarios explicando el propósito de cada sección del código. Usar nombres de variables más descriptivos (por ejemplo, `$productoId` en lugar de `$id`).  Implementar manejo de errores (try-catch) para capturar excepciones y proporcionar información de depuración útil.</li>\n              <li><b>Acoplamiento:</b> Utilizar una capa de abstracción de datos (Data Access Layer - DAL) para interactuar con la base de datos.  Esto permite cambiar la implementación de la base de datos sin afectar el código que utiliza los datos.  Inyección de dependencias para la conexión a la base de datos haría el código más testeable y menos acoplado.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-12 mt-3\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <div class=\'card-text\'>\n            Aquí se presenta una versión del código corregida que aborda la vulnerabilidad de inyección SQL y mejora la legibilidad:\n          </div>\n          <pre><code class=\'language-php\'>\n&lt;?php\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n\n$data = json_decode(file_get_contents(\'php://input\'), true);\n\n$productoId = $data[\'id\'] ?? null; // Usar operador null coalescing para valores predeterminados.\n$nombre = $data[\'nombre\'] ?? \'\';\n$cantidad = $data[\'cantidad\'] ?? 0;\n$precio = $data[\'precio\'] ?? 0.0;\n\n// Validar que el ID sea un entero\nif (!is_numeric($productoId) || intval($productoId) <= 0) {\n    http_response_code(400); // Bad Request\n    echo json_encode([\"message\" => \"ID de producto inválido.\"]);\n    exit;\n}\n\n// Utilizar consultas preparadas para prevenir la inyección SQL\n$sql = \"UPDATE productos SET nombre = ?, cantidad = ?, precio = ? WHERE id = ?\";\n$stmt = $conexion->prepare($sql);\n\nif ($stmt === false) {\n    http_response_code(500); // Internal Server Error\n    echo json_encode([\"message\" => \"Error al preparar la consulta: \" . $conexion->error]);\n    exit;\n}\n\n// \"sidi\" indica el tipo de dato de cada parámetro: string, integer, double, integer\n$stmt->bind_param(\"sidi\", $nombre, $cantidad, $precio, $productoId);\n\n\nif ($stmt->execute()) {\n    echo json_encode([\"message\" => \"Producto actualizado exitosamente\"]);\n} else {\n    http_response_code(500); // Internal Server Error\n    echo json_encode([\"message\" => \"Error al actualizar producto: \" . $stmt->error]);\n}\n\n\n$stmt->close();\n$conexion->close();\n\n?&gt;\n</code></pre>\n          <div class=\'card-text\'>\n            <b>Explicación de las mejoras:</b>\n            <ul>\n              <li><b>Consultas Preparadas:</b> Se utiliza `$conexion->prepare()` para preparar la consulta SQL. Luego, `$stmt->bind_param()` se utiliza para vincular las variables a la consulta de forma segura, evitando la inyección SQL. El string \"sidi\" indica string, integer, double, integer para cada valor respecticamente.</li>\n              <li><b>Validación de ID:</b> Se valida que el ID sea un entero positivo para prevenir errores.</li>\n              <li><b>Manejo de Errores:</b> Se agrega manejo de errores para verificar si la preparación y la ejecución de la consulta fueron exitosas.  Se utilizan códigos de estado HTTP para indicar errores al cliente.</li>\n              <li><b>Null coalescing operator:</b> Se usa el operador `??` para asignar valores por defecto en caso de que los campos no existan en el json.</li>\n              <li><b>Cierre de conexiones</b> Se cierra la conexión y el statement al finalizar el script.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n```\n', '2025-05-19 23:32:28', 4),
(8, 'eliminar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$id = $data[\'id\'];\r\n\r\n$sql = \"DELETE FROM productos where id = $id\";\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto eliminado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al eliminado producto\"]);\r\n}\r\n?>\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> 8 <code>$sql = \"DELETE FROM productos where id = $id\";</code>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> La variable <code>$id</code> se inserta directamente en la consulta SQL sin ningún tipo de sanitización o validación.  Esto permite a un atacante inyectar código SQL malicioso a través del parámetro <code>id</code> en la solicitud, lo que podría resultar en la eliminación de datos no autorizados, la manipulación de la base de datos o incluso la ejecución de comandos del sistema.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Ejemplo de ataque:</b> Un atacante podría enviar un valor <code>id</code> como <code>1 OR 1=1</code>, lo que eliminaría todos los productos de la tabla.\n                    </p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"col-md-6\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-dark\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Alto:</b> El script está fuertemente acoplado a la estructura específica de la tabla \"productos\" y a la clase de conexión utilizada. Cualquier cambio en la estructura de la tabla o en la forma en que se establece la conexión requerirá modificaciones en este script.\n                    </p>\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Mejorable:</b> El código es relativamente sencillo, pero la falta de validación de la entrada y el manejo básico de errores dificultan su comprensión y mantenimiento. La falta de comentarios también afecta la legibilidad.\n                    </p>\n                    <h5 class=\"card-title\">Manejo de Errores</h5>\n                    <p class=\"card-text\">\n                        <b>Básico:</b> El manejo de errores se limita a un mensaje genérico en caso de fallo en la consulta SQL.  No se realiza ningún tipo de registro o manejo de excepciones más sofisticado.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Mitigación de Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        Utilizar consultas preparadas (prepared statements) con enlace de parámetros (parameter binding) para evitar la inyección SQL.  Esto asegura que los datos proporcionados por el usuario se traten como datos, no como código SQL.\n                    </p>\n\n                    <h5 class=\"card-title\">Código Mejorado</h5>\n                    <p class=\"card-text\">\n                        ```php\n                        <?php\n                        include \"../../models/conexion.php\";\n\n                        $data = json_decode(file_get_contents(\'php://input\'), true);\n\n                        if (isset($data[\'id\']) && is_numeric($data[\'id\'])) { // Validar que \'id\' existe y es numérico\n                            $id = $data[\'id\'];\n\n                            // Utilizar consultas preparadas para prevenir inyección SQL\n                            $sql = \"DELETE FROM productos WHERE id = ?\";\n                            $stmt = $conexion->prepare($sql);\n\n                            if ($stmt) {\n                                $stmt->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n                                if ($stmt->execute()) {\n                                    echo json_encode([\"message\" => \"Producto eliminado exitosamente\"]);\n                                } else {\n                                    echo json_encode([\"message\" => \"Error al eliminar producto: \" . $stmt->error]);\n                                }\n                                $stmt->close();\n                            } else {\n                                echo json_encode([\"message\" => \"Error al preparar la consulta: \" . $conexion->error]);\n                            }\n                        } else {\n                            echo json_encode([\"message\" => \"ID de producto inválido\"]);\n                        }\n                        ?>\n                        ```\n                    </p>\n\n                    <h5 class=\"card-title\">Mejoras en la Calidad del Código</h5>\n                    <ul>\n                        <li><b>Validación de Entrada:</b> Se ha añadido validación para asegurar que el parámetro <code>id</code> existe y es un valor numérico.</li>\n                        <li><b>Manejo de Errores Mejorado:</b> Se proporciona información más detallada sobre los errores, incluyendo los mensajes de error de la base de datos.</li>\n                        <li><b>Desacoplamiento (Potencial):</b> Para un mayor desacoplamiento, se podría usar una clase de acceso a datos (DAO) que abstraiga las operaciones de la base de datos. Esto permitiría cambiar la implementación de la base de datos sin afectar el resto del código.</li>\n                        <li><b>Legibilidad:</b> Se han añadido comentarios para explicar el propósito de cada sección del código.</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:32:47', 4),
(9, 'guardar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$nombre = $data[\'nombre\'];\r\n$cantidad = $data[\'cantidad\'];\r\n$precio = $data[\'precio\'];\r\n\r\n$sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (\'$nombre\', \'$cantidad\', \'$precio\')\";\r\n\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto guardado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al guardar producto\"]);\r\n}\r\n\r\n?>\r\n', '```html\n<div class=\'container\'>\n    <div class=\'row\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-danger\'>\n                <div class=\'card-header bg-danger text-white\'>\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Inyección SQL</h5>\n                    <p class=\'card-text\'>\n                        <b>Tipo:</b> Inyección SQL<br>\n                        <b>Línea Aproximada:</b> 9 <code>$sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (\'$nombre\', \'$cantidad\', \'$precio\')\";</code><br>\n                        <b>Descripción:</b> La vulnerabilidad radica en la construcción de la consulta SQL directamente concatenando las variables <code>$nombre</code>, <code>$cantidad</code> y <code>$precio</code>, provenientes de la entrada del usuario (<code>$data</code>).  Si estas variables contienen caracteres especiales SQL (como comillas simples, punto y coma, etc.), un atacante podría manipular la consulta y ejecutar código SQL arbitrario en la base de datos.<br>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li><b>Usar Consultas Preparadas (Prepared Statements):</b> Esta es la solución más segura. Permite separar la estructura de la consulta SQL de los datos que se van a insertar, evitando la interpretación de los datos como código SQL.</li>\n                            <li><b>Escapado de Caracteres (Sanitización):</b> Aunque menos recomendable que las consultas preparadas, se puede usar la función <code>mysqli_real_escape_string()</code> para escapar los caracteres especiales en las variables antes de concatenarlas en la consulta. <b>Importante:</b> Esto solo es efectivo si la conexión a la base de datos se realiza con MySQLi.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'row mt-3\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-warning\'>\n                <div class=\'card-header bg-warning text-dark\'>\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Problemas de Calidad y Sugerencias de Mejora</h5>\n                    <p class=\'card-text\'>\n                        <b>Complejidad:</b> El código es relativamente simple, pero puede mejorarse añadiendo manejo de errores más robusto.\n                        <br>\n                        <b>Duplicación:</b> No hay duplicación evidente en este fragmento.\n                        <br>\n                        <b>Legibilidad:</b> El código es legible pero carece de comentarios explicando el propósito de las variables y las validaciones.\n                        <br>\n                        <b>Acoplamiento:</b> El código está acoplado a la base de datos directamente. Se podría mejorar la encapsulación creando una capa de abstracción de datos (DAO) o usando un ORM.\n                        <br>\n                        <b>Mejoras Sugeridas:</b>\n                        <ul>\n                            <li><b>Validación de Entrada:</b> Es crucial validar que los datos recibidos en <code>$data</code> existan y tengan el formato esperado antes de usarlos.  Debería comprobarse que <code>$nombre</code> es una cadena, <code>$cantidad</code> es un entero y <code>$precio</code> es un número válido.</li>\n                            <li><b>Manejo de Errores:</b> La respuesta JSON en caso de error es genérica. Se podría agregar información más detallada sobre el error (por ejemplo, el código de error SQL) para facilitar la depuración.</li>\n                            <li><b>Estandarización:</b> Asegurarse de que el formato de los datos (ej. <code>$cantidad</code> y <code>$precio</code>) es el esperado antes de enviarlos a la base de datos.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'row mt-3\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-success\'>\n                <div class=\'card-header bg-success text-white\'>\n                    Solución Propuesta\n                </div>\n                <div class=\'card-body\'>\n                    <p class=\'card-text\'>\n                        El siguiente código usa consultas preparadas para prevenir la inyección SQL y también incluye validación básica de los datos de entrada.\n                    </p>\n                    <pre><code class=\'language-php\'>\n&lt;?php\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n\n$data = json_decode(file_get_contents(\'php://input\'), true);\n\nif (!isset($data[\'nombre\']) || !isset($data[\'cantidad\']) || !isset($data[\'precio\'])) {\n    echo json_encode([\"message\" => \"Error: Faltan datos\"]);\n    exit;\n}\n\n$nombre = $data[\'nombre\'];\n$cantidad = $data[\'cantidad\'];\n$precio = $data[\'precio\'];\n\n//Validaciones de tipos de datos (ejemplo)\nif (!is_string($nombre) || !is_numeric($cantidad) || !is_numeric($precio)) {\n    echo json_encode([\"message\" => \"Error: Tipos de datos incorrectos\"]);\n    exit;\n}\n\n$sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (?, ?, ?)\";\n$stmt = $conexion->prepare($sql);\n\nif ($stmt === false) {\n  echo json_encode([\"message\" => \"Error preparando la consulta: \" . $conexion->error]);\n  exit;\n}\n\n\n$stmt->bind_param(\"sii\", $nombre, $cantidad, $precio); // s = string, i = integer\n\nif ($stmt->execute()) {\n    echo json_encode([\"message\" => \"Producto guardado exitosamente\"]);\n} else {\n    echo json_encode([\"message\" => \"Error al guardar producto: \" . $stmt->error]);\n}\n\n$stmt->close();\n$conexion->close();\n\n?&gt;\n                    </code></pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:33:07', 4),
(10, 'producto.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n$id = $_GET[\"id\"];\r\n// Realizamos la consulta a la base de datos\r\n$sql = $conexion->query(\"SELECT * FROM productos where $id\");\r\n\r\n$producto = $sql->fetch_assoc();\r\n   \r\n\r\n// Devolvemos los datos en formato JSON\r\necho json_encode($producto);\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad Detectadas\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Inyección SQL <br>\n            <b>Línea Aproximada:</b> <code>$sql = $conexion->query(\"SELECT * FROM productos where $id\");</code> <br>\n            <b>Descripción:</b> El código es vulnerable a la inyección SQL porque la variable <code>$id</code> proveniente de <code>$_GET[\"id\"]</code> se inserta directamente en la consulta SQL sin ningún tipo de saneamiento o validación. Un atacante podría manipular el valor de <code>id</code> en la URL para inyectar código SQL malicioso. Por ejemplo, si <code>id</code> se establece como <code>1 OR 1=1</code>, la consulta se convierte en <code>SELECT * FROM productos where 1 OR 1=1</code>, lo que devolvería todos los productos. Un atacante podría incluso ejecutar consultas más complejas para obtener información sensible, modificar datos o incluso ejecutar comandos en el servidor de la base de datos.\n          </p>\n          <h5 class=\"card-title\">Falta de validación de entrada</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Falta de validación de entrada <br>\n            <b>Línea Aproximada:</b> <code>$id = $_GET[\"id\"];</code> <br>\n            <b>Descripción:</b> El código no valida ni sanitiza la entrada <code>$_GET[\"id\"]</code> antes de usarla.  Esto permite que datos potencialmente peligrosos (como scripts maliciosos, código HTML o caracteres especiales) se pasen al resto de la aplicación.\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-dark\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            El código es relativamente legible debido a su simplicidad. Sin embargo, la falta de comentarios explicativos dificulta la comprensión del propósito del código y las posibles implicaciones de seguridad.\n          </p>\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            Existe un acoplamiento con la base de datos y la variable superglobal <code>$_GET</code>.  El código depende directamente de la estructura de la tabla \'productos\' y de la existencia del parámetro \'id\' en la URL.\n          </p>\n          <h5 class=\"card-title\">Complejidad</h5>\n          <p class=\"card-text\">\n            La complejidad ciclomática es baja debido a la simplicidad del código. Sin embargo, la falta de manejo de errores introduce complejidad potencial en términos de depuración y mantenimiento.\n          </p>\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            No hay duplicación evidente en este fragmento de código.\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Mitigación de Inyección SQL y Mejora de Calidad</h5>\n          <ol>\n            <li>\n              <b>Usar Consultas Preparadas (Prepared Statements):</b> Las consultas preparadas son la mejor forma de prevenir la inyección SQL.  Ellas separan la lógica de la consulta de los datos, evitando que el código malicioso se ejecute.\n              <pre><code class=\"language-php\">\n<?php\ninclude \"../../models/conexion.php\";\n\n$id = $_GET[\"id\"];\n\n// Preparar la consulta\n$stmt = $conexion->prepare(\"SELECT * FROM productos WHERE id = ?\");\n\n// Vincular el parámetro\n$stmt->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\n// Ejecutar la consulta\n$stmt->execute();\n\n// Obtener el resultado\n$result = $stmt->get_result();\n$producto = $result->fetch_assoc();\n\n// Cerrar la declaración\n$stmt->close();\n\n// Devolver los datos en formato JSON\necho json_encode($producto);\n?>\n</code></pre>\n            </li>\n            <li>\n              <b>Validar y Sanitizar la Entrada:</b> Aunque se usen consultas preparadas, es bueno validar que la entrada sea del tipo esperado (entero, string, etc.) y sanitizarla si es necesario. Por ejemplo, se puede usar <code>filter_var()</code> con <code>FILTER_SANITIZE_NUMBER_INT</code> para asegurarse de que <code>$id</code> es un entero.\n               <pre><code class=\"language-php\">\n<?php\n$id = filter_var($_GET[\"id\"], FILTER_SANITIZE_NUMBER_INT);\n\nif ($id === false || $id === null) {\n    // Manejar el error: la entrada no es un entero válido\n    echo json_encode(array(\"error\" => \"ID no válido\"));\n    exit;\n}\n?>\n                </code></pre>\n            </li>\n            <li>\n              <b>Manejo de Errores:</b> Agregar manejo de errores (try-catch) para capturar excepciones y registrarlas apropiadamente. Esto ayuda a depurar y a prevenir que errores inesperados expongan información sensible.\n            </li>\n            <li>\n              <b>Abstracción de la Base de Datos:</b>  Considerar usar una capa de abstracción de la base de datos (ORM) para simplificar las operaciones y mejorar la seguridad.\n            </li>\n            <li>\n              <b>Comentarios y Documentación:</b> Agregar comentarios para explicar el propósito del código, las medidas de seguridad implementadas y cualquier lógica compleja.\n            </li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 23:33:26', 4),
(11, 'productos.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n// Realizamos la consulta a la base de datos\r\n$sql = $conexion->query(\"SELECT * FROM productos\");\r\n\r\n$productos = array();\r\n\r\n// Recorremos el resultado de la consulta y lo agregamos al arreglo $productos\r\nwhile ($producto = $sql->fetch_assoc()) {\r\n    $productos[] = $producto;\r\n}\r\n\r\n// Devolvemos los datos en formato JSON\r\necho json_encode($productos);\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades Identificadas\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Falta de Sanitización de Datos (Riesgo Medio)</h5>\n          <p class=\"card-text\">\n            Aunque este código no recibe directamente entradas del usuario, es importante considerar el potencial riesgo si en el futuro la consulta SQL se modifica y utiliza datos proporcionados por el usuario (ej., a través de parámetros GET o POST).  Si esto ocurriera sin una adecuada sanitización, podría ser vulnerable a inyección SQL.\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Aproximada:</b> <code>$sql = $conexion->query(\"SELECT * FROM productos\");</code> (Potencialmente en futuras modificaciones).\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b> Si la consulta SQL llegara a depender de entradas del usuario, utiliza consultas preparadas (prepared statements) o procedimientos almacenados (stored procedures) para prevenir la inyección SQL.  Nunca concatenes directamente entradas del usuario en una consulta SQL.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora de Calidad:</b> Introducir una capa de abstracción de datos (Data Access Object - DAO) podría mejorar la mantenibilidad y facilitar la aplicación de la sanitización en un solo lugar.\n          </p>\n\n          <h5 class=\"card-title\">Riesgo de Exposición de Información Sensible (Riesgo Bajo)</h5>\n          <p class=\"card-text\">\n              El código actual expone la totalidad de la tabla \'productos\'. En algunos casos, esta tabla podría contener información sensible que no debería ser expuesta a todos los clientes que consumen la API.\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Aproximada:</b> <code>$sql = $conexion->query(\"SELECT * FROM productos\");</code>\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>  Limita los campos que se seleccionan en la consulta SQL a solo aquellos que son necesarios para la funcionalidad requerida.  Considera la posibilidad de usar un DTO (Data Transfer Object) para definir explícitamente qué datos se envían al cliente.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora de Calidad:</b> La creación de DTOs mejoraría la legibilidad y la mantenibilidad del código, definiendo explícitamente la estructura de los datos que se transfieren.\n          </p>\n\n           <h5 class=\"card-title\">Rutas relativas (Riesgo Medio)</h5>\n          <p class=\"card-text\">\n              Usar rutas relativas para incluir archivos es un error, esto puede hacer que el código no funcione en diferentes lugares (debido a la ruta relativa).\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Aproximada:</b> <code>include \"../../models/conexion.php\";</code>\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>  Usa rutas absolutas o constantes para referirte a los archivos.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora de Calidad:</b> La modificación a rutas absolutas aumenta la mantenibilidad y portabilidad.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6\">\n      <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Complejidad</h5>\n          <p class=\"card-text\">\n            El código es de baja complejidad.  Solo realiza una consulta SQL y la conversión a JSON.\n          </p>\n\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            No hay duplicación evidente en este fragmento de código.\n          </p>\n\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            El código es relativamente legible.  El uso de nombres descriptivos para variables (`$productos`, `$producto`) ayuda a la comprensión.  Sin embargo, la falta de comentarios podría dificultar la comprensión del propósito del código a largo plazo.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Agregar comentarios que expliquen el propósito del script y las acciones que se realizan.\n          </p>\n\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            El código está acoplado directamente a la base de datos a través del objeto `$conexion`.  Esto dificulta las pruebas unitarias y la reutilización del código.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Implementar una capa de abstracción de datos (DAO) o utilizar un ORM (Object-Relational Mapper) para reducir el acoplamiento y mejorar la flexibilidad. La inyección de dependencias de la conexión podría mejorar el diseño.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            A continuación, se presenta una versión modificada del código que incorpora las mitigaciones y mejoras de calidad mencionadas anteriormente.  Este ejemplo asume que se está utilizando un sistema de rutas absolutas o constantes para la inclusión de archivos.\n          </p>\n          <pre><code class=\"language-php\">\n&lt;?php\n\n// Definir ruta absoluta a la conexión\nrequire_once $_SERVER[\'DOCUMENT_ROOT\'] . \'/models/conexion.php\';\n\n// Simulación de una clase DTO (Data Transfer Object)\nclass ProductoDTO {\n    public $id;\n    public $nombre;\n    public $precio;\n\n    public function __construct($id, $nombre, $precio) {\n        $this->id = $id;\n        $this->nombre = $nombre;\n        $this->precio = $precio;\n    }\n}\n\n\n// Realizamos la consulta a la base de datos (limitando los campos)\n$sql = $conexion->query(\"SELECT id, nombre, precio FROM productos\");\n\n$productos = array();\n\n// Recorremos el resultado de la consulta y lo agregamos al arreglo $productos\nwhile ($row = $sql->fetch_assoc()) {\n    // Crear un objeto DTO y poblarlo con los datos de la base de datos.\n    $producto = new ProductoDTO($row[\'id\'], $row[\'nombre\'], $row[\'precio\']);\n    $productos[] = $producto;\n}\n\n// Devolvemos los datos en formato JSON\nheader(\'Content-Type: application/json\'); // Establecer el header para indicar que la respuesta es JSON\necho json_encode($productos);\n?&gt;\n</code></pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 23:33:48', 4),
(12, 'eliminar.php', 'Detectado por GPT', '<?php\r\n    if (!empty($_GET[\"id\"])) {\r\n        # code...\r\n        $id = $_GET[\"id\"];\r\n\r\n        $sql = $conexion->query(\"DELETE FROM PERSONAS WHERE ID = $id\");\r\n        if ($sql == 1) {\r\n            # code...\r\n            echo \'<div class=\"alert alert-warning\" role=\"alert\">\r\n            Persona no eliminada correctamente.\r\n          </div>\';\r\n        }else{\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n            Persona no eliminada correctamente.\r\n          </div>\';\r\n        }\r\n    }\r\n?>', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades Encontradas\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <strong>Tipo:</strong> Inyección SQL (SQL Injection)<br>\n                        <strong>Línea Aproximada:</strong> <code>$sql = $conexion->query(\"DELETE FROM PERSONAS WHERE ID = $id\");</code><br>\n                        <strong>Descripción:</strong> La variable <code>$id</code>, obtenida directamente de <code>$_GET[\"id\"]</code>, se inserta directamente en la consulta SQL sin sanitización ni validación.  Un atacante puede manipular este parámetro para inyectar código SQL malicioso.  Por ejemplo, si <code>id</code> fuera <code>1 OR 1=1</code>, la consulta resultante sería <code>DELETE FROM PERSONAS WHERE ID = 1 OR 1=1</code>, eliminando potencialmente todos los registros de la tabla `PERSONAS`.<br>\n                        <strong>Riesgo:</strong> Alta - Posibilidad de modificar o eliminar datos de la base de datos sin autorización.\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-md-6\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Análisis de Calidad</h5>\n                    <p class=\"card-text\">\n                        <strong>Legibilidad:</strong> Aceptable, pero las respuestas de error no son consistentes.<br>\n                        <strong>Seguridad:</strong> Baja, debido a la vulnerabilidad de inyección SQL.<br>\n                        <strong>Mantenibilidad:</strong> Moderada. La lógica es sencilla, pero la falta de manejo de errores y la vulnerabilidad dificultan el mantenimiento.<br>\n                        <strong>Duplicación:</strong> Se observa duplicación en los mensajes de alerta, aunque sean para diferentes escenarios.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-success\">\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Mitigación de la Inyección SQL y Mejora de la Calidad</h5>\n                    <ol>\n                        <li>\n                            <strong>Sanitización/Validación de Datos:</strong> Utilizar sentencias preparadas (prepared statements) con parámetros en lugar de concatenar directamente la entrada del usuario en la consulta SQL.  Las sentencias preparadas ayudan a prevenir la inyección SQL al tratar los datos como parámetros, no como parte del código SQL.  Además, es necesario validar que el `$id` sea un número entero.\n                        </li>\n                        <li>\n                            <strong>Manejo de Errores:</strong> Verificar adecuadamente si la consulta SQL se ejecutó correctamente y proporcionar mensajes de error más informativos.  Es importante no exponer información sensible en los mensajes de error en un entorno de producción.\n                        </li>\n                        <li>\n                            <strong>Mensajes Consistentes:</strong> Asegurarse de que los mensajes de alerta reflejen con precisión el resultado de la operación.  Actualmente, ambos mensajes indican \"Persona no eliminada correctamente\".\n                        </li>\n                        <li>\n                            <strong>Evitar duplicación:</strong> En lugar de duplicar el código del mensaje de error, se puede guardar la variable de error en una variable y usarla en un solo bloque de código.\n                        </li>\n                    </ol>\n                    <h6 class=\"mt-3\">Código Refactorizado (Ejemplo)</h6>\n                    <pre><code>\n&lt;?php\n    if (!empty($_GET[\"id\"])) {\n        $id = $_GET[\"id\"];\n\n        // Validar que $id sea un entero\n        if (!is_numeric($id)) {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">ID inválido.&lt;/div>\';\n            exit; // Detener la ejecución si el ID no es válido\n        }\n\n        // Utilizar sentencias preparadas para prevenir la inyección SQL\n        $stmt = $conexion->prepare(\"DELETE FROM PERSONAS WHERE ID = ?\");\n        $stmt->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\n        if ($stmt->execute()) {\n            if ($stmt->affected_rows > 0) {\n                echo \'&lt;div class=\"alert alert-success\" role=\"alert\">Persona eliminada correctamente.&lt;/div>\';\n            } else {\n                echo \'&lt;div class=\"alert alert-warning\" role=\"alert\">No se encontró la persona con el ID especificado.&lt;/div>\';\n            }\n        } else {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error al eliminar la persona: \' . $conexion->error . \'&lt;/div>\';\n        }\n\n        $stmt->close();\n    }\n?&gt;\n</code></pre>\n                    <p class=\"mt-3\">Este código refactorizado utiliza sentencias preparadas, valida la entrada, proporciona mensajes de error más informativos y consistentes, y evita la concatenación directa de variables en la consulta SQL.</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:34:08', 4);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(13, 'modificar.php', 'Detectado por GPT', '<?php\r\nif (!empty($_POST[\"btnactualizar\"])) {\r\n    if (\r\n        !empty($_POST[\"id\"]) &&\r\n        !empty($_POST[\"nombre\"]) &&\r\n        !empty($_POST[\"apellido\"]) &&\r\n        !empty($_POST[\"dni\"]) &&\r\n\r\n        !empty($_POST[\"email\"])\r\n    ) {\r\n        // Captura de los valores\r\n        $nombre = $_POST[\"nombre\"];\r\n        $apellido = $_POST[\"apellido\"];\r\n        $dni = $_POST[\"dni\"];\r\n\r\n        $email = $_POST[\"email\"];\r\n\r\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\r\n        $stmt = $conexion->prepare(\"UPDATE PERSONAS \r\n        SET \r\n        nombre = ?,\r\n        apellido = ?,\r\n        cedula = ?,\r\n        fecha_nacimiento = NOW(),\r\n        correo = ?\r\n        WHERE id = ?\");\r\n\r\n        // Vinculamos los parámetros\r\n        $stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $email, $id);\r\n\r\n        // Ejecutamos la consulta\r\n        if ($stmt->execute()) {\r\n            // Almacenamos el mensaje en la sesión\r\n            session_start();\r\n            $_SESSION[\'mensaje\'] = \'Persona Actualizada correctamente.\';\r\n\r\n            // Redirigimos al index.php\r\n            header(\"Location: index.php\");\r\n            exit;  // Es importante llamar a exit después de la redirección\r\n        } else {\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n            Persona no Actualizada correctamente.\r\n          </div>\';\r\n        }\r\n\r\n        // Cerramos el statement\r\n        $stmt->close();\r\n    } else {\r\n        echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                Alguno de los campos está vacío.\r\n              </div>\';\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Análisis de Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Vulnerabilidad: Inyección SQL</h5>\n          <p class=\"card-text\">\n            <strong>Descripción:</strong> Aunque el código usa sentencias preparadas, existe una vulnerabilidad de inyección SQL\n            en la forma en que se vinculan los parámetros. La variable `$id` no se está definiendo correctamente y toma cualquier valor,\n             permitiendo la manipulación del `WHERE id = ?` en la consulta SQL.\n          </p>\n          <p class=\"card-text\">\n            <strong>Línea aproximada:</strong>\n            <pre><code>$stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $email, $id);</code></pre>\n          </p>\n          <p class=\"card-text\">\n            <strong>Explicación:</strong> La variable `$id` debe obtenerse del `$_POST` o de alguna otra fuente confiable,\n            y no simplemente quedar sin definir. Un atacante podría manipular otros datos enviados por POST, para modificar registros indebidamente.\n          </p>\n          <p class=\"card-text\">\n            <strong>Mitigación:</strong>\n            <ol>\n              <li>Asegurarse de obtener el valor de `$id` desde `$_POST[\"id\"]`.</li>\n              <li>Validar que `$id` sea un entero antes de usarlo en la consulta.</li>\n            </ol>\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Análisis de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Métricas de Calidad</h5>\n          <ul>\n            <li>\n              <strong>Complejidad:</strong> El código es relativamente simple, con una complejidad baja. Sin embargo, se puede mejorar dividiendo la validación en funciones separadas.\n            </li>\n            <li>\n              <strong>Duplicación:</strong> Existe cierta duplicación en el manejo de errores (mostrar mensajes de alerta). Se puede centralizar esto en una función.\n            </li>\n            <li>\n              <strong>Legibilidad:</strong> El código es legible, pero se puede mejorar agregando comentarios más descriptivos y utilizando nombres de variables más explícitos.\n            </li>\n            <li>\n              <strong>Acoplamiento:</strong> El código está acoplado a las variables `$_POST` directamente. Sería mejor extraer los datos en variables locales antes de usarlos.\n            </li>\n          </ul>\n          <p class=\"card-text\">\n            <strong>Mejoras Sugeridas:</strong>\n            <ul>\n              <li>Crear funciones para la validación de los datos y el manejo de errores.</li>\n              <li>Usar nombres de variables más descriptivos.</li>\n              <li>Extraer los datos de `$_POST` en variables locales.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            El siguiente fragmento de código aborda las vulnerabilidades y las mejoras de calidad del código.\n          </p>\n          <pre><code class=\"language-php\">\n&lt;?php\nif (!empty($_POST[\"btnactualizar\"])) {\n    if (\n        !empty($_POST[\"id\"]) &&\n        !empty($_POST[\"nombre\"]) &&\n        !empty($_POST[\"apellido\"]) &&\n        !empty($_POST[\"dni\"]) &&\n        !empty($_POST[\"email\"])\n    ) {\n        // Captura y validación de los valores\n        $id = filter_var($_POST[\"id\"], FILTER_VALIDATE_INT);\n        $nombre = $_POST[\"nombre\"];\n        $apellido = $_POST[\"apellido\"];\n        $dni = $_POST[\"dni\"];\n        $email = $_POST[\"email\"];\n\n        // Validamos que el ID sea un entero válido\n        if ($id === false) {\n            mostrar_error(\"ID inválido.\"); // Llamamos a la funcion mostrar_error\n            exit;\n        }\n\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\n        $stmt = $conexion->prepare(\"UPDATE PERSONAS\n            SET\n            nombre = ?,\n            apellido = ?,\n            cedula = ?,\n            fecha_nacimiento = NOW(),\n            correo = ?\n            WHERE id = ?\");\n\n        // Vinculamos los parámetros\n        $stmt->bind_param(\"ssssi\", $nombre, $apellido, $dni, $email, $id);\n\n        // Ejecutamos la consulta\n        if ($stmt->execute()) {\n            // Almacenamos el mensaje en la sesión\n            session_start();\n            $_SESSION[\'mensaje\'] = \'Persona Actualizada correctamente.\';\n\n            // Redirigimos al index.php\n            header(\"Location: index.php\");\n            exit;  // Es importante llamar a exit después de la redirección\n        } else {\n            mostrar_error(\"Persona no Actualizada correctamente.\"); //Llamamos a la funcion mostrar_error\n        }\n\n        // Cerramos el statement\n        $stmt->close();\n    } else {\n        mostrar_error(\"Alguno de los campos está vacío.\"); //Llamamos a la funcion mostrar_error\n    }\n}\n\n/**\n * Función para mostrar mensajes de error.\n * @param string $mensaje Mensaje de error a mostrar.\n */\nfunction mostrar_error(string $mensaje): void {\n    echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">\' . htmlspecialchars($mensaje) . \'&lt;/div>\';\n}\n?&gt;\n          </code></pre>\n          <p class=\"card-text\">\n            <strong>Cambios Realizados:</strong>\n            <ul>\n              <li>Se agrega validación para el `id`, asegurándose de que sea un entero válido.</li>\n              <li>Se modifica el `bind_param` para que coincida con el tipo de dato del ID (entero - `i`).</li>\n              <li>Se encapsula el manejo de errores en una función `mostrar_error` para evitar duplicación de código.</li>\n              <li>Se utiliza `htmlspecialchars` para evitar XSS al mostrar los mensajes de error.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 23:34:28', 4),
(14, 'registro.php', 'Detectado por GPT', '<?php\r\nif (!empty($_POST[\"btnregistrar\"])) {\r\n    if (\r\n        !empty($_POST[\"nombre\"]) &&\r\n        !empty($_POST[\"apellido\"]) &&\r\n        !empty($_POST[\"dni\"]) &&\r\n        !empty($_POST[\"fecha\"]) &&\r\n        !empty($_POST[\"email\"])\r\n    ) {\r\n        // Captura de los valores\r\n        $nombre = $_POST[\"nombre\"];\r\n        $apellido = $_POST[\"apellido\"];\r\n        $dni = $_POST[\"dni\"];\r\n        $fecha = $_POST[\"fecha\"];\r\n        $email = $_POST[\"email\"];\r\n\r\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\r\n        $stmt = $conexion->prepare(\"INSERT INTO PERSONAS (nombre, apellido, cedula, fecha_nacimiento, correo) \r\n                                    VALUES (?, ?, ?, ?, ?)\");\r\n        \r\n        // Vinculamos los parámetros\r\n        $stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $fecha, $email);\r\n        \r\n        // Ejecutamos la consulta\r\n        if ($stmt->execute()) {\r\n            echo \'<div class=\"alert alert-success\" role=\"alert\">\r\n                    Persona registrada correctamente.\r\n                  </div>\';\r\n        } else {\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                    Persona no registrada correctamente.\r\n                  </div>\';\r\n        }\r\n\r\n        // Cerramos el statement\r\n        $stmt->close();\r\n    } else {\r\n        echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                Alguno de los campos está vacío.\r\n              </div>\';\r\n    }\r\n}\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n\n    <div class=\"col-md-12\">\n      <div class=\"card\">\n        <div class=\"card-header bg-danger text-white\">\n          Análisis de Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n\n          <div class=\"card border-danger mb-3\">\n            <div class=\"card-header\">Vulnerabilidad 1: Inyección SQL (Mitigada, pero con precaución)</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Descripción</h5>\n              <p class=\"card-text\">Aunque el código usa consultas preparadas, la efectividad de estas depende crucialmente de cómo se establece la conexión `$conexion`. Si la conexión no está configurada correctamente (e.g., no escapa caracteres especiales antes de la consulta preparada),  podría haber vulnerabilidades.</p>\n              <p class=\"card-text\"><b>Línea Aproximada:</b> 15 (<code>$stmt = $conexion->prepare(...)</code>)</p>\n              <p class=\"card-text\"><b>Mitigación:</b> Asegurarse de que la conexión `$conexion` está configurada para usar consultas preparadas nativas del driver de la base de datos y que escapa correctamente las entradas.  Verificar la configuración de `PDO::ATTR_EMULATE_PREPARES` si se está usando PDO.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Revisar y documentar la configuración de la conexión a la base de datos para garantizar que las consultas preparadas se ejecuten correctamente y no se emulen.</p>\n            </div>\n          </div>\n\n          <div class=\"card border-warning mb-3\">\n            <div class=\"card-header\">Vulnerabilidad 2: Cross-Site Scripting (XSS)</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Descripción</h5>\n              <p class=\"card-text\">Si los valores de `$_POST[\"nombre\"]`, `$_POST[\"apellido\"]`, `$_POST[\"dni\"]`, `$_POST[\"fecha\"]`, y `$_POST[\"email\"]`  se muestran en otro lugar de la aplicación (por ejemplo, en un mensaje de confirmación o en un perfil de usuario) sin ser escapados, podrían ser utilizados para inyectar código JavaScript malicioso.</p>\n              <p class=\"card-text\"><b>Línea Aproximada:</b> 27 (<code>echo \'<div class=\"alert alert-success\"...\'</code>) y 31 (<code>echo \'<div class=\"alert alert-danger\"...\'</code>)</p>\n              <p class=\"card-text\"><b>Mitigación:</b> Escapar todos los datos que provienen del usuario antes de mostrarlos en la página web.  Utilizar funciones como `htmlspecialchars()` en PHP para escapar caracteres especiales HTML.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Implementar un sistema de escaping consistente en toda la aplicación.</p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12\">\n      <div class=\"card\">\n        <div class=\"card-header bg-info text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n\n          <div class=\"card border-secondary mb-3\">\n            <div class=\"card-header\">Complejidad</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Análisis</h5>\n              <p class=\"card-text\">La complejidad ciclomática es baja. El código es relativamente simple y fácil de entender.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Para códigos más complejos, considerar la refactorización en funciones más pequeñas y modulares para reducir la complejidad individual.</p>\n            </div>\n          </div>\n\n          <div class=\"card border-secondary mb-3\">\n            <div class=\"card-header\">Duplicación</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Análisis</h5>\n              <p class=\"card-text\">Existe una ligera duplicación en los bloques `echo` para mensajes de éxito y error.  Estos bloques podrían ser refactorizados en una función reutilizable.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Crear una función que reciba el tipo de mensaje y el texto, y que genere el HTML del `alert` de Bootstrap.  Esto reduce la duplicación y facilita el mantenimiento.</p>\n            </div>\n          </div>\n\n          <div class=\"card border-secondary mb-3\">\n            <div class=\"card-header\">Legibilidad</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Análisis</h5>\n              <p class=\"card-text\">El código es bastante legible. El uso de nombres de variables descriptivos y comentarios ayuda a entender su funcionamiento.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Mantener la consistencia en el estilo de codificación y agregar más comentarios explicativos donde sea necesario.</p>\n            </div>\n          </div>\n\n          <div class=\"card border-secondary mb-3\">\n            <div class=\"card-header\">Acoplamiento</div>\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">Análisis</h5>\n              <p class=\"card-text\">El código está acoplado a las variables `$_POST` y a la conexión `$conexion`. Un mayor desacoplamiento permitiría una mayor flexibilidad y testabilidad.</p>\n              <p class=\"card-text\"><b>Mejora:</b> Considerar el uso de un patrón de diseño como el patrón Repository o el patrón MVC para separar la lógica de acceso a datos y la lógica de presentación de la lógica de negocio.</p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta (Código Refactorizado)\n        </div>\n        <div class=\"card-body\">\n          <pre><code>\n&lt;?php\n\n// Función para mostrar mensajes de alerta\nfunction mostrarAlerta($tipo, $mensaje) {\n    echo \'&lt;div class=\"alert alert-\' . htmlspecialchars($tipo) . \'\" role=\"alert\">\' . \n           htmlspecialchars($mensaje) .\n         \'&lt;/div>\';\n}\n\nif (!empty($_POST[\"btnregistrar\"])) {\n    if (\n        !empty($_POST[\"nombre\"]) &&\n        !empty($_POST[\"apellido\"]) &&\n        !empty($_POST[\"dni\"]) &&\n        !empty($_POST[\"fecha\"]) &&\n        !empty($_POST[\"email\"])\n    ) {\n        // Captura de los valores\n        $nombre = $_POST[\"nombre\"];\n        $apellido = $_POST[\"apellido\"];\n        $dni = $_POST[\"dni\"];\n        $fecha = $_POST[\"fecha\"];\n        $email = $_POST[\"email\"];\n\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\n        $stmt = $conexion->prepare(\"INSERT INTO PERSONAS (nombre, apellido, cedula, fecha_nacimiento, correo) \n                                    VALUES (?, ?, ?, ?, ?)\");\n        \n        // Vinculamos los parámetros\n        $stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $fecha, $email);\n        \n        // Ejecutamos la consulta\n        if ($stmt->execute()) {\n            mostrarAlerta(\"success\", \"Persona registrada correctamente.\");\n        } else {\n            mostrarAlerta(\"danger\", \"Persona no registrada correctamente.\");\n        }\n\n        // Cerramos el statement\n        $stmt->close();\n    } else {\n        mostrarAlerta(\"danger\", \"Alguno de los campos está vacío.\");\n    }\n}\n?&gt;\n          </code></pre>\n          <p class=\"card-text\"><b>Mejoras:</b></p>\n          <ul>\n            <li>Se ha introducido la función `mostrarAlerta()` para reducir la duplicación del código HTML.  Se aplica `htmlspecialchars()` para prevenir XSS al mostrar el tipo de alerta y el mensaje.</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n```\n', '2025-05-19 23:34:52', 4),
(15, 'transaccion.php', 'Detectado por GPT', '<?php\r\n\r\nif (!empty($_POST[\"btntransaccion\"])) {\r\n\r\n    if (!empty($_POST[\"producto_id\"]) && !empty($_POST[\"cantidad\"]) && !empty($_POST[\"precio\"])) {\r\n        # code...\r\n        $producto_id = $_POST[\"producto_id\"];\r\n        $cantidad_vendida = $_POST[\"cantidad\"];\r\n        $precio = $_POST[\"precio\"];\r\n\r\n        //Siempre al iniciar la transaccion\r\n        $conexion->begin_transaction();\r\n        try {\r\n            // 1. Verificar si hay suficiente inventario\r\n            $sql = $conexion->prepare(\"SELECT cantidad FROM productos WHERE id = ?\");\r\n            $sql->bind_param(\"i\", $producto_id);\r\n            $sql->execute();\r\n            $resultado = $sql->get_result();\r\n            $producto = $resultado->fetch_assoc();\r\n\r\n            if ($producto[\'cantidad\'] < $cantidad_vendida) {\r\n                # code...\r\n                echo \"No se puede vender no hay productos en stock\";\r\n            }elseif ($producto === null) {\r\n                throw new Exception(\"Producto no encontrado en el inventario.\");\r\n            }\r\n\r\n            // 2. Actualizar el inventario\r\n            $nueva_cantidad = $producto[\"cantidad\"] - $cantidad_vendida;\r\n            $sql_update = $conexion->prepare(\"UPDATE productos SET cantidad = ? WHERE id = ?\");\r\n            $sql_update->bind_param(\"ii\", $nueva_cantidad, $producto_id);\r\n            $sql_update->execute();\r\n\r\n            // 3. Registrar la venta en la tabla ventas\r\n            $sql_venta = $conexion->prepare(\"INSERT INTO ventas (producto_id, cantidad, precio)VALUES (?, ?, ?)\");\r\n            $sql_venta->bind_param(\"sss\", $producto_id, $nueva_cantidad, $precio);\r\n            $sql_venta->execute();\r\n\r\n            // Si todo ha ido bien, confirmamos la transacción\r\n            $conexion->commit();\r\n\r\n            // Mensaje de éxito\r\n            echo \'<div class=\"alert alert-success\" role=\"alert\">\r\n                Venta registrada correctamente y inventario actualizado.\r\n              </div>\';\r\n            //code...\r\n        } catch (Exception $e) {\r\n            // Si ocurre un error, deshacemos todos los cambios\r\n            $conexion->rollback();\r\n    \r\n            // Mostramos el error\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                    Error: \' . $e->getMessage() . \'\r\n                  </div>\';\r\n        }\r\n    }\r\n}\r\n', '```html\n<div class=\'card border-danger\'>\n  <div class=\'card-header bg-danger text-white\'>\n    Vulnerabilidades de Seguridad\n  </div>\n  <div class=\'card-body\'>\n    <h5 class=\'card-title\'>Inyección SQL</h5>\n    <p class=\'card-text\'>\n      <b>Línea Aproximada:</b> 30\n    </p>\n    <p class=\'card-text\'>\n      <b>Descripción:</b> La vulnerabilidad reside en la línea:\n      <code>$sql_venta->bind_param(\"sss\", $producto_id, $nueva_cantidad, $precio);</code>.  Se están utilizando \"sss\" (strings) para vincular los parámetros <code>$producto_id</code> y <code>$nueva_cantidad</code>, que deberían ser enteros.  Esto *podría* permitir a un atacante inyectar SQL si <code>$producto_id</code> o <code>$nueva_cantidad</code> contienen caracteres especiales o código SQL malicioso, aunque la probabilidad es baja dado que se está utilizando prepared statements. El mayor riesgo está en <code>$precio</code> que deberia ser un valor decimal/numerico pero se trata como string.\n    </p>\n    <p class=\'card-text\'>\n      <b>Mitigación:</b> Utilizar el tipo de datos correcto en <code>bind_param</code>.  Debería ser \"iis\" (integer, integer, string), asumiendo que <code>producto_id</code> y <code>cantidad</code> son enteros y <code>precio</code> es un string (lo cual es incorrecto y se arreglará en la siguiente tarjeta).\n    </p>\n    <p class=\'card-text\'>\n      <b>Ejemplo de Corrección:</b> <code>$sql_venta->bind_param(\"iis\", $producto_id, $nueva_cantidad, $precio);</code>\n    </p>\n  </div>\n</div>\n\n<div class=\'card border-warning\'>\n  <div class=\'card-header bg-warning text-dark\'>\n    Métricas de Calidad del Código & Posibles Mejoras\n  </div>\n  <div class=\'card-body\'>\n    <h5 class=\'card-title\'>Tipo de Datos Incorrecto y Manejo de Precio</h5>\n    <p class=\'card-text\'>\n      <b>Línea Aproximada:</b> 18, 30\n    </p>\n    <p class=\'card-text\'>\n      <b>Descripción:</b> El código trata el precio como una cadena (string). Esto es problemático porque las operaciones matemáticas (aunque no se realizan directamente aquí) y la integridad de los datos requieren que el precio sea un tipo de datos numérico (decimal o float).  Además, se usa el tipo \'string\' para precio en la inserción de datos, lo que podría causar problemas con el almacenamiento y la manipulación posterior.\n    </p>\n    <p class=\'card-text\'>\n      <b>Mejora:</b>\n        <ul>\n            <li><b>Validación:</b> Validar que <code>$_POST[\"precio\"]</code> sea un valor numérico antes de usarlo.  Se puede usar <code>is_numeric()</code> o expresiones regulares.</li>\n            <li><b>Conversión de Tipo:</b> Convertir <code>$_POST[\"precio\"]</code> a un tipo de dato numérico (float o decimal) usando <code>floatval()</code> o <code>number_format()</code> (para formatear con el número adecuado de decimales).</li>\n            <li><b>Tipo de Dato Correcto en Base de Datos:</b>  Asegurarse de que el campo \'precio\' en la tabla \'ventas\' sea de tipo DECIMAL o FLOAT en la base de datos.</li>\n             <li><b>bind_param:</b> Utilizar \'d\' (double) en <code>bind_param</code> para precio.</li>\n        </ul>\n    </p>\n    <p class=\'card-text\'>\n      <b>Ejemplo de Corrección:</b>\n      Antes de usar el precio:\n      <code>$precio = floatval($_POST[\"precio\"]);</code>\n      Y en el bind_param:\n      <code>$sql_venta->bind_param(\"iid\", $producto_id, $nueva_cantidad, $precio);</code>\n    </p>\n  </div>\n</div>\n\n<div class=\'card border-info\'>\n  <div class=\'card-header bg-info text-white\'>\n    Métricas de Calidad del Código & Posibles Mejoras\n  </div>\n  <div class=\'card-body\'>\n    <h5 class=\'card-title\'>Manejo de Errores Mejorado</h5>\n    <p class=\'card-text\'>\n      <b>Descripción:</b> El código actual muestra mensajes de error genéricos al usuario.  Para una mejor experiencia y depuración, se puede mejorar el manejo de errores.\n    </p>\n    <p class=\'card-text\'>\n      <b>Mejora:</b>\n        <ul>\n            <li><b>Logging:</b> Registrar los errores en un archivo de registro (log) para análisis posterior.  Incluir detalles como la fecha, hora, el mensaje de error y el usuario que realizó la acción.</li>\n            <li><b>Mensajes de Error Específicos:</b>  Proporcionar mensajes de error más específicos al usuario, sin revelar información sensible sobre la estructura de la base de datos o el código.  Por ejemplo, en lugar de \"Error: ...\", mostrar \"No se pudo completar la venta.  Por favor, inténtelo de nuevo más tarde.\"</li>\n            <li><b>Transacciones Anidadas:</b>  En sistemas más complejos, considerar el uso de transacciones anidadas o puntos de guardado (savepoints) para manejar errores de forma más granular.</li>\n        </ul>\n    </p>\n  </div>\n</div>\n\n<div class=\'card border-secondary\'>\n  <div class=\'card-header bg-secondary text-white\'>\n    Métricas de Calidad del Código & Posibles Mejoras\n  </div>\n  <div class=\'card-body\'>\n    <h5 class=\'card-title\'>Validación de Datos</h5>\n    <p class=\'card-text\'>\n      <b>Descripción:</b> El código valida si los campos del formulario están vacíos, pero no realiza una validación exhaustiva de los datos.\n    </p>\n    <p class=\'card-text\'>\n      <b>Mejora:</b>\n        <ul>\n            <li><b>Validar Tipos:</b> Asegurarse de que <code>producto_id</code>, <code>cantidad</code> y <code>precio</code> sean del tipo esperado (entero y numérico, respectivamente).</li>\n            <li><b>Validar Rangos:</b>  Verificar que <code>cantidad</code> y <code>precio</code> sean valores positivos.  Verificar que <code>producto_id</code> exista realmente en la tabla <code>productos</code> (además de la validación de inventario existente).</li>\n            <li><b>Sanitización:</b>  Sanitizar los datos de entrada para prevenir ataques de inyección XSS (aunque este código no muestra directamente la entrada del usuario, es una buena práctica general).  Usar funciones como <code>htmlspecialchars()</code> o <code>strip_tags()</code>.</li>\n        </ul>\n    </p>\n  </div>\n</div>\n\n<div class=\'card border-success\'>\n  <div class=\'card-header bg-success text-white\'>\n    Solución Propuesta (Código Refactorizado - Ejemplo)\n  </div>\n  <div class=\'card-body\'>\n    <p class=\'card-text\'>\n      Este es un ejemplo de código refactorizado que aborda las vulnerabilidades y mejoras mencionadas.  Es importante adaptar este código a tu contexto específico y realizar pruebas exhaustivas.\n    </p>\n    <pre>\n      <code class=\"language-php\">\n&lt;?php\n\nif (!empty($_POST[\"btntransaccion\"])) {\n\n    if (!empty($_POST[\"producto_id\"]) && !empty($_POST[\"cantidad\"]) && !empty($_POST[\"precio\"])) {\n        $producto_id = filter_var($_POST[\"producto_id\"], FILTER_VALIDATE_INT);\n        $cantidad_vendida = filter_var($_POST[\"cantidad\"], FILTER_VALIDATE_INT);\n        $precio = filter_var($_POST[\"precio\"], FILTER_VALIDATE_FLOAT);\n\n        if ($producto_id === false || $cantidad_vendida === false || $precio === false) {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">\n                      Error: Datos de entrada inválidos.\n                  &lt;/div>\';\n            exit; // Detener la ejecución si los datos no son válidos\n        }\n\n        //Siempre al iniciar la transaccion\n        $conexion->begin_transaction();\n        try {\n            // 1. Verificar si hay suficiente inventario\n            $sql = $conexion->prepare(\"SELECT cantidad FROM productos WHERE id = ?\");\n            $sql->bind_param(\"i\", $producto_id);\n            $sql->execute();\n            $resultado = $sql->get_result();\n            $producto = $resultado->fetch_assoc();\n\n            if ($producto === null) {\n                throw new Exception(\"Producto no encontrado en el inventario.\");\n            }\n\n            if ($producto[\'cantidad\'] < $cantidad_vendida) {\n                echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">\n                          No se puede vender: no hay suficiente stock.\n                      &lt;/div>\';\n                throw new Exception(\"Stock insuficiente.\"); // Lanzar excepción para rollback\n            }\n\n            // 2. Actualizar el inventario\n            $nueva_cantidad = $producto[\"cantidad\"] - $cantidad_vendida;\n            $sql_update = $conexion->prepare(\"UPDATE productos SET cantidad = ? WHERE id = ?\");\n            $sql_update->bind_param(\"ii\", $nueva_cantidad, $producto_id);\n            $sql_update->execute();\n\n            // 3. Registrar la venta en la tabla ventas\n            $sql_venta = $conexion->prepare(\"INSERT INTO ventas (producto_id, cantidad, precio)VALUES (?, ?, ?)\");\n            $sql_venta->bind_param(\"iid\", $producto_id, $cantidad_vendida, $precio);\n\n            $sql_venta->execute();\n\n            // Si todo ha ido bien, confirmamos la transacción\n            $conexion->commit();\n\n            // Mensaje de éxito\n            echo \'&lt;div class=\"alert alert-success\" role=\"alert\">\n                Venta registrada correctamente y inventario actualizado.\n              &lt;/div>\';\n\n        } catch (Exception $e) {\n            // Si ocurre un error, deshacemos todos los cambios\n            $conexion->rollback();\n\n            // Log the error\n            error_log(\"Error en la transacción de venta: \" . $e->getMessage());\n\n            // Mostramos un mensaje de error genérico al usuario\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">\n                    Ocurrió un error al procesar la venta. Por favor, inténtelo de nuevo más tarde.\n                  &lt;/div>\';\n        }\n    }\n}\n?&gt;\n      </code>\n    </pre>\n  </div>\n</div>\n```\n', '2025-05-19 23:35:19', 4),
(16, 'ecommerce.js', 'Detectado por GPT', '// Esta es la función que se encarga de cargar los productos en la tabla\r\nfunction cargarProductos() {\r\n    // Se hace una petición (fetch) a un archivo PHP que devuelve los productos en formato JSON\r\n    fetch(\'controller/Ecommerce/productos.php\')\r\n        // Cuando la respuesta se recibe, se convierte en formato JSON para poder trabajar con ella\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            // Buscamos el cuerpo de la tabla (donde se mostrarán los productos) por su id \'productosTable\'\r\n            let tableBody = document.querySelector(\'#productosTable tbody\');\r\n\r\n            // Limpiamos el contenido actual de la tabla para que no se repitan los productos\r\n            tableBody.innerHTML = \'\';\r\n\r\n            // Recorreremos cada producto que recibimos del servidor\r\n            data.forEach(producto => {\r\n                // Creamos una nueva fila en la tabla para agregar un producto\r\n                let row = document.createElement(\'tr\');\r\n\r\n                // Establecemos el contenido de la fila (el nombre, precio, cantidad y botones)\r\n                row.innerHTML = `\r\n                    <td>${producto.id}</td> <!-- Muestra el ID del producto -->\r\n                    <td>${producto.nombre}</td> <!-- Muestra el nombre del producto -->\r\n                    <td>${producto.precio}</td> <!-- Muestra el precio del producto -->\r\n                    <td>${producto.cantidad}</td> <!-- Muestra la cantidad disponible -->\r\n                    <td>\r\n                        <!-- Botón para editar el producto -->\r\n                        <button onclick=\"editarProducto(${producto.id})\">Editar</button>\r\n                        <!-- Botón para eliminar el producto -->\r\n                        <button onclick=\"eliminarProducto(${producto.id})\">Eliminar</button>\r\n                    </td>\r\n                `;\r\n\r\n                // Agregamos la fila creada al cuerpo de la tabla\r\n                tableBody.appendChild(row);\r\n            });\r\n        });\r\n}\r\n\r\n// Escucha el evento de envío (submit) del formulario para guardar o actualizar el producto\r\ndocument.getElementById(\'formProducto\').addEventListener(\'submit\', function (e) {\r\n    // Evita que el formulario se envíe de forma tradicional (recarga la página)\r\n    e.preventDefault();\r\n\r\n    // Captura los valores de los campos del formulario\r\n    let id = document.getElementById(\'id\').value;           // ID del producto (si existe, para actualizar)\r\n    let nombre = document.getElementById(\'nombre\').value;   // Nombre del producto\r\n    let cantidad = document.getElementById(\'cantidad\').value; // Cantidad disponible del producto\r\n    let precio = document.getElementById(\'precio\').value;   // Precio del producto\r\n\r\n    // Si el ID está presente, se enviará una solicitud para actualizar, de lo contrario se guardará como nuevo\r\n    let url = id ? \'controller/Ecommerce/actualizar.php\' : \'controller/Ecommerce/guardar.php\';        // Si \'id\' tiene valor, usa \'actualizar.php\', de lo contrario usa \'guardar.php\'\r\n\r\n    // Crea un objeto con los datos del producto\r\n    let data = {\r\n        id: id,            // El ID del producto (si es una actualización)\r\n        nombre: nombre,    // El nombre del producto\r\n        cantidad: cantidad, // La cantidad del producto\r\n        precio: precio     // El precio del producto\r\n    };\r\n\r\n    // Realiza la solicitud POST al servidor usando Fetch API\r\n    fetch(url, {\r\n        method: \'POST\',                            // Establece el método HTTP como POST\r\n        headers: {\r\n            \'Content-Type\': \'application/json\'    // Define el tipo de contenido como JSON\r\n        },\r\n        body: JSON.stringify(data)                  // Convierte el objeto \'data\' en una cadena JSON\r\n    })\r\n        .then(response => response.json())           // Procesa la respuesta como JSON\r\n        .then(result => {\r\n            // Muestra un mensaje de éxito o error dependiendo de la respuesta\r\n            alert(result.message);\r\n\r\n            // Llama a la función \'cargarProductos\' para actualizar la lista de productos en la interfaz\r\n            cargarProductos();\r\n\r\n            // Resetea los campos del formulario (limpia los valores)\r\n            document.getElementById(\'formProducto\').reset();\r\n\r\n            // Resetea el valor del campo \'id\' para evitar que persista entre registros\r\n            document.getElementById(\'id\').value = \'\';\r\n        })\r\n});\r\n\r\n\r\nfunction editarProducto(id) {\r\n    fetch(\'controller/Ecommerce/producto.php?id=\' + id)\r\n        .then(response => response.json())\r\n        .then(producto => {\r\n            document.getElementById(\'id\').value = producto.id;           // ID del producto (si existe, para actualizar)\r\n            document.getElementById(\'nombre\').value = producto.nombre;   // Nombre del producto\r\n            document.getElementById(\'cantidad\').value = producto.cantidad; // Cantidad disponible del producto\r\n            document.getElementById(\'precio\').value = producto.precio;\r\n        });\r\n}\r\n\r\nfunction eliminarProducto(id) {\r\n    if (confirm(\'Estas seguro de eliminar este producto\')) {\r\n        fetch(\'controller/Ecommerce/eliminar.php\', {\r\n            method: \'POST\',\r\n            headers: {\r\n                \'Content-Type\': \'application/json\'\r\n            },\r\n            body: JSON.stringify({ id: id })\r\n        })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                alert(result.message);\r\n                cargarProductos();\r\n            })\r\n    }\r\n}\r\n\r\n\r\ncargarProductos();', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Cross-Site Scripting (XSS)</h5>\n          <p class=\"card-text\">\n            <b>Línea aproximada:</b> 20-34 (interpolación de cadenas en `row.innerHTML = \\`...\\`;`).<br>\n            <b>Descripción:</b> La interpolación de cadenas con datos no saneados provenientes del servidor (<code>producto.nombre</code>, <code>producto.precio</code>, etc.) en el HTML puede permitir la inyección de código JavaScript malicioso. Si un atacante logra modificar los datos de un producto en la base de datos con código JavaScript embebido, este código se ejecutará en el navegador de cada usuario que visite la página.\n            <br>\n            <b>Cómo mitigar:</b> Utilizar una librería de templating segura o escapar los datos antes de insertarlos en el HTML.  Usar <code>textContent</code> en lugar de <code>innerHTML</code> para el texto, o usar DOMPurify para sanitizar HTML si es absolutamente necesario usar <code>innerHTML</code> para otro contenido HTML seguro.\n            <br>\n            <b>Ejemplo de mitigación:</b>\n            ```javascript\n            let row = document.createElement(\'tr\');\n            let idCell = document.createElement(\'td\');\n            idCell.textContent = producto.id;\n            let nombreCell = document.createElement(\'td\');\n            nombreCell.textContent = producto.nombre;\n            let precioCell = document.createElement(\'td\');\n            precioCell.textContent = producto.precio;\n            let cantidadCell = document.createElement(\'td\');\n            cantidadCell.textContent = producto.cantidad;\n\n            let accionesCell = document.createElement(\'td\');\n            let editarButton = document.createElement(\'button\');\n            editarButton.textContent = \'Editar\';\n            editarButton.onclick = () => editarProducto(producto.id);\n            let eliminarButton = document.createElement(\'button\');\n            eliminarButton.textContent = \'Eliminar\';\n            eliminarButton.onclick = () => eliminarProducto(producto.id);\n\n            accionesCell.appendChild(editarButton);\n            accionesCell.appendChild(eliminarButton);\n\n\n            row.appendChild(idCell);\n            row.appendChild(nombreCell);\n            row.appendChild(precioCell);\n            row.appendChild(cantidadCell);\n            row.appendChild(accionesCell);\n            tableBody.appendChild(row);\n            ```\n            Este ejemplo crea elementos DOM de forma explícita y usa <code>textContent</code> para evitar la inyección de HTML.\n\n          </p>\n          <h5 class=\"card-title\">Posible vulnerabilidad de Inyección SQL</h5>\n            <p class=\"card-text\">\n              <b>Descripción:</b> El código JavaScript en sí no es directamente vulnerable a la inyección SQL, ya que la interacción con la base de datos se realiza en el lado del servidor (archivos PHP: <code>productos.php</code>, <code>actualizar.php</code>, <code>guardar.php</code>, <code>producto.php</code>, <code>eliminar.php</code>). Sin embargo, si estos scripts PHP no sanitizan o parametrizan las entradas enviadas desde el JavaScript (<code>id</code>, <code>nombre</code>, <code>cantidad</code>, <code>precio</code>), son vulnerables a la inyección SQL. Un atacante podría manipular estos valores en la solicitud POST o GET para ejecutar consultas SQL maliciosas en la base de datos.\n\n              <b>Cómo mitigar:</b>\n                *   <b>Parametrización de consultas:</b> Utilizar consultas preparadas o sentencias parametrizadas en los scripts PHP.  Esto asegura que los datos proporcionados por el usuario se traten como datos, no como parte del comando SQL.\n                *   <b>Validación y saneamiento de entradas:</b> Validar y sanear todos los datos de entrada del usuario en el lado del servidor antes de usarlos en las consultas SQL.  Esto incluye verificar los tipos de datos, longitudes y formatos, y escapar caracteres especiales.\n                *   <b>Principio de mínimo privilegio:</b> Asegurarse de que la cuenta de base de datos utilizada por los scripts PHP tenga solo los privilegios necesarios para realizar sus tareas.  Esto limita el daño que un atacante puede causar si logra realizar una inyección SQL.\n            </p>\n\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            El código es generalmente legible gracias a los comentarios y nombres de variables descriptivos. Sin embargo, el uso intensivo de interpolación de cadenas para crear HTML (líneas 20-34) disminuye la legibilidad y aumenta el riesgo de errores. Refactorizar esta parte usando la API DOM (<code>document.createElement</code>, <code>appendChild</code>, <code>textContent</code>, etc.) mejoraría significativamente la legibilidad y seguridad, como se muestra en la mitigación XSS.\n          </p>\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            El código está moderadamente acoplado a los endpoints específicos del backend (<code>controller/Ecommerce/productos.php</code>, etc.).  Esto dificulta la reutilización del código en otros contextos.  Se podría mejorar este aspecto abstrayendo la lógica de acceso a datos en una capa separada.\n          </p>\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            No hay duplicación evidente en el fragmento de código proporcionado. Sin embargo, si la lógica de manejo de errores y la actualización de la interfaz de usuario se repiten en otras partes de la aplicación, se debería considerar la creación de funciones reutilizables.\n          </p>\n          <h5 class=\"card-title\">Complejidad</h5>\n          <p class=\"card-text\">\n            La complejidad ciclomática del código es baja. No hay estructuras de control anidadas profundas ni lógicas condicionales complejas. La mayor complejidad reside en el manejo asíncrono de las llamadas a la API REST (<code>fetch</code> y promesas).\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <ol>\n            <li>\n              <b>Sanitizar las salidas:</b> Implementar un mecanismo de escape o sanitización de los datos provenientes del servidor antes de insertarlos en el HTML del cliente, mitigando la vulnerabilidad XSS.  La mejor solución es reconstruir el DOM con funciones como <code>document.createElement()</code>\n            </li>\n            <li>\n              <b>Validar y parametrizar en el backend:</b> Asegurarse de que todos los scripts PHP (<code>productos.php</code>, <code>actualizar.php</code>, <code>guardar.php</code>, <code>producto.php</code>, <code>eliminar.php</code>) validen y parametrizen las entradas para evitar inyecciones SQL.\n            </li>\n            <li>\n              <b>Abstracción de la lógica de acceso a datos:</b> Crear una capa de abstracción para el acceso a datos para reducir el acoplamiento y facilitar la reutilización del código.\n            </li>\n            <li>\n              <b>Manejo centralizado de errores:</b> Implementar un manejo centralizado de errores para evitar la repetición de código y mejorar la mantenibilidad.\n            </li>\n            <li>\n              <b>Modularización:</b> Dividir el código en módulos más pequeños y reutilizables para mejorar la legibilidad y la mantenibilidad.\n            </li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-19 23:35:44', 4);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(17, 'ecommerce.php', 'Detectado por GPT', '<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica Con JavaScript</h1>\r\n            <div class=\"col-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form id=\"formProducto\">\r\n                            <input type=\"hidden\" id=\"id\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"cantidad\" class=\"form-label\">Cantidad</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"cantidad\" name=\"cantidad\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"precio\" class=\"form-label\">Precio</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"precio\" name=\"precio\" step=\"0.01\" required>\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-success\">Guardar</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-8\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <h2>Lista de Productos</h2>\r\n\r\n                        <table id=\"productosTable\" class=\"table table-success table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Nombre</th>\r\n                                    <th>Cantidad</th>\r\n                                    <th>Precio</th>\r\n                                    <th>Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <!-- Los productos se cargarán aquí mediante JavaScript -->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n    <script src=\"ecommerce.js\"></script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container mt-3\">\n    <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n            Análisis de Seguridad y Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Potenciales Vulnerabilidades</h5>\n\n            <div class=\"card-text\">\n                <p>El código HTML proporcionado, por sí solo, presenta pocas vulnerabilidades de seguridad directas. Sin embargo, la interacción con el script <code>ecommerce.js</code> es donde residen los riesgos más significativos.  Asumiendo que <code>ecommerce.js</code> maneja datos del formulario y los presenta en la tabla, estas son las posibles vulnerabilidades:</p>\n\n                <ul>\n                    <li>\n                        <strong>Vulnerabilidad: Cross-Site Scripting (XSS)</strong><br>\n                        <strong>Línea Aproximada:</strong> <code>ecommerce.js</code> (manejo de datos y actualización del DOM).<br>\n                        <strong>Descripción:</strong> Si <code>ecommerce.js</code> toma los valores de los campos del formulario (<code>nombre</code>, <code>cantidad</code>, <code>precio</code>) y los inserta directamente en la tabla <code>productosTable</code> sin sanitizar o escapar, un atacante podría inyectar código JavaScript malicioso mediante un valor en el campo \'nombre\'. Este código se ejecutaría en el navegador de otros usuarios que vean la tabla.<br>\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li><strong>Escapado de datos:</strong> Antes de insertar datos en el DOM, utilizar funciones de escapado específicas del contexto (por ejemplo, para HTML, usar <code>textContent</code> en lugar de <code>innerHTML</code>).</li>\n                            <li><strong>Validación de entrada:</strong> Validar los datos del formulario en el cliente (en <code>ecommerce.js</code>) y en el servidor (si los datos se envían a un backend).  Establecer límites de longitud, tipos de datos permitidos y patrones esperados.</li>\n                        </ul>\n                    </li>\n                    <li>\n                        <strong>Vulnerabilidad: Inyección de HTML/Script en la Tabla</strong><br>\n                        <strong>Línea Aproximada:</strong>  Manipulación del DOM dentro de <code>ecommerce.js</code>.<br>\n                        <strong>Descripción:</strong> Similar a XSS, pero menos obvia. Si los datos del formulario, especialmente el nombre del producto, contienen etiquetas HTML sin escapado, pueden alterar la estructura de la tabla o inyectar elementos no deseados.<br>\n                        <strong>Mitigación:</strong> Usar <code>textContent</code> para insertar el nombre del producto en la celda de la tabla.  Evitar el uso de <code>innerHTML</code> a menos que sea absolutamente necesario y los datos estén completamente controlados.\n                    </li>\n\n                    <li>\n                        <strong>Vulnerabilidad: Falta de validación en el cliente</strong><br>\n                        <strong>Línea Aproximada:</strong>  <code>ecommerce.js</code> (procesamiento del formulario).<br>\n                        <strong>Descripción:</strong> Aunque el HTML tiene <code>required</code> en los campos, esto solo proporciona una validación básica del navegador. La validación del lado del cliente en Javascript es importante para garantizar que los datos sean del tipo y formato correctos antes de enviarlos al servidor.<br>\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li>Agregar validación personalizada en <code>ecommerce.js</code> para verificar que <code>cantidad</code> y <code>precio</code> sean números positivos y que <code>nombre</code> tenga una longitud razonable.</li>\n                        </ul>\n                    </li>\n                </ul>\n\n                <p><strong>Importante:</strong> Este análisis se basa en la suposición de que <code>ecommerce.js</code> interactúa directamente con el DOM utilizando los datos del formulario.  Si el script realiza una llamada a un servidor backend, las vulnerabilidades en el backend son también relevantes.</p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"card mt-3 border-warning\">\n        <div class=\"card-header bg-warning text-white\">\n            Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Análisis Estático</h5>\n            <div class=\"card-text\">\n                <p>Sin acceso al código de <code>ecommerce.js</code>, solo se pueden comentar aspectos del HTML:</p>\n\n                <ul>\n                    <li>\n                        <strong>Legibilidad:</strong> El HTML es generalmente legible gracias al uso de Bootstrap y la estructura clara del formulario y la tabla.  El uso de etiquetas descriptivas (<code>label</code>, <code>th</code>, <code>td</code>) contribuye a la legibilidad.\n                    </li>\n                    <li>\n                        <strong>Acoplamiento:</strong>  El código HTML está acoplado a Bootstrap debido al uso de clases de Bootstrap.  Esto facilita el diseño responsivo, pero también introduce una dependencia.\n                    </li>\n                    <li>\n                        <strong>Complejidad:</strong> La complejidad del HTML es baja.  El formulario y la tabla son relativamente sencillos.  La complejidad real depende de la lógica implementada en <code>ecommerce.js</code>.\n                    </li>\n                    <li>\n                        <strong>Duplicación:</strong> No hay duplicación significativa en el HTML.\n                    </li>\n                </ul>\n                <p><strong>Potenciales mejoras:</strong></p>\n                <ul>\n                    <li>Asegurarse de que <code>ecommerce.js</code> esté bien documentado para facilitar su mantenimiento y comprensión.</li>\n                    <li>Considerar el uso de un framework de JavaScript (React, Vue, Angular) si la aplicación se vuelve más compleja, para mejorar la organización del código y la mantenibilidad.</li>\n                </ul>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'card border-success mt-3\'>\n        <div class=\"card-header bg-success text-white\">\n            Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Implementación de Medidas de Seguridad y Calidad</h5>\n            <div class=\"card-text\">\n                <ol>\n                    <li>\n                        <strong>Escapado de datos en <code>ecommerce.js</code>:</strong>  Implementar funciones de escapado (por ejemplo, usando <code>textContent</code> para la inserción en el DOM) para prevenir XSS.  Esto es crucial antes de insertar cualquier dato proveniente del formulario en la tabla.\n                        <pre><code class=\"language-javascript\">\n                        function agregarProductoATabla(producto) {\n                            const tabla = document.getElementById(\'productosTable\').getElementsByTagName(\'tbody\')[0];\n                            let newRow = tabla.insertRow();\n\n                            let idCell = newRow.insertCell(0);\n                            idCell.textContent = producto.id;\n\n                            let nombreCell = newRow.insertCell(1);\n                            nombreCell.textContent = producto.nombre; // Usar textContent para evitar XSS\n\n                            let cantidadCell = newRow.insertCell(2);\n                            cantidadCell.textContent = producto.cantidad;\n\n                            let precioCell = newRow.insertCell(3);\n                            precioCell.textContent = producto.precio;\n\n                            // Agregar celda de acciones (botones Editar/Eliminar)\n                            let accionesCell = newRow.insertCell(4);\n                            // Crear botones y agregar listeners (escapar los datos si los pasa al listener)\n                        }\n                        </code></pre>\n                    </li>\n                    <li>\n                        <strong>Validación robusta en <code>ecommerce.js</code>:</strong> Agregar validación del lado del cliente para asegurar que los datos introducidos sean del tipo y formato correctos.  Mostrar mensajes de error claros al usuario si la validación falla.\n                         <pre><code class=\"language-javascript\">\n                        document.getElementById(\'formProducto\').addEventListener(\'submit\', function(event) {\n                            let nombre = document.getElementById(\'nombre\').value;\n                            let cantidad = document.getElementById(\'cantidad\').value;\n                            let precio = document.getElementById(\'precio\').value;\n\n                            if (nombre.length > 50) {\n                                alert(\'El nombre del producto es demasiado largo.\');\n                                event.preventDefault(); // Evitar el envío del formulario\n                                return;\n                            }\n\n                            if (isNaN(cantidad) || cantidad <= 0) {\n                                alert(\'La cantidad debe ser un número positivo.\');\n                                event.preventDefault();\n                                return;\n                            }\n\n                            if (isNaN(precio) || precio <= 0) {\n                                alert(\'El precio debe ser un número positivo.\');\n                                event.preventDefault();\n                                return;\n                            }\n\n                            // Si la validación pasa, el formulario se envía\n                        });\n                        </code></pre>\n                    </li>\n                    <li>\n                        <strong>Sanitización de datos en el backend (si aplica):</strong> Si los datos se envían a un servidor, realizar una sanitización completa de los datos en el backend para prevenir ataques.\n                    </li>\n                    <li>\n                        <strong>Considerar el uso de un framework de JavaScript:</strong>  Si la aplicación crece en complejidad, migrar a un framework como React, Vue o Angular puede mejorar la mantenibilidad y la organización del código.  Estos frameworks suelen proporcionar mecanismos integrados para prevenir XSS.\n                    </li>\n                    <li>\n                        <strong>Documentación:</strong> Asegurar que <code>ecommerce.js</code> y cualquier código backend estén bien documentados.\n                    </li>\n                </ol>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:36:16', 4),
(18, 'edit.php', 'Detectado por GPT', '<?php\r\ninclude \"models/conexion.php\";\r\n$id = $_GET[\"id\"];\r\necho $id;\r\n\r\n$sql = $conexion->query(\"SELECT * FROM PERSONAS WHERE id = $id\");\r\n?>\r\n<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica</h1>\r\n            <div class=\"col\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form action=\"\" method=\"post\">\r\n                            <!-- Mostrar Error     -->\r\n                            <?php\r\n                            include \"controller/modificar.php\";\r\n                            // Suponiendo que la consulta ya fue ejecutada y $sql contiene un solo registro\r\n                            if ($a = $sql->fetch_object()) { ?>\r\n                                <h3>Actudalizar Registro de Persona</h3>\r\n                                <input type=\"hidden\" name=\"id\" value=\"<?= htmlspecialchars($a->id) ?>\">\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" value=\"<?= htmlspecialchars($a->nombre) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"apellido\" class=\"form-label\">Apellido</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\" value=\"<?= htmlspecialchars($a->apellido) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"dni\" class=\"form-label\">Cedula</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\" value=\"<?= htmlspecialchars($a->cedula) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"email\" class=\"form-label\">Email</label>\r\n                                    <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" value=\"<?= htmlspecialchars($a->correo) ?>\" required>\r\n                                </div>\r\n                                <button type=\"submit\" name=\"btnactualizar\" class=\"btn btn-warning\" value=\"ok\">Actualizar</button>\r\n                                <a href=\"index.php\" class=\"btn btn-secondary\">Cancelar</a>\r\n                            <?php } else { ?>\r\n                                <p>No se encontró el registro</p>\r\n                            <?php } ?>\r\n\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <strong>Línea Aproximada:</strong> 3 y 5 <br>\n                        El código es vulnerable a inyección SQL debido a que el valor de `$_GET[\"id\"]` se inserta directamente en la consulta SQL sin sanitización ni validación.  Un atacante podría manipular el parámetro `id` en la URL para ejecutar código SQL arbitrario en la base de datos.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li><strong>Usar consultas preparadas (prepared statements) con marcadores de posición.</strong>  Esta es la forma más segura de prevenir la inyección SQL.</li>\n                            <li><strong>Validar y sanitizar la entrada del usuario.</strong>  Asegurarse de que el valor de `$_GET[\"id\"]` sea un entero antes de usarlo en la consulta.  Si se espera un entero, se puede usar `filter_var($_GET[\"id\"], FILTER_VALIDATE_INT)` para validar y sanitizar la entrada.</li>\n                            <li><strong>Escapar la entrada del usuario.</strong>  Utilizar funciones de escape específicas de la base de datos, como `mysqli_real_escape_string()`, pero esto es menos recomendable que las consultas preparadas.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Métricas Relevantes</h5>\n                    <p class=\"card-text\">\n                        <ul>\n                            <li><strong>Legibilidad:</strong> El código es relativamente legible, pero podría mejorarse con comentarios más descriptivos.</li>\n                            <li><strong>Acoplamiento:</strong> El código tiene un acoplamiento moderado debido a la inclusión de varios archivos (`conexion.php`, `modificar.php`).  La alta dependencia de estos archivos dificulta la reutilización y el testing del código.</li>\n                            <li><strong>Duplicación:</strong> La duplicación es baja en este fragmento, pero podría haber duplicación en los archivos incluidos.</li>\n                            <li><strong>Complejidad Ciclomática:</strong> La complejidad es baja. La estructura condicional `if ($a = $sql->fetch_object()) { ... } else { ... }` introduce una pequeña complejidad, pero es manejable.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejoras:</strong>\n                        <ul>\n                            <li><strong>Desacoplar el código:</strong> Utilizar inyección de dependencias para reducir el acoplamiento.</li>\n                            <li><strong>Añadir comentarios:</strong>  Documentar el propósito de cada sección del código para mejorar la legibilidad.</li>\n                            <li><strong>Centralizar la lógica de acceso a datos:</strong>  Crear una capa de acceso a datos (DAO) para encapsular la lógica de la base de datos y reducir la duplicación de código.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <p class=\"card-text\">\n                        <strong>Código Modificado (con consultas preparadas):</strong>\n                        <pre>\n                            <code>\n&lt;?php\ninclude \"models/conexion.php\";\n\n// Validar que \'id\' existe y es un entero\n$id = isset($_GET[\"id\"]) ? filter_var($_GET[\"id\"], FILTER_VALIDATE_INT) : false;\n\nif ($id === false || $id === null) {\n    // Manejar el error si \'id\' no está presente o no es válido\n    echo \"ID no válido.\";\n    exit;\n}\n\n// Usar una consulta preparada para evitar la inyección SQL\n$sql = $conexion->prepare(\"SELECT * FROM PERSONAS WHERE id = ?\");\n$sql->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n$sql->execute();\n$result = $sql->get_result();\n?&gt;\n&lt;!doctype html&gt;\n&lt;html lang=\"en\"&gt;\n\n&lt;head&gt;\n    &lt;!-- Required meta tags --&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n\n    &lt;!-- Bootstrap CSS --&gt;\n    &lt;link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\"&gt;\n\n\n    &lt;title&gt;Hello, world!&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n    &lt;div class=\"container-fluid-row \"&gt;\n\n        &lt;div class=\"row px-4\"&gt;\n            &lt;h1&gt;Prueba Tecnica&lt;/h1&gt;\n            &lt;div class=\"col\"&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;form action=\"\" method=\"post\"&gt;\n                            &lt;!-- Mostrar Error     --&gt;\n                            &lt;?php\n                            include \"controller/modificar.php\";\n                            // Suponiendo que la consulta ya fue ejecutada y $sql contiene un solo registro\n                            if ($a = $result->fetch_object()) { ?&gt;\n                                &lt;h3&gt;Actudalizar Registro de Persona&lt;/h3&gt;\n                                &lt;input type=\"hidden\" name=\"id\" value=\"&lt;?= htmlspecialchars($a->id) ?&gt;\"&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"nombre\" class=\"form-label\"&gt;Nombre&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" value=\"&lt;?= htmlspecialchars($a->nombre) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"apellido\" class=\"form-label\"&gt;Apellido&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\" value=\"&lt;?= htmlspecialchars($a->apellido) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"dni\" class=\"form-label\"&gt;Cedula&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\" value=\"&lt;?= htmlspecialchars($a->cedula) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"email\" class=\"form-label\"&gt;Email&lt;/label&gt;\n                                    &lt;input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" value=\"&lt;?= htmlspecialchars($a->correo) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;button type=\"submit\" name=\"btnactualizar\" class=\"btn btn-warning\" value=\"ok\"&gt;Actualizar&lt;/button&gt;\n                                &lt;a href=\"index.php\" class=\"btn btn-secondary\"&gt;Cancelar&lt;/a&gt;\n                            &lt;?php } else { ?&gt;\n                                &lt;p&gt;No se encontró el registro&lt;/p&gt;\n                            &lt;?php } ?&gt;\n\n                        &lt;/form&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Optional JavaScript; choose one of the two! --&gt;\n\n    &lt;!-- Option 1: Bootstrap Bundle with Popper --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n\n    &lt;!-- Option 2: Separate Popper and Bootstrap JS --&gt;\n    &lt;!--\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    --&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n                            </code>\n                        </pre>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Explicación de los cambios:</strong>\n                        <ul>\n                            <li><strong>Validación de `id`</strong>: Se agrega `filter_var` para validar que el parámetro `id` sea un entero y exista.</li>\n                            <li><strong>Consulta Preparada</strong>:  Se utiliza `$conexion->prepare()` para preparar la consulta SQL.</li>\n                            <li><strong>`bind_param()`</strong>:  Se utiliza `$sql->bind_param(\"i\", $id)` para vincular el valor de `$id` al marcador de posición en la consulta.  La `\"i\"` indica que `$id` es un entero.</li>\n                            <li><strong>`get_result()`</strong>: Se utiliza `$sql->get_result()` para obtener el resultado de la consulta.</li>\n                            <li><strong>Manejo de errores</strong>: Se agrega un manejo básico de errores en caso de que el `id` no sea válido o no esté presente.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:36:44', 4),
(19, 'index.php', 'Detectado por GPT', '<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n    <script>\r\n        function eliminar(){\r\n            var respuesta  = confirm(\"Estas seguro que deseas eliminar\");\r\n            return respuesta;\r\n        }\r\n    </script>\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica</h1>\r\n\r\n            <div class=\"col-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form action=\"\" method=\"post\">\r\n                            <!-- Mostrar Error     -->\r\n                            <?php\r\n                            include \"models/conexion.php\";\r\n                            include \"controller/registro.php\";\r\n\r\n                            ?>\r\n                            <h3>Registro de Persona</h3>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\">\r\n\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"apellido\" class=\"form-label\">Apellido</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"dni\" class=\"form-label\">Cedula</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"fecha\" class=\"form-label\">Fecha Nacimiento</label>\r\n                                <input type=\"date\" class=\"form-control\" id=\"fecha\" name=\"fecha\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"email\" class=\"form-label\">Email</label>\r\n                                <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\">\r\n                            </div>\r\n                            <button type=\"submit\" name=\"btnregistrar\" class=\"btn btn-success\" value=\"ok\">Registrar</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-8\">\r\n                <?php include \"controller/eliminar.php\"; ?>\r\n                <table class=\"table table-success table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">#</th>\r\n                            <th scope=\"col\">Nombre</th>\r\n                            <th scope=\"col\">Apellido</th>\r\n                            <th scope=\"col\">Cedula</th>\r\n                            <th scope=\"col\">Fecha Nacimiento</th>\r\n                            <th scope=\"col\">Correo</th>\r\n                            <th scope=\"col\">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <?php\r\n                        include(\"models/conexion.php\");\r\n                        $registrosPorPagina = 5;\r\n                        $pagina = isset($_GET[\'pagina\']) ? (int)$_GET[\'pagina\'] : 1;\r\n                        if ($pagina < 1) $pagina = 1;\r\n\r\n                        $offset = ($pagina - 1) * $registrosPorPagina;\r\n\r\n                        // Total de registros y páginas\r\n                        $resultadoTotal = $conexion->query(\"SELECT COUNT(*) AS total FROM personas\");\r\n                        $totalRegistros = $resultadoTotal->fetch_object()->total;\r\n                        $totalPaginas = ceil($totalRegistros / $registrosPorPagina);\r\n\r\n                        // Consulta paginada\r\n                        $sql = $conexion->query(\"SELECT * FROM personas LIMIT $registrosPorPagina OFFSET $offset\");\r\n                        while ($a = $sql->fetch_object()) { ?>\r\n                            <tr>\r\n                                <td><?= $a->id ?></td>\r\n                                <td><?= htmlspecialchars($a->nombre) ?></td>\r\n                                <td><?= htmlspecialchars($a->apellido) ?></td>\r\n                                <td><?= htmlspecialchars($a->cedula) ?></td>\r\n                                <td><?= htmlspecialchars($a->fecha_nacimiento) ?></td>\r\n                                <td><?= htmlspecialchars($a->correo) ?></td>\r\n                                <td>\r\n                                    <a class=\"btn btn-warning\" href=\"edit.php?id=<?= $a->id ?>\"><i class=\"fa-solid fa-pencil\"></i></a>\r\n\r\n                                    <a onclick=\"return eliminar()\" class=\"btn btn-danger\" href=\"index.php?id=<?= $a->id ?>\"><i class=\"fa-solid fa-trash\"></i></a>\r\n                                </td>\r\n                            </tr>\r\n                        <?php } ?>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación -->\r\n                <nav>\r\n                    <ul class=\"pagination\">\r\n                        <?php if ($pagina > 1): ?>\r\n                            <li class=\"page-item\"><a class=\"page-link\" href=\"?pagina=<?= $pagina - 1 ?>\">Anterior</a></li>\r\n                        <?php endif; ?>\r\n\r\n                        <?php for ($i = 1; $i <= $totalPaginas; $i++): ?>\r\n                            <li class=\"page-item <?= $i == $pagina ? \'active\' : \'\' ?>\">\r\n                                <a class=\"page-link\" href=\"?pagina=<?= $i ?>\"><?= $i ?></a>\r\n                            </li>\r\n                        <?php endfor; ?>\r\n\r\n                        <?php if ($pagina < $totalPaginas): ?>\r\n                            <li class=\"page-item\"><a class=\"page-link\" href=\"?pagina=<?= $pagina + 1 ?>\">Siguiente</a></li>\r\n                        <?php endif; ?>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b>  En los archivos `controller/eliminar.php` (no proporcionado) y posiblemente `controller/registro.php` (no proporcionado) y en la paginación del index.php.\n                        <br>\n                        <b>Descripción:</b> Si la variable `$_GET[\'id\']` (en el caso de eliminar) o los datos del formulario (en el caso del registro) no se sanitizan correctamente antes de usarse en una consulta SQL, un atacante podría inyectar código SQL malicioso.  La paginación utiliza `$_GET[\'pagina\']` sin validar ni escapar, lo que también es vulnerable a inyección SQL si se usa directamente en una query.\n                        <br>\n                        <b>Cómo mitigar:</b>\n                        <ul>\n                            <li>Utilizar sentencias preparadas (prepared statements) con PDO o MySQLi para parametrizar las consultas SQL.</li>\n                            <li>Validar y escapar (sanitizar) todas las entradas del usuario antes de usarlas en consultas SQL.  Para la paginación, asegurarse de que `$_GET[\'pagina\']` es un entero positivo dentro de un rango válido.</li>\n                        </ul>\n                        <b>Ejemplo (Eliminar):</b> Asumiendo que `controller/eliminar.php` contiene algo como:\n                        <code>\n                            $id = $_GET[\'id\'];<br>\n                            $sql = \"DELETE FROM personas WHERE id = $id\";\n                        </code>\n                        Esto es vulnerable.  Debería ser reemplazado por algo como (usando PDO):\n                        <code>\n                            $id = $_GET[\'id\'];<br>\n                            $stmt = $pdo->prepare(\"DELETE FROM personas WHERE id = ?\");<br>\n                            $stmt->execute([$id]);\n                        </code>\n                    </p>\n                    <h5 class=\"card-title\">Cross-Site Scripting (XSS)</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> Al mostrar los datos de la base de datos en la tabla.\n                        <br>\n                        <b>Descripción:</b> Aunque se utiliza `htmlspecialchars()` en la visualización de los datos, es importante asegurarse de que se aplica consistentemente a todos los campos mostrados.  Si un campo contiene código HTML malicioso, podría ejecutarse en el navegador del usuario.\n                        <br>\n                        <b>Cómo mitigar:</b>\n                        <ul>\n                            <li>Asegurarse de que `htmlspecialchars()` se aplica a *todos* los campos que se muestran desde la base de datos.</li>\n                            <li>Utilizar un motor de plantillas que escape automáticamente las variables.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-md-6\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        El código es generalmente legible, pero podría mejorarse con comentarios más descriptivos, especialmente en las secciones PHP.  Nombrar las variables de manera más descriptiva también ayudaría.\n                    </p>\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        El acoplamiento es alto.  Se incluyen directamente los archivos `conexion.php`, `registro.php` y `eliminar.php` dentro de la vista (index.php). Esto dificulta la reutilización y el testeo del código. Se recomienda utilizar un patrón de diseño como MVC (Modelo-Vista-Controlador) para separar las responsabilidades.\n                    </p>\n                    <h5 class=\"card-title\">Duplicación</h5>\n                    <p class=\"card-text\">\n                        La conexión a la base de datos (`conexion.php`) se incluye varias veces.  Esto es una señal de duplicación de código.  Debería incluirse una sola vez, o mejor aún, gestionarse a través de un patrón como Singleton.\n                    </p>\n                    <h5 class=\"card-title\">Complejidad</h5>\n                    <p class=\"card-text\">\n                        La complejidad no es excesivamente alta, pero el código podría estructurarse mejor para mejorar la mantenibilidad.  Por ejemplo, la lógica de paginación podría extraerse a una función separada.\n                    </p>\n                    <h5 class=\"card-title\">Validación del lado del servidor</h5>\n                    <p class=\"card-text\">\n                       No se observa validación del lado del servidor. Se debe validar y santinizar la información del formulario antes de guardar los datos en la base de datos. Esto previene errores de datos, inyecciones SQL y otros problemas de seguridad.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <ol>\n                        <li><b>Implementar Sentencias Preparadas:</b> Usar PDO o MySQLi con sentencias preparadas para todas las consultas a la base de datos.</li>\n                        <li><b>Sanitizar Entradas de Usuario:</b> Validar y escapar todos los datos que provienen del usuario antes de usarlos en consultas SQL o mostrarlos en la página.</li>\n                        <li><b>Usar MVC:</b> Refactorizar el código para seguir un patrón MVC.  Esto separará la lógica de la aplicación (modelos y controladores) de la presentación (vistas).</li>\n                        <li><b>Gestión de Conexión:</b> Implementar un patrón Singleton para la conexión a la base de datos, o utilizar un ORM.</li>\n                        <li><b>Modularizar la Paginación:</b> Extraer la lógica de paginación a una función reutilizable.</li>\n                        <li><b>Validación del Lado del Servidor:</b> Agregar validación del lado del servidor para los datos del formulario.</li>\n                        <li><b>Control de errores:</b> Añadir un control de errores en todas las operaciones de base de datos, para capturar excepciones y realizar un seguimiento o mostrar los errores producidos.</li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-19 23:37:11', 4);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(20, 'ClassUsuario.php', 'Detectado por GPT', '<?php\r\n\r\n	class Usuario{\r\n\r\n		private $strNombre;\r\n		private $strEmail;\r\n		private $strTipo;\r\n		private $strClave;\r\n		protected $strFechaRegistro;\r\n		static $strEstado = \"Activo\";\r\n\r\n		function __construct(string $nombre, string $email, string $tipo)\r\n		{\r\n			$this->strNombre = $nombre;\r\n			$this->strEmail = $email;\r\n			$this->strTipo = $tipo;\r\n			$this->strClave = rand();\r\n			$this->strFechaRegistro = date(\'Y-m-d H:m:s\');\r\n		}\r\n\r\n		public function getNombre():string\r\n		{\r\n			return $this->strNombre;\r\n		}\r\n\r\n		public function getEmail():string\r\n		{\r\n			return $this->strEmail;\r\n		}\r\n\r\n		public function gerPerfil() {\r\n			echo \"<div style=\'border: 1px solid #ccc; padding: 10px; font-family: sans-serif;\'>\"; // Contenedor con estilos\r\n			echo \"<h2 style=\'color: #333;\'>Datos del usuario</h2>\"; // Encabezado\r\n		\r\n			echo \"<p><strong>Nombre:</strong> \" . $this->strNombre . \"</p>\";\r\n			echo \"<p><strong>Email:</strong> \" . $this->strEmail . \"</p>\";\r\n		\r\n			// ¡Nunca muestres la clave real!\r\n			echo \"<p><strong>Clave:</strong> \" . $this->strClave . \"</p>\"; \r\n		\r\n			echo \"<p><strong>Fecha de registro:</strong> \" . $this->strFechaRegistro . \"</p>\";\r\n			echo \"<p><strong>Estado:</strong> \" . self::$strEstado . \"</p>\";\r\n		\r\n			echo \"</div>\"; // Cierre del contenedor\r\n		}\r\n\r\n		public function setCambiarClave(string $pass){\r\n			$this->strClave = $pass;\r\n		}\r\n\r\n	}//End class usuario\r\n\r\n ?>', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Revelación de Información Sensible (Clave)</h5>\n          <p class=\'card-text\'>\n            <b>Tipo:</b> Revelación de Información Sensible / Hardcoded Value / Debug Information Leakage.\n          </p>\n          <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> Línea 39: <code>echo \"&lt;p&gt;&lt;strong&gt;Clave:&lt;/strong&gt; \" . $this->strClave . \"&lt;/p&gt;\";</code>\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> El método <code>gerPerfil()</code> muestra la clave del usuario directamente en el HTML.  Esto es una grave vulnerabilidad de seguridad, ya que expone la clave a cualquiera que pueda ver la página.  Además, la clave se genera de forma predeterminada con <code>rand()</code> en el constructor, que no es criptográficamente seguro.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Nunca</b> mostrar la clave directamente.  En su lugar, considere mostrar un hash de la clave (si es necesario) o, mejor aún, no mostrar nada relacionado con la clave.</li>\n              <li>Almacenar la clave de forma segura usando un algoritmo de hash robusto como `password_hash()` de PHP y sal.</li>\n              <li>Generar claves usando una función segura como `random_bytes()` y codificarlas usando `bin2hex()` o `base64_encode()`.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de Métricas:</b> N/A (Esta es una vulnerabilidad de seguridad, no un problema de calidad de código en sí mismo, aunque contribuye a una mala práctica).\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Complejidad</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> La complejidad ciclomática del código es baja. No hay lógica compleja ni ramas anidadas.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>  Por el momento, no se requiere mejorar la complejidad.  Si se agregara lógica más compleja (validación, etc.), considere refactorizar en métodos más pequeños y enfocados.\n          </p>\n\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> El acoplamiento es bajo. La clase `Usuario` no depende fuertemente de otras clases externas (excepto las funciones nativas de PHP).\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Mantener el acoplamiento bajo es bueno.  Si se agregaran dependencias, considere usar la inyección de dependencias para mejorar la testabilidad y el desacoplamiento.\n          </p>\n\n          <h5 class=\'card-title\'>Legibilidad</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> El código es generalmente legible.  Los nombres de las variables y métodos son descriptivos. El formato es consistente.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Se puede mejorar la consistencia utilizando un estándar de codificación (PSR-12).  Asegurarse de que todos los métodos tengan comentarios PHPDoc.\n          </p>\n\n          <h5 class=\'card-title\'>Duplicación</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> No hay duplicación significativa en el código proporcionado.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> N/A\n          </p>\n\n          <h5 class=\'card-title\'>Formato de Fecha</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> Existe un error sutil en el formato de fecha.\n          </p>\n           <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> Línea 17: <code>$this->strFechaRegistro = date(\'Y-m-d H:m:s\');</code>\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> El formato correcto para los minutos es `i`, no `m`. Se debe cambiar a <code>$this->strFechaRegistro = date(\'Y-m-d H:i:s\');</code>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            <b>Código Modificado (gerPerfil):</b>\n          </p>\n          <pre>\n            <code class=\'language-php\'>\npublic function gerPerfil() {\n    echo \"&lt;div style=\'border: 1px solid #ccc; padding: 10px; font-family: sans-serif;\'&gt;\";\n    echo \"&lt;h2 style=\'color: #333;\'&gt;Datos del usuario&lt;/h2&gt;\";\n\n    echo \"&lt;p&gt;&lt;strong&gt;Nombre:&lt;/strong&gt; \" . htmlspecialchars($this->strNombre) . \"&lt;/p&gt;\";\n    echo \"&lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; \" . htmlspecialchars($this->strEmail) . \"&lt;/p&gt;\";\n\n    //  ¡Nunca muestres la clave!\n    echo \"&lt;p&gt;&lt;strong&gt;Clave:&lt;/strong&gt;  ******** (oculto) &lt;/p&gt;\";\n\n    echo \"&lt;p&gt;&lt;strong&gt;Fecha de registro:&lt;/strong&gt; \" . $this->strFechaRegistro . \"&lt;/p&gt;\";\n    echo \"&lt;p&gt;&lt;strong&gt;Estado:&lt;/strong&gt; \" . self::$strEstado . \"&lt;/p&gt;\";\n\n    echo \"&lt;/div&gt;\";\n}\n\n//En el constructor, cambiar la generación de la clave por algo seguro\nfunction __construct(string $nombre, string $email, string $tipo)\n{\n    $this->strNombre = $nombre;\n    $this->strEmail = $email;\n    $this->strTipo = $tipo;\n    $this->strClave = bin2hex(random_bytes(16)); // Genera una clave aleatoria segura\n    $this->strFechaRegistro = date(\'Y-m-d H:i:s\'); //Corregido el formato de minutos\n}\n\npublic function setCambiarClave(string $pass){\n  //Hay que hashear la clave antes de guardarla\n  $this->strClave = password_hash($pass, PASSWORD_DEFAULT);\n}\n\n            </code>\n          </pre>\n          <p class=\'card-text\'>\n            <b>Explicación de Cambios:</b>\n            <ul>\n              <li>La clave ya no se muestra en el perfil del usuario. Se reemplaza por un texto que indica que está oculta.</li>\n              <li>Se usa `htmlspecialchars()` para escapar los nombres y emails, previniendo XSS.</li>\n              <li>Se corrigió el formato de la fecha a `H:i:s`.</li>\n              <li>Se usa `random_bytes()` y `bin2hex()` para generar una clave segura en el constructor.</li>\n              <li>Se usa `password_hash()` para hashear la clave cuando se cambia.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:03:53', 5),
(21, 'usuario.php', 'Detectado por GPT', '<?php\r\n    require_once(\"ClassUsuario.php\");\r\n    $objUsuario = new Usuario(\"Andres Cardona\",\"andres@info.com\",\"Admin\");\r\n    $objUsuario1 = new Usuario(\"Andresa\",\"andresa@info.com\",\"Cliente\");\r\n    echo Usuario::$strEstado;\r\n\r\n\r\n    echo $objUsuario->gerPerfil();\r\n    echo $objUsuario1->gerPerfil();\r\n    echo $objUsuario1->setCambiarClave(\"123456\");\r\n\r\n    echo $objUsuario1->gerPerfil();\r\n\r\n?>', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-6\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'><b>Ausencia de Manejo de Datos Sensibles y Claves Hardcodeadas</b></h5>\n          <p class=\'card-text\'>\n            <b>Tipo:</b> Exposición de información sensible y riesgo de acceso no autorizado.\n            <br>\n            <b>Línea aproximada:</b>  `$objUsuario1->setCambiarClave(\"123456\");`\n            <br>\n            <b>Descripción:</b> La clave \"123456\" está codificada directamente en el código. Esto representa un riesgo de seguridad significativo.  Si el código se compromete, la clave se revelará fácilmente. Además, la ausencia de un mecanismo robusto para manejar las contraseñas (ej: hasheo) es una vulnerabilidad crítica.\n            <br>\n            <b>Mitigación:</b>\n            <ul>\n              <li>Nunca almacenes contraseñas en texto plano. Utiliza funciones de hashing seguras como `password_hash()` para almacenar las contraseñas hasheadas.</li>\n              <li>Implementa un sistema de gestión de contraseñas que requiera contraseñas fuertes y políticas de cambio de contraseña regulares.</li>\n              <li>Evita hardcodear cualquier dato sensible en el código fuente.  Configura estos datos en archivos de configuración protegidos.</li>\n            </ul>\n          </p>\n\n        <h5 class=\'card-title\'><b>Ausencia de Validación de Entrada</b></h5>\n        <p class=\'card-text\'>\n          <b>Tipo:</b> Inyección (potencialmente SQL Injection o Cross-Site Scripting si `gerPerfil` usa la entrada del usuario sin validación).\n          <br>\n          <b>Línea aproximada:</b>  `echo $objUsuario->gerPerfil();` y  `echo $objUsuario1->gerPerfil();` (si la función `gerPerfil` usa datos del usuario).\n          <br>\n          <b>Descripción:</b> Si la función `gerPerfil()` utiliza datos del usuario (nombre, email, etc.) sin validarlos, existe el riesgo de inyección SQL o XSS.  Por ejemplo, si el nombre del usuario se inserta directamente en una consulta SQL o se muestra en la página web sin ser escapado.\n          <br>\n          <b>Mitigación:</b>\n          <ul>\n            <li>Valida y escapa todas las entradas del usuario antes de usarlas en consultas SQL o mostrarlas en la página web.</li>\n            <li>Utiliza sentencias preparadas (prepared statements) para evitar la inyección SQL.</li>\n            <li>Escapa la salida HTML para evitar la inyección XSS.  Utiliza funciones como `htmlspecialchars()` o `strip_tags()`.</li>\n          </ul>\n        </p>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-6\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'><b>Legibilidad</b></h5>\n          <p class=\'card-text\'>\n            El código es relativamente legible dado su tamaño.  Sin embargo, podría mejorar con:\n            <ul>\n              <li>Comentarios que expliquen la funcionalidad de las funciones y clases.</li>\n              <li>Nombres de variables y funciones más descriptivos.</li>\n              <li>Una estructura de directorios más organizada (especialmente para un proyecto más grande).</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'><b>Acoplamiento</b></h5>\n          <p class=\'card-text\'>\n            El código presenta acoplamiento a la clase `Usuario`.  Si la clase `Usuario` cambia, el código que la utiliza también debe cambiar. Esto se puede mitigar con:\n            <ul>\n              <li>Utilizando interfaces para definir el comportamiento de la clase `Usuario`.</li>\n              <li>Aplicando el principio de inversión de dependencias.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'><b>Complejidad</b></h5>\n          <p class=\'card-text\'>\n            La complejidad ciclomática del código es baja, dado su pequeño tamaño. Sin embargo, la complejidad podría aumentar significativamente en la clase `Usuario`, dependiendo de la lógica interna de sus métodos (especialmente `gerPerfil` y `setCambiarClave`).  Para reducir la complejidad:\n            <ul>\n              <li>Divide los métodos complejos en métodos más pequeños y manejables.</li>\n              <li>Utiliza patrones de diseño para simplificar la lógica.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'><b>Duplicación</b></h5>\n          <p class=\'card-text\'>\n            No hay duplicación evidente en el fragmento de código proporcionado.  Sin embargo, la duplicación podría existir en la clase `Usuario`, si la lógica se repite en diferentes métodos.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            La siguiente solución incluye un ejemplo de hasheo de contraseñas usando `password_hash()` y una estructura básica. La clase `Usuario` (que no se incluyó en el código original) necesita implementación para tener validación de datos de entrada y sanitización.\n          </p>\n          <pre>\n            <code class=\"language-php\">\n&lt;?php\nrequire_once(\"ClassUsuario.php\");\n\n// Clase Usuario (ejemplo simplificado - implementar validación y sanitización)\nclass Usuario {\n    private $nombre;\n    private $email;\n    private $rol;\n    private $password; // Almacenar el hash\n\n    public static $strEstado = \"Activo\";\n\n    public function __construct($nombre, $email, $rol, $password) {\n        $this->nombre = $nombre;\n        $this->email = $email;\n        $this->rol = $rol;\n        $this->password = password_hash($password, PASSWORD_DEFAULT); // Hashear la contraseña\n    }\n\n    public function gerPerfil() {\n        // Implementar validación y sanitización de datos antes de mostrar\n        return \"Nombre: \" . htmlspecialchars($this->nombre) . \"&lt;br&gt;Email: \" . htmlspecialchars($this->email) . \"&lt;br&gt;Rol: \" . htmlspecialchars($this->rol) . \"&lt;br&gt;\";\n    }\n\n    public function setCambiarClave($nuevaClave) {\n        $this->password = password_hash($nuevaClave, PASSWORD_DEFAULT);\n        return \"Contraseña actualizada correctamente.&lt;br&gt;\";\n    }\n\n    public function verificarPassword($password) {\n        return password_verify($password, $this->password);\n    }\n\n    //Getters y setters (opcional)\n}\n\n// Crear instancias de Usuario (ejemplo)\n$objUsuario = new Usuario(\"Andres Cardona\", \"andres@info.com\", \"Admin\", \"UnaClaveSegura\");\n$objUsuario1 = new Usuario(\"Andresa\", \"andresa@info.com\", \"Cliente\", \"OtraClaveSegura\");\n\necho Usuario::$strEstado . \"&lt;br&gt;\";\necho $objUsuario->gerPerfil();\necho $objUsuario1->gerPerfil();\n\n// Cambiar contraseña (ejemplo)\necho $objUsuario1->setCambiarClave(\"NuevaClaveSegura\") . \"&lt;br&gt;\";\n\necho $objUsuario1->gerPerfil();\n\n// Verificar la contraseña (ejemplo)\nif ($objUsuario1->verificarPassword(\"NuevaClaveSegura\")) {\n    echo \"Contraseña verificada correctamente.&lt;br&gt;\";\n} else {\n    echo \"Contraseña incorrecta.&lt;br&gt;\";\n}\n\n?&gt;\n</code>\n          </pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:04:20', 5);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(22, 'bootstrap.min.css', 'Detectado por GPT', '@charset \"UTF-8\";/*!\r\n * Bootstrap  v5.3.0 (https://getbootstrap.com/)\r\n * Copyright 2011-2023 The Bootstrap Authors\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\r\n */:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",\"Noto Sans\",\"Liberation Sans\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#adb5bd;--bs-body-color-rgb:173,181,189;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(173, 181, 189, 0.75);--bs-secondary-color-rgb:173,181,189;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(173, 181, 189, 0.5);--bs-tertiary-color-rgb:173,181,189;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:\"— \"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-body-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-body-color);--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:var(--bs-body-color);--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:var(--bs-body-color);--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#bacbe6;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#cbccce;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#bcd0c7;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#badce3;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#e6dbb9;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#dfc2c4;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#dfe0e1;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#373b3e;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23343a40\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size=\"1\"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23adb5bd\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'m6 10 3 3 6-6\'/%3e%3c/svg%3e\")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'2\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'M6 10h8\'/%3e%3c/svg%3e\")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%280, 0, 0, 0.25%29\'/%3e%3c/svg%3e\");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%2386b7fe\'/%3e%3c/svg%3e\")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%28255, 255, 255, 0.25%29\'/%3e%3c/svg%3e\")}.form-range{width:100%;height:1.5rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>:disabled~label{color:#6c757d}.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size=\"1\"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size=\"1\"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - va', '```html\n<div>\n  <div class=\'card\'>\n    <div class=\'card-header bg-danger text-white\'>\n      Vulnerabilidades de Seguridad Encontradas\n    </div>\n    <div class=\'card-body\'>\n    Aunque este fragmento de código corresponde a la hoja de estilos de Bootstrap y no contiene directamente código ejecutable, es importante considerar la integridad del archivo en sí.\n      <ul class=\'list-group list-group-flush\'>\n        <li class=\'list-group-item\'>\n          <b>Tipo:</b>  Compromiso de la Cadena de Suministro (Supply Chain Attack)\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Línea Aprox.:</b>  N/A (Aplica a todo el archivo)\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Descripción:</b> Si un atacante compromete la CDN o el repositorio desde donde se descarga Bootstrap, podría inyectar código malicioso en este archivo CSS.  Este código podría usarse para modificar la apariencia de la página para engañar al usuario, o para realizar acciones más maliciosas si se combina con otras vulnerabilidades en la página.\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Mitigación:</b>\n          <ul>\n            <li>\n              <b>Verificación de Integridad:</b>  Utiliza hashes (SHA-256, SHA-384, SHA-512) proporcionados por el equipo de Bootstrap para verificar que el archivo descargado no ha sido alterado.  Esto debe hacerse *antes* de usar el archivo en producción. Los hashes pueden encontrarse en la documentación oficial de Bootstrap.\n            </li>\n            <li>\n              <b>Subresource Integrity (SRI):</b> Usa SRI en la etiqueta &lt;link&gt; para asegurar que el navegador descargue solo archivos que coincidan con el hash esperado.\n              <br>\n              Ejemplo:\n              <pre>&lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" integrity=\"SHA256-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" crossorigin=\"anonymous\"&gt;</pre>\n              Reemplaza `SHA256-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX` con el hash real.\n            </li>\n            <li>\n              <b>CDN Confiable:</b>  Usa CDNs (Content Delivery Networks) que sean conocidas por sus fuertes medidas de seguridad.\n            </li>\n            <li>\n              <b>Aislamiento:</b> Limita el acceso a los archivos del proyecto a usuarios autorizados solamente.\n            </li>\n          </ul>\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Métricas de Calidad Afectadas:</b>\n          <ul>\n            <li>\n              <b>Confianza:</b> Un ataque a la cadena de suministro puede destruir la confianza en la infraestructura.\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-warning text-dark\'>\n      Métricas de Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n      <ul class=\'list-group list-group-flush\'>\n        <li class=\'list-group-item\'>\n          <b>Complejidad:</b>  Alta. Las hojas de estilo CSS, especialmente las grandes como Bootstrap, pueden ser complejas debido a la gran cantidad de selectores, reglas y medios queries.  Aunque la complejidad *inherente* del CSS no es una vulnerabilidad, hace que la revisión manual en busca de errores sea más difícil.\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Duplicación:</b> Potencialmente alta. Aunque Bootstrap intenta minimizar la duplicación, es posible que haya cierto grado de redundancia, especialmente en reglas para diferentes estados (hover, focus, etc.) o para compatibilidad con diferentes navegadores.\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Legibilidad:</b>  Moderada.  El código está minificado (remoción de espacios y comentarios) para reducir el tamaño del archivo, lo que dificulta la lectura humana. La versión original sin minificar es más legible, pero no está presente aquí.\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Acoplamiento:</b>  Alto. El HTML de un sitio web que use Bootstrap está fuertemente acoplado a las clases y convenciones de nombres de Bootstrap.  Cambiar a otro framework CSS requeriría modificaciones sustanciales en el HTML.\n        </li>\n        <li class=\'list-group-item\'>\n          <b>Mejoras Potenciales:</b>\n          <ul>\n            <li>\n              <b>Personalización:</b> Usar el personalizador de Bootstrap (si lo tiene) para incluir solo los componentes necesarios reduce la complejidad y el tamaño del archivo.\n            </li>\n            <li>\n              <b>Revisión Automática:</b> Utilizar herramientas de análisis estático CSS para identificar posibles problemas de calidad (duplicación, selectores innecesariamente específicos, etc.).\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header bg-success text-white\'>\n      Solución Propuesta (Enfoque en la Integridad del Código)\n    </div>\n    <div class=\'card-body\'>\n      <ol>\n        <li>\n          <b>Implementar SRI (Subresource Integrity):</b> Este es el paso más crítico. Incorpora el atributo `integrity` en las etiquetas &lt;link&gt; que cargan el CSS de Bootstrap, utilizando el hash correcto proporcionado por la documentación oficial de Bootstrap. Esto garantiza que el navegador solo use el archivo si coincide exactamente con el hash.\n        </li>\n         <li>\n          <b>Automatizar la Verificación del Hash:</b> Si se utiliza una herramienta de gestión de dependencias (como npm o yarn) para instalar Bootstrap, integra un script que verifique automáticamente el hash del archivo CSS después de la instalación.\n        </li>\n        <li>\n          <b>Monitorizar la Cadena de Suministro:</b> Mantente informado sobre posibles vulnerabilidades en las CDNs que uses. Suscríbete a avisos de seguridad y sigue las recomendaciones del equipo de Bootstrap.\n        </li>\n         <li>\n          <b>Usar un linter CSS:</b> Integra un linter CSS como Stylelint en el proceso de desarrollo para detectar posibles problemas de calidad del código, como duplicación, selectores innecesarios o reglas conflictivas.\n        </li>\n      </ol>\n    </div>\n  </div>\n</div>\n```', '2025-05-20 01:38:14', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(23, 'dataTables.bootstrap5.min.css', 'Detectado por GPT', ':root{--dt-row-selected: 13, 110, 253;--dt-row-selected-text: 255, 255, 255;--dt-row-selected-link: 9, 10, 11}table.dataTable td.dt-control{text-align:center;cursor:pointer}table.dataTable td.dt-control:before{height:1em;width:1em;margin-top:-9px;display:inline-block;color:white;border:.15em solid white;border-radius:1em;box-shadow:0 0 .2em #444;box-sizing:content-box;text-align:center;text-indent:0 !important;font-family:\"Courier New\",Courier,monospace;line-height:1em;content:\"+\";background-color:#31b131}table.dataTable tr.dt-hasChild td.dt-control:before{content:\"-\";background-color:#d33333}table.dataTable thead>tr>th.sorting,table.dataTable thead>tr>th.sorting_asc,table.dataTable thead>tr>th.sorting_desc,table.dataTable thead>tr>th.sorting_asc_disabled,table.dataTable thead>tr>th.sorting_desc_disabled,table.dataTable thead>tr>td.sorting,table.dataTable thead>tr>td.sorting_asc,table.dataTable thead>tr>td.sorting_desc,table.dataTable thead>tr>td.sorting_asc_disabled,table.dataTable thead>tr>td.sorting_desc_disabled{cursor:pointer;position:relative;padding-right:26px}table.dataTable thead>tr>th.sorting:before,table.dataTable thead>tr>th.sorting:after,table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_asc:after,table.dataTable thead>tr>th.sorting_desc:before,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>th.sorting_asc_disabled:after,table.dataTable thead>tr>th.sorting_desc_disabled:before,table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting:before,table.dataTable thead>tr>td.sorting:after,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_asc:after,table.dataTable thead>tr>td.sorting_desc:before,table.dataTable thead>tr>td.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_asc_disabled:after,table.dataTable thead>tr>td.sorting_desc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:after{position:absolute;display:block;opacity:.125;right:10px;line-height:9px;font-size:.8em}table.dataTable thead>tr>th.sorting:before,table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_desc:before,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>th.sorting_desc_disabled:before,table.dataTable thead>tr>td.sorting:before,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_desc:before,table.dataTable thead>tr>td.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:before{bottom:50%;content:\"▲\";content:\"▲\"/\"\"}table.dataTable thead>tr>th.sorting:after,table.dataTable thead>tr>th.sorting_asc:after,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>th.sorting_asc_disabled:after,table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting:after,table.dataTable thead>tr>td.sorting_asc:after,table.dataTable thead>tr>td.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc_disabled:after,table.dataTable thead>tr>td.sorting_desc_disabled:after{top:50%;content:\"▼\";content:\"▼\"/\"\"}table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_desc:after{opacity:.6}table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting_asc_disabled:before{display:none}table.dataTable thead>tr>th:active,table.dataTable thead>tr>td:active{outline:none}div.dataTables_scrollBody>table.dataTable>thead>tr>th:before,div.dataTables_scrollBody>table.dataTable>thead>tr>th:after,div.dataTables_scrollBody>table.dataTable>thead>tr>td:before,div.dataTables_scrollBody>table.dataTable>thead>tr>td:after{display:none}div.dataTables_processing{position:absolute;top:50%;left:50%;width:200px;margin-left:-100px;margin-top:-26px;text-align:center;padding:2px}div.dataTables_processing>div:last-child{position:relative;width:80px;height:15px;margin:1em auto}div.dataTables_processing>div:last-child>div{position:absolute;top:0;width:13px;height:13px;border-radius:50%;background:rgb(13, 110, 253);background:rgb(var(--dt-row-selected));animation-timing-function:cubic-bezier(0, 1, 1, 0)}div.dataTables_processing>div:last-child>div:nth-child(1){left:8px;animation:datatables-loader-1 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(2){left:8px;animation:datatables-loader-2 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(3){left:32px;animation:datatables-loader-2 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(4){left:56px;animation:datatables-loader-3 .6s infinite}@keyframes datatables-loader-1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes datatables-loader-3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes datatables-loader-2{0%{transform:translate(0, 0)}100%{transform:translate(24px, 0)}}table.dataTable.nowrap th,table.dataTable.nowrap td{white-space:nowrap}table.dataTable th.dt-left,table.dataTable td.dt-left{text-align:left}table.dataTable th.dt-center,table.dataTable td.dt-center,table.dataTable td.dataTables_empty{text-align:center}table.dataTable th.dt-right,table.dataTable td.dt-right{text-align:right}table.dataTable th.dt-justify,table.dataTable td.dt-justify{text-align:justify}table.dataTable th.dt-nowrap,table.dataTable td.dt-nowrap{white-space:nowrap}table.dataTable thead th,table.dataTable thead td,table.dataTable tfoot th,table.dataTable tfoot td{text-align:left}table.dataTable thead th.dt-head-left,table.dataTable thead td.dt-head-left,table.dataTable tfoot th.dt-head-left,table.dataTable tfoot td.dt-head-left{text-align:left}table.dataTable thead th.dt-head-center,table.dataTable thead td.dt-head-center,table.dataTable tfoot th.dt-head-center,table.dataTable tfoot td.dt-head-center{text-align:center}table.dataTable thead th.dt-head-right,table.dataTable thead td.dt-head-right,table.dataTable tfoot th.dt-head-right,table.dataTable tfoot td.dt-head-right{text-align:right}table.dataTable thead th.dt-head-justify,table.dataTable thead td.dt-head-justify,table.dataTable tfoot th.dt-head-justify,table.dataTable tfoot td.dt-head-justify{text-align:justify}table.dataTable thead th.dt-head-nowrap,table.dataTable thead td.dt-head-nowrap,table.dataTable tfoot th.dt-head-nowrap,table.dataTable tfoot td.dt-head-nowrap{white-space:nowrap}table.dataTable tbody th.dt-body-left,table.dataTable tbody td.dt-body-left{text-align:left}table.dataTable tbody th.dt-body-center,table.dataTable tbody td.dt-body-center{text-align:center}table.dataTable tbody th.dt-body-right,table.dataTable tbody td.dt-body-right{text-align:right}table.dataTable tbody th.dt-body-justify,table.dataTable tbody td.dt-body-justify{text-align:justify}table.dataTable tbody th.dt-body-nowrap,table.dataTable tbody td.dt-body-nowrap{white-space:nowrap}/*! Bootstrap 5 integration for DataTables\r\n *\r\n * ©2020 SpryMedia Ltd, all rights reserved.\r\n * License: MIT datatables.net/license/mit\r\n */table.dataTable{clear:both;margin-top:6px !important;margin-bottom:6px !important;max-width:none !important;border-collapse:separate !important;border-spacing:0}table.dataTable td,table.dataTable th{-webkit-box-sizing:content-box;box-sizing:content-box}table.dataTable td.dataTables_empty,table.dataTable th.dataTables_empty{text-align:center}table.dataTable.nowrap th,table.dataTable.nowrap td{white-space:nowrap}table.dataTable.table-striped>tbody>tr:nth-of-type(2n+1)>*{box-shadow:none}table.dataTable>tbody>tr{background-color:transparent}table.dataTable>tbody>tr.selected>*{box-shadow:inset 0 0 0 9999px rgb(13, 110, 253);box-shadow:inset 0 0 0 9999px rgb(var(--dt-row-selected));color:rgb(255, 255, 255);color:rgb(var(--dt-row-selected-text))}table.dataTable>tbody>tr.selected a{color:rgb(9, 10, 11);color:rgb(var(--dt-row-selected-link))}table.dataTable.table-striped>tbody>tr.odd>*{box-shadow:inset 0 0 0 9999px rgba(0, 0, 0, 0.05)}table.dataTable.table-striped>tbody>tr.odd.selected>*{box-shadow:inset 0 0 0 9999px rgba(13, 110, 253, 0.95);box-shadow:inset 0 0 0 9999px rgba(var(--dt-row-selected), 0.95)}table.dataTable.table-hover>tbody>tr:hover>*{box-shadow:inset 0 0 0 9999px rgba(0, 0, 0, 0.075)}table.dataTable.table-hover>tbody>tr.selected:hover>*{box-shadow:inset 0 0 0 9999px rgba(13, 110, 253, 0.975);box-shadow:inset 0 0 0 9999px rgba(var(--dt-row-selected), 0.975)}div.dataTables_wrapper div.dataTables_length label{font-weight:normal;text-align:left;white-space:nowrap}div.dataTables_wrapper div.dataTables_length select{width:auto;display:inline-block}div.dataTables_wrapper div.dataTables_filter{text-align:right}div.dataTables_wrapper div.dataTables_filter label{font-weight:normal;white-space:nowrap;text-align:left}div.dataTables_wrapper div.dataTables_filter input{margin-left:.5em;display:inline-block;width:auto}div.dataTables_wrapper div.dataTables_info{padding-top:.85em}div.dataTables_wrapper div.dataTables_paginate{margin:0;white-space:nowrap;text-align:right}div.dataTables_wrapper div.dataTables_paginate ul.pagination{margin:2px 0;white-space:nowrap;justify-content:flex-end}div.dataTables_wrapper div.dt-row{position:relative}div.dataTables_scrollHead table.dataTable{margin-bottom:0 !important}div.dataTables_scrollBody>table{border-top:none;margin-top:0 !important;margin-bottom:0 !important}div.dataTables_scrollBody>table>thead .sorting:before,div.dataTables_scrollBody>table>thead .sorting_asc:before,div.dataTables_scrollBody>table>thead .sorting_desc:before,div.dataTables_scrollBody>table>thead .sorting:after,div.dataTables_scrollBody>table>thead .sorting_asc:after,div.dataTables_scrollBody>table>thead .sorting_desc:after{display:none}div.dataTables_scrollBody>table>tbody tr:first-child th,div.dataTables_scrollBody>table>tbody tr:first-child td{border-top:none}div.dataTables_scrollFoot>.dataTables_scrollFootInner{box-sizing:content-box}div.dataTables_scrollFoot>.dataTables_scrollFootInner>table{margin-top:0 !important;border-top:none}@media screen and (max-width: 767px){div.dataTables_wrapper div.dataTables_length,div.dataTables_wrapper div.dataTables_filter,div.dataTables_wrapper div.dataTables_info,div.dataTables_wrapper div.dataTables_paginate{text-align:center}div.dataTables_wrapper div.dataTables_paginate ul.pagination{justify-content:center !important}}table.dataTable.table-sm>thead>tr>th:not(.sorting_disabled){padding-right:20px}table.table-bordered.dataTable{border-right-width:0}table.table-bordered.dataTable thead tr:first-child th,table.table-bordered.dataTable thead tr:first-child td{border-top-width:1px}table.table-bordered.dataTable th,table.table-bordered.dataTable td{border-left-width:0}table.table-bordered.dataTable th:first-child,table.table-bordered.dataTable th:first-child,table.table-bordered.dataTable td:first-child,table.table-bordered.dataTable td:first-child{border-left-width:1px}table.table-bordered.dataTable th:last-child,table.table-bordered.dataTable th:last-child,table.table-bordered.dataTable td:last-child,table.table-bordered.dataTable td:last-child{border-right-width:1px}table.table-bordered.dataTable th,table.table-bordered.dataTable td{border-bottom-width:1px}div.dataTables_scrollHead table.table-bordered{border-bottom-width:0}div.table-responsive>div.dataTables_wrapper>div.row{margin:0}div.table-responsive>div.dataTables_wrapper>div.row>div[class^=col-]:first-child{padding-left:0}div.table-responsive>div.dataTables_wrapper>div.row>div[class^=col-]:last-child{padding-right:0}', '```html\n<div class=\"container\">\n  <div class=\"card border-danger mb-3\">\n    <div class=\"card-header\">\n      Vulnerabilidades de Seguridad Identificadas\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Posible Cross-Site Scripting (XSS)</h5>\n      <p class=\"card-text\">\n        <strong>Tipo:</strong> XSS (Cross-Site Scripting)\n      </p>\n      <p class=\"card-text\">\n        <strong>Línea Aproximada:</strong> Múltiples líneas que usan colores como:  <code>rgb(13, 110, 253)</code> o  <code>rgb(var(--dt-row-selected))</code>  donde  <code>--dt-row-selected</code>  se define al principio como <code>13, 110, 253</code>.\n      </p>\n      <p class=\"card-text\">\n        <strong>Descripción:</strong>\n        Si bien el código en sí mismo no es directamente vulnerable a XSS porque es CSS, la forma en que se construyen dinámicamente los valores de color con  <code>var(--dt-row-selected)</code> y como este valor es asignado, si dicho valor proviene de una fuente no confiable (por ejemplo, parámetros de URL o entrada del usuario), podría ser manipulado para inyectar CSS malicioso.  Por ejemplo, si  <code>--dt-row-selected</code>  se configurara como  <code>\"expression(alert(\'XSS\'))\"</code>, se ejecutaría JavaScript al aplicar ese estilo.\n      </p>\n      <p class=\"card-text\">\n        <strong>Mitigación:</strong>\n        <ol>\n          <li>\n            <strong>Validar y Sanitizar:</strong>  Si el valor de <code>--dt-row-selected</code>  proviene de una fuente externa, valídalo rigurosamente para asegurar que solo contenga valores numéricos y comas. Evitar cualquier otro carácter, especialmente aquellos que puedan ser interpretados como código CSS o JavaScript.\n          </li>\n          <li>\n            <strong>Evitar el Uso Dinámico de Variables CSS con Datos No Confiables:</strong> Si es posible, evitar la inyección de variables CSS directamente desde datos proporcionados por el usuario.  En su lugar, usar un conjunto predefinido de temas o paletas de colores.\n          </li>\n          <li>\n            <strong>Content Security Policy (CSP):</strong>  Implementar CSP para limitar las fuentes de las que el navegador puede cargar recursos, mitigando el impacto de un posible XSS.\n          </li>\n        </ol>\n      </p>\n      <p class=\"card-text\">\n        <strong>Ejemplo de Sanitización (JavaScript):</strong>\n        ```javascript\n        function sanitizeColor(colorString) {\n          // Permitir solo números y comas\n          const sanitizedColor = colorString.replace(/[^0-9,]/g, \'\');\n          return sanitizedColor;\n        }\n\n        // ...\n        const userInputColor = getUserInput(); // Obtener entrada del usuario\n        const sanitizedInput = sanitizeColor(userInputColor);\n        document.documentElement.style.setProperty(\'--dt-row-selected\', sanitizedInput);\n        ```\n      </p>\n    </div>\n  </div>\n\n  <div class=\"card border-warning mb-3\">\n    <div class=\"card-header\">\n      Métricas de Calidad del Código\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Análisis de Calidad</h5>\n      <p class=\"card-text\">\n        <strong>Complejidad:</strong> El código es extenso y repetitivo, especialmente en las definiciones de estilos para los estados de ordenamiento de las tablas (<code>.sorting</code>, <code>.sorting_asc</code>, <code>.sorting_desc</code>).\n      </p>\n      <p class=\"card-text\">\n        <strong>Duplicación:</strong> Hay una cantidad significativa de duplicación de código en la definición de estilos para diferentes estados y elementos de la tabla.  Por ejemplo, la repetición de reglas para  <code>th</code>  y  <code>td</code>  para cada estado de ordenamiento.\n      </p>\n      <p class=\"card-text\">\n        <strong>Legibilidad:</strong> Aunque el código es funcional, la densidad y la longitud de las reglas CSS dificultan la lectura y el mantenimiento.  El uso excesivo de selectores específicos y la falta de comentarios también contribuyen a esto.\n      </p>\n      <p class=\"card-text\">\n        <strong>Acoplamiento:</strong> El código está fuertemente acoplado a la estructura específica de DataTables y Bootstrap.  Cualquier cambio en estas bibliotecas podría requerir modificaciones significativas en el CSS.  El uso de variables CSS (<code>--dt-row-selected</code>) ayuda a desacoplar un poco el código, pero la lógica de generación de los valores de estas variables debe ser gestionada cuidadosamente.\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\"card-header\">\n      Solución Propuesta\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Mejoras de Seguridad y Calidad del Código</h5>\n      <p class=\"card-text\">\n        <strong>Mitigación de XSS:</strong> Implementar la validación y sanitización mencionadas anteriormente.  Considerar usar una biblioteca de sanitización CSS si se necesita mayor flexibilidad.\n      </p>\n      <p class=\"card-text\">\n        <strong>Refactorización CSS:</strong>\n        <ol>\n          <li>\n            <strong>Uso de Preprocesadores CSS (Sass/Less):</strong>  Utilizar un preprocesador CSS para eliminar la duplicación de código y mejorar la legibilidad.  Se pueden usar variables, mixins y funciones para definir estilos comunes y evitar la repetición.\n          </li>\n          <li>\n            <strong>Organización Modular:</strong>  Dividir el CSS en archivos más pequeños y modulares, cada uno responsable de una parte específica de la interfaz de usuario.  Esto facilita la búsqueda, el mantenimiento y la reutilización del código.\n          </li>\n          <li>\n            <strong>Clases Utilitarias:</strong>  Adoptar un enfoque basado en clases utilitarias para estilos comunes (por ejemplo,  <code>.text-center</code>, <code>.margin-top-sm</code>).  Esto reduce la necesidad de reglas CSS específicas y facilita la consistencia visual.\n          </li>\n          <li>\n            <strong>Comentarios y Documentación:</strong> Agregar comentarios claros y concisos para explicar la función de cada sección del código y el propósito de las variables CSS.\n          </li>\n        </ol>\n      </p>\n      <p class=\"card-text\">\n        <strong>Ejemplo de Refactorización con Sass:</strong>\n        ```sass\n        // Variables\n        $dt-row-selected: 13, 110, 253;\n        $dt-row-selected-text: 255, 255, 255;\n        $dt-row-selected-link: 9, 10, 11;\n\n        // Mixin para estilos de ordenamiento\n        @mixin sorting-styles {\n          cursor: pointer;\n          position: relative;\n          padding-right: 26px;\n\n          &:before,\n          &:after {\n            position: absolute;\n            display: block;\n            opacity: .125;\n            right: 10px;\n            line-height: 9px;\n            font-size: .8em;\n          }\n        }\n\n        table.dataTable {\n          thead > tr {\n            > th.sorting,\n            > th.sorting_asc,\n            > th.sorting_desc,\n            > th.sorting_asc_disabled,\n            > th.sorting_desc_disabled,\n            > td.sorting,\n            > td.sorting_asc,\n            > td.sorting_desc,\n            > td.sorting_asc_disabled,\n            > td.sorting_desc_disabled {\n              @include sorting-styles;\n            }\n          }\n        }\n        ```\n      </p>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:42:14', 6),
(24, 'dataTables.bootstrap5.min.js', 'Detectado por GPT', '/*! DataTables Bootstrap 5 integration\r\n * 2020 SpryMedia Ltd - datatables.net/license\r\n */\r\n!function(t){var n,r;\"function\"==typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(e){return t(e,window,document)}):\"object\"==typeof exports?(n=require(\"jquery\"),r=function(e,a){a.fn.dataTable||require(\"datatables.net\")(e,a)},\"undefined\"!=typeof window?module.exports=function(e,a){return e=e||window,a=a||n(e),r(e,a),t(a,0,e.document)}:(r(window,n),module.exports=t(n,window,window.document))):t(jQuery,window,document)}(function(x,e,r,i){\"use strict\";var o=x.fn.dataTable;return x.extend(!0,o.defaults,{dom:\"<\'row\'<\'col-sm-12 col-md-6\'l><\'col-sm-12 col-md-6\'f>><\'row dt-row\'<\'col-sm-12\'tr>><\'row\'<\'col-sm-12 col-md-5\'i><\'col-sm-12 col-md-7\'p>>\",renderer:\"bootstrap\"}),x.extend(o.ext.classes,{sWrapper:\"dataTables_wrapper dt-bootstrap5\",sFilterInput:\"form-control form-control-sm\",sLengthSelect:\"form-select form-select-sm\",sProcessing:\"dataTables_processing card\",sPageButton:\"paginate_button page-item\"}),o.ext.renderer.pageButton.bootstrap=function(d,e,s,a,l,c){function u(e,a){for(var t,n,r=function(e){e.preventDefault(),x(e.currentTarget).hasClass(\"disabled\")||b.page()==e.data.action||b.page(e.data.action).draw(\"page\")},i=0,o=a.length;i<o;i++)if(t=a[i],Array.isArray(t))u(e,t);else{switch(f=p=\"\",t){case\"ellipsis\":p=\"&#x2026;\",f=\"disabled\";break;case\"first\":p=g.sFirst,f=t+(0<l?\"\":\" disabled\");break;case\"previous\":p=g.sPrevious,f=t+(0<l?\"\":\" disabled\");break;case\"next\":p=g.sNext,f=t+(l<c-1?\"\":\" disabled\");break;case\"last\":p=g.sLast,f=t+(l<c-1?\"\":\" disabled\");break;default:p=t+1,f=l===t?\"active\":\"\"}p&&(n=-1!==f.indexOf(\"disabled\"),n=x(\"<li>\",{class:m.sPageButton+\" \"+f,id:0===s&&\"string\"==typeof t?d.sTableId+\"_\"+t:null}).append(x(\"<a>\",{href:n?null:\"#\",\"aria-controls\":d.sTableId,\"aria-disabled\":n?\"true\":null,\"aria-label\":w[t],\"aria-role\":\"link\",\"aria-current\":\"active\"===f?\"page\":null,\"data-dt-idx\":t,tabindex:d.iTabIndex,class:\"page-link\"}).html(p)).appendTo(e),d.oApi._fnBindAction(n,{action:t},r))}}var p,f,t,b=new o.Api(d),m=d.oClasses,g=d.oLanguage.oPaginate,w=d.oLanguage.oAria.paginate||{},e=x(e);try{t=e.find(r.activeElement).data(\"dt-idx\")}catch(e){}var n=e.children(\"ul.pagination\");n.length?n.empty():n=e.html(\"<ul/>\").children(\"ul\").addClass(\"pagination\"),u(n,a),t!==i&&e.find(\"[data-dt-idx=\"+t+\"]\").trigger(\"focus\")},o});', '```html\n<div class=\'container\'>\n\n  <div class=\'card border-danger\'>\n    <div class=\'card-header\'>\n      Análisis de Vulnerabilidades de Seguridad\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Posible Vulnerabilidad XSS (Cross-Site Scripting)</h5>\n      <p class=\'card-text\'>\n        <b>Tipo de Vulnerabilidad:</b> XSS (Cross-Site Scripting)\n      </p>\n      <p class=\'card-text\'>\n        <b>Línea Aproximada:</b>  En la función `o.ext.renderer.pageButton.bootstrap`, la línea que construye el enlace de paginación:\n        <pre><code>n=x(\"<li>\",{class:m.sPageButton+\" \"+f,id:0===s&&\"string\"==typeof t?d.sTableId+\"_\"+t:null}).append(x(\"<a>\",{href:n?null:\"#\",\"aria-controls\":d.sTableId,\"aria-disabled\":n?\"true\":null,\"aria-label\":w[t],\"aria-role\":\"link\",\"aria-current\":\"active\"===f?\"page\":null,\"data-dt-idx\":t,tabindex:d.iTabIndex,class:\"page-link\"}).html(p)).appendTo(e)</code></pre>\n        El problema radica en la forma en que se construye la etiqueta `<a>` con `html(p)`.  Si la variable `p` (que proviene de `g.sFirst`, `g.sPrevious`, `g.sNext`, `g.sLast` o directamente del número de página) contiene código HTML malicioso, se insertará directamente en el DOM, permitiendo la ejecución de scripts arbitrarios.  Particularmente, los valores de `g.sFirst`, `g.sPrevious`, `g.sNext`, `g.sLast` provienen de `d.oLanguage.oPaginate` que a su vez viene de la configuración del usuario.\n      </p>\n      <p class=\'card-text\'>\n        <b>Mitigación:</b>\n        En lugar de usar `.html(p)` para insertar el contenido del enlace, se debe usar `.text(p)`.  Esto escapará cualquier carácter HTML en `p`, previniendo la ejecución de scripts maliciosos.\n        <pre><code>n=x(\"<li>\",{class:m.sPageButton+\" \"+f,id:0===s&&\"string\"==typeof t?d.sTableId+\"_\"+t:null}).append(x(\"<a>\",{href:n?null:\"#\",\"aria-controls\":d.sTableId,\"aria-disabled\":n?\"true\":null,\"aria-label\":w[t],\"aria-role\":\"link\",\"aria-current\":\"active\"===f?\"page\":null,\"data-dt-idx\":t,tabindex:d.iTabIndex,class:\"page-link\"}).text(p)).appendTo(e)</code></pre>\n        Esta solución garantiza que el contenido insertado sea tratado como texto plano. Se deben validar y sanear las variables de configuración para evitar que contengan código malicioso.\n\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning\'>\n    <div class=\'card-header\'>\n      Análisis de Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Métricas de Calidad del Código</h5>\n      <p class=\'card-text\'>\n        <b>Complejidad:</b> La función `o.ext.renderer.pageButton.bootstrap` es bastante compleja debido a la lógica de generación de los botones de paginación. La anidación de condicionales y la manipulación del DOM la hacen difícil de entender y mantener.\n      </p>\n      <p class=\'card-text\'>\n        <b>Legibilidad:</b> La legibilidad podría mejorarse dividiendo la función `o.ext.renderer.pageButton.bootstrap` en funciones más pequeñas y específicas.  Los nombres de las variables (ej. `d`, `e`, `s`, `a`, `l`, `c`, `u`, `p`, `f`, `t`, `b`, `m`, `g`, `w`, `n`) son poco descriptivos, lo que dificulta la comprensión del código.\n      </p>\n      <p class=\'card-text\'>\n        <b>Acoplamiento:</b> El código está fuertemente acoplado a jQuery y a la estructura interna de DataTables.  Esto dificulta su reutilización en otros contextos y hace que sea más sensible a los cambios en DataTables.\n      </p>\n      <p class=\'card-text\'>\n        <b>Duplicación:</b> No se observa duplicación significativa en el fragmento de código proporcionado. Sin embargo, en proyectos más grandes que usan DataTables, es posible que haya cierta duplicación en la configuración y personalización.\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header\'>\n      Solución Propuesta (incluyendo mejoras de calidad)\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Mitigación de XSS y Mejora de la Calidad del Código</h5>\n      <ol>\n        <li>\n          <b>Mitigación de XSS:</b> Reemplazar `.html(p)` con `.text(p)` en la construcción del enlace de paginación.\n        </li>\n        <li>\n          <b>Refactorización de la Función `o.ext.renderer.pageButton.bootstrap`:</b>\n          <ul>\n            <li>\n              Dividir la función en funciones más pequeñas y específicas, como `createPageButton`, `updateButtonState`, etc.\n            </li>\n            <li>\n              Usar nombres de variables más descriptivos.  Por ejemplo, en lugar de `d`, usar `dataTableSettings`. En lugar de `p`, usar `pageLabel`.\n            </li>\n          </ul>\n        </li>\n        <li>\n          <b>Reducción del Acoplamiento:</b>\n          <ul>\n            <li>\n              Crear una capa de abstracción entre el código y jQuery.  Esto facilitaría la migración a otras bibliotecas en el futuro.\n            </li>\n          </ul>\n        </li>\n        <li>\n          <b>Validación de la Configuración:</b> Validar y sanear las variables de configuración, especialmente aquellas que se utilizan para generar la interfaz de usuario (como `g.sFirst`, `g.sPrevious`, `g.sNext`, `g.sLast`), para asegurarse de que no contengan código malicioso.\n        </li>\n      </ol>\n      <p>Ejemplo de código refactorizado (parcial):</p>\n       <pre><code>\nfunction createPageButton(dataTableSettings, pageLabel, buttonClass, action, ariaLabel) {\n  const isDisabled = buttonClass.includes(\"disabled\");\n  const button = x(\"<li>\", {\n    class: dataTableSettings.oClasses.sPageButton + \" \" + buttonClass,\n  }).append(\n    x(\"<a>\", {\n      href: isDisabled ? null : \"#\",\n      \"aria-controls\": dataTableSettings.sTableId,\n      \"aria-disabled\": isDisabled ? \"true\" : null,\n      \"aria-label\": ariaLabel,\n      \"aria-role\": \"link\",\n      \"aria-current\": buttonClass === \"active\" ? \"page\" : null,\n      \"data-dt-idx\": action,\n      tabindex: dataTableSettings.iTabIndex,\n      class: \"page-link\",\n    }).text(pageLabel)  // Use .text() to prevent XSS\n  );\n\n  dataTableSettings.oApi._fnBindAction(button, { action: action }, function (e) {\n    e.preventDefault();\n    if (!x(e.currentTarget).hasClass(\"disabled\")) {\n      const api = new o.Api(dataTableSettings);\n      api.page(action).draw(\"page\");\n    }\n  });\n\n  return button;\n}\n       </code></pre>\n    </div>\n  </div>\n\n</div>\n```\n', '2025-05-20 01:42:55', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(25, 'jquery-3.6.0.min.js', 'Detectado por GPT', '/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */\r\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id=\'\"+S+\"\'></a><select id=\'\"+S+\"-\\r\\\\\' msallowcapture=\'\'><option selected=\'\'></option></select>\",e.querySelectorAll(\"[msallowcapture^=\'\']\").length&&v.push(\"[*^$]=\"+M+\"*(?:\'\'|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name=\'\']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:\'\'|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!=\'\']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(j).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href=\'#\'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple=\'multiple\'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^([^.]*)(?:\\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function Ee(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Ne=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function je(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function De(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function qe(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(Ne,\"\"),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join(\"|\"),\"i\");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=[\"Webkit\",\"Moz\",\"ms\"],$e=E.createElement(\"div\").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Ge={letterSpacing:\"0\",fontWeight:\"400\"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Qe(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=We(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),\"normal\"===i&&t in Ge&&(i=Ge[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,\"marginLeft\"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st(\"show\"),slideUp:st(\"hide\"),slideToggle:st(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement(\"input\"),nt=E.createElement(\"select\").appendChild(E.createElement(\"option\")),tt.type=\"checkbox\",y.checkOn=\"\"!==tt.value,y.optSelected=nt.selected,(tt=E.createElement(\"input\")).value=\"t\",tt.type=\"radio\",y.radioValue=\"t\"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}', '```html\n<div class=\'container\'>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-danger text-white\'>\n      Vulnerabilidades de Seguridad Encontradas\n    </div>\n    <div class=\'card-body\'>\n\n      <div class=\'card border-warning mb-3\'>\n        <div class=\'card-header\'>\n          Vulnerabilidad XSS (Cross-Site Scripting)\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Descripción</h5>\n          <p class=\'card-text\'>\n            El código utiliza expresiones regulares y manipulaciones de cadenas para procesar selectores CSS, lo que puede ser vulnerable a XSS si no se sanitizan correctamente las entradas del usuario.  Si un atacante puede inyectar código malicioso en un selector CSS (por ejemplo, a través de un parámetro GET en la URL o un campo de formulario), este código podría ser ejecutado por la función `se.error` o dentro de las funciones de manipulación del DOM.\n          </p>\n          <h5 class=\'card-title\'>Línea Aproximada</h5>\n          <p class=\'card-text\'>\n            La vulnerabilidad se manifiesta en las funciones relacionadas con el manejo de selectores CSS, especialmente en `se.error` y la manipulación de cadenas en las funciones `ATTR`, `PSEUDO` etc. Por ejemplo, la función `se.error` podría ejecutar código inyectado:\n            <pre><code class=\"language-javascript\">  se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)}</code></pre>\n          </p>\n          <h5 class=\'card-title\'>Mitigación</h5>\n          <p class=\'card-text\'>\n            <ul>\n              <li><b>Sanitizar Entradas:</b>  Validar y escapar rigurosamente todas las entradas de usuario que puedan influir en los selectores CSS. Utilizar funciones de escape seguras para HTML y JavaScript.</li>\n              <li><b>Content Security Policy (CSP):</b> Implementar CSP para restringir las fuentes de las que el navegador puede cargar scripts.  Esto puede prevenir la ejecución de scripts inyectados por un atacante.</li>\n              <li><b>Validación de Selectores:</b> Utilizar una lista blanca de caracteres permitidos en los selectores CSS y rechazar cualquier entrada que no cumpla con estos criterios.</li>\n            </ul>\n          </p>\n          <h5 class=\'card-title\'>Ejemplo de Ataque</h5>\n            <p class=\'card-text\'>Un ejemplo básico podría ser una URL que contiene un selector malicioso: `ejemplo.com#<img src=x onerror=alert(1)>`.  Si jQuery utiliza este selector sin sanitizarlo adecuadamente, el código `alert(1)` podría ser ejecutado.</p>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-info text-white\'>\n      Métricas de Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n\n      <div class=\'card border-secondary mb-3\'>\n        <div class=\'card-header\'>\n          Complejidad Ciclomática\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Descripción</h5>\n          <p class=\'card-text\'>\n            La complejidad ciclomática es alta en varias funciones, especialmente en la función `d` (definida por `var d = function(n){...}`), que contiene la lógica del motor de selección Sizzle.  Esta función tiene múltiples condicionales anidados y bucles, lo que la hace difícil de entender y mantener.\n          </p>\n          <h5 class=\'card-title\'>Mejora</h5>\n          <p class=\'card-text\'>\n            <ul>\n              <li><b>Refactorización:</b> Dividir las funciones complejas en funciones más pequeñas y manejables.  Utilizar nombres descriptivos para cada función.</li>\n              <li><b>Patrones de Diseño:</b> Aplicar patrones de diseño como Strategy o Template Method para simplificar la lógica condicional.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-secondary mb-3\'>\n        <div class=\'card-header\'>\n          Duplicación de Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Descripción</h5>\n          <p class=\'card-text\'>\n            Existe cierta duplicación en las funciones de manipulación del DOM y en el manejo de eventos.  Por ejemplo, las funciones para agregar y eliminar clases comparten lógica similar.\n          </p>\n          <h5 class=\'card-title\'>Mejora</h5>\n          <p class=\'card-text\'>\n            <ul>\n              <li><b>Extracción de Funciones:</b> Identificar patrones de código duplicado y extraerlos en funciones reutilizables.</li>\n              <li><b>Abstracción:</b> Crear funciones de nivel superior que encapsulen la lógica común y acepten parámetros para personalizar el comportamiento.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-secondary mb-3\'>\n        <div class=\'card-header\'>\n          Legibilidad\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Descripción</h5>\n          <p class=\'card-text\'>\n            La legibilidad se ve afectada por el uso de nombres de variables abreviados (como `e`, `t`, `n`, `r`, `i`, `o`, `a`, `s`, `u`, `l`, `c`, `f`, `p`, `d`, `h`, `g`, `v`, `y`, `m`, `x`, `b`, `w`, `T`, `C`, `E`, `S`) y la falta de comentarios en algunas secciones críticas del código. La gran función `d` es un ejemplo notable de baja legibilidad.\n          </p>\n          <h5 class=\'card-title\'>Mejora</h5>\n          <p class=\'card-text\'>\n            <ul>\n              <li><b>Nombres Descriptivos:</b> Utilizar nombres de variables que reflejen su propósito.  Por ejemplo, en lugar de `e`, usar `element` o `event`.</li>\n              <li><b>Comentarios:</b> Agregar comentarios para explicar la lógica de las funciones complejas y las decisiones de diseño.</li>\n              <li><b>Formato Consistente:</b> Asegurarse de que el código esté formateado de manera consistente con sangrías y espacios adecuados.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-secondary mb-3\'>\n        <div class=\'card-header\'>\n          Acoplamiento\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Descripción</h5>\n          <p class=\'card-text\'>\n            El acoplamiento es relativamente alto debido a la gran cantidad de dependencias internas entre las funciones. Muchas funciones acceden y modifican directamente el estado global y las propiedades internas de otras funciones.\n          </p>\n          <h5 class=\'card-title\'>Mejora</h5>\n          <p class=\'card-text\'>\n            <ul>\n              <li><b>Modularización:</b> Dividir el código en módulos independientes con interfaces bien definidas.  Utilizar inyección de dependencias para reducir el acoplamiento.</li>\n              <li><b>Encapsulamiento:</b> Limitar el acceso directo al estado interno de los objetos y utilizar métodos para interactuar con ellos.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header bg-success text-white\'>\n      Solución Propuesta\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Resumen de Mejoras</h5>\n      <p class=\'card-text\'>\n        La solución propuesta aborda las vulnerabilidades de seguridad y las deficiencias de calidad del código identificadas mediante las siguientes acciones:\n        <ol>\n          <li><b>Sanitización de Entradas:</b> Implementar una rigurosa validación y escape de todas las entradas de usuario que influyen en los selectores CSS.</li>\n          <li><b>Content Security Policy (CSP):</b> Establecer una política de seguridad de contenido para restringir las fuentes de scripts permitidas.</li>\n          <li><b>Refactorización:</b> Dividir funciones complejas en unidades más pequeñas y manejables.</li>\n          <li><b>Modularización:</b> Organizar el código en módulos independientes con interfaces claras.</li>\n          <li><b>Legibilidad:</b> Utilizar nombres de variables descriptivos y agregar comentarios para explicar la lógica del código.</li>\n        </ol>\n      </p>\n    </div>\n  </div>\n\n</div>\n```', '2025-05-20 01:43:24', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(26, 'jquery.dataTables.min.js', 'Detectado por GPT', '/*! DataTables 1.13.4\r\n * ©2008-2023 SpryMedia Ltd - datatables.net/license\r\n */\r\n!function(n){\"use strict\";var a;\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return n(t,window,document)}):\"object\"==typeof exports?(a=require(\"jquery\"),\"undefined\"!=typeof window?module.exports=function(t,e){return t=t||window,e=e||a(t),n(e,t,t.document)}:n(a,window,window.document)):window.DataTable=n(jQuery,window,document)}(function(P,j,y,N){\"use strict\";function d(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null}function l(t,e,n){var a=typeof t,r=\"string\"==a;return\"number\"==a||\"bigint\"==a||!!h(t)||(e&&r&&(t=G(t,e)),n&&r&&(t=t.replace(q,\"\")),!isNaN(parseFloat(t))&&isFinite(t))}function a(t,e,n){var a;return!!h(t)||(h(a=t)||\"string\"==typeof a)&&!!l(t.replace(V,\"\"),e,n)||null}function m(t,e,n,a){var r=[],o=0,i=e.length;if(a!==N)for(;o<i;o++)t[e[o]][n]&&r.push(t[e[o]][n][a]);else for(;o<i;o++)r.push(t[e[o]][n]);return r}function f(t,e){var n,a=[];e===N?(e=0,n=t):(n=e,e=t);for(var r=e;r<n;r++)a.push(r);return a}function _(t){for(var e=[],n=0,a=t.length;n<a;n++)t[n]&&e.push(t[n]);return e}function s(t,e){return-1!==this.indexOf(t,e=e===N?0:e)}var p,e,t,w=function(t,v){if(w.factory(t,v))return w;if(this instanceof w)return P(t).DataTable(v);v=t,this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new B(t?ge(this[p.iApiIndex]):this)},this.fnAddData=function(t,e){var n=this.api(!0),t=(Array.isArray(t)&&(Array.isArray(t[0])||P.isPlainObject(t[0]))?n.rows:n.row).add(t);return e!==N&&!e||n.draw(),t.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],a=n.oScroll;t===N||t?e.draw(!1):\"\"===a.sX&&\"\"===a.sY||Qt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();t!==N&&!t||e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var a=this.api(!0),t=a.rows(t),r=t.settings()[0],o=r.aoData[t[0][0]];return t.remove(),e&&e.call(this,r,o),n!==N&&!n||a.draw(),o},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,a,r,o){var i=this.api(!0);(null===e||e===N?i:i.column(e)).search(t,n,a,o),i.draw()},this.fnGetData=function(t,e){var n,a=this.api(!0);return t!==N?(n=t.nodeName?t.nodeName.toLowerCase():\"\",e!==N||\"td\"==n||\"th\"==n?a.cell(t,e).data():a.row(t).data()||null):a.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==N?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return\"TR\"==n?e.row(t).index():\"TD\"==n||\"TH\"==n?[(n=e.cell(t).index()).row,n.columnVisible,n.column]:null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){t=this.api(!0).page(t);e!==N&&!e||t.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e);n!==N&&!n||t.columns.adjust().draw()},this.fnSettings=function(){return ge(this[p.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,a,r){var o=this.api(!0);return(n===N||null===n?o.row(e):o.cell(e,n)).data(t),r!==N&&!r||o.columns.adjust(),a!==N&&!a||o.draw(),0},this.fnVersionCheck=p.fnVersionCheck;var e,y=this,D=v===N,_=this.length;for(e in D&&(v={}),this.oApi=this.internal=p.internal,w.ext.internal)e&&(this[e]=Ge(e));return this.each(function(){var r=1<_?be({},v,!0):v,o=0,t=this.getAttribute(\"id\"),i=!1,e=w.defaults,l=P(this);if(\"table\"!=this.nodeName.toLowerCase())W(null,0,\"Non-table node initialisation (\"+this.nodeName+\")\",2);else{K(e),Q(e.column),C(e,e,!0),C(e.column,e.column,!0),C(e,P.extend(r,l.data()),!0);for(var n=w.settings,o=0,s=n.length;o<s;o++){var a=n[o];if(a.nTable==this||a.nTHead&&a.nTHead.parentNode==this||a.nTFoot&&a.nTFoot.parentNode==this){var u=(r.bRetrieve!==N?r:e).bRetrieve,c=(r.bDestroy!==N?r:e).bDestroy;if(D||u)return a.oInstance;if(c){a.oInstance.fnDestroy();break}return void W(a,0,\"Cannot reinitialise DataTable\",3)}if(a.sTableId==this.id){n.splice(o,1);break}}null!==t&&\"\"!==t||(t=\"DataTables_Table_\"+w.ext._unique++,this.id=t);var f,d,h=P.extend(!0,{},w.models.oSettings,{sDestroyWidth:l[0].style.width,sInstance:t,sTableId:t}),p=(h.nTable=this,h.oApi=y.internal,h.oInit=r,n.push(h),h.oInstance=1===y.length?y:l.dataTable(),K(r),Z(r.oLanguage),r.aLengthMenu&&!r.iDisplayLength&&(r.iDisplayLength=(Array.isArray(r.aLengthMenu[0])?r.aLengthMenu[0]:r.aLengthMenu)[0]),r=be(P.extend(!0,{},e),r),F(h.oFeatures,r,[\"bPaginate\",\"bLengthChange\",\"bFilter\",\"bSort\",\"bSortMulti\",\"bInfo\",\"bProcessing\",\"bAutoWidth\",\"bSortClasses\",\"bServerSide\",\"bDeferRender\"]),F(h,r,[\"asStripeClasses\",\"ajax\",\"fnServerData\",\"fnFormatNumber\",\"sServerMethod\",\"aaSorting\",\"aaSortingFixed\",\"aLengthMenu\",\"sPaginationType\",\"sAjaxSource\",\"sAjaxDataProp\",\"iStateDuration\",\"sDom\",\"bSortCellsTop\",\"iTabIndex\",\"fnStateLoadCallback\",\"fnStateSaveCallback\",\"renderer\",\"searchDelay\",\"rowId\",[\"iCookieDuration\",\"iStateDuration\"],[\"oSearch\",\"oPreviousSearch\"],[\"aoSearchCols\",\"aoPreSearchCols\"],[\"iDisplayLength\",\"_iDisplayLength\"]]),F(h.oScroll,r,[[\"sScrollX\",\"sX\"],[\"sScrollXInner\",\"sXInner\"],[\"sScrollY\",\"sY\"],[\"bScrollCollapse\",\"bCollapse\"]]),F(h.oLanguage,r,\"fnInfoCallback\"),L(h,\"aoDrawCallback\",r.fnDrawCallback,\"user\"),L(h,\"aoServerParams\",r.fnServerParams,\"user\"),L(h,\"aoStateSaveParams\",r.fnStateSaveParams,\"user\"),L(h,\"aoStateLoadParams\",r.fnStateLoadParams,\"user\"),L(h,\"aoStateLoaded\",r.fnStateLoaded,\"user\"),L(h,\"aoRowCallback\",r.fnRowCallback,\"user\"),L(h,\"aoRowCreatedCallback\",r.fnCreatedRow,\"user\"),L(h,\"aoHeaderCallback\",r.fnHeaderCallback,\"user\"),L(h,\"aoFooterCallback\",r.fnFooterCallback,\"user\"),L(h,\"aoInitComplete\",r.fnInitComplete,\"user\"),L(h,\"aoPreDrawCallback\",r.fnPreDrawCallback,\"user\"),h.rowIdFn=A(r.rowId),tt(h),h.oClasses),g=(P.extend(p,w.ext.classes,r.oClasses),l.addClass(p.sTable),h.iInitDisplayStart===N&&(h.iInitDisplayStart=r.iDisplayStart,h._iDisplayStart=r.iDisplayStart),null!==r.iDeferLoading&&(h.bDeferLoading=!0,t=Array.isArray(r.iDeferLoading),h._iRecordsDisplay=t?r.iDeferLoading[0]:r.iDeferLoading,h._iRecordsTotal=t?r.iDeferLoading[1]:r.iDeferLoading),h.oLanguage),t=(P.extend(!0,g,r.oLanguage),g.sUrl?(P.ajax({dataType:\"json\",url:g.sUrl,success:function(t){C(e.oLanguage,t),Z(t),P.extend(!0,g,t,h.oInit.oLanguage),R(h,null,\"i18n\",[h]),Jt(h)},error:function(){Jt(h)}}),i=!0):R(h,null,\"i18n\",[h]),null===r.asStripeClasses&&(h.asStripeClasses=[p.sStripeOdd,p.sStripeEven]),h.asStripeClasses),b=l.children(\"tbody\").find(\"tr\").eq(0),m=(-1!==P.inArray(!0,P.map(t,function(t,e){return b.hasClass(t)}))&&(P(\"tbody tr\",this).removeClass(t.join(\" \")),h.asDestroyStripes=t.slice()),[]),t=this.getElementsByTagName(\"thead\");if(0!==t.length&&(wt(h.aoHeader,t[0]),m=Ct(h)),null===r.aoColumns)for(f=[],o=0,s=m.length;o<s;o++)f.push(null);else f=r.aoColumns;for(o=0,s=f.length;o<s;o++)nt(h,m?m[o]:null);st(h,r.aoColumnDefs,f,function(t,e){at(h,t,e)}),b.length&&(d=function(t,e){return null!==t.getAttribute(\"data-\"+e)?e:null},P(b[0]).children(\"th, td\").each(function(t,e){var n,a=h.aoColumns[t];a||W(h,0,\"Incorrect column count\",18),a.mData===t&&(n=d(e,\"sort\")||d(e,\"order\"),e=d(e,\"filter\")||d(e,\"search\"),null===n&&null===e||(a.mData={_:t+\".display\",sort:null!==n?t+\".@data-\"+n:N,type:null!==n?t+\".@data-\"+n:N,filter:null!==e?t+\".@data-\"+e:N},a._isArrayHost=!0,at(h,t)))}));var S=h.oFeatures,t=function(){if(r.aaSorting===N){var t=h.aaSorting;for(o=0,s=t.length;o<s;o++)t[o][1]=h.aoColumns[o].asSorting[0]}ce(h),S.bSort&&L(h,\"aoDrawCallback\",function(){var t,n;h.bSorted&&(t=I(h),n={},P.each(t,function(t,e){n[e.src]=e.dir}),R(h,null,\"order\",[h,t,n]),le(h))}),L(h,\"aoDrawCallback\",function(){(h.bSorted||\"ssp\"===E(h)||S.bDeferRender)&&ce(h)},\"sc\");var e=l.children(\"caption\").each(function(){this._captionSide=P(this).css(\"caption-side\")}),n=l.children(\"thead\"),a=(0===n.length&&(n=P(\"<thead/>\").appendTo(l)),h.nTHead=n[0],l.children(\"tbody\")),n=(0===a.length&&(a=P(\"<tbody/>\").insertAfter(n)),h.nTBody=a[0],l.children(\"tfoot\"));if(0===(n=0===n.length&&0<e.length&&(\"\"!==h.oScroll.sX||\"\"!==h.oScroll.sY)?P(\"<tfoot/>\").appendTo(l):n).length||0===n.children().length?l.addClass(p.sNoFooter):0<n.length&&(h.nTFoot=n[0],wt(h.aoFooter,h.nTFoot)),r.aaData)for(o=0;o<r.aaData.length;o++)x(h,r.aaData[o]);else!h.bDeferLoading&&\"dom\"!=E(h)||ut(h,P(h.nTBody).children(\"tr\"));h.aiDisplay=h.aiDisplayMaster.slice(),!(h.bInitialised=!0)===i&&Jt(h)};L(h,\"aoDrawCallback\",de,\"state_save\"),r.bStateSave?(S.bStateSave=!0,he(h,0,t)):t()}}),y=null,this},c={},U=/[\\r\\n\\u2028]/g,V=/<.*?>/g,X=/^\\d{2,4}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{1,2}([T ]{1}\\d{1,2}[:\\.]\\d{2}([\\.:]\\d{2})?)?$/,J=new RegExp(\"(\\\\\"+[\"/\",\".\",\"*\",\"+\",\"?\",\"|\",\"(\",\")\",\"[\",\"]\",\"{\",\"}\",\"\\\\\",\"$\",\"^\",\"-\"].join(\"|\\\\\")+\")\",\"g\"),q=/[\'\\u00A0,$£€¥%\\u2009\\u202F\\u20BD\\u20a9\\u20BArfkɃΞ]/gi,h=function(t){return!t||!0===t||\"-\"===t},G=function(t,e){return c[e]||(c[e]=new RegExp(Ot(e),\"g\")),\"string\"==typeof t&&\".\"!==e?t.replace(/\\./g,\"\").replace(c[e],\".\"):t},H=function(t,e,n){var a=[],r=0,o=t.length;if(n!==N)for(;r<o;r++)t[r]&&t[r][e]&&a.push(t[r][e][n]);else for(;r<o;r++)t[r]&&a.push(t[r][e]);return a},$=function(t){if(!(t.length<2))for(var e=t.slice().sort(),n=e[0],a=1,r=e.length;a<r;a++){if(e[a]===n)return!1;n=e[a]}return!0},z=function(t){if($(t))return t.slice();var e,n,a,r=[],o=t.length,i=0;t:for(n=0;n<o;n++){for(e=t[n],a=0;a<i;a++)if(r[a]===e)continue t;r.push(e),i++}return r},Y=function(t,e){if(Array.isArray(e))for(var n=0;n<e.length;n++)Y(t,e[n]);else t.push(e);return t};function i(n){var a,r,o={};P.each(n,function(t,e){(a=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!==\"a aa ai ao as b fn i m o s \".indexOf(a[1]+\" \")&&(r=t.replace(a[0],a[2].toLowerCase()),o[r]=t,\"o\"===a[1])&&i(n[t])}),n._hungarianMap=o}function C(n,a,r){var o;n._hungarianMap||i(n),P.each(a,function(t,e){(o=n._hungarianMap[t])===N||!r&&a[o]!==N||(\"o\"===o.charAt(0)?(a[o]||(a[o]={}),P.extend(!0,a[o],a[t]),C(n[o],a[o],r)):a[o]=a[t])})}function Z(t){var e,n=w.defaults.oLanguage,a=n.sDecimal;a&&Me(a),t&&(e=t.sZeroRecords,!t.sEmptyTable&&e&&\"No data available in table\"===n.sEmptyTable&&F(t,t,\"sZeroRecords\",\"sEmptyTable\"),!t.sLoadingRecords&&e&&\"Loading...\"===n.sLoadingRecords&&F(t,t,\"sZeroRecords\",\"sLoadingRecords\"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),e=t.sDecimal)&&a!==e&&Me(e)}Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),Array.prototype.includes||(Array.prototype.includes=s),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")}),String.prototype.includes||(String.prototype.includes=s),w.util={throttle:function(a,t){var r,o,i=t!==N?t:200;return function(){var t=this,e=+new Date,n=arguments;r&&e<r+i?(clearTimeout(o),o=setTimeout(function(){r=N,a.apply(t,n)},i)):(r=e,a.apply(t,n))}},escapeRegex:function(t){return t.replace(J,\"\\\\$1\")},set:function(a){var d;return P.isPlainObject(a)?w.util.set(a._):null===a?function(){}:\"function\"==typeof a?function(t,e,n){a(t,\"set\",e,n)}:\"string\"!=typeof a||-1===a.indexOf(\".\")&&-1===a.indexOf(\"[\")&&-1===a.indexOf(\"(\")?function(t,e){t[a]=e}:(d=function(t,e,n){for(var a,r,o,i,l=dt(n),n=l[l.length-1],s=0,u=l.length-1;s<u;s++){if(\"__proto__\"===l[s]||\"constructor\"===l[s])throw new Error(\"Cannot set prototype values\");if(a=l[s].match(ft),r=l[s].match(g),a){if(l[s]=l[s].replace(ft,\"\"),t[l[s]]=[],(a=l.slice()).splice(0,s+1),i=a.join(\".\"),Array.isArray(e))for(var c=0,f=e.length;c<f;c++)d(o={},e[c],i),t[l[s]].push(o);else t[l[s]]=e;return}r&&(l[s]=l[s].replace(g,\"\"),t=t[l[s]](e)),null!==t[l[s]]&&t[l[s]]!==N||(t[l[s]]={}),t=t[l[s]]}n.match(g)?t[n.replace(g,\"\")](e):t[n.replace(ft,\"\")]=e},function(t,e){return d(t,e,a)})},get:function(r){var o,d;return P.isPlainObject(r)?(o={},P.each(r,function(t,e){e&&(o[t]=w.util.get(e))}),function(t,e,n,a){var r=o[e]||o._;return r!==N?r(t,e,n,a):t}):null===r?function(t){return t}:\"function\"==typeof r?function(t,e,n,a){return r(t,e,n,a)}:\"string\"!=typeof r||-1===r.indexOf(\".\")&&-1===r.indexOf(\"[\")&&-1===r.indexOf(\"(\")?function(t,e){return t[r]}:(d=function(t,e,n){var a,r,o;if(\"\"!==n)for(var i=dt(n),l=0,s=i.length;l<s;l++){if(f=i[l].match(ft),a=i[l].match(g),f){if(i[l]=i[l].replace(ft,\"\"),\"\"!==i[l]&&(t=t[i[l]]),r=[],i.splice(0,l+1),o=i.join(\".\"),Array.isArray(t))for(var u=0,c=t.length;u<c;u++)r.push(d(t[u],e,o));var f=f[0].substring(1,f[0].length-1);t=\"\"===f?r:r.join(f);break}if(a)i[l]=i[l].replace(g,\"\"),t=t[i[l]]();else{if(null===t||t[i[l]]===N)return N;t=t[i[l]]}}return t},function(t,e){return d(t,e,r)})}};var r=function(t,e,n){t[e]!==N&&(t[n]=t[e])};function K(t){r(t,\"ordering\",\"bSort\"),r(t,\"orderMulti\",\"bSortMulti\"),r(t,\"orderClasses\",\"bSortClasses\"),r(t,\"orderCellsTop\",\"bSortCellsTop\"),r(t,\"order\",\"aaSorting\"),r(t,\"orderFixed\",\"aaSortingFixed\"),r(t,\"paging\",\"bPaginate\"),r(t,\"pagingType\",\"sPaginationType\"),r(t,\"pageLength\",\"iDisplayLength\"),r(t,\"searching\",\"bFilter\"),\"boolean\"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?\"100%\":\"\"),\"boolean\"==typeof t.scrollX&&(t.scrollX=t.scrollX?\"100%\":\"\");var e=t.aoSearchCols;if(e)for(var n=0,a=e.length;n<a;n++)e[n]&&C(w.models.oSearch,e[n])}function Q(t){r(t,\"orderable\",\"bSortable\"),r(t,\"orderData\",\"aDataSort\"),r(t,\"orderSequence\",\"asSorting\"),r(t,\"orderDataType\",\"sortDataType\");var e=t.aDataSort;\"number\"!=typeof e||Array.isArray(e)||(t.aDataSort=[e])}function tt(t){var e,n,a,r;w.__browser||(w.__browser=e={},r=(a=(n=P(\"<div/>\").css({position:\"fixed\",top:0,left:-1*P(j).scrollLeft(),height:1,width:1,overflow:\"hidden\"}).append(P(\"<div/>\").css({position:\"absolute\",top:1,left:1,width:100,overflow:\"scroll\"}).append(P(\"<div/>\").css({width:\"100%\",height:10}))).appendTo(\"body\")).children()).children(),e.barWidth=a[0].offsetWidth-a[0].clientWidth,e.bScrollOversize=100===r[0].offsetWidth&&100!==a[0].clientWidth,e.bScrollbarLeft=1!==Math.round(r.offset().left),e.bBounding=!!n[0].getBoundingClientRect().width,n.remove()),P.extend(t.oBrowser,w.__browser),t.oScroll.iBarWidth=w.__browser.barWidth}function et(t,e,n,a,r,o){var i,l=a,s=!1;for(n!==N&&(i=n,s=!0);l!==r;)t.hasOwnProperty(l)&&(i=s?e(i,t[l],l,t):t[l],s=!0,l+=o);return i}function nt(t,e){var n=w.defaults.column,a=t.aoColumns.length,n=P.extend({},w.models.oColumn,n,{nTh:e||y.createElement(\"th\"),sTitle:n.sTitle||(e?e.innerHTML:\"\"),aDataSort:n.aDataSort||[a],mData:n.mData||a,idx:a}),n=(t.aoColumns.push(n),t.aoPreSearchCols);n[a]=P.extend({},w.models.oSearch,n[a]),at(t,a,P(e).data())}function at(t,e,n){function a(t){return\"string\"==typeof t&&-1!==t.indexOf(\"@\")}var e=t.aoColumns[e],r=t.oClasses,o=P(e.nTh),i=(!e.sWidthOrig&&(e.sWidthOrig=o.attr(\"width\")||null,u=(o.attr(\"style\")||\"\").match(/width:\\s*(\\d+[pxem%]+)/))&&(e.sWidthOrig=u[1]),n!==N&&null!==n&&(Q(n),C(w.defaults.column,n,!0),n.mDataProp===N||n.mData||(n.mData=n.mDataProp),n.sType&&(e._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),n.sClass&&o.addClass(n.sClass),u=e.sClass,P.extend(e,n),F(e,n,\"sWidth\",\"sWidthOrig\"),u!==e.sClass&&(e.sClass=u+\" \"+e.sClass),n.iDataSort!==N&&(e.aDataSort=[n.iDataSort]),F(e,n,\"aDataSort\")),e.mData),l=A(i),s=e.mRender?A(e.mRender):null,u=(e._bAttrSrc=P.isPlainObject(i)&&(a(i.sort)||a(i.type)||a(i.filter)),e._setter=null,e.fnGetData=function(t,e,n){var a=l(t,e,N,n);return s&&e?s(a,e,t,n):a},e.fnSetData=function(t,e,n){return b(i)(t,e,n)},\"number\"==typeof i||e._isArrayHost||(t._rowReadObject=!0),t.oFeatures.bSort||(e.bSortable=!1,o.addClass(r.sSortableNone)),-1!==P.inArray(\"asc\",e.asSorting)),n=-1!==P.inArray(\"desc\",e.asSorting);e.bSortable&&(u||n)?u&&!n?(e.sSortingClass=r.sSortableAsc,e.sSortingClassJUI=r.sSortJUIAscAllowed):!u&&n?(e.sSortingClass=r.sSortableDesc,e.sSortingClassJUI=r.sSortJUIDescAllowed):(e.sSortingClass=r.sSortable,e.sSortingClassJUI=r.sSortJUI):(e.sSortingClass=r.sSortableNone,e.sSortingClassJUI=\"\")}function O(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;ee(t);for(var n=0,a=e.length;n<a;n++)e[n].nTh.style.width=e[n].sWidth}var r=t.oScroll;\"\"===r.sY&&\"\"===r.sX||Qt(t),R(t,null,\"column-sizing\",[t])}function rt(t,e){t=it(t,\"bVisible\");return\"number\"==typeof t[e]?t[e]:null}function ot(t,e){t=it(t,\"bVisible\"),e=P.inArray(e,t);return-1!==e?e:null}function T(t){var n=0;return P.each(t.aoColumns,function(t,e){e.bVisible&&\"none\"!==P(e.nTh).css(\"display\")&&n++}),n}function it(t,n){var a=[];return P.map(t.aoColumns,function(t,e){t[n]&&a.push(e)}),a}function lt(t){for(var e,n,a,r,o,i,l,s=t.aoColumns,u=t.aoData,c=w.ext.type.detect,f=0,d=s.length;f<d;f++)if(l=[],!(o=s[f]).sType&&o._sManualType)o.sType=o._sManualType;else if(!o.sType){for(e=0,n=c.length;e<n;e++){for(a=0,r=u.length;a<r&&(l[a]===N&&(l[a]=S(t,a,f,\"type\")),(i=c[e](l[a],t))||e===c.length-1)&&(\"html\"!==i||h(l[a]));a++);if(i){o.sType=i;break}}o.sType||(o.sType=\"string\")}}function st(t,e,n,a){var r,o,i,l,s=t.aoColumns;if(e)for(r=e.length-1;0<=r;r--)for(var u,c=(u=e[r]).target!==N?u.target:u.targets!==N?u.targets:u.aTargets,f=0,d=(c=Array.isArray(c)?c:[c]).length;f<d;f++)if(\"number\"==typeof c[f]&&0<=c[f]){for(;s.length<=c[f];)nt(t);a(c[f],u)}else if(\"number\"==typeof c[f]&&c[f]<0)a(s.length+c[f],u);else if(\"string\"==typeof c[f])for(i=0,l=s.length;i<l;i++)\"_all\"!=c[f]&&!P(s[i].nTh).hasClass(c[f])||a(i,u);if(n)for(r=0,o=n.length;r<o;r++)a(r,n[r])}function x(t,e,n,a){for(var r=t.aoData.length,o=P.extend(!0,{},w.models.oRow,{src:n?\"dom\":\"data\",idx:r}),i=(o._aData=e,t.aoData.push(o),t.aoColumns),l=0,s=i.length;l<s;l++)i[l].sType=null;t.aiDisplayMaster.push(r);e=t.rowIdFn(e);return e!==N&&(t.aIds[e]=o),!n&&t.oFeatures.bDeferRender||St(t,r,n,a),r}function ut(n,t){var a;return(t=t instanceof P?t:P(t)).map(function(t,e){return a=mt(n,e),x(n,a.data,e,a.cells)})}function S(t,e,n,a){\"search\"===a?a=\"filter\":\"order\"===a&&(a=\"sort\");var r=t.iDraw,o=t.aoColumns[n],i=t.aoData[e]._aData,l=o.sDefaultContent,s=o.fnGetData(i,a,{settings:t,row:e,col:n});if(s===N)return t.iDrawError!=r&&null===l&&(W(t,0,\"Requested unknown parameter \"+(\"function\"==typeof o.mData?\"{function}\":\"\'\"+o.mData+\"\'\")+\" for row \"+e+\", column \"+n,4),t.iDrawError=r),l;if(s!==i&&null!==s||null===l||a===N){if(\"function\"==typeof s)return s.call(i)}else s=l;return null===s&&\"display\"===a?\"\":\"filter\"===a&&(e=w.ext.type.search)[o.sType]?e[o.sType](s):s}function ct(t,e,n,a){var r=t.aoColumns[n],o=t.aoData[e]._aData;r.fnSetData(o,a,{settings:t,row:e,col:n})}var ft=/\\[.*?\\]$/,g=/\\(\\)$/;function dt(t){return P.map(t.match(/(\\\\.|[^\\.])+/g)||[\"\"],function(t){return t.replace(/\\\\\\./g,\".\")})}var A=w.util.get,b=w.util.set;function ht(t){return H(t.aoData,\"_aData\")}function pt(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function gt(t,e,n){for(var a=-1,r=0,o=t.length;r<o;r++)t[r]==e?a=r:t[r]>e&&t[r]--;-1!=a&&n===N&&t.splice(a,1)}function bt(n,a,t,e){function r(t,e){for(;t.childNodes.length;)t.removeChild(t.firstChild);t.innerHTML=S(n,a,e,\"display\")}var o,i,l=n.aoData[a];if(\"dom\"!==t&&(t&&\"auto\"!==t||\"dom\"!==l.src)){var s=l.anCells;if(s)if(e!==N)r(s[e],e);else for(o=0,i=s.length;o<i;o++)r(s[o],o)}else l._aData=mt(n,l,e,e===N?N:l._aData).data;l._aSortData=null,l._aFilterData=null;var u=n.aoColumns;if(e!==N)u[e].sType=null;else{for(o=0,i=u.length;o<i;o++)u[o].sType=null;vt(n,l)}}function mt(t,e,n,a){function r(t,e){var n;\"string\"==typeof t&&-1!==(n=t.indexOf(\"@\"))&&(n=t.substring(n+1),b(t)(a,e.getAttribute(n)))}function o(t){n!==N&&n!==f||(l=d[f],s=t.innerHTML.trim(),l&&l._bAttrSrc?(b(l.mData._)(a,s),r(l.mData.sort,t),r(l.mData.type,t),r(l.mData.filter,t)):h?(l._setter||(l._setter=b(l.mData)),l._setter(a,s)):a[f]=s),f++}var i,l,s,u=[],c=e.firstChild,f=0,d=t.aoColumns,h=t._rowReadObject;a=a!==N?a:h?{}:[];if(c)for(;c;)\"TD\"!=(i=c.nodeName.toUpperCase())&&\"TH\"!=i||(o(c),u.push(c)),c=c.nextSibling;else for(var p=0,g=(u=e.anCells).length;p<g;p++)o(u[p]);var e=e.firstChild?e:e.nTr;return e&&(e=e.getAttribute(\"id\"))&&b(t.rowId)(a,e),{data:a,cells:u}}function St(t,e,n,a){var r,o,i,l,s,u,c=t.aoData[e],f=c._aData,d=[];if(null===c.nTr){for(r=n||y.createElement(\"tr\"),c.nTr=r,c.anCells=d,r._DT_RowIndex=e,vt(t,c),l=0,s=t.aoColumns.length;l<s;l++)i=t.aoColumns[l],(o=(u=!n)?y.createElement(i.sCellType):a[l])||W(t,0,\"Incorrect column count\",18),o._DT_CellIndex={row:e,column:l},d.push(o),!u&&(!i.mRender&&i.mData===l||P.isPlainObject(i.mData)&&i.mData._===l+\".display\")||(o.innerHTML=S(t,e,l,\"display\")),i.sClass&&(o.className+=\" \"+i.sClass),i.bVisible&&!n?r.appendChild(o):!i.bVisible&&n&&o.parentNode.removeChild(o),i.fnCreatedCell&&i.fnCreatedCell.call(t.oInstance,o,S(t,e,l),f,e,l);R(t,\"aoRowCreatedCallback\",null,[r,f,e,d])}}function vt(t,e){var n=e.nTr,a=e._aData;n&&((t=t.rowIdFn(a))&&(n.id=t),a.DT_RowClass&&(t=a.DT_RowClass.split(\" \"),e.__rowc=e.__rowc?z(e.__rowc.concat(t)):t,P(n).removeClass(e.__rowc.join(\" \")).addClass(a.DT_RowClass)),a.DT_RowAttr&&P(n).attr(a.DT_RowAttr),a.DT_RowData)&&P(n).data(a.DT_RowData)}function yt(t){var e,n,a,r=t.nTHead,o=t.nTFoot,i=0===P(\"th, td\",r).length,l=t.oClasses,s=t.aoColumns;for(i&&(n=P(\"<tr/>\").appendTo(r)),c=0,f=s.length;c<f;c++)a=s[c],e=P(a.nTh).addClass(a.sClass),i&&e.appendTo(n),t.oFeatures.bSort&&(e.addClass(a.sSortingClass),!1!==a.bSortable)&&(e.attr(\"tabindex\",t.iTabIndex).attr(\"aria-controls\",t.sTableId),ue(t,a.nTh,c)),a.sTitle!=e[0].innerHTML&&e.html(a.sTitle),ve(t,\"header\")(t,e,a,l);if(i&&wt(t.aoHeader,r),P(r).children(\"tr\").children(\"th, td\").addClass(l.sHeaderTH),P(o).children(\"tr\").children(\"th, td\").addClass(l.sFooterTH),null!==o)for(var u=t.aoFooter[0],c=0,f=u.length;c<f;c++)(a=s[c])?(a.nTf=u[c].cell,a.sClass&&P(a.nTf).addClass(a.sClass)):W(t,0,\"Incorrect column count\",18)}function Dt(t,e,n){var a,r,o,i,l,s,u,c,f,d=[],h=[],p=t.aoColumns.length;if(e){for(n===N&&(n=!1),a=0,r=e.length;a<r;a++){for(d[a]=e[a].slice(),d[a].nTr=e[a].nTr,o=p-1;0<=o;o--)t.aoColumns[o].bVisible||n||d[a].splice(o,1);h.push([])}for(a=0,r=d.length;a<r;a++){if(u=d[a].nTr)for(;s=u.firstChild;)u.removeChild(s);for(o=0,i=d[a].length;o<i;o++)if(f=c=1,h[a][o]===N){for(u.appendChild(d[a][o].cell),h[a][o]=1;d[a+c]!==N&&d[a][o].cell==d[a+c][o].cell;)h[a+c][o]=1,c++;for(;d[a][o+f]!==N&&d[a][o].cell==d[a][o+f].cell;){for(l=0;l<c;l++)h[a+l][o+f]=1;f++}P(d[a][o].cell).attr(\"rowspan\",c).attr(\"colspan\",f)}}}}function v(t,e){n=\"ssp\"==E(s=t),(l=s.iInitDisplayStart)!==N&&-1!==l&&(s._iDisplayStart=!n&&l>=s.fnRecordsDisplay()?0:l,s.iInitDisplayStart=-1);var n=R(t,\"aoPreDrawCallback\",\"preDraw\",[t]);if(-1!==P.inArray(!1,n))D(t,!1);else{var a=[],r=0,o=t.asStripeClasses,i=o.length,l=t.oLanguage,s=\"ssp\"==E(t),u=t.aiDisplay,n=t._iDisplayStart,c=t.fnDisplayEnd();if(t.bDrawing=!0,t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,D(t,!1);else if(s){if(!t.bDestroying&&!e)return void xt(t)}else t.iDraw++;if(0!==u.length)for(var f=s?t.aoData.length:c,d=s?0:n;d<f;d++){var h,p=u[d],g=t.aoData[p],b=(null===g.nTr&&St(t,p),g.nTr);0!==i&&(h=o[r%i],g._sRowStripe!=h)&&(P(b).removeClass(g._sRowStripe).addClass(h),g._sRowStripe=h),R(t,\"aoRowCallback\",null,[b,g._aData,r,d,p]),a.push(b),r++}else{e=l.sZeroRecords;1==t.iDraw&&\"ajax\"==E(t)?e=l.sLoadingRecords:l.sEmptyTable&&0===t.fnRecordsTotal()&&(e=l.sEmptyTable),a[0]=P(\"<tr/>\",{class:i?o[0]:\"\"}).append(P(\"<td />\",{valign:\"top\",colSpan:T(t),class:t.oClasses.sRowEmpty}).html(e))[0]}R(t,\"aoHeaderCallback\",\"header\",[P(t.nTHead).children(\"tr\")[0],ht(t),n,c,u]),R(t,\"aoFooterCallback\",\"footer\",[P(t.nTFoot).children(\"tr\")[0],ht(t),n,c,u]);s=P(t.nTBody);s.children().detach(),s.append(P(a)),R(t,\"aoDrawCallback\",\"draw\",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function u(t,e){var n=t.oFeatures,a=n.bSort,n=n.bFilter;a&&ie(t),n?Rt(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,v(t),t._drawHold=!1}function _t(t){for(var e,n,a,r,o,i,l,s=t.oClasses,u=P(t.nTable),u=P(\"<div/>\").insertBefore(u),c=t.oFeatures,f=P(\"<div/>\",{id:t.sTableId+\"_wrapper\",class:s.sWrapper+(t.nTFoot?\"\":\" \"+s.sNoFooter)}),d=(t.nHolding=u[0],t.nTableWrapper=f[0],t.nTableReinsertBefore=t.nTable.nextSibling,t.sDom.split(\"\")),h=0;h<d.length;h++){if(e=null,\"<\"==(n=d[h])){if(a=P(\"<div/>\")[0],\"\'\"==(r=d[h+1])||\'\"\'==r){for(o=\"\",i=2;d[h+i]!=r;)o+=d[h+i],i++;\"H\"==o?o=s.sJUIHeader:\"F\"==o&&(o=s.sJUIFooter),-1!=o.indexOf(\".\")?(l=o.split(\".\"),a.id=l[0].substr(1,l[0].length-1),a.className=l[1]):\"#\"==o.charAt(0)?a.id=o.substr(1,o.length-1):a.className=o,h+=i}f.append(a),f=P(a)}else if(\">\"==n)f=f.parent();else if(\"l\"==n&&c.bPaginate&&c.bLengthChange)e=$t(t);else if(\"f\"==n&&c.bFilter)e=Lt(t);else if(\"r\"==n&&c.bProcessing)e=Zt(t);else if(\"t\"==n)e=Kt(t);else if(\"i\"==n&&c.bInfo)e=Ut(t);else if(\"p\"==n&&c.bPaginate)e=zt(t);else if(0!==w.ext.feature.length)for(var p=w.ext.feature,g=0,b=p.length;g<b;g++)if(n==p[g].cFeature){e=p[g].fnInit(t);break}e&&((l=t.aanFeatures)[n]||(l[n]=[]),l[n].push(e),f.append(e))}u.replaceWith(f),t.nHolding=null}function wt(t,e){var n,a,r,o,i,l,s,u,c,f,d=P(e).children(\"tr\");for(t.splice(0,t.length),r=0,l=d.length;r<l;r++)t.push([]);for(r=0,l=d.length;r<l;r++)for(a=(n=d[r]).firstChild;a;){if(\"TD\"==a.nodeName.toUpperCase()||\"TH\"==a.nodeName.toUpperCase())for(u=(u=+a.getAttribute(\"colspan\"))&&0!=u&&1!=u?u:1,c=(c=+a.getAttribute(\"rowspan\"))&&0!=c&&1!=c?c:1,s=function(t,e,n){for(var a=t[e];a[n];)n++;return n}(t,r,0),f=1==u,i=0;i<u;i++)for(o=0;o<c;o++)t[r+o][s+i]={cell:a,unique:f},t[r+o].nTr=n;a=a.nextSibling}}function Ct(t,e,n){var a=[];n||(n=t.aoHeader,e&&wt(n=[],e));for(var r=0,o=n.length;r<o;r++)for(var i=0,l=n[r].length;i<l;i++)!n[r][i].unique||a[i]&&t.bSortCellsTop||(a[i]=n[r][i].cell);return a}function Tt(r,t,n){function e(t){var e=r.jqXHR?r.jqXHR.status:null;(null===t||\"number\"==typeof e&&204==e)&&Ft(r,t={},[]),(e=t.error||t.sError)&&W(r,0,e),r.json=t,R(r,null,\"xhr\",[r,t,r.jqXHR]),n(t)}R(r,\"aoServerParams\",\"serverParams\",[t]),t&&Array.isArray(t)&&(a={},o=/(.*?)\\[\\]$/,P.each(t,function(t,e){var n=e.name.match(o);n?(n=n[0],a[n]||(a[n]=[]),a[n].push(e.value)):a[e.name]=e.value}),t=a);var a,o,i,l=r.ajax,s=r.oInstance,u=(P.isPlainObject(l)&&l.data&&(u=\"function\"==typeof(i=l.data)?i(t,r):i,t=\"function\"==typeof i&&u?u:P.extend(!0,t,u),delete l.data),{data:t,success:e,dataType:\"json\",cache:!1,type:r.sServerMethod,error:function(t,e,n){var a=R(r,null,\"xhr\",[r,null,r.jqXHR]);-1===P.inArray(!0,a)&&(\"parsererror\"==e?W(r,0,\"Invalid JSON response\",1):4===t.readyState&&W(r,0,\"Ajax error\",7)),D(r,!1)}});r.oAjaxData=t,R(r,null,\"preXhr\",[r,t]),r.fnServerData?r.fnServerData.call(s,r.sAjaxSource,P.map(t,function(t,e){return{name:e,value:t}}),e,r):r.sAjaxSource||\"string\"==typeof l?r.jqXHR=P.ajax(P.extend(u,{url:l||r.sAjaxSource})):\"function\"==typeof l?r.jqXHR=l.call(s,t,e,r):(r.jqXHR=P.ajax(P.extend(u,l)),l.data=i)}function xt(e){e.iDraw++,D(e,!0),Tt(e,At(e),function(t){It(e,t)})}function At(t){for(var e,n,a,r=t.aoColumns,o=r.length,i=t.oFeatures,l=t.oPreviousSearch,s=t.aoPreSearchCols,u=[],c=I(t),f=t._iDisplayStart,d=!1!==i.bPaginate?t._iDisplayLength:-1,h=function(t,e){u.push({name:t,value:e})},p=(h(\"sEcho\",t.iDraw),h(\"iColumns\",o),h(\"sColumns\",H(r,\"sName\").join(\",\")),h(\"iDisplayStart\",f),h(\"iDisplayLength\",d),{draw:t.iDraw,columns:[],order:[],start:f,length:d,search:{value:l.sSearch,regex:l.bRegex}}),g=0;g<o;g++)n=r[g],a=s[g],e=\"function\"==typeof n.mData?\"function\":n.mData,p.columns.push({data:e,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),h(\"mDataProp_\"+g,e),i.bFilter&&(h(\"sSearch_\"+g,a.sSearch),h(\"bRegex_\"+g,a.bRegex),h(\"bSearchable_\"+g,n.bSearchable)),i.bSort&&h(\"bSortable_\"+g,n.bSortable);i.bFilter&&(h(\"sSearch\",l.sSearch),h(\"bRegex\",l.bRegex)),i.bSort&&(P.each(c,function(t,e){p.order.push({column:e.col,dir:e.dir}),h(\"iSortCol_\"+t,e.col),h(\"sSortDir_\"+t,e.dir)}),h(\"iSortingCols\",c.length));f=w.ext.legacy.ajax;return null===f?t.sAjaxSource?u:p:f?u:p}function It(t,n){function e(t,e){return n[t]!==N?n[t]:n[e]}var a=Ft(t,n),r=e(\"sEcho\",\"draw\"),o=e(\"iTotalRecords\",\"recordsTotal\"),i=e(\"iTotalDisplayRecords\",\"recordsFiltered\");if(r!==N){if(+r<t.iDraw)return;t.iDraw=+r}a=a||[],pt(t),t._iRecordsTotal=parseInt(o,10),t._iRecordsDisplay=parseInt(i,10);for(var l=0,s=a.length;l<s;l++)x(t,a[l]);t.aiDisplay=t.aiDisplayMaster.slice(),v(t,!0),t._bInitComplete||qt(t,n),D(t,!1)}function Ft(t,e,n){t=P.isPlainObject(t.ajax)&&t.ajax.dataSrc!==N?t.ajax.dataSrc:t.sAjaxDataProp;if(!n)return\"data\"===t?e.aaData||e[t]:\"\"!==t?A(t)(e):e;b(t)(e,n)}function Lt(n){function e(t){i.f;var e=this.value||\"\";o.return&&\"Enter\"!==t.key||e!=o.sSearch&&(Rt(n,{sSearch:e,bRegex:o.bRegex,bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive,return:o.return}),n._iDisplayStart=0,v(n))}var t=n.oClasses,a=n.sTableId,r=n.oLanguage,o=n.oPreviousSearch,i=n.aanFeatures,l=\'<input type=\"search\" class=\"\'+t.sFilterInput+\'\"/>\',s=(s=r.sSearch).match(/_INPUT_/)?s.replace(\"_INPUT_\",l):s+l,l=P(\"<div/>\",{id:i.f?null:a+\"_filter\",class:t.sFilter}).append(P(\"<label/>\").append(s)),t=null!==n.searchDelay?n.searchDelay:\"ssp\"===E(n)?400:0,u=P(\"input\",l).val(o.sSearch).attr(\"placeholder\",r.sSearchPlaceholder).on(\"keyup.DT search.DT input.DT paste.DT cut.DT\",t?ne(e,t):e).on(\"mouseup\",function(t){setTimeout(function(){e.call(u[0],t)},10)}).on(\"keypress.DT\",function(t){if(13==t.keyCode)return!1}).attr(\"aria-controls\",a);return P(n.nTable).on(\"search.dt.DT\",function(t,e){if(n===e)try{u[0]!==y.activeElement&&u.val(o.sSearch)}catch(t){}}),l[0]}function Rt(t,e,n){function a(t){o.sSearch=t.sSearch,o.bRegex=t.bRegex,o.bSmart=t.bSmart,o.bCaseInsensitive=t.bCaseInsensitive,o.return=t.return}function r(t){return t.bEscapeRegex!==N?!t.bEscapeRegex:t.bRegex}var o=t.oPreviousSearch,i=t.aoPreSearchCols;if(lt(t),\"ssp\"!=E(t)){Nt(t,e.sSearch,n,r(e),e.bSmart,e.bCaseInsensitive,e.return),a(e);for(var l=0;l<i.length;l++)jt(t,i[l].sSearch,l,r(i[l]),i[l].bSmart,i[l].bCaseInsensitive);Pt(t)}else a(e);t.bFiltered=!0,R(t,null,\"search\",[t])}function Pt(t){for(var e,n,a=w.ext.search,r=t.aiDisplay,o=0,i=a.length;o<i;o++){for(var l=[],s=0,u=r.length;s<u;s++)n=r[s],e=t.aoData[n],a[o](t,e._aFilterData,n,e._aData,s)&&l.push(n);r.length=0,P.merge(r,l)}}function jt(t,e,n,a,r,o){if(\"\"!==e){for(var i,l=[],s=t.aiDisplay,u=Ht(e,a,r,o),c=0;c<s.length;c++)i=t.aoData[s[c]]._aFilterData[n],u.test(i)&&l.push(s[c]);t.aiDisplay=l}}function Nt(t,e,n,a,r,o){var i,l,s,u=Ht(e,a,r,o),r=t.oPreviousSearch.sSearch,o=t.aiDisplayMaster,c=[];if(0!==w.ext.search.length&&(n=!0),l=Wt(t),e.length<=0)t.aiDisplay=o.slice();else{for((l||n||a||r.length>e.length||0!==e.indexOf(r)||t.bSorted)&&(t.aiDisplay=o.slice()),i=t.aiDisplay,s=0;s<i.length;s++)u.test(t.aoData[i[s]]._sFilterRow)&&c.push(i[s]);t.aiDisplay=c}}function Ht(t,e,n,a){return t=e?t:Ot(t),n&&(t=\"^(?=.*?\"+P.map(t.match(/\"[^\"]+\"|[^ ]+/g)||[\"\"],function(t){var e;return(t=\'\"\'===t.charAt(0)?(e=t.match(/^\"(.*)\"$/))?e[1]:t:t).replace(\'\"\',\"\")}).join(\")(?=.*?\")+\").*$\"),new RegExp(t,a?\"i\":\"\")}var Ot=w.util.escapeRegex,kt=P(\"<div>\")[0],Mt=kt.textContent!==N;function Wt(t){for(var e,n,a,r,o,i=t.aoColumns,l=!1,s=0,u=t.aoData.length;s<u;s++)if(!(o=t.aoData[s])._aFilterData){for(a=[],e=0,n=i.length;e<n;e++)i[e].bSearchable?\"string\"!=typeof(r=null===(r=S(t,s,e,\"filter\"))?\"\":r)&&r.toString&&(r=r.toString()):r=\"\",r.indexOf&&-1!==r.indexOf(\"&\")&&(kt.innerHTML=r,r=Mt?kt.textContent:kt.innerText),r.replace&&(r=r.replace(/[\\r\\n\\u2028]/g,\"\")),a.push(r);o._aFilterData=a,o._sFilterRow=a.join(\"  \"),l=!0}return l}function Et(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function Bt(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function Ut(t){var e=t.sTableId,n=t.aanFeatures.i,a=P(\"<div/>\",{class:t.oClasses.sInfo,id:n?null:e+\"_info\"});return n||(t.aoDrawCallback.push({fn:Vt,sName:\"information\"}),a.attr(\"role\",\"status\").attr(\"aria-live\",\"polite\"),P(t.nTable).attr(\"aria-describedby\",e+\"_info\")),a[0]}function Vt(t){var e,n,a,r,o,i,l=t.aanFeatures.i;0!==l.length&&(i=t.oLanguage,e=t._iDisplayStart+1,n=t.fnDisplayEnd(),a=t.fnRecordsTotal(),o=(r=t.fnRecordsDisplay())?i.sInfo:i.sInfoEmpty,r!==a&&(o+=\" \"+i.sInfoFiltered),o=Xt(t,o+=i.sInfoPostFix),null!==(i=i.fnInfoCallback)&&(o=i.call(t.oInstance,t,e,n,a,r,o)),P(l).html(o))}function Xt(t,e){var n=t.fnFormatNumber,a=t._iDisplayStart+1,r=t._iDisplayLength,o=t.fnRecordsDisplay(),i=-1===r;return e.replace(/_START_/g,n.call(t,a)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,i?1:Math.ceil(a/r))).replace(/_PAGES_/g,n.call(t,i?1:Math.ceil(o/r)))}function Jt(n){var a,t,e,r=n.iInitDisplayStart,o=n.aoColumns,i=n.oFeatures,l=n.bDeferLoading;if(n.bInitialised){for(_t(n),yt(n),Dt(n,n.aoHeader),Dt(n,n.aoFooter),D(n,!0),i.bAutoWidth&&ee(n),a=0,t=o.length;a<t;a++)(e=o[a]).sWidth&&(e.nTh.style.width=M(e.sWidth));R(n,null,\"preInit\",[n]),u(n);i=E(n);\"ssp\"==i&&!l||(\"ajax\"==i?Tt(n,[],function(t){var e=Ft(n,t);for(a=0;a<e.length;a++)x(n,e[a]);n.iInitDisplayStart=r,u(n),D(n,!1),qt(n,t)}):(D(n,!1),qt(n)))}else setTimeout(function(){Jt(n)},200)}function qt(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&O(t),R(t,null,\"plugin-init\",[t,e]),R(t,\"aoInitComplete\",\"init\",[t,e])}function Gt(t,e){e=parseInt(e,10);t._iDisplayLength=e,Se(t),R(t,null,\"length\",[t,e])}function $t(a){for(var t=a.oClasses,e=a.sTableId,n=a.aLengthMenu,r=Array.isArray(n[0]),o=r?n[0]:n,i=r?n[1]:n,l=P(\"<select/>\",{name:e+\"_length\",\"aria-controls\":e,class:t.sLengthSelect}),s=0,u=o.length;s<u;s++)l[0][s]=new Option(\"number\"==typeof i[s]?a.fnFormatNumber(i[s]):i[s],o[s]);var c=P(\"<div><label/></div>\").addClass(t.sLength);return a.aanFeatures.l||(c[0].id=e+\"_length\"),c.children().append(a.oLanguage.sLengthMenu.replace(\"_MENU_\",l[0].outerHTML)),P(\"select\",c).val(a._iDisplayLength).on(\"change.DT\",function(t){Gt(a,P(this).val()),v(a)}),P(a.nTable).on(\"length.dt.DT\",function(t,e,n){a===e&&P(\"select\",c).val(n)}),c[0]}function zt(t){function c(t){v(t)}var e=t.sPaginationType,f=w.ext.pager[e],d=\"function\"==typeof f,e=P(\"<div/>\").addClass(t.oClasses.sPaging+e)[0],h=t.aanFeatures;return d||f.fnInit(t,e,c),h.p||(e.id=t.sTableId+\"_paginate\",t.aoDrawCallback.push({fn:function(t){if(d)for(var e=t._iDisplayStart,n=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===n,o=r?0:Math.ceil(e/n),i=r?1:Math.ceil(a/n),l=f(o,i),s=0,u=h.p.length;s<u;s++)ve(t,\"pageButton\")(t,h.p[s],s,l,o,i);else f.fnUpdate(t,c)},sName:\"pagination\"})),e}function Yt(t,e,n){var a=t._iDisplayStart,r=t._iDisplayLength,o=t.fnRecordsDisplay(),o=(0===o||-1===r?a=0:\"number\"==typeof e?o<(a=e*r)&&(a=0):\"first\"==e?a=0:\"previous\"==e?(a=0<=r?a-r:0)<0&&(a=0):\"next\"==e?a+r<o&&(a+=r):\"last\"==e?a=Math.floor((o-1)/r)*r:W(t,0,\"Unknown paging action: \"+e,5),t._iDisplayStart!==a);return t._iDisplayStart=a,o?(R(t,null,\"page\",[t]),n&&v(t)):R(t,null,\"page-nc\",[t]),o}function Zt(t){return P(\"<div/>\",{id:t.aanFeatures.r?null:t.sTableId+\"_processing\",class:t.oClasses.sProcessing,role:\"status\"}).html(t.oLanguage.sProcessing).append(\"<div><div></div><div></div><div></div><div></div></div>\").insertBefore(t.nTable)[0]}function D(t,e){t.oFeatures.bProcessing&&P(t.aanFeatures.r).css(\"display\",e?\"block\":\"none\"),R(t,null,\"processing\",[t,e])}function Kt(t){var e,n,a,r,o,i,l,s,u,c,f,d,h=P(t.nTable),p=t.oScroll;return\"\"===p.sX&&\"\"===p.sY?t.nTable:(e=p.sX,n=p.sY,a=t.oClasses,o=(r=h.children(\"caption\")).length?r[0]._captionSide:null,s=P(h[0].cloneNode(!1)),i=P(h[0].cloneNode(!1)),u=function(t){return t?M(t):null},(l=h.children(\"tfoot\")).length||(l=null),s=P(f=\"<div/>\",{class:a.sScrollWrapper}).append(P(f,{class:a.sScrollHead}).css({overflow:\"hidden\",position:\"relative\",border:0,width:e?u(e):\"100%\"}).append(P(f,{class:a.sScrollHeadInner}).css({\"box-sizing\":\"content-box\",width:p.sXInner||\"100%\"}).append(s.removeAttr(\"id\").css(\"margin-left\",0).append(\"top\"===o?r:null).append(h.children(\"thead\"))))).append(P(f,{class:a.sScrollBody}).css({position:\"relative\",overflow:\"auto\",width:u(e)}).append(h)),l&&s.append(P(f,{class:a.sScrollFoot}).css({overflow:\"hidden\",border:0,width:e?u(e):\"100%\"}).append(P(f,{class:a.sScrollFootInner}).append(i.removeAttr(\"id\").css(\"margin-left\",0).append(\"bottom\"===o?r:null).append(h.children(\"tfoot\"))))),u=s.children(),c=u[0],f=u[1],d=l?u[2]:null,e&&P(f).on(\"scroll.DT\",function(t){var e=this.scrollLeft;c.scrollLeft=e,l&&(d.scrollLeft=e)}),P(f).css(\"max-height\",n),p.bCollapse||P(f).css(\"height\",n),t.nScrollHead=c,t.nScrollBody=f,t.nScrollFoot=d,t.aoDrawCallback.push({fn:Qt,sName:\"scrolling\"}),s[0])}function Qt(n){function t(t){(t=t.style).paddingTop=\"0\",t.paddingBottom=\"0\",t.borderTopWidth=\"0\",t.borderBottomWidth=\"0\",t.height=0}var e,a,r,o,i,l=n.oScroll,s=l.sX,u=l.sXInner,c=l.sY,l=l.iBarWidth,f=P(n.nScrollHead),d=f[0].style,h=f.children(\"div\"),p=h[0].style,h=h.children(\"table\"),g=n.nScrollBody,b=P(g),m=g.style,S=P(n.nScrollFoot).children(\"div\"),v=S.children(\"table\"),y=P(n.nTHead),D=P(n.nTable),_=D[0],w=_.style,C=n.nTFoot?P(n.nTFoot):null,T=n.oBrowser,x=T.bScrollOversize,A=(H(n.aoColumns,\"nTh\"),[]),I=[],F=[],L=[],R=g.scrollHeight>g.clientHeight;n.scrollBarVis!==R&&n.scrollBarVis!==N?(n.scrollBarVis=R,O(n)):(n.scrollBarVis=R,D.children(\"thead, tfoot\").remove(),C&&(R=C.clone().prependTo(D),i=C.find(\"tr\"),a=R.find(\"tr\"),R.find(\"[id]\").removeAttr(\"id\")),R=y.clone().prependTo(D),y=y.find(\"tr\"),e=R.find(\"tr\"),R.find(\"th, td\").removeAttr(\"tabindex\"),R.find(\"[id]\").removeAttr(\"id\"),s||(m.width=\"100%\",f[0].style.width=\"100%\"),P.each(Ct(n,R),function(t,e){r=rt(n,t),e.style.width=n.aoColumns[r].sWidth}),C&&k(function(t){t.style.width=\"\"},a),f=D.outerWidth(),\"\"===s?(w.width=\"100%\",x&&(D.find(\"tbody\").height()>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\"))&&(w.width=M(D.outerWidth()-l)),f=D.outerWidth()):\"\"!==u&&(w.width=M(u),f=D.outerWidth()),k(t,e),k(function(t){var e=j.getComputedStyle?j.getComputedStyle(t).width:M(P(t).width());F.push(t.innerHTML),A.push(e)},e),k(function(t,e){t.style.width=A[e]},y),P(e).css(\"height\",0),C&&(k(t,a),k(function(t){L.push(t.innerHTML),I.push(M(P(t).css(\"width\")))},a),k(function(t,e){t.style.width=I[e]},i),P(a).height(0)),k(function(t,e){t.innerHTML=\'<div class=\"dataTables_sizing\">\'+F[e]+\"</div>\",t.childNodes[0].style.height=\"0\",t.childNodes[0].style.overflow=\"hidden\",t.style.width=A[e]},e),C&&k(function(t,e){t.innerHTML=\'<div class=\"dataTables_sizing\">\'+L[e]+\"</div>\",t.childNodes[0].style.height=\"0\",t.childNodes[0].style.overflow=\"hidden\",t.style.width=I[e]},a),Math.round(D.outerWidth())<Math.round(f)?(o=g.scrollHeight>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\")?f+l:f,x&&(g.scrollHeight>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\"))&&(w.width=M(o-l)),\"\"!==s&&\"\"===u||W(n,1,\"Possible column misalignment\",6)):o=\"100%\",m.width=M(o),d.width=M(o),C&&(n.nScrollFoot.style.width=M(o)),c||x&&(m.height=M(_.offsetHeight+l)),R=D.outerWidth(),h[0].style.width=M(R),p.width=M(R),y=D.height()>g.clientHeight||\"scroll\"==b.css(\"overflow-y\"),p[i=\"padding\"+(T.bScrollbarLeft?\"Left\":\"Right\")]=y?l+\"px\":\"0px\",C&&(v[0].style.width=M(R),S[0].style.width=M(R),S[0].style[i]=y?l+\"px\":\"0px\"),D.children(\"colgroup\").insertBefore(D.children(\"thead\")),b.trigger(\"scroll\"),!n.bSorted&&!n.bFiltered||n._drawHold||(g.scrollTop=0))}function k(t,e,n){for(var a,r,o=0,i=0,l=e.length;i<l;){for(a=e[i].firstChild,r=n?n[i].firstChild:null;a;)1===a.nodeType&&(n?t(a,r,o):t(a,o),o++),a=a.nextSibling,r=n?r.nextSibling:null;i++}}var te=/<.*?>/g;function ee(t){var e,n,a=t.nTable,r=t.aoColumns,o=t.oScroll,i=o.sY,l=o.sX,o=o.sXInner,s=r.length,u=it(t,\"bVisible\"),c=P(\"th\",t.nTHead),f=a.getAttribute(\"width\"),d=a.parentNode,h=!1,p=t.oBrowser,g=p.bScrollOversize,b=a.style.width;for(b&&-1!==b.indexOf(\"%\")&&(f=b),D=0;D<u.length;D++)null!==(e=r[u[D]]).sWidth&&(e.sWidth=ae(e.sWidthOrig,d),h=!0);if(g||!h&&!l&&!i&&s==T(t)&&s==c.length)for(D=0;D<s;D++){var m=rt(t,D);null!==m&&(r[m].sWidth=M(c.eq(D).width()))}else{var b=P(a).clone().css(\"visibility\",\"hidden\").removeAttr(\"id\"),S=(b.find(\"tbody tr\").remove(),P(\"<tr/>\").appendTo(b.find(\"tbody\")));for(b.find(\"thead, tfoot\").remove(),b.append(P(t.nTHead).clone()).append(P(t.nTFoot).clone()),b.find(\"tfoot th, tfoot td\").css(\"width\",\"\"),c=Ct(t,b.find(\"thead\")[0]),D=0;D<u.length;D++)e=r[u[D]],c[D].style.width=null!==e.sWidthOrig&&\"\"!==e.sWidthOrig?M(e.sWidthOrig):\"\",e.sWidthOrig&&l&&P(c[D]).append(P(\"<div/>\").css({width:e.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(t.aoData.length)for(D=0;D<u.length;D++)e=r[n=u[D]],P(re(t,n)).clone(!1).append(e.sContentPadding).appendTo(S);P(\"[name]\",b).removeAttr(\"name\");for(var v=P(\"<div/>\").css(l||i?{position:\"absolute\",top:0,left:0,height:1,right:0,overflow:\"hidden\"}:{}).append(b).appendTo(d),y=(l&&o?b.width(o):l?(b.css(\"width\",\"auto\"),b.removeAttr(\"width\"),b.width()<d.clientWidth&&f&&b.width(d.clientWidth)):i?b.width(d.clientWidth):f&&b.width(f),0),D=0;D<u.length;D++){var _=P(c[D]),w=_.outerWidth()-_.width(),_=p.bBounding?Math.ceil(c[D].getBoundingClientRect().width):_.outerWidth();y+=_,r[u[D]].sWidth=M(_-w)}a.style.width=M(y),v.remove()}f&&(a.style.width=M(f)),!f&&!l||t._reszEvt||(o=function(){P(j).on(\"resize.DT-\"+t.sInstance,ne(function(){O(t)}))},g?setTimeout(o,1e3):o(),t._reszEvt=!0)}var ne=w.util.throttle;function ae(t,e){return t?(e=(t=P(\"<div/>\").css(\"width\",M(t)).appendTo(e||y.body))[0].offsetWidth,t.remove(),e):0}function re(t,e){var n,a=oe(t,e);return a<0?null:(n=t.aoData[a]).nTr?n.anCells[e]:P(\"<td/>\").html(S(t,a,e,\"display\"))[0]}function oe(t,e){for(var n,a=-1,r=-1,o=0,i=t.aoData.length;o<i;o++)(n=(n=(n=S(t,o,e,\"display\")+\"\").replace(te,\"\")).replace(/&nbsp;/g,\" \")).length>a&&(a=n.length,r=o);return r}function M(t){return null===t?\"0px\":\"number\"==typeof t?t<0?\"0px\":t+\"px\":t.match(/\\d$/)?t+\"px\":t}function I(t){function e(t){t.length&&!Array.isArray(t[0])?h.push(t):P.merge(h,t)}var n,a,r,o,i,l,s,u=[],c=t.aoColumns,f=t.aaSortingFixed,d=P.isPlainObject(f),h=[];for(Array.isArray(f)&&e(f),d&&f.pre&&e(f.pre),e(t.aaSorting),d&&f.post&&e(f.post),n=0;n<h.length;n++)for(r=(o=c[s=h[n][a=0]].aDataSort).length;a<r;a++)l=c[i=o[a]].sType||\"string\",h[n]._idx===N&&(h[n]._idx=P.inArray(h[n][1],c[i].asSorting)),u.push({src:s,col:i,dir:h[n][1],index:h[n]._idx,type:l,formatter:w.ext.type.order[l+\"-pre\"]});return u}function ie(t){var e,n,a,r,c,f=[],u=w.ext.type.order,d=t.aoData,o=(t.aoColumns,0),i=t.aiDisplayMaster;for(lt(t),e=0,n=(c=I(t)).length;e<n;e++)(r=c[e]).formatter&&o++,fe(t,r.col);if(\"ssp\"!=E(t)&&0!==c.length){for(e=0,a=i.length;e<a;e++)f[i[e]]=e;o===c.length?i.sort(function(t,e){for(var n,a,r,o,i=c.length,l=d[t]._aSortData,s=d[e]._aSortData,u=0;u<i;u++)if(0!=(r=(n=l[(o=c[u]).col])<(a=s[o.col])?-1:a<n?1:0))return\"asc\"===o.dir?r:-r;return(n=f[t])<(a=f[e])?-1:a<n?1:0}):i.sort(function(t,e){for(var n,a,r,o=c.length,i=d[t]._aSortData,l=d[e]._aSortData,s=0;s<o;s++)if(n=i[(r=c[s]).col],a=l[r.col],0!==(r=(u[r.type+\"-\"+r.dir]||u[\"string-\"+r.dir])(n,a)))return r;return(n=f[t])<(a=f[e])?-1:a<n?1:0})}t.bSorted=!0}function le(t){for(var e=t.aoColumns,n=I(t),a=t.oLanguage.oAria,r=0,o=e.length;r<o;r++){var i=e[r],l=i.asSorting,s=i.ariaTitle||i.sTitle.replace(/<.*?>/g,\"\"),u=i.nTh;u.removeAttribute(\"aria-sort\"),i=i.bSortable?s+(\"asc\"===(0<n.length&&n[0].col==r&&(u.setAttribute(\"aria-sort\",\"asc\"==n[0].dir?\"ascending\":\"descending\"),l[n[0].index+1])||l[0])?a.sSortAscending:a.sSortDescending):s,u.setAttribute(\"aria-label\",i)}}function se(t,e,n,a){function r(t,e){var n=t._idx;return(n=n===N?P.inArray(t[1],s):n)+1<s.length?n+1:e?null:0}var o,i=t.aoColumns[e],l=t.aaSorting,s=i.asSorting;\"number\"==typeof l[0]&&(l=t.aaSorting=[l]),n&&t.oFeatures.bSortMulti?-1!==(i=P.inArray(e,H(l,\"0\")))?null===(o=null===(o=r(l[i],!0))&&1===l.length?0:o)?l.splice(i,1):(l[i][1]=s[o],l[i]._idx=o):(l.push([e,s[0],0]),l[l.length-1]._idx=0):l.length&&l[0][0]==e?(o=r(l[0]),l.length=1,l[0][1]=s[o],l[0]._idx=o):(l.length=0,l.push([e,s[0]]),l[0]._idx=0),u(t),\"function\"==typeof a&&a(t)}function ue(e,t,n,a){var r=e.aoColumns[n];me(t,{},function(t){!1!==r.bSortable&&(e.oFeatures.bProcessing?(D(e,!0),setTimeout(function(){se(e,n,t.shiftKey,a),\"ssp\"!==E(e)&&D(e,!1)},0)):se(e,n,t.shiftKey,a))})}function ce(t){var e,n,a,r=t.aLastSort,o=t.oClasses.sSortColumn,i=I(t),l=t.oFeatures;if(l.bSort&&l.bSortClasses){for(e=0,n=r.length;e<n;e++)a=r[e].src,P(H(t.aoData,\"anCells\",a)).removeClass(o+(e<2?e+1:3));for(e=0,n=i.length;e<n;e++)a=i[e].src,P(H(t.aoData,\"anCells\",a)).addClass(o+(e<2?e+1:3))}t.aLastSort=i}function fe(t,e){for(var n,a,r,o=t.aoColumns[e],i=w.ext.order[o.sSortDataType],l=(i&&(n=i.call(t.oInstance,t,e,ot(t,e))),w.ext.type.order[o.sType+\"-pre\"]),s=0,u=t.aoData.length;s<u;s++)(a=t.aoData[s])._aSortData||(a._aSortData=[]),a._aSortData[e]&&!i||(r=i?n[s]:S(t,s,e,\"sort\"),a._aSortData[e]=l?l(r):r)}function de(n){var t;n._bLoadingState||(t={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:P.extend(!0,[],n.aaSorting),search:Et(n.oPreviousSearch),columns:P.map(n.aoColumns,function(t,e){return{visible:t.bVisible,search:Et(n.aoPreSearchCols[e])}})},n.oSavedState=t,R(n,\"aoStateSaveParams\",\"stateSaveParams\",[n,t]),n.oFeatures.bStateSave&&!n.bDestroying&&n.fnStateSaveCallback.call(n.oInstance,n,t))}function he(e,t,n){var a;if(e.oFeatures.bStateSave)return(a=e.fnStateLoadCallback.call(e.oInstance,e,function(t){pe(e,t,n)}))!==N&&pe(e,a,n),!0;n()}function pe(n,t,e){var a,r,o=n.aoColumns,i=(n._bLoadingState=!0,n._bInitComplete?new w.Api(n):null);if(t&&t.time){var l=R(n,\"aoStateLoadParams\",\"stateLoadParams\",[n,t]);if(-1!==P.inArray(!1,l))n._bLoadingState=!1;else{l=n.iStateDuration;if(0<l&&t.time<+new Date-1e3*l)n._bLoadingState=!1;else if(t.columns&&o.length!==t.columns.length)n._bLoadingState=!1;else{if(n.oLoadedState=P.extend(!0,{},t),t.length!==N&&(i?i.page.len(t.length):n._iDisplayLength=t.length),t.start!==N&&(null===i?(n._iDisplayStart=t.start,n.iInitDisplayStart=t.start):Yt(n,t.start/n._iDisplayLength)),t.order!==N&&(n.aaSorting=[],P.each(t.order,function(t,e){n.aaSorting.push(e[0]>=o.length?[0,e[1]]:e)})),t.search!==N&&P.extend(n.oPreviousSearch,Bt(t.search)),t.columns){for(a=0,r=t.columns.length;a<r;a++){var s=t.columns[a];s.visible!==N&&(i?i.column(a).visible(s.visible,!1):o[a].bVisible=s.visible),s.search!==N&&P.extend(n.aoPreSearchCols[a],Bt(s.search))}i&&i.columns.adjust()}n._bLoadingState=!1,R(n,\"aoStateLoaded\",\"stateLoaded\",[n,t])}}}else n._bLoadingState=!1;e()}function ge(t){var e=w.settings,t=P.inArray(t,H(e,\"nTable\"));return-1!==t?e[t]:null}function W(t,e,n,a){if(n=\"DataTables warning: \"+(t?\"table id=\"+t.sTableId+\" - \":\"\")+n,a&&(n+=\". For more information about this error, please see http://datatables.net/tn/\"+a),e)j.console&&console.log&&console.log(n);else{e=w.ext,e=e.sErrMode||e.errMode;if(t&&R(t,null,\"error\",[t,a,n]),\"alert\"==e)alert(n);else{if(\"throw\"==e)throw new Error(n);\"function\"==typeof e&&e(t,a,n)}}}function F(n,a,t,e){Array.isArray(t)?P.each(t,function(t,e){Array.isArray(e)?F(n,a,e[0],e[1]):F(n,a,e)}):(e===N&&(e=t),a[t]!==N&&(n[e]=a[t]))}function be(t,e,n){var a,r;for(r in e)e.hasOwnProperty(r)&&(a=e[r],P.isPlainObject(a)?(P.isPlainObject(t[r])||(t[r]={}),P.extend(!0,t[r],a)):n&&\"data\"!==r&&\"aaData\"!==r&&Array.isArray(a)?t[r]=a.slice():t[r]=a);return t}function me(e,t,n){P(e).on(\"click.DT\",t,function(t){P(e).trigger(\"blur\"),n(t)}).on(\"keypress.DT\",t,function(t){13===t.which&&(t.preventDefault(),n(t))}).on(\"selectstart.DT\",function(){return!1})}function L(t,e,n,a){n&&t[e].push({fn:n,sName:a})}function R(n,t,e,a){var r=[];return t&&(r=P.map(n[t].slice().reverse(),function(t,e){return t.fn.apply(n.oInstance,a)})),null!==e&&(t=P.Event(e+\".dt\"),(e=P(n.nTable)).trigger(t,a),0===e.parents(\"body\").length&&P(\"body\").trigger(t,a),r.push(t.result)),r}function Se(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),a=t._iDisplayLength;n<=e&&(e=n-a),e-=e%a,t._iDisplayStart=e=-1===a||e<0?0:e}function ve(t,e){var t=t.renderer,n=w.ext.renderer[e];return P.isPlainObject(t)&&t[e]?n[t[e]]||n._:\"string\"==typeof t&&n[t]||n._}function E(t){return t.oFeatures.bServerSide?\"ssp\":t.ajax||t.sAjaxSource?\"ajax\":\"dom\"}function ye(t,n){var a;return Array.isArray(t)?P.map(t,function(t){return ye(t,n)}):\"number\"==typeof t?[n[t]]:(a=P.map(n,function(t,e){return t.nTable}),P(a).filter(t).map(function(t){var e=P.inArray(this,a);return n[e]}).toArray())}function De(r,o,t){var e,n;t&&(e=new B(r)).one(\"draw\",function(){t(e.ajax.json())}),\"ssp\"==E(r)?u(r,o):(D(r,!0),(n=r.jqXHR)&&4!==n.readyState&&n.abort(),Tt(r,[],function(t){pt(r);for(var e=Ft(r,t),n=0,a=e.length;n<a;n++)x(r,e[n]);u(r,o),D(r,!1)}))}function _e(t,e,n,a,r){for(var o,i,l,s,u=[],c=typeof e,f=0,d=(e=e&&\"string\"!=c&&\"function\"!=c&&e.length!==N?e:[e]).length;f<d;f++)for(l=0,s=(i=e[f]&&e[f].split&&!e[f].match(/[\\[\\(:]/)?e[f].split(\",\"):[e[f]]).length;l<s;l++)(o=n(\"string\"==typeof i[l]?i[l].trim():i[l]))&&o.length&&(u=u.concat(o));var h=p.selector[t];if(h.length)for(f=0,d=h.length;f<d;f++)u=h[f](a,r,u);return z(u)}function we(t){return(t=t||{}).filter&&t.search===N&&(t.search=t.filter),P.extend({search:\"none\",order:\"current\",page:\"all\"},t)}function Ce(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t}function Te(o,t,e,n){function i(t,e){var n;if(Array.isArray(t)||t instanceof P)for(var a=0,r=t.length;a<r;a++)i(t[a],e);else t.nodeName&&\"tr\"===t.nodeName.toLowerCase()?l.push(t):(n=P(\"<tr><td></td></tr>\").addClass(e),P(\"td\",n).addClass(e).html(t)[0].colSpan=T(o),l.push(n[0]))}var l=[];i(e,n),t._details&&t._details.detach(),t._details=P(l),t._detailsShow&&t._details.insertAfter(t.nTr)}function xe(t,e){var n=t.context;if(n.length&&t.length){var a=n[0].aoData[t[0]];if(a._details){(a._detailsShow=e)?(a._details.insertAfter(a.nTr),P(a.nTr).addClass(\"dt-hasChild\")):(a._details.detach(),P(a.nTr).removeClass(\"dt-hasChild\")),R(n[0],null,\"childRow\",[e,t.row(t[0])]);var s=n[0],r=new B(s),a=\".dt.DT_details\",e=\"draw\"+a,t=\"column-sizing\"+a,a=\"destroy\"+a,u=s.aoData;if(r.off(e+\" \"+t+\" \"+a),H(u,\"_details\").length>0){r.on(e,function(t,e){if(s!==e)return;r.rows({page:\"current\"}).eq(0).each(function(t){var e=u[t];if(e._detailsShow)e._details.insertAfter(e.nTr)})});r.on(t,function(t,e,n,a){if(s!==e)return;var r,o=T(e);for(var i=0,l=u.length;i<l;i++){r=u[i];if(r._details)r._details.children(\"td[colspan]\").attr(\"colspan\",o)}});r.on(a,function(t,e){if(s!==e)return;for(var n=0,a=u.length;n<a;n++)if(u[n]._details)Re(r,n)})}Le(n)}}}function Ae(t,e,n,a,r){for(var o=[],i=0,l=r.length;i<l;i++)o.push(S(t,r[i],e));return o}var Ie=[],o=Array.prototype,B=function(t,e){if(!(this instanceof B))return new B(t,e);function n(t){var e,n,a,r;t=t,a=w.settings,r=P.map(a,function(t,e){return t.nTable}),(t=t?t.nTable&&t.oApi?[t]:t.nodeName&&\"table\"===t.nodeName.toLowerCase()?-1!==(e=P.inArray(t,r))?[a[e]]:null:t&&\"function\"==typeof t.settings?t.settings().toArray():(\"string\"==typeof t?n=P(t):t instanceof P&&(n=t),n?n.map(function(t){return-1!==(e=P.inArray(this,r))?a[e]:null}).toArray():void 0):[])&&o.push.apply(o,t)}var o=[];if(Array.isArray(t))for(var a=0,r=t.length;a<r;a++)n(t[a]);else n(t);this.context=z(o),e&&P.merge(this,e),this.selector={rows:null,cols:null,opts:null},B.extend(this,this,Ie)},Fe=(w.Api=B,P.extend(B.prototype,{any:function(){return 0!==this.count()},concat:o.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new B(e[t],this[t]):null},filter:function(t){var e=[];if(o.filter)e=o.filter.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new B(this.context,e)},flatten:function(){var t=[];return new B(this.context,t.concat.apply(t,this.toArray()))},join:o.join,indexOf:o.indexOf||function(t,e){for(var n=e||0,a=this.length;n<a;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,a){var r,o,i,l,s,u,c,f,d=[],h=this.context,p=this.selector;for(\"string\"==typeof t&&(a=n,n=e,e=t,t=!1),o=0,i=h.length;o<i;o++){var g=new B(h[o]);if(\"table\"===e)(r=n.call(g,h[o],o))!==N&&d.push(r);else if(\"columns\"===e||\"rows\"===e)(r=n.call(g,h[o],this[o],o))!==N&&d.push(r);else if(\"column\"===e||\"column-rows\"===e||\"row\"===e||\"cell\"===e)for(c=this[o],\"column-rows\"===e&&(u=Fe(h[o],p.opts)),l=0,s=c.length;l<s;l++)f=c[l],(r=\"cell\"===e?n.call(g,h[o],f.row,f.column,o,l):n.call(g,h[o],f,o,l,u))!==N&&d.push(r)}return d.length||a?((t=(a=new B(h,t?d.concat.apply([],d):d)).selector).rows=p.rows,t.cols=p.cols,t.opts=p.opts,a):this},lastIndexOf:o.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(o.map)e=o.map.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)e.push(t.call(this,this[n],n));return new B(this.context,e)},pluck:function(t){var e=w.util.get(t);return this.map(function(t){return e(t)})},pop:o.pop,push:o.push,reduce:o.reduce||function(t,e){return et(this,t,e,0,this.length,1)},reduceRight:o.reduceRight||function(t,e){return et(this,t,e,this.length-1,-1,-1)},reverse:o.reverse,selector:null,shift:o.shift,slice:function(){return new B(this.context,this)},sort:o.sort,splice:o.splice,toArray:function(){return o.slice.call(this)},to$:function(){return P(this)},toJQuery:function(){return P(this)},unique:function(){return new B(this.context,z(this))},unshift:o.unshift}),B.extend=function(t,e,n){if(n.length&&e&&(e instanceof B||e.__dt_wrapper))for(var a,r=0,o=n.length;r<o;r++)e[(a=n[r]).name]=\"function\"===a.type?function(e,n,a){return function(){var t=n.apply(e,arguments);return B.extend(t,t,a.methodExt),t}}(t,a.val,a):\"object\"===a.type?{}:a.val,e[a.name].__dt_wrapper=!0,B.extend(t,e[a.name],a.propExt)},B.register=e=function(t,e){if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)B.register(t[n],e);else for(var r=t.split(\".\"),o=Ie,i=0,l=r.length;i<l;i++){var s,u,c=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n].name===e)return t[n];return null}(o,u=(s=-1!==r[i].indexOf(\"()\"))?r[i].replace(\"()\",\"\"):r[i]);c||o.push(c={name:u,val:{},methodExt:[],propExt:[],type:\"object\"}),i===l-1?(c.val=e,c.type=\"function\"==typeof e?\"function\":P.isPlainObject(e)?\"object\":\"other\"):o=s?c.methodExt:c.propExt}},B.registerPlural=t=function(t,e,n){B.register(t,n),B.register(e,function(){var t=n.apply(this,arguments);return t===this?this:t instanceof B?t.length?Array.isArray(t[0])?new B(t.context,t[0]):t[0]:N:t})},e(\"tables()\",function(t){return t!==N&&null!==t?new B(ye(t,this.context)):this}),e(\"table()\",function(t){var t=this.tables(t),e=t.context;return e.length?new B(e[0]):t}),t(\"tables().nodes()\",\"table().node()\",function(){return this.iterator(\"table\",function(t){return t.nTable},1)}),t(\"tables().body()\",\"table().body()\",function(){return this.iterator(\"table\",function(t){return t.nTBody},1)}),t(\"tables().header()\",\"table().header()\",function(){return this.iterator(\"table\",function(t){return t.nTHead},1)}),t(\"tables().footer()\",\"table().footer()\",function(){return this.iterator(\"table\",function(t){return t.nTFoot},1)}),t(\"tables().containers()\",\"table().container()\",function(){return this.iterator(\"table\",function(t){return t.nTableWrapper},1)}),e(\"draw()\",function(e){return this.iterator(\"table\",function(t){\"page\"===e?v(t):u(t,!1===(e=\"string\"==typeof e?\"full-hold\"!==e:e))})}),e(\"page()\",function(e){return e===N?this.page.info().page:this.iterator(\"table\",function(t){Yt(t,e)})}),e(\"page.info()\",function(t){var e,n,a,r,o;return 0===this.context.length?N:(n=(e=this.context[0])._iDisplayStart,a=e.oFeatures.bPaginate?e._iDisplayLength:-1,r=e.fnRecordsDisplay(),{page:(o=-1===a)?0:Math.floor(n/a),pages:o?1:Math.ceil(r/a),start:n,end:e.fnDisplayEnd(),length:a,recordsTotal:e.fnRecordsTotal(),recordsDisplay:r,serverSide:\"ssp\"===E(e)})}),e(\"page.len()\",function(e){return e===N?0!==this.context.length?this.context[0]._iDisplayLength:N:this.iterator(\"table\",function(t){Gt(t,e)})}),e(\"ajax.json()\",function(){var t=this.context;if(0<t.length)return t[0].json}),e(\"ajax.params()\",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),e(\"ajax.reload()\",function(e,n){return this.iterator(\"table\",function(t){De(t,!1===n,e)})}),e(\"ajax.url()\",function(e){var t=this.context;return e===N?0===t.length?N:(t=t[0]).ajax?P.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource:this.iterator(\"table\",function(t){P.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),e(\"ajax.url().load()\",function(e,n){return this.iterator(\"table\",function(t){De(t,!1===n,e)})}),function(t,e){var n,a=[],r=t.aiDisplay,o=t.aiDisplayMaster,i=e.search,l=e.order,e=e.page;if(\"ssp\"==E(t))return\"removed\"===i?[]:f(0,o.length);if(\"current\"==e)for(u=t._iDisplayStart,c=t.fnDisplayEnd();u<c;u++)a.push(r[u]);else if(\"current\"==l||\"applied\"==l){if(\"none\"==i)a=o.slice();else if(\"applied\"==i)a=r.slice();else if(\"removed\"==i){for(var s={},u=0,c=r.length;u<c;u++)s[r[u]]=null;a=P.map(o,function(t){return s.hasOwnProperty(t)?null:t})}}else if(\"index\"==l||\"original\"==l)for(u=0,c=t.aoData.length;u<c;u++)(\"none\"==i||-1===(n=P.inArray(u,r))&&\"removed\"==i||0<=n&&\"applied\"==i)&&a.push(u);return a}),Le=(e(\"rows()\",function(e,n){e===N?e=\"\":P.isPlainObject(e)&&(n=e,e=\"\"),n=we(n);var t=this.iterator(\"table\",function(t){return _e(\"row\",e,function(n){var t=d(n),a=r.aoData;if(null!==t&&!o)return[t];if(i=i||Fe(r,o),null!==t&&-1!==P.inArray(t,i))return[t];if(null===n||n===N||\"\"===n)return i;if(\"function\"==typeof n)return P.map(i,function(t){var e=a[t];return n(t,e._aData,e.nTr)?t:null});if(n.nodeName)return t=n._DT_RowIndex,e=n._DT_CellIndex,t!==N?a[t]&&a[t].nTr===n?[t]:[]:e?a[e.row]&&a[e.row].nTr===n.parentNode?[e.row]:[]:(t=P(n).closest(\"*[data-dt-row]\")).length?[t.data(\"dt-row\")]:[];if(\"string\"==typeof n&&\"#\"===n.charAt(0)){var e=r.aIds[n.replace(/^#/,\"\")];if(e!==N)return[e.idx]}t=_(m(r.aoData,i,\"nTr\"));return P(t).filter(n).map(function(){return this._DT_RowIndex}).toArray()},r=t,o=n);var r,o,i},1);return t.selector.rows=e,t.selector.opts=n,t}),e(\"rows().nodes()\",function(){return this.iterator(\"row\",function(t,e){return t.aoData[e].nTr||N},1)}),e(\"rows().data()\",function(){return this.iterator(!0,\"rows\",function(t,e){return m(t.aoData,e,\"_aData\")},1)}),t(\"rows().cache()\",\"row().cache()\",function(n){return this.iterator(\"row\",function(t,e){t=t.aoData[e];return\"search\"===n?t._aFilterData:t._aSortData},1)}),t(\"rows().invalidate()\",\"row().invalidate()\",function(n){return this.iterator(\"row\",function(t,e){bt(t,e,n)})}),t(\"rows().indexes()\",\"row().index()\",function(){return this.iterator(\"row\",function(t,e){return e},1)}),t(\"rows().ids()\",\"row().id()\",function(t){for(var e=[],n=this.context,a=0,r=n.length;a<r;a++)for(var o=0,i=this[a].length;o<i;o++){var l=n[a].rowIdFn(n[a].aoData[this[a][o]]._aData);e.push((!0===t?\"#\":\"\")+l)}return new B(n,e)}),t(\"rows().remove()\",\"row().remove()\",function(){var f=this;return this.iterator(\"row\",function(t,e,n){var a,r,o,i,l,s,u=t.aoData,c=u[e];for(u.splice(e,1),a=0,r=u.length;a<r;a++)if(s=(l=u[a]).anCells,null!==l.nTr&&(l.nTr._DT_RowIndex=a),null!==s)for(o=0,i=s.length;o<i;o++)s[o]._DT_CellIndex.row=a;gt(t.aiDisplayMaster,e),gt(t.aiDisplay,e),gt(f[n],e,!1),0<t._iRecordsDisplay&&t._iRecordsDisplay--,Se(t);n=t.rowIdFn(c._aData);n!==N&&delete t.aIds[n]}),this.iterator(\"table\",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),e(\"rows.add()\",function(o){var t=this.iterator(\"table\",function(t){for(var e,n=[],a=0,r=o.length;a<r;a++)(e=o[a]).nodeName&&\"TR\"===e.nodeName.toUpperCase()?n.push(ut(t,e)[0]):n.push(x(t,e));return n},1),e=this.rows(-1);return e.pop(),P.merge(e,t),e}),e(\"row()\",function(t,e){return Ce(this.rows(t,e))}),e(\"row().data()\",function(t){var e,n=this.context;return t===N?n.length&&this.length?n[0].aoData[this[0]]._aData:N:((e=n[0].aoData[this[0]])._aData=t,Array.isArray(t)&&e.nTr&&e.nTr.id&&b(n[0].rowId)(t,e.nTr.id),bt(n[0],this[0],\"data\"),this)}),e(\"row().node()\",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null}),e(\"row.add()\",function(e){e instanceof P&&e.length&&(e=e[0]);var t=this.iterator(\"table\",function(t){return e.nodeName&&\"TR\"===e.nodeName.toUpperCase()?ut(t,e)[0]:x(t,e)});return this.row(t[0])}),P(y).on(\"plugin-init.dt\",function(t,e){var n=new B(e),a=\"on-plugin-init\",r=\"stateSaveParams.\"+a,o=\"destroy. \"+a,a=(n.on(r,function(t,e,n){for(var a=e.rowIdFn,r=e.aoData,o=[],i=0;i<r.length;i++)r[i]._detailsShow&&o.push(\"#\"+a(r[i]._aData));n.childRows=o}),n.on(o,function(){n.off(r+\" \"+o)}),n.state.loaded());a&&a.childRows&&n.rows(P.map(a.childRows,function(t){return t.replace(/:/g,\"\\\\:\")})).every(function(){R(e,null,\"requestChild\",[this])})}),w.util.throttle(function(t){de(t[0])},500)),Re=function(t,e){var n=t.context;n.length&&(e=n[0].aoData[e!==N?e:t[0]])&&e._details&&(e._details.remove(),e._detailsShow=N,e._details=N,P(e.nTr).removeClass(\"dt-hasChild\"),Le(n))},Pe=\"row().child\",je=Pe+\"()\",Ne=(e(je,function(t,e){var n=this.context;return t===N?n.length&&this.length?n[0].aoData[this[0]]._details:N:(!0===t?this.child.show():!1===t?Re(this):n.length&&this.length&&Te(n[0],n[0].aoData[this[0]],t,e),this)}),e([Pe+\".show()\",je+\".show()\"],function(t){return xe(this,!0),this}),e([Pe+\".hide()\",je+\".hide()\"],function(){return xe(this,!1),this}),e([Pe+\".remove()\",je+\".remove()\"],function(){return Re(this),this}),e(Pe+\".isShown()\",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1}),/^([^:]+):(name|visIdx|visible)$/),He=(e(\"columns()\",function(n,a){n===N?n=\"\":P.isPlainObject(n)&&(a=n,n=\"\"),a=we(a);var t=this.iterator(\"table\",function(t){return e=n,l=a,s=(i=t).aoColumns,u=H(s,\"sName\"),c=H(s,\"nTh\"),_e(\"column\",e,function(n){var a,t=d(n);if(\"\"===n)return f(s.length);if(null!==t)return[0<=t?t:s.length+t];if(\"function\"==typeof n)return a=Fe(i,l),P.map(s,function(t,e){return n(e,Ae(i,e,0,0,a),c[e])?e:null});var r=\"string\"==typeof n?n.match(Ne):\"\";if(r)switch(r[2]){case\"visIdx\":case\"visible\":var e,o=parseInt(r[1],10);return o<0?[(e=P.map(s,function(t,e){return t.bVisible?e:null}))[e.length+o]]:[rt(i,o)];case\"name\":return P.map(u,function(t,e){return t===r[1]?e:null});default:return[]}return n.nodeName&&n._DT_CellIndex?[n._DT_CellIndex.column]:(t=P(c).filter(n).map(function(){return P.inArray(this,c)}).toArray()).length||!n.nodeName?t:(t=P(n).closest(\"*[data-dt-column]\")).length?[t.data(\"dt-column\")]:[]},i,l);var i,e,l,s,u,c},1);return t.selector.cols=n,t.selector.opts=a,t}),t(\"columns().header()\",\"column().header()\",function(t,e){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].nTh},1)}),t(\"columns().footer()\",\"column().footer()\",function(t,e){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].nTf},1)}),t(\"columns().data()\",\"column().data()\",function(){return this.iterator(\"column-rows\",Ae,1)}),t(\"columns().dataSrc()\",\"column().dataSrc()\",function(){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].mData},1)}),t(\"columns().cache()\",\"column().cache()\",function(o){return this.iterator(\"column-rows\",function(t,e,n,a,r){return m(t.aoData,r,\"search\"===o?\"_aFilterData\":\"_aSortData\",e)},1)}),t(\"columns().nodes()\",\"column().nodes()\",function(){return this.iterator(\"column-rows\",function(t,e,n,a,r){return m(t.aoData,r,\"anCells\",e)},1)}),t(\"columns().visible()\",\"column().visible()\",function(f,n){var e=this,t=this.iterator(\"column\",function(t,e){if(f===N)return t.aoColumns[e].bVisible;var n,a,r=e,e=f,o=t.aoColumns,i=o[r],l=t.aoData;if(e===N)i.bVisible;else if(i.bVisible!==e){if(e)for(var s=P.inArray(!0,H(o,\"bVisible\"),r+1),u=0,c=l.length;u<c;u++)a=l[u].nTr,n=l[u].anCells,a&&a.insertBefore(n[r],n[s]||null);else P(H(t.aoData,\"anCells\",r)).detach();i.bVisible=e}});return f!==N&&this.iterator(\"table\",function(t){Dt(t,t.aoHeader),Dt(t,t.aoFooter),t.aiDisplay.length||P(t.nTBody).find(\"td[colspan]\").attr(\"colspan\",T(t)),de(t),e.iterator(\"column\",function(t,e){R(t,null,\"column-visibility\",[t,e,f,n])}),n!==N&&!n||e.columns.adjust()}),t}),t(\"columns().indexes()\",\"column().index()\",function(n){return this.iterator(\"column\",function(t,e){return\"visible\"===n?ot(t,e):e},1)}),e(\"columns.adjust()\",function(){return this.iterator(\"table\",function(t){O(t)},1)}),e(\"column.index()\",function(t,e){var n;if(0!==this.context.length)return n=this.context[0],\"fromVisible\"===t||\"toData\"===t?rt(n,e):\"fromData\"===t||\"toVisible\"===t?ot(n,e):void 0}),e(\"column()\",function(t,e){return Ce(this.columns(t,e))}),e(\"cells()\",function(g,t,b){var a,r,o,i,l,s,e;return P.isPlainObject(g)&&(g.row===N?(b=g,g=null):(b=t,t=null)),P.isPlainObject(t)&&(b=t,t=null),null===t||t===N?this.iterator(\"table\",function(t){return a=t,t=g,e=we(b),f=a.aoData,d=Fe(a,e),n=_(m(f,d,\"anCells\")),h=P(Y([],n)),p=a.aoColumns.length,_e(\"cell\",t,function(t){var e,n=\"function\"==typeof t;if(null===t||t===N||n){for(o=[],i=0,l=d.length;i<l;i++)for(r=d[i],s=0;s<p;s++)u={row:r,column:s},(!n||(c=f[r],t(u,S(a,r,s),c.anCells?c.anCells[s]:null)))&&o.push(u);return o}return P.isPlainObject(t)?t.column!==N&&t.row!==N&&-1!==P.inArray(t.row,d)?[t]:[]:(e=h.filter(t).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray()).length||!t.nodeName?e:(c=P(t).closest(\"*[data-dt-row]\")).length?[{row:c.data(\"dt-row\"),column:c.data(\"dt-column\")}]:[]},a,e);var a,e,r,o,i,l,s,u,c,f,d,n,h,p}):(e=b?{page:b.page,order:b.order,search:b.search}:{},a=this.columns(t,e),r=this.rows(g,e),e=this.iterator(\"table\",function(t,e){var n=[];for(o=0,i=r[e].length;o<i;o++)for(l=0,s=a[e].length;l<s;l++)n.push({row:r[e][o],column:a[e][l]});return n},1),e=b&&b.selected?this.cells(e,b):e,P.extend(e.selector,{cols:t,rows:g,opts:b}),e)}),t(\"cells().nodes()\",\"cell().node()\",function(){return thi', '```html\n<div class=\"container\">\n    <div class=\"card\">\n        <div class=\"card-header\">\n            Análisis de Seguridad y Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Resumen</h5>\n            <p class=\"card-text\">El código proporcionado corresponde a una versión de la librería DataTables. El análisis se centra en posibles vulnerabilidades de seguridad y métricas de calidad del código. Debido a la naturaleza ofuscada y extensa del código, el análisis se realizará sobre las áreas más críticas y comunes donde suelen encontrarse vulnerabilidades.</p>\n        </div>\n    </div>\n\n    <div class=\"card mt-3\">\n        <div class=\"card-header\">\n            Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">1. Cross-Site Scripting (XSS)</h6>\n                    <p class=\"card-text\">\n                        <strong>Tipo:</strong> XSS (Cross-Site Scripting).\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Línea Aproximada:</strong> Múltiples instancias en la manipulación de DOM y renderizado de datos, especialmente en funciones como `S` (obtención de datos), `We` (escape HTML), y renderers. Sin embargo, sin identificar el error de manera especifica es muy dificil saber que línea es.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> Si los datos mostrados en la tabla provienen de fuentes no confiables, y no se escapan correctamente, un atacante podría inyectar código JavaScript malicioso que se ejecutaría en el navegador del usuario.  La función `We` intenta hacer escaping, pero hay que verificar su correcto uso en todo el código.  El código no está utilizando un contexto de escape apropiado para el contexto (ej: escapar atributos HTML vs escapar contenido HTML).\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li>Escapar todos los datos que se insertan en el DOM, utilizando funciones de escape HTML seguras y context-aware (ej: escapar para atributos, escapar para contenido HTML, escapar para URLs).</li>\n                            <li>Sanitizar los datos de entrada para eliminar cualquier código HTML o JavaScript potencialmente malicioso.</li>\n                            <li>Implementar una política de seguridad de contenido (CSP) para controlar los recursos que se pueden cargar y ejecutar en la página.</li>\n                            <li>Usar templates engine que escapen por defecto.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora de Métricas:</strong> Reducir la complejidad de las funciones de renderizado para facilitar la identificación de lugares donde se necesitan escaping. Centralizar el escaping en funciones reutilizables.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">2. Inyección de HTML</h6>\n                    <p class=\"card-text\">\n                        <strong>Tipo:</strong> Inyección de HTML.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Línea Aproximada:</strong> Funciones que manipulan `innerHTML` directamente, como la función `yt` y otras que actualizan el contenido de las celdas.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> Al insertar HTML directamente sin validación, un atacante puede modificar la estructura de la página o inyectar contenido no deseado.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li>Utilizar métodos DOM seguros como `createElement`, `createTextNode`, `appendChild`, `setAttribute` en lugar de manipulación directa de `innerHTML`.</li>\n                            <li>Validar y escapar los datos antes de insertarlos en el DOM.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora de Métricas:</strong> Reducir la dependencia de la manipulación directa del DOM, encapsulando la creación de elementos en funciones.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">3. Vulnerabilidades de Dependencias</h6>\n                    <p class=\"card-text\">\n                        <strong>Tipo:</strong> Dependencia vulnerable (jQuery).\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Línea Aproximada:</strong>  Importación de jQuery (líneas iniciales del código).\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> El código depende de jQuery. Si la versión de jQuery utilizada tiene vulnerabilidades conocidas, el proyecto es vulnerable.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li>Actualizar jQuery a la última versión estable que incluya correcciones de seguridad.</li>\n                            <li>Realizar análisis de dependencias periódicos para detectar y corregir vulnerabilidades.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora de Métricas:</strong> Mantener las dependencias actualizadas con un proceso automatizado.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">4.  Posibles vulnerabilidades en la manipulación de URLs (sAjaxSource)</h6>\n                    <p class=\"card-text\">\n                        <strong>Tipo:</strong> Manipulación de URLs.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Línea Aproximada:</strong>  Funciones relacionadas con la configuración de AJAX y el uso de `sAjaxSource` (ej: `Tt`).\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong>  Si la URL para las peticiones AJAX (`sAjaxSource`) se construye a partir de datos proporcionados por el usuario sin una correcta validación y escaping, podría ser susceptible a inyección de URL, permitiendo al atacante redirigir las peticiones a un dominio malicioso.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mitigación:</strong>\n                        <ul>\n                            <li>Validar y escapar los datos que se utilizan para construir la URL de AJAX.</li>\n                            <li>Utilizar parámetros para pasar los datos al servidor en lugar de construir la URL directamente.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora de Métricas:</strong>  Utilizar funciones centralizadas para la construcción de URLs y asegurar que todas las URLs se validen correctamente.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"card mt-3\">\n        <div class=\"card-header\">\n            Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">1. Complejidad Ciclomática</h6>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> La complejidad ciclomática parece alta, especialmente en las funciones centrales como `w`, `v`, `u`, y `Jt`. Estas funciones contienen muchas ramas condicionales, bucles y llamadas a otras funciones, lo que dificulta su comprensión y mantenimiento.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora:</strong>\n                        <ul>\n                            <li>Descomponer las funciones complejas en funciones más pequeñas y modulares.</li>\n                            <li>Utilizar patrones de diseño para simplificar la lógica condicional.</li>\n                            <li>Reducir la anidación de bucles y condicionales.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">2. Duplicación de Código</h6>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> Debido a la extensión del código, es probable que haya duplicación de código, especialmente en funciones de manipulación del DOM y renderizado de datos.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora:</strong>\n                        <ul>\n                            <li>Identificar y eliminar el código duplicado mediante la refactorización y la creación de funciones reutilizables.</li>\n                            <li>Utilizar herramientas de análisis estático para detectar la duplicación de código.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">3. Legibilidad</h6>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> La legibilidad del código es baja debido a la ofuscación, nombres de variables no descriptivos (ej: `t`, `e`, `n`, `a`), y la falta de comentarios.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora:</strong>\n                        <ul>\n                            <li>Utilizar nombres de variables y funciones descriptivos.</li>\n                            <li>Añadir comentarios para explicar la lógica del código.</li>\n                            <li>Utilizar una estructura de código clara y consistente.</li>\n                            <li>Evitar la ofuscación del código en versiones de desarrollo.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card mt-2\">\n                <div class=\"card-body\">\n                    <h6 class=\"card-title\">4. Acoplamiento</h6>\n                    <p class=\"card-text\">\n                        <strong>Descripción:</strong> El acoplamiento entre los diferentes componentes del código puede ser alto, especialmente entre las funciones que manipulan el DOM y las funciones de renderizado de datos.\n                    </p>\n                    <p class=\"card-text\">\n                        <strong>Mejora:</strong>\n                        <ul>\n                            <li>Reducir el acoplamiento mediante la separación de responsabilidades y la creación de interfaces bien definidas entre los componentes.</li>\n                            <li>Utilizar patrones de diseño como la inversión de control (IoC) para reducir la dependencia entre los componentes.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"card border-success mt-3\">\n        <div class=\"card-header\">\n            Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Recomendaciones</h5>\n            <p class=\"card-text\">Dada la complejidad del código, se recomienda un enfoque iterativo para mejorar la seguridad y la calidad del código:</p>\n            <ol>\n                <li><strong>Análisis de Seguridad Exhaustivo:</strong> Realizar un análisis de seguridad manual y automatizado para identificar y corregir todas las vulnerabilidades.</li>\n                <li><strong>Refactorización del Código:</strong> Refactorizar el código para mejorar la legibilidad, reducir la complejidad y eliminar la duplicación.</li>\n                <li><strong>Actualización de Dependencias:</strong> Actualizar jQuery y otras dependencias a las últimas versiones estables.</li>\n                <li><strong>Implementación de Pruebas:</strong> Implementar pruebas unitarias y de integración para garantizar la calidad y la seguridad del código.</li>\n                <li><strong>Integración Continua:</strong> Implementar un proceso de integración continua para automatizar las pruebas y el análisis de seguridad.</li>\n            </ol>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:44:48', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(27, 'bootstrap.bundle.min.js', 'Detectado por GPT', '/*!\r\n  * Bootstrap v5.3.0 (https://getbootstrap.com/)\r\n  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\r\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\r\n  */\r\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){\"use strict\";const t=new Map,e={set(e,i,n){t.has(e)||t.set(e,new Map);const s=t.get(e);s.has(i)||0===s.size?s.set(i,n):console.error(`Bootstrap doesn\'t allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,i)=>t.has(e)&&t.get(e).get(i)||null,remove(e,i){if(!t.has(e))return;const n=t.get(e);n.delete(i),0===n.size&&t.delete(e)}},i=\"transitionend\",n=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\\s\"#\']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),s=t=>{t.dispatchEvent(new Event(i))},o=t=>!(!t||\"object\"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),r=t=>o(t)?t.jquery?t[0]:t:\"string\"==typeof t&&t.length>0?document.querySelector(n(t)):null,a=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e=\"visible\"===getComputedStyle(t).getPropertyValue(\"visibility\"),i=t.closest(\"details:not([open])\");if(!i)return e;if(i!==t){const e=t.closest(\"summary\");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},l=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains(\"disabled\")||(void 0!==t.disabled?t.disabled:t.hasAttribute(\"disabled\")&&\"false\"!==t.getAttribute(\"disabled\")),c=t=>{if(!document.documentElement.attachShadow)return null;if(\"function\"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c(t.parentNode):null},h=()=>{},d=t=>{t.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute(\"data-bs-no-jquery\")?window.jQuery:null,f=[],p=()=>\"rtl\"===document.documentElement.dir,m=t=>{var e;e=()=>{const e=u();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},\"loading\"===document.readyState?(f.length||document.addEventListener(\"DOMContentLoaded\",(()=>{for(const t of f)t()})),f.push(e)):e()},g=(t,e=[],i=t)=>\"function\"==typeof t?t(...e):i,_=(t,e,n=!0)=>{if(!n)return void g(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),s=Number.parseFloat(i);return n||s?(e=e.split(\",\")[0],i=i.split(\",\")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let r=!1;const a=({target:n})=>{n===e&&(r=!0,e.removeEventListener(i,a),g(t))};e.addEventListener(i,a),setTimeout((()=>{r||s(e)}),o)},b=(t,e,i,n)=>{const s=t.length;let o=t.indexOf(e);return-1===o?!i&&n?t[s-1]:t[0]:(o+=i?1:-1,n&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))])},v=/[^.]*(?=\\..*)\\.|.*/,y=/\\..*/,w=/::\\d+$/,A={};let E=1;const T={mouseenter:\"mouseover\",mouseleave:\"mouseout\"},C=new Set([\"click\",\"dblclick\",\"mouseup\",\"mousedown\",\"contextmenu\",\"mousewheel\",\"DOMMouseScroll\",\"mouseover\",\"mouseout\",\"mousemove\",\"selectstart\",\"selectend\",\"keydown\",\"keypress\",\"keyup\",\"orientationchange\",\"touchstart\",\"touchmove\",\"touchend\",\"touchcancel\",\"pointerdown\",\"pointermove\",\"pointerup\",\"pointerleave\",\"pointercancel\",\"gesturestart\",\"gesturechange\",\"gestureend\",\"focus\",\"blur\",\"change\",\"reset\",\"select\",\"submit\",\"focusin\",\"focusout\",\"load\",\"unload\",\"beforeunload\",\"resize\",\"move\",\"DOMContentLoaded\",\"readystatechange\",\"error\",\"abort\",\"scroll\"]);function O(t,e){return e&&`${e}::${E++}`||t.uidEvent||E++}function x(t){const e=O(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function k(t,e,i=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function L(t,e,i){const n=\"string\"==typeof e,s=n?i:e||i;let o=N(t);return C.has(o)||(o=t),[n,s,o]}function S(t,e,i,n,s){if(\"string\"!=typeof e||!t)return;let[o,r,a]=L(e,i,n);if(e in T){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};r=t(r)}const l=x(t),c=l[a]||(l[a]={}),h=k(c,r,o?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const d=O(r,e.replace(v,\"\")),u=o?function(t,e,i){return function n(s){const o=t.querySelectorAll(e);for(let{target:r}=s;r&&r!==this;r=r.parentNode)for(const a of o)if(a===r)return M(s,{delegateTarget:r}),n.oneOff&&P.off(t,s.type,e,i),i.apply(r,[s])}}(t,i,r):function(t,e){return function i(n){return M(n,{delegateTarget:t}),i.oneOff&&P.off(t,n.type,e),e.apply(t,[n])}}(t,r);u.delegationSelector=o?i:null,u.callable=r,u.oneOff=s,u.uidEvent=d,c[d]=u,t.addEventListener(a,u,o)}function D(t,e,i,n,s){const o=k(e[i],n,s);o&&(t.removeEventListener(i,o,Boolean(s)),delete e[i][o.uidEvent])}function I(t,e,i,n){const s=e[i]||{};for(const[o,r]of Object.entries(s))o.includes(n)&&D(t,e,i,r.callable,r.delegationSelector)}function N(t){return t=t.replace(y,\"\"),T[t]||t}const P={on(t,e,i,n){S(t,e,i,n,!1)},one(t,e,i,n){S(t,e,i,n,!0)},off(t,e,i,n){if(\"string\"!=typeof e||!t)return;const[s,o,r]=L(e,i,n),a=r!==e,l=x(t),c=l[r]||{},h=e.startsWith(\".\");if(void 0===o){if(h)for(const i of Object.keys(l))I(t,l,i,e.slice(1));for(const[i,n]of Object.entries(c)){const s=i.replace(w,\"\");a&&!e.includes(s)||D(t,l,r,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;D(t,l,r,o,s?i:null)}},trigger(t,e,i){if(\"string\"!=typeof e||!t)return null;const n=u();let s=null,o=!0,r=!0,a=!1;e!==N(e)&&n&&(s=n.Event(e,i),n(t).trigger(s),o=!s.isPropagationStopped(),r=!s.isImmediatePropagationStopped(),a=s.isDefaultPrevented());const l=M(new Event(e,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),r&&t.dispatchEvent(l),l.defaultPrevented&&s&&s.preventDefault(),l}};function M(t,e={}){for(const[i,n]of Object.entries(e))try{t[i]=n}catch(e){Object.defineProperty(t,i,{configurable:!0,get:()=>n})}return t}function j(t){if(\"true\"===t)return!0;if(\"false\"===t)return!1;if(t===Number(t).toString())return Number(t);if(\"\"===t||\"null\"===t)return null;if(\"string\"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const H={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${F(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith(\"bs\")&&!t.startsWith(\"bsConfig\")));for(const n of i){let i=n.replace(/^bs/,\"\");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=j(t.dataset[n])}return e},getDataAttribute:(t,e)=>j(t.getAttribute(`data-bs-${F(e)}`))};class ${static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error(\'You have to implement the static method \"NAME\", for each component!\')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=o(e)?H.getDataAttribute(e,\"config\"):{};return{...this.constructor.Default,...\"object\"==typeof i?i:{},...o(e)?H.getDataAttributes(e):{},...\"object\"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const e=t[n],r=o(e)?\"element\":null==(i=e)?`${i}`:Object.prototype.toString.call(i).match(/\\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option \"${n}\" provided type \"${r}\" but expected type \"${s}\".`)}var i}}class W extends ${constructor(t,i){super(),(t=r(t))&&(this._element=t,this._config=this._getConfig(i),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){_(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(r(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,\"object\"==typeof e?e:null)}static get VERSION(){return\"5.3.0\"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const B=t=>{let e=t.getAttribute(\"data-bs-target\");if(!e||\"#\"===e){let i=t.getAttribute(\"href\");if(!i||!i.includes(\"#\")&&!i.startsWith(\".\"))return null;i.includes(\"#\")&&!i.startsWith(\"#\")&&(i=`#${i.split(\"#\")[1]}`),e=i&&\"#\"!==i?i.trim():null}return n(e)},z={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=[\"a\",\"button\",\"input\",\"textarea\",\"select\",\"details\",\"[tabindex]\",\'[contenteditable=\"true\"]\'].map((t=>`${t}:not([tabindex^=\"-\"])`)).join(\",\");return this.find(e,t).filter((t=>!l(t)&&a(t)))},getSelectorFromElement(t){const e=B(t);return e&&z.findOne(e)?e:null},getElementFromSelector(t){const e=B(t);return e?z.findOne(e):null},getMultipleElementsFromSelector(t){const e=B(t);return e?z.find(e):[]}},R=(t,e=\"hide\")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;P.on(document,i,`[data-bs-dismiss=\"${n}\"]`,(function(i){if([\"A\",\"AREA\"].includes(this.tagName)&&i.preventDefault(),l(this))return;const s=z.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(s)[e]()}))};class q extends W{static get NAME(){return\"alert\"}close(){if(P.trigger(this._element,\"close.bs.alert\").defaultPrevented)return;this._element.classList.remove(\"show\");const t=this._element.classList.contains(\"fade\");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),P.trigger(this._element,\"closed.bs.alert\"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}R(q,\"close\"),m(q);const V=\'[data-bs-toggle=\"button\"]\';class K extends W{static get NAME(){return\"button\"}toggle(){this._element.setAttribute(\"aria-pressed\",this._element.classList.toggle(\"active\"))}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);\"toggle\"===t&&e[t]()}))}}P.on(document,\"click.bs.button.data-api\",V,(t=>{t.preventDefault();const e=t.target.closest(V);K.getOrCreateInstance(e).toggle()})),m(K);const Q={endCallback:null,leftCallback:null,rightCallback:null},X={endCallback:\"(function|null)\",leftCallback:\"(function|null)\",rightCallback:\"(function|null)\"};class Y extends ${constructor(t,e){super(),this._element=t,t&&Y.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Q}static get DefaultType(){return X}static get NAME(){return\"swipe\"}dispose(){P.off(this._element,\".bs.swipe\")}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&g(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,\"pointerdown.bs.swipe\",(t=>this._start(t))),P.on(this._element,\"pointerup.bs.swipe\",(t=>this._end(t))),this._element.classList.add(\"pointer-event\")):(P.on(this._element,\"touchstart.bs.swipe\",(t=>this._start(t))),P.on(this._element,\"touchmove.bs.swipe\",(t=>this._move(t))),P.on(this._element,\"touchend.bs.swipe\",(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(\"pen\"===t.pointerType||\"touch\"===t.pointerType)}static isSupported(){return\"ontouchstart\"in document.documentElement||navigator.maxTouchPoints>0}}const U=\"next\",G=\"prev\",J=\"left\",Z=\"right\",tt=\"slid.bs.carousel\",et=\"carousel\",it=\"active\",nt={ArrowLeft:Z,ArrowRight:J},st={interval:5e3,keyboard:!0,pause:\"hover\",ride:!1,touch:!0,wrap:!0},ot={interval:\"(number|boolean)\",keyboard:\"boolean\",pause:\"(string|boolean)\",ride:\"(boolean|string)\",touch:\"boolean\",wrap:\"boolean\"};class rt extends W{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(\".carousel-indicators\",this._element),this._addEventListeners(),this._config.ride===et&&this.cycle()}static get Default(){return st}static get DefaultType(){return ot}static get NAME(){return\"carousel\"}next(){this._slide(U)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(G)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,tt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void P.one(this._element,tt,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const n=t>i?U:G;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,\"keydown.bs.carousel\",(t=>this._keydown(t))),\"hover\"===this._config.pause&&(P.on(this._element,\"mouseenter.bs.carousel\",(()=>this.pause())),P.on(this._element,\"mouseleave.bs.carousel\",(()=>this._maybeEnableCycle()))),this._config.touch&&Y.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of z.find(\".carousel-item img\",this._element))P.on(t,\"dragstart.bs.carousel\",(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(J)),rightCallback:()=>this._slide(this._directionToOrder(Z)),endCallback:()=>{\"hover\"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Y(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=nt[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=z.findOne(\".active\",this._indicatorsElement);e.classList.remove(it),e.removeAttribute(\"aria-current\");const i=z.findOne(`[data-bs-slide-to=\"${t}\"]`,this._indicatorsElement);i&&(i.classList.add(it),i.setAttribute(\"aria-current\",\"true\"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute(\"data-bs-interval\"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),n=t===U,s=e||b(this._getItems(),i,n,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),r=e=>P.trigger(this._element,e,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(r(\"slide.bs.carousel\").defaultPrevented)return;if(!i||!s)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const l=n?\"carousel-item-start\":\"carousel-item-end\",c=n?\"carousel-item-next\":\"carousel-item-prev\";s.classList.add(c),d(s),i.classList.add(l),s.classList.add(l),this._queueCallback((()=>{s.classList.remove(l,c),s.classList.add(it),i.classList.remove(it,c,l),this._isSliding=!1,r(tt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains(\"slide\")}_getActive(){return z.findOne(\".active.carousel-item\",this._element)}_getItems(){return z.find(\".carousel-item\",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return p()?t===J?G:U:t===J?U:G}_orderToDirection(t){return p()?t===G?J:Z:t===G?Z:J}static jQueryInterface(t){return this.each((function(){const e=rt.getOrCreateInstance(this,t);if(\"number\"!=typeof t){if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t]()}}else e.to(t)}))}}P.on(document,\"click.bs.carousel.data-api\",\"[data-bs-slide], [data-bs-slide-to]\",(function(t){const e=z.getElementFromSelector(this);if(!e||!e.classList.contains(et))return;t.preventDefault();const i=rt.getOrCreateInstance(e),n=this.getAttribute(\"data-bs-slide-to\");return n?(i.to(n),void i._maybeEnableCycle()):\"next\"===H.getDataAttribute(this,\"slide\")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),P.on(window,\"load.bs.carousel.data-api\",(()=>{const t=z.find(\'[data-bs-ride=\"carousel\"]\');for(const e of t)rt.getOrCreateInstance(e)})),m(rt);const at=\"show\",lt=\"collapse\",ct=\"collapsing\",ht=\'[data-bs-toggle=\"collapse\"]\',dt={parent:null,toggle:!0},ut={parent:\"(null|element)\",toggle:\"boolean\"};class ft extends W{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=z.find(ht);for(const t of i){const e=z.getSelectorFromElement(t),i=z.find(e).filter((t=>t===this._element));null!==e&&i.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return dt}static get DefaultType(){return ut}static get NAME(){return\"collapse\"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(\".collapse.show, .collapse.collapsing\").filter((t=>t!==this._element)).map((t=>ft.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(P.trigger(this._element,\"show.bs.collapse\").defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(lt),this._element.classList.add(ct),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt,at),this._element.style[e]=\"\",P.trigger(this._element,\"shown.bs.collapse\")}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,\"hide.bs.collapse\").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,d(this._element),this._element.classList.add(ct),this._element.classList.remove(lt,at);for(const t of this._triggerArray){const e=z.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]=\"\",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt),P.trigger(this._element,\"hidden.bs.collapse\")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(at)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=r(t.parent),t}_getDimension(){return this._element.classList.contains(\"collapse-horizontal\")?\"width\":\"height\"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ht);for(const e of t){const t=z.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=z.find(\":scope .collapse .collapse\",this._config.parent);return z.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(\"collapsed\",!e),i.setAttribute(\"aria-expanded\",e)}static jQueryInterface(t){const e={};return\"string\"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=ft.getOrCreateInstance(this,e);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t]()}}))}}P.on(document,\"click.bs.collapse.data-api\",ht,(function(t){(\"A\"===t.target.tagName||t.delegateTarget&&\"A\"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of z.getMultipleElementsFromSelector(this))ft.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(ft);var pt=\"top\",mt=\"bottom\",gt=\"right\",_t=\"left\",bt=\"auto\",vt=[pt,mt,gt,_t],yt=\"start\",wt=\"end\",At=\"clippingParents\",Et=\"viewport\",Tt=\"popper\",Ct=\"reference\",Ot=vt.reduce((function(t,e){return t.concat([e+\"-\"+yt,e+\"-\"+wt])}),[]),xt=[].concat(vt,[bt]).reduce((function(t,e){return t.concat([e,e+\"-\"+yt,e+\"-\"+wt])}),[]),kt=\"beforeRead\",Lt=\"read\",St=\"afterRead\",Dt=\"beforeMain\",It=\"main\",Nt=\"afterMain\",Pt=\"beforeWrite\",Mt=\"write\",jt=\"afterWrite\",Ft=[kt,Lt,St,Dt,It,Nt,Pt,Mt,jt];function Ht(t){return t?(t.nodeName||\"\").toLowerCase():null}function $t(t){if(null==t)return window;if(\"[object Window]\"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wt(t){return t instanceof $t(t).Element||t instanceof Element}function Bt(t){return t instanceof $t(t).HTMLElement||t instanceof HTMLElement}function zt(t){return\"undefined\"!=typeof ShadowRoot&&(t instanceof $t(t).ShadowRoot||t instanceof ShadowRoot)}const Rt={name:\"applyStyles\",enabled:!0,phase:\"write\",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];Bt(s)&&Ht(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?\"\":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:\"0\",top:\"0\",margin:\"0\"},arrow:{position:\"absolute\"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]=\"\",t}),{});Bt(n)&&Ht(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:[\"computeStyles\"]};function qt(t){return t.split(\"-\")[0]}var Vt=Math.max,Kt=Math.min,Qt=Math.round;function Xt(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+\"/\"+t.version})).join(\" \"):navigator.userAgent}function Yt(){return!/^((?!chrome|android).)*safari/i.test(Xt())}function Ut(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&Bt(t)&&(s=t.offsetWidth>0&&Qt(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Qt(n.height)/t.offsetHeight||1);var r=(Wt(t)?$t(t):window).visualViewport,a=!Yt()&&i,l=(n.left+(a&&r?r.offsetLeft:0))/s,c=(n.top+(a&&r?r.offsetTop:0))/o,h=n.width/s,d=n.height/o;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l,x:l,y:c}}function Gt(t){var e=Ut(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Jt(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&zt(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Zt(t){return $t(t).getComputedStyle(t)}function te(t){return[\"table\",\"td\",\"th\"].indexOf(Ht(t))>=0}function ee(t){return((Wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ie(t){return\"html\"===Ht(t)?t:t.assignedSlot||t.parentNode||(zt(t)?t.host:null)||ee(t)}function ne(t){return Bt(t)&&\"fixed\"!==Zt(t).position?t.offsetParent:null}function se(t){for(var e=$t(t),i=ne(t);i&&te(i)&&\"static\"===Zt(i).position;)i=ne(i);return i&&(\"html\"===Ht(i)||\"body\"===Ht(i)&&\"static\"===Zt(i).position)?e:i||function(t){var e=/firefox/i.test(Xt());if(/Trident/i.test(Xt())&&Bt(t)&&\"fixed\"===Zt(t).position)return null;var i=ie(t);for(zt(i)&&(i=i.host);Bt(i)&&[\"html\",\"body\"].indexOf(Ht(i))<0;){var n=Zt(i);if(\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||-1!==[\"transform\",\"perspective\"].indexOf(n.willChange)||e&&\"filter\"===n.willChange||e&&n.filter&&\"none\"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function oe(t){return[\"top\",\"bottom\"].indexOf(t)>=0?\"x\":\"y\"}function re(t,e,i){return Vt(t,Kt(e,i))}function ae(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function le(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const ce={name:\"arrow\",enabled:!0,phase:\"main\",fn:function(t){var e,i=t.state,n=t.name,s=t.options,o=i.elements.arrow,r=i.modifiersData.popperOffsets,a=qt(i.placement),l=oe(a),c=[_t,gt].indexOf(a)>=0?\"height\":\"width\";if(o&&r){var h=function(t,e){return ae(\"number\"!=typeof(t=\"function\"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:le(t,vt))}(s.padding,i),d=Gt(o),u=\"y\"===l?pt:_t,f=\"y\"===l?mt:gt,p=i.rects.reference[c]+i.rects.reference[l]-r[l]-i.rects.popper[c],m=r[l]-i.rects.reference[l],g=se(o),_=g?\"y\"===l?g.clientHeight||0:g.clientWidth||0:0,b=p/2-m/2,v=h[u],y=_-d[c]-h[f],w=_/2-d[c]/2+b,A=re(v,w,y),E=l;i.modifiersData[n]=((e={})[E]=A,e.centerOffset=A-w,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?\"[data-popper-arrow]\":i;null!=n&&(\"string\"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Jt(e.elements.popper,n)&&(e.elements.arrow=n)},requires:[\"popperOffsets\"],requiresIfExists:[\"preventOverflow\"]};function he(t){return t.split(\"-\")[1]}var de={top:\"auto\",right:\"auto\",bottom:\"auto\",left:\"auto\"};function ue(t){var e,i=t.popper,n=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,u=r.x,f=void 0===u?0:u,p=r.y,m=void 0===p?0:p,g=\"function\"==typeof h?h({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var _=r.hasOwnProperty(\"x\"),b=r.hasOwnProperty(\"y\"),v=_t,y=pt,w=window;if(c){var A=se(i),E=\"clientHeight\",T=\"clientWidth\";A===$t(i)&&\"static\"!==Zt(A=ee(i)).position&&\"absolute\"===a&&(E=\"scrollHeight\",T=\"scrollWidth\"),(s===pt||(s===_t||s===gt)&&o===wt)&&(y=mt,m-=(d&&A===w&&w.visualViewport?w.visualViewport.height:A[E])-n.height,m*=l?1:-1),s!==_t&&(s!==pt&&s!==mt||o!==wt)||(v=gt,f-=(d&&A===w&&w.visualViewport?w.visualViewport.width:A[T])-n.width,f*=l?1:-1)}var C,O=Object.assign({position:a},c&&de),x=!0===h?function(t,e){var i=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:Qt(i*s)/s||0,y:Qt(n*s)/s||0}}({x:f,y:m},$t(i)):{x:f,y:m};return f=x.x,m=x.y,l?Object.assign({},O,((C={})[y]=b?\"0\":\"\",C[v]=_?\"0\":\"\",C.transform=(w.devicePixelRatio||1)<=1?\"translate(\"+f+\"px, \"+m+\"px)\":\"translate3d(\"+f+\"px, \"+m+\"px, 0)\",C)):Object.assign({},O,((e={})[y]=b?m+\"px\":\"\",e[v]=_?f+\"px\":\"\",e.transform=\"\",e))}const fe={name:\"computeStyles\",enabled:!0,phase:\"beforeWrite\",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,o=i.adaptive,r=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:qt(e.placement),variation:he(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:\"fixed\"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ue(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ue(Object.assign({},c,{offsets:e.modifiersData.arrow,position:\"absolute\",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{\"data-popper-placement\":e.placement})},data:{}};var pe={passive:!0};const me={name:\"eventListeners\",enabled:!0,phase:\"write\",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,o=void 0===s||s,r=n.resize,a=void 0===r||r,l=$t(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener(\"scroll\",i.update,pe)})),a&&l.addEventListener(\"resize\",i.update,pe),function(){o&&c.forEach((function(t){t.removeEventListener(\"scroll\",i.update,pe)})),a&&l.removeEventListener(\"resize\",i.update,pe)}},data:{}};var ge={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function _e(t){return t.replace(/left|right|bottom|top/g,(function(t){return ge[t]}))}var be={start:\"end\",end:\"start\"};function ve(t){return t.replace(/start|end/g,(function(t){return be[t]}))}function ye(t){var e=$t(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function we(t){return Ut(ee(t)).left+ye(t).scrollLeft}function Ae(t){var e=Zt(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function Ee(t){return[\"html\",\"body\",\"#document\"].indexOf(Ht(t))>=0?t.ownerDocument.body:Bt(t)&&Ae(t)?t:Ee(ie(t))}function Te(t,e){var i;void 0===e&&(e=[]);var n=Ee(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),o=$t(n),r=s?[o].concat(o.visualViewport||[],Ae(n)?n:[]):n,a=e.concat(r);return s?a:a.concat(Te(ie(r)))}function Ce(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Oe(t,e,i){return e===Et?Ce(function(t,e){var i=$t(t),n=ee(t),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;var c=Yt();(c||!c&&\"fixed\"===e)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a+we(t),y:l}}(t,i)):Wt(e)?function(t,e){var i=Ut(t,!1,\"fixed\"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):Ce(function(t){var e,i=ee(t),n=ye(t),s=null==(e=t.ownerDocument)?void 0:e.body,o=Vt(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=Vt(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+we(t),l=-n.scrollTop;return\"rtl\"===Zt(s||i).direction&&(a+=Vt(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(ee(t)))}function xe(t){var e,i=t.reference,n=t.element,s=t.placement,o=s?qt(s):null,r=s?he(s):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(o){case pt:e={x:a,y:i.y-n.height};break;case mt:e={x:a,y:i.y+i.height};break;case gt:e={x:i.x+i.width,y:l};break;case _t:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var c=o?oe(o):null;if(null!=c){var h=\"y\"===c?\"height\":\"width\";switch(r){case yt:e[c]=e[c]-(i[h]/2-n[h]/2);break;case wt:e[c]=e[c]+(i[h]/2-n[h]/2)}}return e}function ke(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,o=i.strategy,r=void 0===o?t.strategy:o,a=i.boundary,l=void 0===a?At:a,c=i.rootBoundary,h=void 0===c?Et:c,d=i.elementContext,u=void 0===d?Tt:d,f=i.altBoundary,p=void 0!==f&&f,m=i.padding,g=void 0===m?0:m,_=ae(\"number\"!=typeof g?g:le(g,vt)),b=u===Tt?Ct:Tt,v=t.rects.popper,y=t.elements[p?b:u],w=function(t,e,i,n){var s=\"clippingParents\"===e?function(t){var e=Te(ie(t)),i=[\"absolute\",\"fixed\"].indexOf(Zt(t).position)>=0&&Bt(t)?se(t):t;return Wt(i)?e.filter((function(t){return Wt(t)&&Jt(t,i)&&\"body\"!==Ht(t)})):[]}(t):[].concat(e),o=[].concat(s,[i]),r=o[0],a=o.reduce((function(e,i){var s=Oe(t,i,n);return e.top=Vt(s.top,e.top),e.right=Kt(s.right,e.right),e.bottom=Kt(s.bottom,e.bottom),e.left=Vt(s.left,e.left),e}),Oe(t,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Wt(y)?y:y.contextElement||ee(t.elements.popper),l,h,r),A=Ut(t.elements.reference),E=xe({reference:A,element:v,strategy:\"absolute\",placement:s}),T=Ce(Object.assign({},v,E)),C=u===Tt?T:A,O={top:w.top-C.top+_.top,bottom:C.bottom-w.bottom+_.bottom,left:w.left-C.left+_.left,right:C.right-w.right+_.right},x=t.modifiersData.offset;if(u===Tt&&x){var k=x[s];Object.keys(O).forEach((function(t){var e=[gt,mt].indexOf(t)>=0?1:-1,i=[pt,mt].indexOf(t)>=0?\"y\":\"x\";O[t]+=k[i]*e}))}return O}function Le(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,o=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?xt:l,h=he(n),d=h?a?Ot:Ot.filter((function(t){return he(t)===h})):vt,u=d.filter((function(t){return c.indexOf(t)>=0}));0===u.length&&(u=d);var f=u.reduce((function(e,i){return e[i]=ke(t,{placement:i,boundary:s,rootBoundary:o,padding:r})[qt(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}const Se={name:\"flip\",enabled:!0,phase:\"main\",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0===r||r,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,f=i.flipVariations,p=void 0===f||f,m=i.allowedAutoPlacements,g=e.options.placement,_=qt(g),b=l||(_!==g&&p?function(t){if(qt(t)===bt)return[];var e=_e(t);return[ve(t),e,ve(e)]}(g):[_e(g)]),v=[g].concat(b).reduce((function(t,i){return t.concat(qt(i)===bt?Le(e,{placement:i,boundary:h,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):i)}),[]),y=e.rects.reference,w=e.rects.popper,A=new Map,E=!0,T=v[0],C=0;C<v.length;C++){var O=v[C],x=qt(O),k=he(O)===yt,L=[pt,mt].indexOf(x)>=0,S=L?\"width\":\"height\",D=ke(e,{placement:O,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),I=L?k?gt:_t:k?mt:pt;y[S]>w[S]&&(I=_e(I));var N=_e(I),P=[];if(o&&P.push(D[x]<=0),a&&P.push(D[I]<=0,D[N]<=0),P.every((function(t){return t}))){T=O,E=!1;break}A.set(O,P)}if(E)for(var M=function(t){var e=v.find((function(e){var i=A.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return T=e,\"break\"},j=p?3:1;j>0&&\"break\"!==M(j);j--);e.placement!==T&&(e.modifiersData[n]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:[\"offset\"],data:{_skip:!1}};function De(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ie(t){return[pt,gt,mt,_t].some((function(e){return t[e]>=0}))}const Ne={name:\"hide\",enabled:!0,phase:\"main\",requiresIfExists:[\"preventOverflow\"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=ke(e,{elementContext:\"reference\"}),a=ke(e,{altBoundary:!0}),l=De(r,n),c=De(a,s,o),h=Ie(l),d=Ie(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{\"data-popper-reference-hidden\":h,\"data-popper-escaped\":d})}},Pe={name:\"offset\",enabled:!0,phase:\"main\",requires:[\"popperOffsets\"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,o=void 0===s?[0,0]:s,r=xt.reduce((function(t,i){return t[i]=function(t,e,i){var n=qt(t),s=[_t,pt].indexOf(n)>=0?-1:1,o=\"function\"==typeof i?i(Object.assign({},e,{placement:t})):i,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[_t,gt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}(i,e.rects,o),t}),{}),a=r[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=r}},Me={name:\"popperOffsets\",enabled:!0,phase:\"read\",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=xe({reference:e.rects.reference,element:e.rects.popper,strategy:\"absolute\",placement:e.placement})},data:{}},je={name:\"preventOverflow\",enabled:!0,phase:\"main\",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0!==r&&r,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,f=void 0===u||u,p=i.tetherOffset,m=void 0===p?0:p,g=ke(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),_=qt(e.placement),b=he(e.placement),v=!b,y=oe(_),w=\"x\"===y?\"y\":\"x\",A=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,C=\"function\"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,O=\"number\"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(A){if(o){var L,S=\"y\"===y?pt:_t,D=\"y\"===y?mt:gt,I=\"y\"===y?\"height\":\"width\",N=A[y],P=N+g[S],M=N-g[D],j=f?-T[I]/2:0,F=b===yt?E[I]:T[I],H=b===yt?-T[I]:-E[I],$=e.elements.arrow,W=f&&$?Gt($):{width:0,height:0},B=e.modifiersData[\"arrow#persistent\"]?e.modifiersData[\"arrow#persistent\"].padding:{top:0,right:0,bottom:0,left:0},z=B[S],R=B[D],q=re(0,E[I],W[I]),V=v?E[I]/2-j-q-z-O.mainAxis:F-q-z-O.mainAxis,K=v?-E[I]/2+j+q+R+O.mainAxis:H+q+R+O.mainAxis,Q=e.elements.arrow&&se(e.elements.arrow),X=Q?\"y\"===y?Q.clientTop||0:Q.clientLeft||0:0,Y=null!=(L=null==x?void 0:x[y])?L:0,U=N+K-Y,G=re(f?Kt(P,N+V-Y-X):P,N,f?Vt(M,U):M);A[y]=G,k[y]=G-N}if(a){var J,Z=\"x\"===y?pt:_t,tt=\"x\"===y?mt:gt,et=A[w],it=\"y\"===w?\"height\":\"width\",nt=et+g[Z],st=et-g[tt],ot=-1!==[pt,_t].indexOf(_),rt=null!=(J=null==x?void 0:x[w])?J:0,at=ot?nt:et-E[it]-T[it]-rt+O.altAxis,lt=ot?et+E[it]+T[it]-rt-O.altAxis:st,ct=f&&ot?function(t,e,i){var n=re(t,e,i);return n>i?i:n}(at,et,lt):re(f?at:nt,et,f?lt:st);A[w]=ct,k[w]=ct-et}e.modifiersData[n]=k}},requiresIfExists:[\"offset\"]};function Fe(t,e,i){void 0===i&&(i=!1);var n,s,o=Bt(e),r=Bt(e)&&function(t){var e=t.getBoundingClientRect(),i=Qt(e.width)/t.offsetWidth||1,n=Qt(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=ee(e),l=Ut(t,r,i),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&((\"body\"!==Ht(e)||Ae(a))&&(c=(n=e)!==$t(n)&&Bt(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:ye(n)),Bt(e)?((h=Ut(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=we(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function He(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var $e={placement:\"bottom\",modifiers:[],strategy:\"absolute\"};function We(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&\"function\"==typeof t.getBoundingClientRect)}))}function Be(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,o=void 0===s?$e:s;return function(t,e,i){void 0===i&&(i=o);var s,r,a={placement:\"bottom\",orderedModifiers:[],options:Object.assign({},$e,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){var s=\"function\"==typeof i?i(a.options):i;d(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:Wt(t)?Te(t):t.contextElement?Te(t.contextElement):[],popper:Te(e)};var r,c,u=function(t){var e=He(t);return Ft.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,a.options.modifiers),c=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=u.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if(\"function\"==typeof s){var o=s({state:a,name:e,instance:h,options:n});l.push(o||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(We(e,i)){a.rects={reference:Fe(e,se(i),\"fixed\"===a.options.strategy),popper:Gt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],o=s.fn,r=s.options,l=void 0===r?{}:r,d=s.name;\"function\"==typeof o&&(a=o({state:a,options:l,name:d,instance:h})||a)}else a.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(s())}))}))),r}),destroy:function(){d(),c=!0}};if(!We(t,e))return h;function d(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var ze=Be(),Re=Be({defaultModifiers:[me,Me,fe,Rt]}),qe=Be({defaultModifiers:[me,Me,fe,Rt,Pe,Se,je,ce,Ne]});const Ve=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nt,afterRead:St,afterWrite:jt,applyStyles:Rt,arrow:ce,auto:bt,basePlacements:vt,beforeMain:Dt,beforeRead:kt,beforeWrite:Pt,bottom:mt,clippingParents:At,computeStyles:fe,createPopper:qe,createPopperBase:ze,createPopperLite:Re,detectOverflow:ke,end:wt,eventListeners:me,flip:Se,hide:Ne,left:_t,main:It,modifierPhases:Ft,offset:Pe,placements:xt,popper:Tt,popperGenerator:Be,popperOffsets:Me,preventOverflow:je,read:Lt,reference:Ct,right:gt,start:yt,top:pt,variationPlacements:Ot,viewport:Et,write:Mt},Symbol.toStringTag,{value:\"Module\"})),Ke=\"dropdown\",Qe=\"ArrowUp\",Xe=\"ArrowDown\",Ye=\"click.bs.dropdown.data-api\",Ue=\"keydown.bs.dropdown.data-api\",Ge=\"show\",Je=\'[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)\',Ze=`${Je}.show`,ti=\".dropdown-menu\",ei=p()?\"top-end\":\"top-start\",ii=p()?\"top-start\":\"top-end\",ni=p()?\"bottom-end\":\"bottom-start\",si=p()?\"bottom-start\":\"bottom-end\",oi=p()?\"left-start\":\"right-start\",ri=p()?\"right-start\":\"left-start\",ai={autoClose:!0,boundary:\"clippingParents\",display:\"dynamic\",offset:[0,2],popperConfig:null,reference:\"toggle\"},li={autoClose:\"(boolean|string)\",boundary:\"(string|element)\",display:\"string\",offset:\"(array|string|function)\",popperConfig:\"(null|object|function)\",reference:\"(string|element|object)\"};class ci extends W{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,ti)[0]||z.prev(this._element,ti)[0]||z.findOne(ti,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ai}static get DefaultType(){return li}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,\"show.bs.dropdown\",t).defaultPrevented){if(this._createPopper(),\"ontouchstart\"in document.documentElement&&!this._parent.closest(\".navbar-nav\"))for(const t of[].concat(...document.body.children))P.on(t,\"mouseover\",h);this._element.focus(),this._element.setAttribute(\"aria-expanded\",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),P.trigger(this._element,\"shown.bs.dropdown\",t)}}hide(){if(l(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,\"hide.bs.dropdown\",t).defaultPrevented){if(\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,\"mouseover\",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute(\"aria-expanded\",\"false\"),H.removeDataAttribute(this._menu,\"popper\"),P.trigger(this._element,\"hidden.bs.dropdown\",t)}}_getConfig(t){if(\"object\"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&\"function\"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);return t}_createPopper(){if(void 0===Ve)throw new TypeError(\"Bootstrap\'s dropdowns require Popper (https://popper.js.org)\");let t=this._element;\"parent\"===this._config.reference?t=this._parent:o(this._config.reference)?t=r(this._config.reference):\"object\"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=qe(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains(\"dropend\"))return oi;if(t.classList.contains(\"dropstart\"))return ri;if(t.classList.contains(\"dropup-center\"))return\"top\";if(t.classList.contains(\"dropdown-center\"))return\"bottom\";const e=\"end\"===getComputedStyle(this._menu).getPropertyValue(\"--bs-position\").trim();return t.classList.contains(\"dropup\")?e?ii:ei:e?si:ni}_detectNavbar(){return null!==this._element.closest(\".navbar\")}_getOffset(){const{offset:t}=this._config;return\"string\"==typeof t?t.split(\",\").map((t=>Number.parseInt(t,10))):\"function\"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:\"preventOverflow\",options:{boundary:this._config.boundary}},{name:\"offset\",options:{offset:this._getOffset()}}]};return(this._inNavbar||\"static\"===this._config.display)&&(H.setDataAttribute(this._menu,\"popper\",\"static\"),t.modifiers=[{name:\"applyStyles\",enabled:!1}]),{...t,...g(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=z.find(\".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)\",this._menu).filter((t=>a(t)));i.length&&b(i,e,t===Xe,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=ci.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}static clearMenus(t){if(2===t.button||\"keyup\"===t.type&&\"Tab\"!==t.key)return;const e=z.find(Ze);for(const i of e){const e=ci.getInstance(i);if(!e||!1===e._config.autoClose)continue;const n=t.composedPath(),s=n.includes(e._menu);if(n.includes(e._element)||\"inside\"===e._config.autoClose&&!s||\"outside\"===e._config.autoClose&&s)continue;if(e._menu.contains(t.target)&&(\"keyup\"===t.type&&\"Tab\"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};\"click\"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=\"Escape\"===t.key,n=[Qe,Xe].includes(t.key);if(!n&&!i)return;if(e&&!i)return;t.preventDefault();const s=this.matches(Je)?this:z.prev(this,Je)[0]||z.next(this,Je)[0]||z.findOne(Je,t.delegateTarget.parentNode),o=ci.getOrCreateInstance(s);if(n)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}P.on(document,Ue,Je,ci.dataApiKeydownHandler),P.on(document,Ue,ti,ci.dataApiKeydownHandler),P.on(document,Ye,ci.clearMenus),P.on(document,\"keyup.bs.dropdown.data-api\",ci.clearMenus),P.on(document,Ye,Je,(function(t){t.preventDefault(),ci.getOrCreateInstance(this).toggle()})),m(ci);const hi=\"show\",di=\"mousedown.bs.backdrop\",ui={className:\"modal-backdrop\",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:\"body\"},fi={className:\"string\",clickCallback:\"(function|null)\",isAnimated:\"boolean\",isVisible:\"boolean\",rootElement:\"(element|string)\"};class pi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ui}static get DefaultType(){return fi}static get NAME(){return\"backdrop\"}show(t){if(!this._config.isVisible)return void g(t);this._append();const e=this._getElement();this._config.isAnimated&&d(e),e.classList.add(hi),this._emulateAnimation((()=>{g(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(hi),this._emulateAnimation((()=>{this.dispose(),g(t)}))):g(t)}dispose(){this._isAppended&&(P.off(this._element,di),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement(\"div\");t.className=this._config.className,this._config.isAnimated&&t.classList.add(\"fade\"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=r(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,di,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){_(t,this._getElement(),this._config.isAnimated)}}const mi=\".bs.focustrap\",gi=\"backward\",_i={autofocus:!0,trapElement:null},bi={autofocus:\"boolean\",trapElement:\"element\"};class vi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _i}static get DefaultType(){return bi}static get NAME(){return\"focustrap\"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,mi),P.on(document,\"focusin.bs.focustrap\",(t=>this._handleFocusin(t))),P.on(document,\"keydown.tab.bs.focustrap\",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,mi))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=z.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===gi?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){\"Tab\"===t.key&&(this._lastTabNavDirection=t.shiftKey?gi:\"forward\")}}const yi=\".fixed-top, .fixed-bottom, .is-fixed, .sticky-top\",wi=\".sticky-top\",Ai=\"padding-right\",Ei=\"margin-right\";class Ti{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ai,(e=>e+t)),this._setElementAttributes(yi,Ai,(e=>e+t)),this._setElementAttributes(wi,Ei,(e=>e-t))}reset(){this._resetElementAttributes(this._element,\"overflow\"),this._resetElementAttributes(this._element,Ai),this._resetElementAttributes(yi,Ai),this._resetElementAttributes(wi,Ei)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,\"overflow\"),this._element.style.overflow=\"hidden\"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&H.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=H.getDataAttribute(t,e);null!==i?(H.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const i of z.find(t,this._element))e(i)}}const Ci=\".bs.modal\",Oi=\"hidden.bs.modal\",xi=\"show.bs.modal\",ki=\"modal-open\",Li=\"show\",Si=\"modal-static\",Di={backdrop:!0,focus:!0,keyboard:!0},Ii={backdrop:\"(boolean|string)\",focus:\"boolean\",keyboard:\"boolean\"};class Ni extends W{constructor(t,e){super(t,e),this._dialog=z.findOne(\".modal-dialog\",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ti,this._addEventListeners()}static get Default(){return Di}static get DefaultType(){return Ii}static get NAME(){return\"modal\"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,xi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ki),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,\"hide.bs.modal\").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Li),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,Ci),P.off(this._dialog,Ci),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display=\"block\",this._element.removeAttribute(\"aria-hidden\"),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.scrollTop=0;const e=z.findOne(\".modal-body\",this._dialog);e&&(e.scrollTop=0),d(this._element),this._element.classList.add(Li),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,\"shown.bs.modal\",{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,\"keydown.dismiss.bs.modal\",(t=>{\"Escape\"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,\"resize.bs.modal\",(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,\"mousedown.dismiss.bs.modal\",(t=>{P.one(this._element,\"click.dismiss.bs.modal\",(e=>{this._element===t.target&&this._element===e.target&&(\"static\"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display=\"none\",this._element.setAttribute(\"aria-hidden\",!0),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ki),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Oi)}))}_isAnimated(){return this._element.classList.contains(\"fade\")}_triggerBackdropTransition(){if(P.trigger(this._element,\"hidePrevented.bs.modal\").defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;\"hidden\"===e||this._element.classList.contains(Si)||(t||(this._element.style.overflowY=\"hidden\"),this._element.classList.add(Si),this._queueCallback((()=>{this._element.classList.remove(Si),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=p()?\"paddingLeft\":\"paddingRight\";this._element.style[t]=`${e}px`}if(!i&&t){const t=p()?\"paddingRight\":\"paddingLeft\";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft=\"\",this._element.style.paddingRight=\"\"}static jQueryInterface(t,e){return this.each((function(){const i=Ni.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t](e)}}))}}P.on(document,\"click.bs.modal.data-api\",\'[data-bs-toggle=\"modal\"]\',(function(t){const e=z.getElementFromSelector(this);[\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),P.one(e,xi,(t=>{t.defaultPrevented||P.one(e,Oi,(()=>{a(this)&&this.focus()}))}));const i=z.findOne(\".modal.show\");i&&Ni.getInstance(i).hide(),Ni.getOrCreateInstance(e).toggle(this)})),R(Ni),m(Ni);const Pi=\"show\",Mi=\"showing\",ji=\"hiding\",Fi=\".offcanvas.show\",Hi=\"hidePrevented.bs.offcanvas\",$i=\"hidden.bs.offcanvas\",Wi={backdrop:!0,keyboard:!0,scroll:!1},Bi={backdrop:\"(boolean|string)\",keyboard:\"boolean\",scroll:\"boolean\"};class zi extends W{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wi}static get DefaultType(){return Bi}static get NAME(){return\"offcanvas\"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,\"show.bs.offcanvas\",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ti).hide(),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.classList.add(Mi),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Pi),this._element.classList.remove(Mi),P.trigger(this._element,\"shown.bs.offcanvas\",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,\"hide.bs.offcanvas\").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ji),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Pi,ji),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._config.scroll||(new Ti).reset(),P.trigger(this._element,$i)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new pi({className:\"offcanvas-backdrop\",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{\"static\"!==this._config.backdrop?this.hide():P.trigger(this._element,Hi)}:null})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_addEventListeners(){P.on(this._element,\"keydown.dismiss.bs.offcanvas\",(t=>{\"Escape\"===t.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Hi))}))}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}P.on(document,\"click.bs.offcanvas.data-api\",\'[data-bs-toggle=\"offcanvas\"]\',(function(t){const e=z.getElementFromSelector(this);if([\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),l(this))return;P.one(e,$i,(()=>{a(this)&&this.focus()}));const i=z.findOne(Fi);i&&i!==e&&zi.getInstance(i).hide(),zi.getOrCreateInstance(e).toggle(this)})),P.on(window,\"load.bs.offcanvas.data-api\",(()=>{for(const t of z.find(Fi))zi.getOrCreateInstance(t).show()})),P.on(window,\"resize.bs.offcanvas\",(()=>{for(const t of z.find(\"[aria-modal][class*=show][class*=offcanvas-]\"))\"fixed\"!==getComputedStyle(t).position&&zi.getOrCreateInstance(t).hide()})),R(zi),m(zi);const Ri={\"*\":[\"class\",\"dir\",\"id\",\"lang\",\"role\",/^aria-[\\w-]*$/i],a:[\"target\",\"href\",\"title\",\"rel\"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:[\"src\",\"srcset\",\"alt\",\"title\",\"width\",\"height\"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qi=new Set([\"background\",\"cite\",\"href\",\"itemtype\",\"longdesc\",\"poster\",\"src\",\"xlink:href\"]),Vi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ki=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!qi.has(i)||Boolean(Vi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))},Qi={allowList:Ri,content:{},extraClass:\"\",html:!1,sanitize:!0,sanitizeFn:null,template:\"<div></div>\"},Xi={allowList:\"object\",content:\"object\",extraClass:\"(string|function)\",html:\"boolean\",sanitize:\"boolean\",sanitizeFn:\"(null|function)\",template:\"string\"},Yi={entry:\"(string|element|function|null)\",selector:\"(string|element)\"};class Ui extends ${constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Qi}static get DefaultType(){return Xi}static get NAME(){return\"TemplateFactory\"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement(\"div\");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,i]of Object.entries(this._config.content))this._setContent(t,i,e);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(\" \")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},Yi)}_setContent(t,e,i){const n=z.findOne(i,t);n&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(r(e),n):this._config.html?n.innerHTML=this._maybeSanitize(e):n.textContent=e:n.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&\"function\"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,\"text/html\"),s=[].concat(...n.body.querySelectorAll(\"*\"));for(const t of s){const i=t.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){t.remove();continue}const n=[].concat(...t.attributes),s=[].concat(e[\"*\"]||[],e[i]||[]);for(const e of n)Ki(e,s)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return g(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML=\"\",void e.append(t);e.textContent=t.textContent}}const Gi=new Set([\"sanitize\",\"allowList\",\"sanitizeFn\"]),Ji=\"fade\",Zi=\"show\",tn=\".modal\",en=\"hide.bs.modal\",nn=\"hover\",sn=\"focus\",on={AUTO:\"auto\",TOP:\"top\",RIGHT:p()?\"left\":\"right\",BOTTOM:\"bottom\",LEFT:p()?\"right\":\"left\"},rn={allowList:Ri,animation:!0,boundary:\"clippingParents\",container:!1,customClass:\"\",delay:0,fallbackPlacements:[\"top\",\"right\",\"bottom\",\"left\"],html:!1,offset:[0,6],placement:\"top\",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:\'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>\',title:\"\",trigger:\"hover focus\"},an={allowList:\"object\",animation:\"boolean\",boundary:\"(string|element)\",container:\"(string|element|boolean)\",customClass:\"(string|function)\",delay:\"(number|object)\",fallbackPlacements:\"array\",html:\"boolean\",offset:\"(array|string|function)\",placement:\"(string|function)\",popperConfig:\"(null|object|function)\",sanitize:\"boolean\",sanitizeFn:\"(null|function)\",selector:\"(string|boolean)\",template:\"string\",title:\"(string|element|function)\",trigger:\"string\"};class ln extends W{constructor(t,e){if(void 0===Ve)throw new TypeError(\"Bootstrap\'s tooltips require Popper (https://popper.js.org)\");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return rn}static get DefaultType(){return an}static get NAME(){return\"tooltip\"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(tn),en,this._hideModalHandler),this._element.getAttribute(\"data-bs-original-title\")&&this._element.setAttribute(\"title\",this._element.getAttribute(\"data-bs-original-title\")),this._disposePopper(),super.dispose()}show(){if(\"none\"===this._element.style.display)throw new Error(\"Please use show on visible elements\");if(!this._isWithContent()||!this._isEnabled)return;const t=P.trigger(this._element,this.constructor.eventName(\"show\")),e=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute(\"aria-describedby\",i.getAttribute(\"id\"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),P.trigger(this._element,this.constructor.eventName(\"inserted\"))),this._popper=this._createPopper(i),i.classList.add(Zi),\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.on(t,\"mouseover\",h);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName(\"shown\")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName(\"hide\")).defaultPrevented){if(this._getTipElement().classList.remove(Zi),\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,\"mouseover\",h);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute(\"aria-describedby\"),P.trigger(this._element,this.constructor.eventName(\"hidden\")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Ji,Zi),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Ma', '```html\n<div class=\'container\'>\n\n  <div class=\'card border-danger\'>\n    <div class=\'card-header\'>\n      Vulnerabilidades de Seguridad Detectadas\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Potencial XSS en la Deserialización JSON</h5>\n      <p class=\'card-text\'>\n        <strong>Tipo:</strong> Cross-Site Scripting (XSS)\n      </p>\n      <p class=\'card-text\'>\n        <strong>Línea aproximada: 73</strong>, función <code>j(t)</code>:  <code>return JSON.parse(decodeURIComponent(t))</code>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Descripción:</strong> El código utiliza <code>JSON.parse</code> sobre una cadena decodificada con <code>decodeURIComponent</code>. Esto permite que un atacante inyecte código JavaScript malicioso dentro de los atributos <code>data-bs-*</code> de un elemento HTML.  Un valor `data-bs-*` crafted, podría contener código javascript embebido que se ejecutaría al parsearse con <code>JSON.parse</code>.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mitigación:</strong>\n        <ul>\n          <li><strong>Evitar el uso de <code>JSON.parse</code>:</strong>  Si es posible, evitar el uso de <code>JSON.parse</code> para datos que provienen de atributos HTML.</li>\n          <li><strong>Validar y sanitizar los datos:</strong>  Antes de usar <code>JSON.parse</code>, validar rigurosamente y sanitizar la cadena para eliminar cualquier código JavaScript potencial.  Utilizar una lista blanca de tipos de datos permitidos.</li>\n          <li><strong>Escapado HTML:</strong>  Si se necesita renderizar el valor en HTML, escapar el valor antes de insertarlo en el DOM.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Métricas de Calidad Afectadas:</strong> Seguridad.  Este problema reduce drásticamente la seguridad de la aplicación.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mejora de Métricas:</strong> Implementar la mitigación propuesta para mejorar la seguridad.\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning\'>\n    <div class=\'card-header\'>\n      Problemas de Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Complejidad Ciclomática Alta</h5>\n      <p class=\'card-text\'>\n        <strong>Descripción:</strong>  El código, al ser una librería completa, presenta una alta complejidad ciclomática en varias funciones, especialmente en las relacionadas con la manipulación del DOM, la gestión de eventos y la lógica de los componentes (como Carousel, Modal, Dropdown, etc.). La complejidad se debe al gran número de condicionales, bucles y llamadas a funciones.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Métricas Afectadas:</strong>\n        <ul>\n          <li><strong>Complejidad:</strong> Alta complejidad ciclomática.</li>\n          <li><strong>Legibilidad:</strong> Reduce la legibilidad y mantenibilidad.</li>\n          <li><strong>Testabilidad:</strong>  Dificulta la creación de pruebas unitarias exhaustivas.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mejora:</strong>\n        <ul>\n          <li><strong>Refactorización:</strong> Dividir las funciones complejas en funciones más pequeñas y especializadas.</li>\n          <li><strong>Abstracción:</strong> Utilizar patrones de diseño como Strategy o Template Method para abstraer la lógica repetitiva.</li>\n          <li><strong>Comentarios:</strong> Agregar comentarios claros y concisos para explicar la lógica de las funciones complejas.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning\'>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Duplicación de Código</h5>\n      <p class=\'card-text\'>\n        <strong>Descripción:</strong> Dada la naturaleza de la librería, es probable que exista duplicación de código en la manipulación de clases CSS, gestión de eventos y lógica similar entre componentes.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Métricas Afectadas:</strong>\n        <ul>\n          <li><strong>Duplicación:</strong> Presencia de código duplicado.</li>\n          <li><strong>Mantenibilidad:</strong> Aumenta el esfuerzo de mantenimiento, ya que los cambios deben replicarse en varios lugares.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mejora:</strong>\n        <ul>\n          <li><strong>Identificación:</strong> Utilizar herramientas de análisis estático para identificar el código duplicado.</li>\n          <li><strong>Extracción:</strong> Extraer el código duplicado a funciones o componentes reutilizables.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning\'>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Acoplamiento Alto</h5>\n      <p class=\'card-text\'>\n        <strong>Descripción:</strong> Los componentes de Bootstrap (Modal, Carousel, etc.) pueden estar altamente acoplados al DOM y a otras partes de la librería. Los componentes heredan de la clase `W`, esto puede generar un acoplamiento entre ellos.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Métricas Afectadas:</strong>\n        <ul>\n          <li><strong>Acoplamiento:</strong> Alto acoplamiento entre componentes.</li>\n          <li><strong>Reusabilidad:</strong> Dificulta la reutilización de componentes en otros contextos.</li>\n          <li><strong>Testabilidad:</strong> Dificulta la prueba aislada de componentes.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mejora:</strong>\n        <ul>\n          <li><strong>Inversión de Control (IoC):</strong>  Utilizar IoC para reducir las dependencias directas entre componentes.</li>\n          <li><strong>Interfaces:</strong> Definir interfaces claras para los componentes para facilitar la sustitución de implementaciones.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-warning\'>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Legibilidad</h5>\n      <p class=\'card-text\'>\n        <strong>Descripción:</strong> El código minificado es difícil de leer. Los nombres de las variables son cortos e incomprensibles, lo que dificulta la comprensión de la lógica del código.  Aunque está el source map, la alta complejidad y acoplamiento, aun con el source map, dificultan la lectura.\n      </p>\n      <p class=\'card-text\'>\n        <strong>Métricas Afectadas:</strong>\n        <ul>\n          <li><strong>Legibilidad:</strong> Código difícil de entender.</li>\n          <li><strong>Mantenibilidad:</strong> Dificultad para modificar o corregir errores.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Mejora:</strong>\n        <ul>\n          <li><strong>Desminificación y formateo:</strong> Utilizar un formateador de código para hacer el código más legible.</li>\n          <li><strong>Nombres descriptivos:</strong>  Utilizar nombres descriptivos para las variables y funciones.</li>\n          <li><strong>Comentarios:</strong>  Agregar comentarios para explicar la lógica del código.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header\'>\n      Solución Propuesta (XSS en deserialización JSON)\n    </div>\n    <div class=\'card-body\'>\n      <h5 class=\'card-title\'>Sanitización de Datos y Abandono de <code>JSON.parse</code></h5>\n      <p class=\'card-text\'>\n        <strong>Implementación:</strong>\n        <ol>\n          <li>\n            <strong>Reemplazar <code>JSON.parse</code>:</strong>  Implementar una función personalizada para deserializar los atributos <code>data-bs-*</code>.  Esta función debe usar una lista blanca de tipos de datos permitidos (string, number, boolean, null) y rechazar cualquier valor que contenga código JavaScript o expresiones complejas.\n          </li>\n          <li>\n            <strong>Escapado HTML (si es necesario):</strong> Si se necesita renderizar el valor de un atributo <code>data-bs-*</code> en el HTML, escapar el valor antes de insertarlo en el DOM utilizando una función de escapado HTML segura.  Esto previene la ejecución de código malicioso incluso si se inyecta en el atributo.\n          </li>\n          <li>\n             <strong>Validación estricta:</strong> Antes de deserializar, validar que el string se adecue a un formato esperado (por ejemplo, un número, un booleano, un string simple).\n          </li>\n        </ol>\n      </p>\n      <p class=\'card-text\'>\n        <strong>Ejemplo de función de deserialización segura:</strong>\n      </p>\n      <pre>\n        <code>\nfunction safeDeserialize(value) {\n    if (value === null || value === \"\") {\n        return null;\n    }\n    if (value === \"true\") {\n        return true;\n    }\n    if (value === \"false\") {\n        return false;\n    }\n    if (!isNaN(value) && !isNaN(parseFloat(value))) {\n        return Number(value);\n    }\n    // Permitir solo strings simples (sin código JavaScript)\n    if (/^[a-zA-Z0-9\\s]*$/.test(value)) {\n        return value;\n    }\n\n    console.warn(\"Valor no seguro detectado: \" + value);\n    return null; // O un valor por defecto seguro\n}\n        </code>\n      </pre>\n\n      <p class=\'card-text\'>\n        <strong>Modificación del Código:</strong>\n        <br>\n        Reemplazar la línea 73 con:\n        <pre><code>e[i]=safeDeserialize(t.dataset[n])</code></pre>\n      </p>\n    </div>\n  </div>\n\n</div>\n```', '2025-05-20 01:46:14', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(28, 'sweetalert2@11.js', 'Detectado por GPT', '/*!\r\n* sweetalert2 v11.17.2\r\n* Released under the MIT License.\r\n*/\r\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).Sweetalert2=t()}(this,(function(){\"use strict\";function e(e,t,n){if(\"function\"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError(\"Private element is not present on this object\")}function t(t,n){return t.get(e(t,n))}function n(e,t,n){(function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")})(e,t),t.set(e,n)}const o={},i=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,i=window.scrollY;o.restoreFocusTimeout=setTimeout((()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),window.scrollTo(n,i)})),s=\"swal2-\",r=[\"container\",\"shown\",\"height-auto\",\"iosfix\",\"popup\",\"modal\",\"no-backdrop\",\"no-transition\",\"toast\",\"toast-shown\",\"show\",\"hide\",\"close\",\"title\",\"html-container\",\"actions\",\"confirm\",\"deny\",\"cancel\",\"default-outline\",\"footer\",\"icon\",\"icon-content\",\"image\",\"input\",\"file\",\"range\",\"select\",\"radio\",\"checkbox\",\"label\",\"textarea\",\"inputerror\",\"input-label\",\"validation-message\",\"progress-steps\",\"active-progress-step\",\"progress-step\",\"progress-step-line\",\"loader\",\"loading\",\"styled\",\"top\",\"top-start\",\"top-end\",\"top-left\",\"top-right\",\"center\",\"center-start\",\"center-end\",\"center-left\",\"center-right\",\"bottom\",\"bottom-start\",\"bottom-end\",\"bottom-left\",\"bottom-right\",\"grow-row\",\"grow-column\",\"grow-fullscreen\",\"rtl\",\"timer-progress-bar\",\"timer-progress-bar-container\",\"scrollbar-measure\",\"icon-success\",\"icon-warning\",\"icon-info\",\"icon-question\",\"icon-error\",\"draggable\",\"dragging\"].reduce(((e,t)=>(e[t]=s+t,e)),{}),a=[\"success\",\"warning\",\"info\",\"question\",\"error\"].reduce(((e,t)=>(e[t]=s+t,e)),{}),l=\"SweetAlert2:\",c=e=>e.charAt(0).toUpperCase()+e.slice(1),u=e=>{console.warn(`${l} ${\"object\"==typeof e?e.join(\" \"):e}`)},d=e=>{console.error(`${l} ${e}`)},p=[],m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;n=`\"${e}\" is deprecated and will be removed in the next major release.${t?` Use \"${t}\" instead.`:\"\"}`,p.includes(n)||(p.push(n),u(n))},h=e=>\"function\"==typeof e?e():e,g=e=>e&&\"function\"==typeof e.toPromise,f=e=>g(e)?e.toPromise():Promise.resolve(e),b=e=>e&&Promise.resolve(e)===e,y=()=>document.body.querySelector(`.${r.container}`),v=e=>{const t=y();return t?t.querySelector(e):null},w=e=>v(`.${e}`),C=()=>w(r.popup),A=()=>w(r.icon),E=()=>w(r.title),k=()=>w(r[\"html-container\"]),B=()=>w(r.image),L=()=>w(r[\"progress-steps\"]),$=()=>w(r[\"validation-message\"]),x=()=>v(`.${r.actions} .${r.confirm}`),P=()=>v(`.${r.actions} .${r.cancel}`),T=()=>v(`.${r.actions} .${r.deny}`),S=()=>v(`.${r.loader}`),O=()=>w(r.actions),M=()=>w(r.footer),j=()=>w(r[\"timer-progress-bar\"]),H=()=>w(r.close),I=()=>{const e=C();if(!e)return[];const t=e.querySelectorAll(\'[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])\'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute(\"tabindex\")||\"0\"),o=parseInt(t.getAttribute(\"tabindex\")||\"0\");return n>o?1:n<o?-1:0})),o=e.querySelectorAll(\'\\n  a[href],\\n  area[href],\\n  input:not([disabled]),\\n  select:not([disabled]),\\n  textarea:not([disabled]),\\n  button:not([disabled]),\\n  iframe,\\n  object,\\n  embed,\\n  [tabindex=\"0\"],\\n  [contenteditable],\\n  audio[controls],\\n  video[controls],\\n  summary\\n\'),i=Array.from(o).filter((e=>\"-1\"!==e.getAttribute(\"tabindex\")));return[...new Set(n.concat(i))].filter((e=>ee(e)))},D=()=>N(document.body,r.shown)&&!N(document.body,r[\"toast-shown\"])&&!N(document.body,r[\"no-backdrop\"]),q=()=>{const e=C();return!!e&&N(e,r.toast)},V=(e,t)=>{if(e.textContent=\"\",t){const n=(new DOMParser).parseFromString(t,\"text/html\"),o=n.querySelector(\"head\");o&&Array.from(o.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector(\"body\");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},N=(e,t)=>{if(!t)return!1;const n=t.split(/\\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},_=(e,t,n)=>{if(((e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(r).includes(n)||Object.values(a).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))})(e,t),!t.customClass)return;const o=t.customClass[n];o&&(\"string\"==typeof o||o.forEach?z(e,o):u(`Invalid type of customClass.${n}! Expected string or iterable object, got \"${typeof o}\"`))},F=(e,t)=>{if(!t)return null;switch(t){case\"select\":case\"textarea\":case\"file\":return e.querySelector(`.${r.popup} > .${r[t]}`);case\"checkbox\":return e.querySelector(`.${r.popup} > .${r.checkbox} input`);case\"radio\":return e.querySelector(`.${r.popup} > .${r.radio} input:checked`)||e.querySelector(`.${r.popup} > .${r.radio} input:first-child`);case\"range\":return e.querySelector(`.${r.popup} > .${r.range} input`);default:return e.querySelector(`.${r.popup} > .${r.input}`)}},R=e=>{if(e.focus(),\"file\"!==e.type){const t=e.value;e.value=\"\",e.value=t}},U=(e,t,n)=>{e&&t&&(\"string\"==typeof t&&(t=t.split(/\\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},z=(e,t)=>{U(e,t,!0)},W=(e,t)=>{U(e,t,!1)},K=(e,t)=>{const n=Array.from(e.children);for(let e=0;e<n.length;e++){const o=n[e];if(o instanceof HTMLElement&&N(o,t))return o}},Y=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,\"number\"==typeof n?`${n}px`:n):e.style.removeProperty(t)},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"flex\";e&&(e.style.display=t)},Z=e=>{e&&(e.style.display=\"none\")},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"block\";e&&new MutationObserver((()=>{Q(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},G=(e,t,n,o)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,o)},Q=function(e,t){t?X(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"flex\"):Z(e)},ee=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),te=e=>!!(e.scrollHeight>e.clientHeight),ne=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue(\"animation-duration\")||\"0\"),o=parseFloat(t.getPropertyValue(\"transition-duration\")||\"0\");return n>0||o>0},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j();n&&ee(n)&&(t&&(n.style.transition=\"none\",n.style.width=\"100%\"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width=\"0%\"}),10))},ie=`\\n <div aria-labelledby=\"${r.title}\" aria-describedby=\"${r[\"html-container\"]}\" class=\"${r.popup}\" tabindex=\"-1\">\\n   <button type=\"button\" class=\"${r.close}\"></button>\\n   <ul class=\"${r[\"progress-steps\"]}\"></ul>\\n   <div class=\"${r.icon}\"></div>\\n   <img class=\"${r.image}\" />\\n   <h2 class=\"${r.title}\" id=\"${r.title}\"></h2>\\n   <div class=\"${r[\"html-container\"]}\" id=\"${r[\"html-container\"]}\"></div>\\n   <input class=\"${r.input}\" id=\"${r.input}\" />\\n   <input type=\"file\" class=\"${r.file}\" />\\n   <div class=\"${r.range}\">\\n     <input type=\"range\" />\\n     <output></output>\\n   </div>\\n   <select class=\"${r.select}\" id=\"${r.select}\"></select>\\n   <div class=\"${r.radio}\"></div>\\n   <label class=\"${r.checkbox}\">\\n     <input type=\"checkbox\" id=\"${r.checkbox}\" />\\n     <span class=\"${r.label}\"></span>\\n   </label>\\n   <textarea class=\"${r.textarea}\" id=\"${r.textarea}\"></textarea>\\n   <div class=\"${r[\"validation-message\"]}\" id=\"${r[\"validation-message\"]}\"></div>\\n   <div class=\"${r.actions}\">\\n     <div class=\"${r.loader}\"></div>\\n     <button type=\"button\" class=\"${r.confirm}\"></button>\\n     <button type=\"button\" class=\"${r.deny}\"></button>\\n     <button type=\"button\" class=\"${r.cancel}\"></button>\\n   </div>\\n   <div class=\"${r.footer}\"></div>\\n   <div class=\"${r[\"timer-progress-bar-container\"]}\">\\n     <div class=\"${r[\"timer-progress-bar\"]}\"></div>\\n   </div>\\n </div>\\n`.replace(/(^|\\n)\\s*/g,\"\"),se=()=>{o.currentInstance.resetValidationMessage()},re=e=>{const t=(()=>{const e=y();return!!e&&(e.remove(),W([document.documentElement,document.body],[r[\"no-backdrop\"],r[\"toast-shown\"],r[\"has-column\"]]),!0)})();if(\"undefined\"==typeof window||\"undefined\"==typeof document)return void d(\"SweetAlert2 requires document to initialize\");const n=document.createElement(\"div\");n.className=r.container,t&&z(n,r[\"no-transition\"]),V(n,ie),n.dataset.swal2Theme=e.theme;const o=\"string\"==typeof(i=e.target)?document.querySelector(i):i;var i;o.appendChild(n),(e=>{const t=C();t.setAttribute(\"role\",e.toast?\"alert\":\"dialog\"),t.setAttribute(\"aria-live\",e.toast?\"polite\":\"assertive\"),e.toast||t.setAttribute(\"aria-modal\",\"true\")})(e),(e=>{\"rtl\"===window.getComputedStyle(e).direction&&z(y(),r.rtl)})(o),(()=>{const e=C(),t=K(e,r.input),n=K(e,r.file),o=e.querySelector(`.${r.range} input`),i=e.querySelector(`.${r.range} output`),s=K(e,r.select),a=e.querySelector(`.${r.checkbox} input`),l=K(e,r.textarea);t.oninput=se,n.onchange=se,s.onchange=se,a.onchange=se,l.oninput=se,o.oninput=()=>{se(),i.value=o.value},o.onchange=()=>{se(),i.value=o.value}})()},ae=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):\"object\"==typeof e?le(e,t):e&&V(t,e)},le=(e,t)=>{e.jquery?ce(t,e):V(t,e.toString())},ce=(e,t)=>{if(e.textContent=\"\",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ue=(e,t)=>{const n=O(),o=S();n&&o&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?X(n):Z(n),_(n,t,\"actions\"),function(e,t,n){const o=x(),i=T(),s=P();if(!o||!i||!s)return;de(o,\"confirm\",n),de(i,\"deny\",n),de(s,\"cancel\",n),function(e,t,n,o){if(!o.buttonsStyling)return void W([e,t,n],r.styled);z([e,t,n],r.styled),o.confirmButtonColor&&(e.style.backgroundColor=o.confirmButtonColor,z(e,r[\"default-outline\"]));o.denyButtonColor&&(t.style.backgroundColor=o.denyButtonColor,z(t,r[\"default-outline\"]));o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor,z(n,r[\"default-outline\"]))}(o,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,o),e.insertBefore(i,o)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(o,t)))}(n,o,t),V(o,t.loaderHtml||\"\"),_(o,t,\"loader\"))};function de(e,t,n){const o=c(t);Q(e,n[`show${o}Button`],\"inline-block\"),V(e,n[`${t}ButtonText`]||\"\"),e.setAttribute(\"aria-label\",n[`${t}ButtonAriaLabel`]||\"\"),e.className=r[t],_(e,n,`${t}Button`)}const pe=(e,t)=>{const n=y();n&&(!function(e,t){\"string\"==typeof t?e.style.background=t:t||z([document.documentElement,document.body],r[\"no-backdrop\"])}(n,t.backdrop),function(e,t){if(!t)return;t in r?z(e,r[t]):(u(\'The \"position\" parameter is not valid, defaulting to \"center\"\'),z(e,r.center))}(n,t.position),function(e,t){if(!t)return;z(e,r[`grow-${t}`])}(n,t.grow),_(n,t,\"container\"))};var me={innerParams:new WeakMap,domCache:new WeakMap};const he=[\"input\",\"file\",\"range\",\"select\",\"radio\",\"checkbox\",\"textarea\"],ge=e=>{if(!e.input)return;if(!Ae[e.input])return void d(`Unexpected type of input! Expected ${Object.keys(Ae).join(\" | \")}, got \"${e.input}\"`);const t=we(e.input);if(!t)return;const n=Ae[e.input](t,e);X(t),e.inputAutoFocus&&setTimeout((()=>{R(n)}))},fe=(e,t)=>{const n=C();if(!n)return;const o=F(n,e);if(o){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;[\"id\",\"type\",\"value\",\"style\"].includes(n)||e.removeAttribute(n)}})(o);for(const e in t)o.setAttribute(e,t[e])}},be=e=>{if(!e.input)return;const t=we(e.input);t&&_(t,e,\"input\")},ye=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ve=(e,t,n)=>{if(n.inputLabel){const o=document.createElement(\"label\"),i=r[\"input-label\"];o.setAttribute(\"for\",e.id),o.className=i,\"object\"==typeof n.customClass&&z(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement(\"beforebegin\",o)}},we=e=>{const t=C();if(t)return K(t,r[e]||r.input)},Ce=(e,t)=>{[\"string\",\"number\"].includes(typeof t)?e.value=`${t}`:b(t)||u(`Unexpected type of inputValue! Expected \"string\", \"number\" or \"Promise\", got \"${typeof t}\"`)},Ae={};Ae.text=Ae.email=Ae.password=Ae.number=Ae.tel=Ae.url=Ae.search=Ae.date=Ae[\"datetime-local\"]=Ae.time=Ae.week=Ae.month=(e,t)=>(Ce(e,t.inputValue),ve(e,e,t),ye(e,t),e.type=t.input,e),Ae.file=(e,t)=>(ve(e,e,t),ye(e,t),e),Ae.range=(e,t)=>{const n=e.querySelector(\"input\"),o=e.querySelector(\"output\");return Ce(n,t.inputValue),n.type=t.input,Ce(o,t.inputValue),ve(n,e,t),e},Ae.select=(e,t)=>{if(e.textContent=\"\",t.inputPlaceholder){const n=document.createElement(\"option\");V(n,t.inputPlaceholder),n.value=\"\",n.disabled=!0,n.selected=!0,e.appendChild(n)}return ve(e,e,t),e},Ae.radio=e=>(e.textContent=\"\",e),Ae.checkbox=(e,t)=>{const n=F(C(),\"checkbox\");n.value=\"1\",n.checked=Boolean(t.inputValue);const o=e.querySelector(\"span\");return V(o,t.inputPlaceholder||t.inputLabel),n},Ae.textarea=(e,t)=>{Ce(e,t.inputValue),ye(e,t),ve(e,e,t);return setTimeout((()=>{if(\"MutationObserver\"in window){const n=parseInt(window.getComputedStyle(C()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const o=e.offsetWidth+(i=e,parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight));var i;o>n?C().style.width=`${o}px`:Y(C(),\"width\",t.width)})).observe(e,{attributes:!0,attributeFilter:[\"style\"]})}})),e};const Ee=(e,t)=>{const n=k();n&&(J(n),_(n,t,\"htmlContainer\"),t.html?(ae(t.html,n),X(n,\"block\")):t.text?(n.textContent=t.text,X(n,\"block\")):Z(n),((e,t)=>{const n=C();if(!n)return;const o=me.innerParams.get(e),i=!o||t.input!==o.input;he.forEach((e=>{const o=K(n,r[e]);o&&(fe(e,t.inputAttributes),o.className=r[e],i&&Z(o))})),t.input&&(i&&ge(t),be(t))})(e,t))},ke=(e,t)=>{for(const[n,o]of Object.entries(a))t.icon!==n&&W(e,o);z(e,t.icon&&a[t.icon]),$e(e,t),Be(),_(e,t,\"icon\")},Be=()=>{const e=C();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue(\"background-color\"),n=e.querySelectorAll(\"[class^=swal2-success-circular-line], .swal2-success-fix\");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Le=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,o=\"\";if(t.iconHtml)o=xe(t.iconHtml);else if(\"success\"===t.icon)o=\'\\n  <div class=\"swal2-success-circular-line-left\"></div>\\n  <span class=\"swal2-success-line-tip\"></span> <span class=\"swal2-success-line-long\"></span>\\n  <div class=\"swal2-success-ring\"></div> <div class=\"swal2-success-fix\"></div>\\n  <div class=\"swal2-success-circular-line-right\"></div>\\n\',n=n.replace(/ style=\".*?\"/g,\"\");else if(\"error\"===t.icon)o=\'\\n  <span class=\"swal2-x-mark\">\\n    <span class=\"swal2-x-mark-line-left\"></span>\\n    <span class=\"swal2-x-mark-line-right\"></span>\\n  </span>\\n\';else if(t.icon){o=xe({question:\"?\",warning:\"!\",info:\"i\"}[t.icon])}n.trim()!==o.trim()&&V(e,o)},$e=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[\".swal2-success-line-tip\",\".swal2-success-line-long\",\".swal2-x-mark-line-left\",\".swal2-x-mark-line-right\"])G(e,n,\"background-color\",t.iconColor);G(e,\".swal2-success-ring\",\"border-color\",t.iconColor)}},xe=e=>`<div class=\"${r[\"icon-content\"]}\">${e}</div>`;let Pe=!1,Te=0,Se=0,Oe=0,Me=0;const je=e=>{const t=C();if(e.target===t||A().contains(e.target)){Pe=!0;const n=De(e);Te=n.clientX,Se=n.clientY,Oe=parseInt(t.style.insetInlineStart)||0,Me=parseInt(t.style.insetBlockStart)||0,z(t,\"swal2-dragging\")}},He=e=>{const t=C();if(Pe){let{clientX:n,clientY:o}=De(e);t.style.insetInlineStart=`${Oe+(n-Te)}px`,t.style.insetBlockStart=`${Me+(o-Se)}px`}},Ie=()=>{const e=C();Pe=!1,W(e,\"swal2-dragging\")},De=e=>{let t=0,n=0;return e.type.startsWith(\"mouse\")?(t=e.clientX,n=e.clientY):e.type.startsWith(\"touch\")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},qe=(e,t)=>{const n=y(),o=C();if(n&&o){if(t.toast){Y(n,\"width\",t.width),o.style.width=\"100%\";const e=S();e&&o.insertBefore(e,A())}else Y(o,\"width\",t.width);Y(o,\"padding\",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Z($()),Ve(o,t),t.draggable&&!t.toast?(z(o,r.draggable),(e=>{e.addEventListener(\"mousedown\",je),document.body.addEventListener(\"mousemove\",He),e.addEventListener(\"mouseup\",Ie),e.addEventListener(\"touchstart\",je),document.body.addEventListener(\"touchmove\",He),e.addEventListener(\"touchend\",Ie)})(o)):(W(o,r.draggable),(e=>{e.removeEventListener(\"mousedown\",je),document.body.removeEventListener(\"mousemove\",He),e.removeEventListener(\"mouseup\",Ie),e.removeEventListener(\"touchstart\",je),document.body.removeEventListener(\"touchmove\",He),e.removeEventListener(\"touchend\",Ie)})(o))}},Ve=(e,t)=>{const n=t.showClass||{};e.className=`${r.popup} ${ee(e)?n.popup:\"\"}`,t.toast?(z([document.documentElement,document.body],r[\"toast-shown\"]),z(e,r.toast)):z(e,r.modal),_(e,t,\"popup\"),\"string\"==typeof t.customClass&&z(e,t.customClass),t.icon&&z(e,r[`icon-${t.icon}`])},Ne=e=>{const t=document.createElement(\"li\");return z(t,r[\"progress-step\"]),V(t,e),t},_e=e=>{const t=document.createElement(\"li\");return z(t,r[\"progress-step-line\"]),e.progressStepsDistance&&Y(t,\"width\",e.progressStepsDistance),t},Fe=(e,t)=>{qe(0,t),pe(0,t),((e,t)=>{const n=L();if(!n)return;const{progressSteps:o,currentProgressStep:i}=t;o&&0!==o.length&&void 0!==i?(X(n),n.textContent=\"\",i>=o.length&&u(\"Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)\"),o.forEach(((e,s)=>{const a=Ne(e);if(n.appendChild(a),s===i&&z(a,r[\"active-progress-step\"]),s!==o.length-1){const e=_e(t);n.appendChild(e)}}))):Z(n)})(0,t),((e,t)=>{const n=me.innerParams.get(e),o=A();if(!o)return;if(n&&t.icon===n.icon)return Le(o,t),void ke(o,t);if(!t.icon&&!t.iconHtml)return void Z(o);if(t.icon&&-1===Object.keys(a).indexOf(t.icon))return d(`Unknown icon! Expected \"success\", \"error\", \"warning\", \"info\" or \"question\", got \"${t.icon}\"`),void Z(o);X(o),Le(o,t),ke(o,t),z(o,t.showClass&&t.showClass.icon),window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\",Be)})(e,t),((e,t)=>{const n=B();n&&(t.imageUrl?(X(n,\"\"),n.setAttribute(\"src\",t.imageUrl),n.setAttribute(\"alt\",t.imageAlt||\"\"),Y(n,\"width\",t.imageWidth),Y(n,\"height\",t.imageHeight),n.className=r.image,_(n,t,\"image\")):Z(n))})(0,t),((e,t)=>{const n=E();n&&(J(n),Q(n,t.title||t.titleText,\"block\"),t.title&&ae(t.title,n),t.titleText&&(n.innerText=t.titleText),_(n,t,\"title\"))})(0,t),((e,t)=>{const n=H();n&&(V(n,t.closeButtonHtml||\"\"),_(n,t,\"closeButton\"),Q(n,t.showCloseButton),n.setAttribute(\"aria-label\",t.closeButtonAriaLabel||\"\"))})(0,t),Ee(e,t),ue(0,t),((e,t)=>{const n=M();n&&(J(n),Q(n,t.footer,\"block\"),t.footer&&ae(t.footer,n),_(n,t,\"footer\"))})(0,t);const n=C();\"function\"==typeof t.didRender&&n&&t.didRender(n),o.eventEmitter.emit(\"didRender\",n)},Re=()=>{var e;return null===(e=x())||void 0===e?void 0:e.click()},Ue=Object.freeze({cancel:\"cancel\",backdrop:\"backdrop\",close:\"close\",esc:\"esc\",timer:\"timer\"}),ze=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener(\"keydown\",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},We=(e,t)=>{var n;const o=I();if(o.length)return(e+=t)===o.length?e=0:-1===e&&(e=o.length-1),void o[e].focus();null===(n=C())||void 0===n||n.focus()},Ke=[\"ArrowRight\",\"ArrowDown\"],Ye=[\"ArrowLeft\",\"ArrowUp\"],Xe=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),\"Enter\"===t.key?Ze(t,e):\"Tab\"===t.key?Je(t):[...Ke,...Ye].includes(t.key)?Ge(t.key):\"Escape\"===t.key&&Qe(t,e,n)))},Ze=(e,t)=>{if(!h(t.allowEnterKey))return;const n=F(C(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if([\"textarea\",\"file\"].includes(t.input))return;Re(),e.preventDefault()}},Je=e=>{const t=e.target,n=I();let o=-1;for(let e=0;e<n.length;e++)if(t===n[e]){o=e;break}e.shiftKey?We(o,-1):We(o,1),e.stopPropagation(),e.preventDefault()},Ge=e=>{const t=O(),n=x(),o=T(),i=P();if(!(t&&n&&o&&i))return;const s=[n,o,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const r=Ke.includes(e)?\"nextElementSibling\":\"previousElementSibling\";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[r],!a)return;if(a instanceof HTMLButtonElement&&ee(a))break}a instanceof HTMLButtonElement&&a.focus()}},Qe=(e,t,n)=>{h(t.allowEscapeKey)&&(e.preventDefault(),n(Ue.esc))};var et={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const tt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute(\"data-previous-aria-hidden\")?(e.setAttribute(\"aria-hidden\",e.getAttribute(\"data-previous-aria-hidden\")||\"\"),e.removeAttribute(\"data-previous-aria-hidden\")):e.removeAttribute(\"aria-hidden\")}))},nt=\"undefined\"!=typeof window&&!!window.GestureEvent,ot=()=>{const e=y();if(!e)return;let t;e.ontouchstart=e=>{t=it(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},it=e=>{const t=e.target,n=y(),o=k();return!(!n||!o)&&(!st(e)&&!rt(e)&&(t===n||!te(n)&&t instanceof HTMLElement&&\"INPUT\"!==t.tagName&&\"TEXTAREA\"!==t.tagName&&(!te(o)||!o.contains(t))))},st=e=>e.touches&&e.touches.length&&\"stylus\"===e.touches[0].touchType,rt=e=>e.touches&&e.touches.length>1;let at=null;const lt=e=>{null===at&&(document.body.scrollHeight>window.innerHeight||\"scroll\"===e)&&(at=parseInt(window.getComputedStyle(document.body).getPropertyValue(\"padding-right\")),document.body.style.paddingRight=`${at+(()=>{const e=document.createElement(\"div\");e.className=r[\"scrollbar-measure\"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function ct(e,t,n,s){q()?bt(e,s):(i(n).then((()=>bt(e,s))),ze(o)),nt?(t.setAttribute(\"style\",\"display:none !important\"),t.removeAttribute(\"class\"),t.innerHTML=\"\"):t.remove(),D()&&(null!==at&&(document.body.style.paddingRight=`${at}px`,at=null),(()=>{if(N(document.body,r.iosfix)){const e=parseInt(document.body.style.top,10);W(document.body,r.iosfix),document.body.style.top=\"\",document.body.scrollTop=-1*e}})(),tt()),W([document.documentElement,document.body],[r.shown,r[\"height-auto\"],r[\"no-backdrop\"],r[\"toast-shown\"]])}function ut(e){e=ht(e);const t=et.swalPromiseResolve.get(this),n=dt(this);this.isAwaitingPromise?e.isDismissed||(mt(this),t(e)):n&&t(e)}const dt=e=>{const t=C();if(!t)return!1;const n=me.innerParams.get(e);if(!n||N(t,n.hideClass.popup))return!1;W(t,n.showClass.popup),z(t,n.hideClass.popup);const o=y();return W(o,n.showClass.backdrop),z(o,n.hideClass.backdrop),gt(e,t,n),!0};function pt(e){const t=et.swalPromiseReject.get(this);mt(this),t&&t(e)}const mt=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,me.innerParams.get(e)||e._destroy())},ht=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),gt=(e,t,n)=>{var i;const s=y(),r=ne(t);\"function\"==typeof n.willClose&&n.willClose(t),null===(i=o.eventEmitter)||void 0===i||i.emit(\"willClose\",t),r?ft(e,t,s,n.returnFocus,n.didClose):ct(e,s,n.returnFocus,n.didClose)},ft=(e,t,n,i,s)=>{o.swalCloseEventFinishedCallback=ct.bind(null,e,n,i,s);const r=function(e){var n;e.target===t&&(null===(n=o.swalCloseEventFinishedCallback)||void 0===n||n.call(o),delete o.swalCloseEventFinishedCallback,t.removeEventListener(\"animationend\",r),t.removeEventListener(\"transitionend\",r))};t.addEventListener(\"animationend\",r),t.addEventListener(\"transitionend\",r)},bt=(e,t)=>{setTimeout((()=>{var n;\"function\"==typeof t&&t.bind(e.params)(),null===(n=o.eventEmitter)||void 0===n||n.emit(\"didClose\"),e._destroy&&e._destroy()}))},yt=e=>{let t=C();if(t||new Gn,t=C(),!t)return;const n=S();q()?Z(A()):vt(t,e),X(n),t.setAttribute(\"data-loading\",\"true\"),t.setAttribute(\"aria-busy\",\"true\"),t.focus()},vt=(e,t)=>{const n=O(),o=S();n&&o&&(!t&&ee(x())&&(t=x()),X(n),t&&(Z(t),o.setAttribute(\"data-button-to-replace\",t.className),n.insertBefore(o,t)),z([e,n],r.loading))},wt=e=>e.checked?1:0,Ct=e=>e.checked?e.value:null,At=e=>e.files&&e.files.length?null!==e.getAttribute(\"multiple\")?e.files:e.files[0]:null,Et=(e,t)=>{const n=C();if(!n)return;const o=e=>{\"select\"===t.input?function(e,t,n){const o=K(e,r.select);if(!o)return;const i=(e,t,o)=>{const i=document.createElement(\"option\");i.value=o,V(i,t),i.selected=Lt(o,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement(\"optgroup\");e.label=t,e.disabled=!1,o.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(o,n,t)})),o.focus()}(n,Bt(e),t):\"radio\"===t.input&&function(e,t,n){const o=K(e,r.radio);if(!o)return;t.forEach((e=>{const t=e[0],i=e[1],s=document.createElement(\"input\"),a=document.createElement(\"label\");s.type=\"radio\",s.name=r.radio,s.value=t,Lt(t,n.inputValue)&&(s.checked=!0);const l=document.createElement(\"span\");V(l,i),l.className=r.label,a.appendChild(s),a.appendChild(l),o.appendChild(a)}));const i=o.querySelectorAll(\"input\");i.length&&i[0].focus()}(n,Bt(e),t)};g(t.inputOptions)||b(t.inputOptions)?(yt(x()),f(t.inputOptions).then((t=>{e.hideLoading(),o(t)}))):\"object\"==typeof t.inputOptions?o(t.inputOptions):d(\"Unexpected type of inputOptions! Expected object, Map or Promise, got \"+typeof t.inputOptions)},kt=(e,t)=>{const n=e.getInput();n&&(Z(n),f(t.inputValue).then((o=>{n.value=\"number\"===t.input?`${parseFloat(o)||0}`:`${o}`,X(n),n.focus(),e.hideLoading()})).catch((t=>{d(`Error in inputValue promise: ${t}`),n.value=\"\",X(n),n.focus(),e.hideLoading()})))};const Bt=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let o=e;\"object\"==typeof o&&(o=Bt(o)),t.push([n,o])})):Object.keys(e).forEach((n=>{let o=e[n];\"object\"==typeof o&&(o=Bt(o)),t.push([n,o])})),t},Lt=(e,t)=>!!t&&t.toString()===e.toString(),$t=(e,t)=>{const n=me.innerParams.get(e);if(!n.input)return void d(`The \"input\" parameter is needed to be set when using returnInputValueOn${c(t)}`);const o=e.getInput(),i=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case\"checkbox\":return wt(n);case\"radio\":return Ct(n);case\"file\":return At(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,n);n.inputValidator?xt(e,i,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):\"deny\"===t?Pt(e,i):Ot(e,i)},xt=(e,t,n)=>{const o=me.innerParams.get(e);e.disableInput();Promise.resolve().then((()=>f(o.inputValidator(t,o.validationMessage)))).then((o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):\"deny\"===n?Pt(e,t):Ot(e,t)}))},Pt=(e,t)=>{const n=me.innerParams.get(e||void 0);if(n.showLoaderOnDeny&&yt(T()),n.preDeny){e.isAwaitingPromise=!0;Promise.resolve().then((()=>f(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),mt(e)):e.close({isDenied:!0,value:void 0===n?t:n})})).catch((t=>St(e||void 0,t)))}else e.close({isDenied:!0,value:t})},Tt=(e,t)=>{e.close({isConfirmed:!0,value:t})},St=(e,t)=>{e.rejectPromise(t)},Ot=(e,t)=>{const n=me.innerParams.get(e||void 0);if(n.showLoaderOnConfirm&&yt(),n.preConfirm){e.resetValidationMessage(),e.isAwaitingPromise=!0;Promise.resolve().then((()=>f(n.preConfirm(t,n.validationMessage)))).then((n=>{ee($())||!1===n?(e.hideLoading(),mt(e)):Tt(e,void 0===n?t:n)})).catch((t=>St(e||void 0,t)))}else Tt(e,t)};function Mt(){const e=me.innerParams.get(this);if(!e)return;const t=me.domCache.get(this);Z(t.loader),q()?e.icon&&X(A()):jt(t),W([t.popup,t.actions],r.loading),t.popup.removeAttribute(\"aria-busy\"),t.popup.removeAttribute(\"data-loading\"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const jt=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute(\"data-button-to-replace\"));t.length?X(t[0],\"inline-block\"):ee(x())||ee(T())||ee(P())||Z(e.actions)};function Ht(){const e=me.innerParams.get(this),t=me.domCache.get(this);return t?F(t.popup,e.input):null}function It(e,t,n){const o=me.domCache.get(e);t.forEach((e=>{o[e].disabled=n}))}function Dt(e,t){const n=C();if(n&&e)if(\"radio\"===e.type){const e=n.querySelectorAll(`[name=\"${r.radio}\"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function qt(){It(this,[\"confirmButton\",\"denyButton\",\"cancelButton\"],!1)}function Vt(){It(this,[\"confirmButton\",\"denyButton\",\"cancelButton\"],!0)}function Nt(){Dt(this.getInput(),!1)}function _t(){Dt(this.getInput(),!0)}function Ft(e){const t=me.domCache.get(this),n=me.innerParams.get(this);V(t.validationMessage,e),t.validationMessage.className=r[\"validation-message\"],n.customClass&&n.customClass.validationMessage&&z(t.validationMessage,n.customClass.validationMessage),X(t.validationMessage);const o=this.getInput();o&&(o.setAttribute(\"aria-invalid\",\"true\"),o.setAttribute(\"aria-describedby\",r[\"validation-message\"]),R(o),z(o,r.inputerror))}function Rt(){const e=me.domCache.get(this);e.validationMessage&&Z(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute(\"aria-invalid\"),t.removeAttribute(\"aria-describedby\"),W(t,r.inputerror))}const Ut={title:\"\",titleText:\"\",text:\"\",html:\"\",footer:\"\",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:\"light\",showClass:{popup:\"swal2-show\",backdrop:\"swal2-backdrop-show\",icon:\"swal2-icon-show\"},hideClass:{popup:\"swal2-hide\",backdrop:\"swal2-backdrop-hide\",icon:\"swal2-icon-hide\"},customClass:{},target:\"body\",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:\"OK\",confirmButtonAriaLabel:\"\",confirmButtonColor:void 0,denyButtonText:\"No\",denyButtonAriaLabel:\"\",denyButtonColor:void 0,cancelButtonText:\"Cancel\",cancelButtonAriaLabel:\"\",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:\"&times;\",closeButtonAriaLabel:\"Close this dialog\",loaderHtml:\"\",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:\"\",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:\"\",inputLabel:\"\",inputValue:\"\",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:\"center\",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},zt=[\"allowEscapeKey\",\"allowOutsideClick\",\"background\",\"buttonsStyling\",\"cancelButtonAriaLabel\",\"cancelButtonColor\",\"cancelButtonText\",\"closeButtonAriaLabel\",\"closeButtonHtml\",\"color\",\"confirmButtonAriaLabel\",\"confirmButtonColor\",\"confirmButtonText\",\"currentProgressStep\",\"customClass\",\"denyButtonAriaLabel\",\"denyButtonColor\",\"denyButtonText\",\"didClose\",\"didDestroy\",\"draggable\",\"footer\",\"hideClass\",\"html\",\"icon\",\"iconColor\",\"iconHtml\",\"imageAlt\",\"imageHeight\",\"imageUrl\",\"imageWidth\",\"preConfirm\",\"preDeny\",\"progressSteps\",\"returnFocus\",\"reverseButtons\",\"showCancelButton\",\"showCloseButton\",\"showConfirmButton\",\"showDenyButton\",\"text\",\"title\",\"titleText\",\"theme\",\"willClose\"],Wt={allowEnterKey:void 0},Kt=[\"allowOutsideClick\",\"allowEnterKey\",\"backdrop\",\"draggable\",\"focusConfirm\",\"focusDeny\",\"focusCancel\",\"returnFocus\",\"heightAuto\",\"keydownListenerCapture\"],Yt=e=>Object.prototype.hasOwnProperty.call(Ut,e),Xt=e=>-1!==zt.indexOf(e),Zt=e=>Wt[e],Jt=e=>{Yt(e)||u(`Unknown parameter \"${e}\"`)},Gt=e=>{Kt.includes(e)&&u(`The parameter \"${e}\" is incompatible with toasts`)},Qt=e=>{const t=Zt(e);t&&m(e,t)},en=e=>{!1===e.backdrop&&e.allowOutsideClick&&u(\'\"allowOutsideClick\" parameter requires `backdrop` parameter to be set to `true`\'),e.theme&&![\"light\",\"dark\",\"auto\",\"borderless\"].includes(e.theme)&&u(`Invalid theme \"${e.theme}\". Expected \"light\", \"dark\", \"auto\", or \"borderless\"`);for(const t in e)Jt(t),e.toast&&Gt(t),Qt(t)};function tn(e){const t=y(),n=C(),o=me.innerParams.get(this);if(!n||N(n,o.hideClass.popup))return void u(\"You\'re trying to update the closed or closing popup, that won\'t work. Use the update() method in preConfirm parameter or show a new popup.\");const i=nn(e),s=Object.assign({},o,i);en(s),t.dataset.swal2Theme=s.theme,Fe(this,s),me.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const nn=e=>{const t={};return Object.keys(e).forEach((n=>{Xt(n)?t[n]=e[n]:u(`Invalid parameter to update: ${n}`)})),t};function on(){const e=me.domCache.get(this),t=me.innerParams.get(this);t?(e.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),\"function\"==typeof t.didDestroy&&t.didDestroy(),o.eventEmitter.emit(\"didDestroy\"),sn(this)):rn(this)}const sn=e=>{rn(e),delete e.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},rn=e=>{e.isAwaitingPromise?(an(me,e),e.isAwaitingPromise=!0):(an(et,e),an(me,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},an=(e,t)=>{for(const n in e)e[n].delete(t)};var ln=Object.freeze({__proto__:null,_destroy:on,close:ut,closeModal:ut,closePopup:ut,closeToast:ut,disableButtons:Vt,disableInput:_t,disableLoading:Mt,enableButtons:qt,enableInput:Nt,getInput:Ht,handleAwaitingPromise:mt,hideLoading:Mt,rejectPromise:pt,resetValidationMessage:Rt,showValidationMessage:Ft,update:tn});const cn=(e,t,n)=>{t.popup.onclick=()=>{e&&(un(e)||e.timer||e.input)||n(Ue.close)}},un=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let dn=!1;const pn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(dn=!0)}}},mn=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(dn=!0)}}},hn=(e,t,n)=>{t.container.onclick=o=>{dn?dn=!1:o.target===t.container&&h(e.allowOutsideClick)&&n(Ue.backdrop)}},gn=e=>e instanceof Element||(e=>\"object\"==typeof e&&e.jquery)(e);const fn=()=>{if(o.timeout)return(()=>{const e=j();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty(\"transition\"),e.style.width=\"100%\";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`})(),o.timeout.stop()},bn=()=>{if(o.timeout){const e=o.timeout.start();return oe(e),e}};let yn=!1;const vn={};const wn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in vn){const n=t.getAttribute(e);if(n)return void vn[e].fire({template:n})}};o.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const o=function(){n.removeListener(e,o);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];t.apply(n,s)};this.on(e,o)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(e){console.error(e)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),o=n.indexOf(t);o>-1&&n.splice(o,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var Cn=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return\"object\"!=typeof e[0]||gn(e[0])?[\"title\",\"html\",\"icon\"].forEach(((n,o)=>{const i=e[o];\"string\"==typeof i||gn(i)?t[n]=i:void 0!==i&&d(`Unexpected type of ${n}! Expected \"string\" or \"Element\", got ${typeof i}`)})):Object.assign(t,e[0]),t},bindClickHandler:function(){vn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"data-swal-template\"]=this,yn||(document.body.addEventListener(\"click\",wn),yn=!0)},clickCancel:()=>{var e;return null===(e=P())||void 0===e?void 0:e.click()},clickConfirm:Re,clickDeny:()=>{var e;return null===(e=T())||void 0===e?void 0:e.click()},enableLoading:yt,fire:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)},getActions:O,getCancelButton:P,getCloseButton:H,getConfirmButton:x,getContainer:y,getDenyButton:T,getFocusableElements:I,getFooter:M,getHtmlContainer:k,getIcon:A,getIconContent:()=>w(r[\"icon-content\"]),getImage:B,getInputLabel:()=>w(r[\"input-label\"]),getLoader:S,getPopup:C,getProgressSteps:L,getTimerLeft:()=>o.timeout&&o.timeout.getTimerLeft(),getTimerProgressBar:j,getTitle:E,getValidationMessage:$,increaseTimer:e=>{if(o.timeout){const t=o.timeout.increase(e);return oe(t,!0),t}},isDeprecatedParameter:Zt,isLoading:()=>{const e=C();return!!e&&e.hasAttribute(\"data-loading\")},isTimerRunning:()=>!(!o.timeout||!o.timeout.isRunning()),isUpdatableParameter:Xt,isValidParameter:Yt,isVisible:()=>ee(C()),mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},off:(e,t)=>{e?t?o.eventEmitter.removeListener(e,t):o.eventEmitter.removeAllListeners(e):o.eventEmitter.reset()},on:(e,t)=>{o.eventEmitter.on(e,t)},once:(e,t)=>{o.eventEmitter.once(e,t)},resumeTimer:bn,showLoading:yt,stopTimer:fn,toggleTimer:()=>{const e=o.timeout;return e&&(e.running?fn():bn())}});class An{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const En=[\"swal-title\",\"swal-html\",\"swal-footer\"],kn=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-param\")).forEach((e=>{On(e,[\"name\",\"value\"]);const n=e.getAttribute(\"name\"),o=e.getAttribute(\"value\");n&&o&&(t[n]=\"boolean\"==typeof Ut[n]?\"false\"!==o:\"object\"==typeof Ut[n]?JSON.parse(o):o)})),t},Bn=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-function-param\")).forEach((e=>{const n=e.getAttribute(\"name\"),o=e.getAttribute(\"value\");n&&o&&(t[n]=new Function(`return ${o}`)())})),t},Ln=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-button\")).forEach((e=>{On(e,[\"type\",\"color\",\"aria-label\"]);const n=e.getAttribute(\"type\");n&&[\"confirm\",\"cancel\",\"deny\"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${c(n)}Button`]=!0,e.hasAttribute(\"color\")&&(t[`${n}ButtonColor`]=e.getAttribute(\"color\")),e.hasAttribute(\"aria-label\")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute(\"aria-label\")))})),t},$n=e=>{const t={},n=e.querySelector(\"swal-image\");return n&&(On(n,[\"src\",\"width\",\"height\",\"alt\"]),n.hasAttribute(\"src\")&&(t.imageUrl=n.getAttribute(\"src\")||void 0),n.hasAttribute(\"width\")&&(t.imageWidth=n.getAttribute(\"width\")||void 0),n.hasAttribute(\"height\")&&(t.imageHeight=n.getAttribute(\"height\")||void 0),n.hasAttribute(\"alt\")&&(t.imageAlt=n.getAttribute(\"alt\")||void 0)),t},xn=e=>{const t={},n=e.querySelector(\"swal-icon\");return n&&(On(n,[\"type\",\"color\"]),n.hasAttribute(\"type\")&&(t.icon=n.getAttribute(\"type\")),n.hasAttribute(\"color\")&&(t.iconColor=n.getAttribute(\"color\")),t.iconHtml=n.innerHTML),t},Pn=e=>{const t={},n=e.querySelector(\"swal-input\");n&&(On(n,[\"type\",\"label\",\"placeholder\",\"value\"]),t.input=n.getAttribute(\"type\")||\"text\",n.hasAttribute(\"label\")&&(t.inputLabel=n.getAttribute(\"label\")),n.hasAttribute(\"placeholder\")&&(t.inputPlaceholder=n.getAttribute(\"placeholder\")),n.hasAttribute(\"value\")&&(t.inputValue=n.getAttribute(\"value\")));const o=Array.from(e.querySelectorAll(\"swal-input-option\"));return o.length&&(t.inputOptions={},o.forEach((e=>{On(e,[\"value\"]);const n=e.getAttribute(\"value\");if(!n)return;const o=e.innerHTML;t.inputOptions[n]=o}))),t},Tn=(e,t)=>{const n={};for(const o in t){const i=t[o],s=e.querySelector(i);s&&(On(s,[]),n[i.replace(/^swal-/,\"\")]=s.innerHTML.trim())}return n},Sn=e=>{const t=En.concat([\"swal-param\",\"swal-function-param\",\"swal-button\",\"swal-image\",\"swal-icon\",\"swal-input\",\"swal-input-option\"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||u(`Unrecognized element <${n}>`)}))},On=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&u([`Unrecognized attribute \"${n.name}\" on <${e.tagName.toLowerCase()}>.`,\"\"+(t.length?`Allowed attributes are: ${t.join(\", \")}`:\"To set the value, use HTML within the element.\")])}))},Mn=e=>{const t=y(),n=C();\"function\"==typeof e.willOpen&&e.willOpen(n),o.eventEmitter.emit(\"willOpen\",n);const i=window.getComputedStyle(document.body).overflowY;Dn(t,n,e),setTimeout((()=>{Hn(t,n)}),10),D()&&(In(t,e.scrollbarPadding,i),(()=>{const e=y();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute(\"aria-hidden\")&&t.setAttribute(\"data-previous-aria-hidden\",t.getAttribute(\"aria-hidden\")||\"\"),t.setAttribute(\"aria-hidden\",\"true\"))}))})()),q()||o.previousActiveElement||(o.previousActiveElement=document.activeElement),\"function\"==typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),o.eventEmitter.emit(\"didOpen\",n),W(t,r[\"no-transition\"])},jn=e=>{const t=C();if(e.target!==t)return;const n=y();t.removeEventListener(\"animationend\",jn),t.removeEventListener(\"transitionend\",jn),n.style.overflowY=\"auto\"},Hn=(e,t)=>{ne(t)?(e.style.overflowY=\"hidden\",t.addEventListener(\"animationend\",jn),t.addEventListener(\"transitionend\",jn)):e.style.overflowY=\"auto\"},In=(e,t,n)=>{(()=>{if(nt&&!N(document.body,r.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+\"px\",z(document.body,r.iosfix),ot()}})(),t&&\"hidden\"!==n&&lt(n),setTimeout((()=>{e.scrollTop=0}))},Dn=(e,t,n)=>{z(e,n.showClass.backdrop),n.animation?(t.style.setProperty(\"opacity\",\"0\",\"important\"),X(t,\"grid\"),setTimeout((()=>{z(t,n.showClass.popup),t.style.removeProperty(\"opacity\")}),10)):X(t,\"grid\"),z([document.documentElement,document.body],r.shown),n.heightAuto&&n.backdrop&&!n.toast&&z([document.documentElement,document.body],r[\"height-auto\"])};var qn=(e,t)=>/^[a-zA-Z0-9.+_\'-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||\"Invalid email address\"),Vn=(e,t)=>/^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-z]{2,63}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||\"Invalid URL\");function Nn(e){!function(e){e.inputValidator||(\"email\"===e.input&&(e.inputValidator=qn),\"url\"===e.input&&(e.inputValidator=Vn))}(e),e.showLoaderOnConfirm&&!e.preConfirm&&u(\"showLoaderOnConfirm is set to true, but preConfirm is not defined.\\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\\nhttps://sweetalert2.github.io/#ajax-request\"),function(e){(!e.target||\"string\"==typeof e.target&&!document.querySelector(e.target)||\"string\"!=typeof e.target&&!e.target.appendChild)&&(u(\'Target parameter is not valid, defaulting to \"body\"\'),e.target=\"body\")}(e),\"string\"==typeof e.title&&(e.title=e.title.split(\"\\n\").join(\"<br />\")),re(e)}let _n;var Fn=new WeakMap;class Rn{constructor(){if(n(this,Fn,void 0),\"undefined\"==typeof window)return;_n=this;for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];const s=Object.freeze(this.constructor.argsToParams(o));var r,a,l;this.params=s,this.isAwaitingPromise=!1,r=Fn,a=this,l=this._main(_n.params),r.set(e(r,a),l)}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(en(Object.assign({},t,e)),o.currentInstance){const e=et.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:t}=o.currentInstance;o.currentInstance._destroy(),t||e({isDismissed:!0}),D()&&tt()}o.currentInstance=_n;const n=zn(e,t);Nn(n),Object.freeze(n),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);const i=Wn(_n);return Fe(_n,n),me.innerParams.set(_n,n),Un(_n,i,n)}then(e){return t(Fn,this).then(e)}finally(e){return t(Fn,this).finally(e)}}const Un=(e,t,n)=>new Promise(((i,s)=>{const r=t=>{e.close({isDismissed:!0,dismiss:t})};et.swalPromiseResolve.set(e,i),et.swalPromiseReject.set(e,s),t.confirmButton.onclick=()=>{(e=>{const t=me.innerParams.get(e);e.disableButtons(),t.input?$t(e,\"confirm\"):Ot(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=me.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?$t(e,\"deny\"):Pt(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(Ue.cancel)})(e,r)},t.closeButton.onclick=()=>{r(Ue.close)},((e,t,n)=>{e.toast?cn(e,t,n):(pn(t),mn(t),hn(e,t,n))})(n,t,r),((e,t,n)=>{ze(e),t.toast||(e.keydownHandler=e=>Xe(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:C(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener(\"keydown\",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(o,n,r),((e,t)=>{\"select\"===t.input||\"radio\"===t.input?Et(e,t):[\"text\",\"email\",\"number\",\"tel\",\"textarea\"].some((e=>e===t.input))&&(g(t.inputValue)||b(t.inputValue))&&(yt(x()),kt(e,t))})(e,n),Mn(n),Kn(o,n,r),Yn(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),zn=(e,t)=>{const n=(e=>{const t=\"string\"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return Sn(n),Object.assign(kn(n),Bn(n),Ln(n),$n(n),xn(n),Pn(n),Tn(n,En))})(e),o=Object.assign({},Ut,t,n,e);return o.showClass=Object.assign({},Ut.showClass,o.showClass),o.hideClass=Object.assign({},Ut.hideClass,o.hideClass),!1===o.animation&&(o.showClass={backdrop:\"swal2-noanimation\"},o.hideClass={}),o},Wn=e=>{const t={popup:C(),container:y(),actions:O(),confirmButton:x(),denyButton:T(),cancelButton:P(),loader:S(),closeButton:H(),validationMessage:$(),progressSteps:L()};return me.domCache.set(e,t),t},Kn=(e,t,n)=>{const o=j();Z(o),t.timer&&(e.timeout=new An((()=>{n(\"timer\"),delete e.timeout}),t.timer),t.timerProgressBar&&(X(o),_(o,t,\"timerProgressBar\"),setTimeout((()=>{e.timeout&&e.timeout.running&&oe(t.timer)}))))},Yn=(e,t)=>{if(!t.toast)return h(t.allowEnterKey)?void(Xn(e)||Zn(e,t)||We(-1,1)):(m(\"allowEnterKey\"),void Jn())},Xn=e=>{const t=Array.from(e.popup.querySelectorAll(\"[autofocus]\"));for(const e of t)if(e instanceof HTMLElement&&ee(e))return e.focus(),!0;return!1},Zn=(e,t)=>t.focusDeny&&ee(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ee(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ee(e.confirmButton))&&(e.confirmButton.focus(),!0),Jn=()=>{document.activeElement instanceof HTMLElement&&\"function\"==typeof document.activeElement.blur&&document.activeElement.blur()};if(\"undefined\"!=typeof window&&/^ru\\b/.test(navigator.language)&&location.host.match(/\\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem(\"swal-initiation\");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents=\"none\";const e=document.createElement(\"audio\");e.src=\"https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3\",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem(\"swal-initiation\",`${e}`)}Rn.prototype.disableButtons=Vt,Rn.prototype.enableButtons=qt,Rn.prototype.getInput=Ht,Rn.prototype.disableInput=_t,Rn.prototype.enableInput=Nt,Rn.prototype.hideLoading=Mt,Rn.prototype.disableLoading=Mt,Rn.prototype.showValidationMessage=Ft,Rn.prototype.resetValidationMessage=Rt,Rn.prototype.close=ut,Rn.prototype.closePopup=ut,Rn.prototype.closeModal=ut,Rn.prototype.closeToast=ut,Rn.prototype.rejectPromise=pt,Rn.prototype.update=tn,Rn.prototype._destroy=on,Object.assign(Rn,Cn),Object.keys(ln).forEach((e=>{Rn[e]=function(){return _n&&_n[e]?_n[e](...arguments):null}})),Rn.DismissReason=Ue,Rn.version=\"11.17.2\";const Gn=Rn;return Gn.default=Gn,Gn})),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2);\r\n\"undefined\"!=typeof document&&function(e,t){var n=e.createElement(\"style\");if(e.getElementsByTagName(\"head\")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,\":root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:\\\"top-start     top            top-end\\\" \\\"center-start  center         center-end\\\" \\\"bottom-start  bottom-center  bottom-end\\\";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:\\\"!\\\";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).s', '```html\n<div class=\'container\'>\n  <div class=\'card\'>\n    <div class=\'card-header bg-danger text-white\'>\n      Vulnerabilidades de Seguridad Identificadas\n    </div>\n    <div class=\'card-body\'>\n      <p class=\'card-text\'>\n        El código proporcionado es una biblioteca JavaScript minificada, lo que dificulta la identificación precisa de vulnerabilidades y la evaluación de la calidad del código. La ofuscación y la falta de comentarios complican enormemente el análisis estático. No obstante, se pueden señalar algunas áreas potenciales de preocupación:\n      </p>\n\n      <ul>\n        <li>\n          <b>Dependencia de DOM Clobbering:</b>  El código manipula directamente el DOM, lo que podría ser vulnerable si se combina con código de terceros que también manipula el DOM de forma inesperada.  Si los nombres de los elementos del DOM chocan, podría haber comportamiento inesperado.\n          <br>\n          &nbsp;<i>Mitigación:</i> Validar y limpiar todas las entradas del usuario antes de renderizarlas en el DOM.  Utilizar APIs del DOM (como `createElement`) en lugar de manipular HTML directamente, reduciendo así la superficie de ataque.\n        </li>\n        <li>\n          <b>Vulnerabilidades XSS (Cross-Site Scripting):</b> La función `V` (línea 138) inserta HTML directamente en el DOM usando `DOMParser`. Si los datos proporcionados a esta función provienen de una fuente no confiable (como entrada del usuario), podría conducir a ataques XSS.\n          <br>\n          &nbsp;<i>Línea aproximada:</i> 138\n          <br>\n          &nbsp;<i>Mitigación:</i> Escapar o sanear adecuadamente las entradas del usuario antes de pasarlas a la función `V`.  Usar `textContent` en lugar de `innerHTML` cuando sea posible para evitar la interpretación de etiquetas HTML.  Considerar una política de seguridad de contenido (CSP) para mitigar el riesgo de XSS.\n        </li>\n        <li>\n          <b>Posibles vulnerabilidades de inyección HTML</b> Al igual que la anterior, la función `ae` (linea 299) si el parametro `e` es un objeto jquery o tiene datos que no son validados podria ocasionar un ataque de inyeccion HTML.\n          <br>\n          &nbsp;<i>Línea aproximada:</i> 299\n          <br>\n          &nbsp;<i>Mitigación:</i> Escapar o sanear adecuadamente las entradas del usuario antes de pasarlas a la función `ae`.  Usar `textContent` en lugar de `innerHTML` cuando sea posible para evitar la interpretación de etiquetas HTML.  \n        </li>\n        <li>\n          <b>Vulnerabilidades de Prototype Pollution</b> Algunos de los datos no validados que son iterados para setear los atributos de la etiqueta `o` en las funciones `fe` (linea 330) y `On` (linea 1115) podrian tener  acceso a `__proto__`, `constructor` o `prototype` y modificar los atributos del objeto base.\n          <br>\n          &nbsp;<i>Línea aproximada:</i> 330, 1115\n          <br>\n          &nbsp;<i>Mitigación:</i> Evitar iterar los atributos de los objetos no validados y usar  `Object.hasOwn()` o `Object.prototype.hasOwnProperty.call()` para asegurar que solo se acceda a los atributos del objeto y no a los atributos heredados.  \n        </li>\n        <li>\n          <b>Problemas con el Manejo del Enfoque (Focus):</b> El código realiza un manejo extenso del enfoque con las funciones `I`, `We`, `Ze`, `Ge`, `Qe`, etc.  Un manejo incorrecto del enfoque podría llevar a problemas de usabilidad y accesibilidad, o incluso a posibles vectores de ataque si un atacante puede manipular el orden del enfoque.\n           <br>\n           &nbsp;<i>Mitigación:</i> Revisar y probar exhaustivamente todo el código relacionado con el manejo del enfoque. Asegurar que el orden del enfoque sea lógico e intuitivo para el usuario. Considerar el uso de bibliotecas de accesibilidad para ayudar a gestionar el enfoque correctamente.\n        </li>\n        <li>\n          <b>Posibles Vulnerabilidades de ReDoS (Regular expression Denial of Service)</b> La validacion de las expresiones regulares `qn` (email) y `Vn` (URL) podrian ser aprovechadas para provocar un ataque de denegacion de servicio.\n           <br>\n           &nbsp;<i>Línea aproximada:</i> 1168, 1169\n           <br>\n           &nbsp;<i>Mitigación:</i> Utilizar `Safe-regex` para evitar expresiones regulares peligrosas y validar que no tengan alto costo computacional.\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <br>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-warning text-white\'>\n      Métricas de Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n      <p class=\'card-text\'>\n        Debido a que el código está minificado, las métricas de calidad del código son difíciles de evaluar con precisión. Sin embargo, se pueden hacer algunas observaciones generales:\n      </p>\n      <ul>\n        <li>\n          <b>Complejidad Ciclomática:</b> Es imposible evaluar la complejidad ciclomática con precisión en código minificado. Sin embargo, la longitud del archivo sugiere que la complejidad podría ser alta, especialmente en funciones centrales.\n          <br>\n          &nbsp;<i>Mejora:</i> Desminificar el código para permitir un análisis adecuado. Refactorizar las funciones complejas en unidades más pequeñas y manejables.\n        </li>\n        <li>\n          <b>Duplicación de Código:</b> La minificación dificulta la identificación de la duplicación de código. Sin embargo, es probable que exista cierta duplicación, especialmente en el manejo del DOM y la manipulación de cadenas.\n          <br>\n          &nbsp;<i>Mejora:</i> Desminificar el código. Identificar y eliminar el código duplicado creando funciones o componentes reutilizables.\n        </li>\n        <li>\n          <b>Legibilidad:</b> El código es extremadamente ilegible debido a la minificación. Esto dificulta la depuración, el mantenimiento y la comprensión del código.\n          <br>\n          &nbsp;<i>Mejora:</i> Proporcionar una versión no minificada del código fuente. Utilizar nombres de variables y funciones descriptivos. Agregar comentarios para explicar la lógica del código.\n        </li>\n        <li>\n          <b>Acoplamiento:</b> El código parece tener un alto acoplamiento, con muchas funciones dependiendo directamente de otras funciones y del estado global. Esto dificulta la prueba y el mantenimiento del código.\n          <br>\n          &nbsp;<i>Mejora:</i> Utilizar patrones de diseño para reducir el acoplamiento (por ejemplo, inyección de dependencias). Crear interfaces claras entre los componentes.\n        </li>\n        <li>\n          <b>Mantenibilidad:</b> Debido a la minificación, la legibilidad baja, el posible acoplamiento alto y la dificultad para identificar duplicación, la mantenibilidad del código es muy baja.\n            <br>\n              &nbsp;<i>Mejora:</i> Proporcionar una versión no minificada del código fuente. Aplicar los puntos mencionados anteriormente (legibilidad, duplicación y acoplamiento).\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <br>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header bg-success text-white\'>\n      Solución Propuesta\n    </div>\n    <div class=\'card-body\'>\n      <p class=\'card-text\'>\n        Para mejorar la seguridad y la calidad del código, se recomiendan los siguientes pasos:\n      </p>\n      <ol>\n        <li>\n          <b>Desminificación y Formateo:</b> Desminificar y formatear el código para hacerlo legible.  Esto facilitará la identificación de vulnerabilidades y la evaluación de la calidad del código.\n        </li>\n        <li>\n          <b>Análisis Estático:</b> Utilizar herramientas de análisis estático de código (como ESLint, SonarQube, etc.) para identificar posibles vulnerabilidades y problemas de calidad del código.\n        </li>\n        <li>\n          <b>Revisión de Código:</b> Realizar una revisión exhaustiva del código por parte de un experto en seguridad para identificar vulnerabilidades que puedan haber pasado desapercibidas.\n        </li>\n        <li>\n          <b>Sanitización de Entrada:</b> Implementar una validación y sanitización rigurosa de todas las entradas del usuario antes de que se utilicen en el código, especialmente en las funciones que manipulan el DOM.\n        </li>\n        <li>\n          <b>Testing Exhaustivo:</b> Realizar pruebas unitarias, pruebas de integración y pruebas de seguridad para garantizar que el código funciona correctamente y es resistente a los ataques.\n        </li>\n        <li>\n          <b>Actualizaciones de Dependencias:</b> Mantener las dependencias actualizadas para corregir vulnerabilidades conocidas.\n        </li>\n         <li>\n          <b>Seguridad de Configuration</b> Auditar que no haya datos sensibles en el codigo fuente y en caso de requerir datos sensibles utilizar variables de entorno para la configuracion\n        </li>\n        <li>\n          <b>Logging y Monitoreo</b> Implementar un sistema de registro y monitoreo para detectar y responder a incidentes de seguridad.\n        </li>\n      </ol>\n    </div>\n  </div>\n</div>\n```', '2025-05-20 01:47:56', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(29, 'conexion.php', 'Detectado por GPT', '<?php\r\n\r\nsession_start();\r\nclass Conectar\r\n{\r\n    protected $dbh;\r\n\r\n    protected function Conexion(){\r\n        try{\r\n           \r\n            $conectar = $this->dbh = new PDO(\"sqlsrv:Server=localhost\\SQLEXPRESS;Database=Facturacion_electronica\", \"\", \"\");\r\n          \r\n            return $conectar;\r\n        }catch (Exception $e){\r\n         \r\n            print \"Error Conexion BD\". $e->getMessage() .\"<br/>\";\r\n            die();\r\n        }\r\n    }\r\n\r\n\r\n    public static  function ruta()\r\n    {\r\n        return \"http://localhost/prueba/\";\r\n    }\r\n}\r\n', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-6\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Credenciales de Base de Datos Hardcodeadas</h5>\n          <p class=\'card-text\'>\n            <b>Tipo:</b> Exposición de Información Sensible.\n          </p>\n          <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> <code>10</code>\n            <pre><code>$conectar = $this->dbh = new PDO(\"sqlsrv:Server=localhost\\SQLEXPRESS;Database=Facturacion_electronica\", \"\", \"\");</code></pre>\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b>  El nombre de usuario y la contraseña de la base de datos están codificados directamente en el código fuente.  Si un atacante obtiene acceso al código fuente, puede acceder a la base de datos y comprometer la aplicación y sus datos.  Esto también dificulta el cambio de credenciales de manera segura.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n             Almacena las credenciales de la base de datos de forma segura, fuera del código fuente.  Las opciones incluyen:\n              <ul>\n                <li>Variables de entorno</li>\n                <li>Archivos de configuración cifrados</li>\n                <li>Administradores de secretos (AWS Secrets Manager, HashiCorp Vault, etc.)</li>\n              </ul>\n             Nunca debes colocar contraseñas directamente en el código fuente.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-6\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-dark\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Complejidad y Legibilidad</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> La clase <code>Conectar</code> es bastante simple, pero la falta de comentarios y la gestión de errores general podrían mejorar la legibilidad.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n            <ul>\n              <li>Añadir comentarios JSDoc para explicar el propósito de la clase, los métodos y las variables.</li>\n              <li>Considerar el uso de una librería de logging en lugar de `print` para manejar errores de forma más centralizada y configurable.</li>\n            </ul>\n          </p>\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> La clase <code>Conectar</code> tiene un acoplamiento alto con los detalles de la base de datos (servidor, nombre de la base de datos, etc.).\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n             Usar un archivo de configuración para centralizar los datos de conexión, o una clase factory que configure diferentes conexiones. Esto permitiría cambiar la configuración de la base de datos sin modificar el código de la clase.\n          </p>\n          <h5 class=\'card-title\'>Manejo de Errores</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> El bloque `catch` usa `print` y `die()`, lo cual no es ideal para producción.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n             Implementar un sistema de logging robusto y lanzar excepciones personalizadas en lugar de usar `die()`.  Esto permite un manejo de errores más controlado y facilita la depuración.  Por ejemplo:\n              <pre><code>\n catch (Exception $e){\n    error_log(\"Error de conexión a la base de datos: \" . $e->getMessage());\n    throw new Exception(\"No se pudo conectar a la base de datos\", 0, $e);\n}\n              </code></pre>\n          </p>\n\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            <b>Código Mejorado (Ejemplo):</b>\n            <pre><code>\n&lt;?php\n\nsession_start();\n\nclass Conectar {\n    protected $dbh;\n    private $dbConfig;\n\n    public function __construct(array $dbConfig) {\n        $this->dbConfig = $dbConfig;\n    }\n\n\n    protected function Conexion() {\n        try {\n            $dsn = sprintf(\n                \"sqlsrv:Server=%s;Database=%s\",\n                $this->dbConfig[\'host\'],\n                $this->dbConfig[\'database\']\n            );\n\n            $this->dbh = new PDO(\n                $dsn,\n                $this->dbConfig[\'username\'],\n                $this->dbConfig[\'password\']\n            );\n            $this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n            return $this->dbh;\n        } catch (PDOException $e) {\n            error_log(\"Error de conexión a la base de datos: \" . $e->getMessage());\n            throw new Exception(\"No se pudo conectar a la base de datos\", 0, $e);\n        }\n    }\n\n    public static function ruta() {\n        return \"http://localhost/prueba/\";\n    }\n}\n\n// Ejemplo de uso (las credenciales deben obtenerse de variables de entorno o un archivo de configuración seguro)\n$dbConfig = [\n    \'host\'     => getenv(\'DB_HOST\') ?: \'localhost\\SQLEXPRESS\',\n    \'database\' => getenv(\'DB_NAME\') ?: \'Facturacion_electronica\',\n    \'username\' => getenv(\'DB_USER\') ?: \'\',\n    \'password\' => getenv(\'DB_PASS\') ?: \'\',\n];\n\n\n            </code></pre>\n          </p>\n          <p class=\'card-text\'>\n            <b>Explicación:</b>\n            <ul>\n              <li>Se introduce una configuración para los datos de conexión.</li>\n              <li>La conexión PDO maneja excepciones que se escriben en el registro de errores.</li>\n              <li>Las variables de entorno se usan como opción para proteger las credenciales de la base de datos.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:49:12', 6),
(30, 'cliente.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\ninclude_once(\"../models/Cliente.php\");\r\n\r\n$cliente = new Cliente();\r\n\r\nswitch ($_GET[\"op\"]) {\r\n    case \"listar\":\r\n        $datos = $cliente->get_clientes();\r\n        $data = array();\r\n        foreach ($datos as $row) {\r\n            $sub_array = array();\r\n\r\n            $sub_array[] = $row[\"CLI_NOM\"];\r\n            $sub_array[] = $row[\"CLI_DESCRIP\"];\r\n            $sub_array[] = $row[\"CLI_PRECIO\"];\r\n            $sub_array[] = $row[\"CLI_STOCK\"];\r\n            $sub_array[] = $row[\"IVA\"];\r\n            $sub_array[] = $row[\"ESTADO\"];\r\n            $sub_array[] = $row[\"FECH_CREA\"];\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"editar(\' . $row[\"CLI_ID\"] . \')\" id=\"\' . $row[\"CLI_ID\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"><i class=\"ri-edit-2-line\"></i></button>\';\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"eliminar(\' . $row[\"CLI_ID\"] . \')\" id=\"\' . $row[\"CLI_ID\"] . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\"><i class=\"ri-delete-bin-5-line\"></i></button>\';\r\n            $data[] = $sub_array;\r\n        }\r\n\r\n        $results = array(\r\n            \"sEcho\" => 1,\r\n            \"iTotalRecords\" => count($data),\r\n            \"iTotalDisplayRecords\" => count($data),\r\n            \"aaData\" => $data\r\n        );\r\n        echo json_encode($results);\r\n        break;\r\n\r\n    case \"mostrar\":\r\n        $datos = $cliente->get_cliente_id($_POST[\"cli_id\"]);\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            foreach ($datos as $row) {\r\n                $output[\"CLI_ID\"] = $row[\"CLI_ID\"];\r\n                $output[\"CLI_NOM\"] = $row[\"CLI_NOM\"];\r\n                $output[\"CLI_CORREO\"] = $row[\"CLI_CORREO\"];\r\n                $output[\"CLI_DIRECCION\"] = $row[\"CLI_DIRECCION\"];\r\n                $output[\"CLI_TELEFONO\"] = $row[\"CLI_TELEFONO\"];\r\n            }\r\n            echo json_encode($output);\r\n        }\r\n        break;\r\n\r\n    case \"combo\";\r\n        $datos = $cliente->get_clientes();\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            $html = \"\";\r\n            $html .= \"<option selected>Seleccionar</option>\";\r\n            foreach ($datos as $row) {\r\n                $html .= \"<option value=\'\" . $row[\"CLI_ID\"] . \"\'>\" . $row[\"CLI_NOM\"] . \"</option>\";\r\n            }\r\n            echo $html;\r\n        }\r\n        break;\r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Inyección HTML en la respuesta JSON (XSS)</h5>\n                        <p><b>Línea aproximada:</b> 23 y 24</p>\n                        <p><b>Descripción:</b> Al construir los botones de \"editar\" y \"eliminar\", los valores de `CLI_ID` se insertan directamente en el atributo `onClick` sin ningún tipo de escape. Si `CLI_ID` contiene caracteres especiales o código HTML malicioso, este código se ejecutará cuando el usuario haga clic en el botón, permitiendo un ataque XSS (Cross-Site Scripting).</p>\n                        <p><b>Mitigación:</b> Nunca concatenar directamente datos en HTML, especialmente si estos datos provienen de la base de datos.  Utilizar funciones de escape HTML (como `htmlspecialchars()` en PHP) para limpiar la variable `CLI_ID` antes de insertarla en el atributo `onClick`. Alternativamente, usar una función JavaScript para manejar el evento `onClick` de forma centralizada y pasar el ID como parámetro a esa función, evitando la inyección directa en el HTML.</p>\n                         <p><b>Ejemplo de mitigación:</b> En lugar de:\n                            <code>\n                                $sub_array[] = \'&lt;button type=\"button\" onClick=\"editar(\' . $row[\"CLI_ID\"] . \')\" ... &gt;&lt;/button&gt;\';\n                            </code>\n                            Usar:\n                            <code>\n                                $sub_array[] = \'&lt;button type=\"button\" onclick=\"editarCliente(this)\" data-cliente-id=\"\' . htmlspecialchars($row[\"CLI_ID\"], ENT_QUOTES, \'UTF-8\') . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"&gt;&lt;i class=\"ri-edit-2-line\"&gt;&lt;/i&gt;&lt;/button&gt;\';\n\n                            </code>\n                             y tener una función Javascript `editarCliente(element)` que obtenga el ID del atributo `data-cliente-id` y lo use para editar.\n                        </p>\n                    </div>\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Inyección SQL (Potencial)</h5>\n                        <p><b>Línea aproximada:</b> Dependiente de la implementación de `get_cliente_id()` en `Cliente.php`.</p>\n                        <p><b>Descripción:</b> Si la función `get_cliente_id()` no utiliza consultas preparadas o un mecanismo de escape adecuado, el valor de `$_POST[\"cli_id\"]` podría usarse para inyectar código SQL malicioso en la consulta. Un atacante podría manipular `cli_id` para alterar la lógica de la consulta, obtener información confidencial o incluso modificar la base de datos.</p>\n                        <p><b>Mitigación:</b> Utilizar SIEMPRE consultas preparadas (prepared statements) o un ORM que automáticamente realice el escape de los parámetros.  Validar y sanear la entrada `$_POST[\"cli_id\"]` para asegurar que sea un entero o un formato esperado antes de pasarlo a la función `get_cliente_id()`.</p>\n                    </div>\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Falta de validación de la entrada `$_GET[\"op\"]`</h5>\n                        <p><b>Línea aproximada:</b> 6</p>\n                        <p><b>Descripción:</b> El código usa directamente el valor de `$_GET[\"op\"]` para determinar qué acción realizar. Si un valor inesperado es proporcionado en `$_GET[\"op\"]`, el `switch` no tendrá un `default` case y no manejará la situación correctamente, lo cual puede llevar a un comportamiento inesperado o errores.</p>\n                        <p><b>Mitigación:</b>  Agregar un `default` case al `switch` para manejar valores inválidos de `$_GET[\"op\"]`.  Validar explícitamente el valor de `$_GET[\"op\"]` contra una lista blanca de valores permitidos (listar, mostrar, combo) antes de entrar en el `switch`.</p>\n                         <p><b>Ejemplo de mitigación:</b>\n                            <code>\n                                $opciones_validas = array(\"listar\", \"mostrar\", \"combo\");\n                                if (!in_array($_GET[\"op\"], $opciones_validas)) {\n                                    // Manejar el error o redirigir\n                                    echo \"Operación no válida.\";\n                                    exit;\n                                }\n\n                                switch ($_GET[\"op\"]) {\n                                    // ... cases ...\n                                }\n                            </code>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Complejidad Ciclomática</h5>\n                        <p>El `switch` statement introduce complejidad ciclomática. A medida que se añaden más casos, la complejidad aumenta.</p>\n                        <p><b>Mejora:</b> Si el número de casos en el `switch` crece mucho, considerar usar un patrón de diseño como \"Command\" o \"Strategy\" para delegar la lógica a clases separadas y reducir la complejidad del `switch`.</p>\n                    </div>\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Acoplamiento</h5>\n                        <p>El código está acoplado a las clases `Cliente` y a la configuración de la base de datos (`conexion.php`).</p>\n                        <p><b>Mejora:</b> Utilizar inyección de dependencias para reducir el acoplamiento. En lugar de instanciar `Cliente` directamente, recibirlo como parámetro en el constructor de la clase que contiene este código.</p>\n                    </div>\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Duplicación de código</h5>\n                        <p>Hay una pequeña duplicación en la comprobación `is_array($datos) == true and count($datos) > 0` que aparece en los casos \"mostrar\" y \"combo\".</p>\n                        <p><b>Mejora:</b> Extraer esta comprobación a una función reutilizable.</p>\n                    </div>\n\n                    <div class=\"card-text\">\n                        <h5 class=\"card-title\">Legibilidad</h5>\n                        <p>En general, el código es legible, pero algunas partes se pueden mejorar.</p>\n                        <p><b>Mejora:</b>  Utilizar nombres de variables más descriptivos. Añadir comentarios para explicar la lógica de secciones complejas del código.  Mantener una indentación consistente.</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <ol>\n                        <li><b>Sanitización de Entrada:</b> Validar y limpiar todas las entradas de usuario (`$_GET`, `$_POST`) antes de usarlas.</li>\n                        <li><b>Consultas Preparadas:</b> Utilizar siempre consultas preparadas para prevenir inyecciones SQL.</li>\n                        <li><b>Escape de Salida:</b> Escapar las salidas HTML (usando `htmlspecialchars()`) y JavaScript (usando `json_encode()`) para prevenir XSS.</li>\n                        <li><b>Gestión de Errores:</b> Implementar una correcta gestión de errores, incluyendo logs y mensajes de error informativos.</li>\n                        <li><b>Validación de Operaciones:</b> Implementar validación para asegurar que el parámetro `op` es uno de los valores esperados (listar, mostrar, combo).</li>\n                        <li><b>Revisión de Privilegios:</b> Asegurar que el usuario que ejecuta este código tiene los privilegios mínimos necesarios en la base de datos.</li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:49:34', 6),
(31, 'factura.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\nrequire_once(\"../models/Factura.php\");\r\n$factura = new Factura();\r\n\r\n\r\nif (isset($_GET[\'op\'])) {\r\n    $op = $_GET[\'op\'];\r\n\r\n    switch ($op) {\r\n        case \"listar\":\r\n            $datos = $factura->get_Factura();\r\n            $data = array();\r\n            foreach ($datos as $row) {\r\n                $sub_array = array();\r\n\r\n                $sub_array[] = $row[\"CLI_NOM\"];\r\n                $sub_array[] = \"$\" . number_format($row[\"Total\"], 2);\r\n                $sub_array[] = \"$\" . number_format($row[\"subtotal\"], 2);\r\n                $sub_array[] = $row[\"Fecha\"];\r\n                $sub_array[] = \'<button type=\"button\" onClick=\"editar(\' . $row[\"id\"] . \')\" id=\"\' . $row[\"id\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"><i class=\"ri-edit-line\"></i></button>\';\r\n                $sub_array[] = \'<a href=\"factura.php?v=\' . $row[\"id\"] . \'\" target=\"_blank\" class=\"btn btn-primary btn-icon waves-effect waves-light\"><i class=\"ri-printer-line\"></i></a>\';\r\n\r\n\r\n                $data[] = $sub_array;\r\n            }\r\n\r\n            $results = array(\r\n                \"sEcho\" => 1,\r\n                \"iTotalRecords\" => count($data),\r\n                \"iTotalDisplayRecords\" => count($data),\r\n                \"aaData\" => $data\r\n            );\r\n            echo json_encode($results);\r\n            break;\r\n\r\n\r\n\r\n        case \"listar_items\":\r\n            $datos = $factura->get_Factura_id($_POST[\"id\"]);\r\n            $data = array();\r\n            foreach ($datos as $row) {\r\n                $sub_array = array();\r\n                $sub_array[] = $row[\"factura_id\"];\r\n                $sub_array[] = $row[\"CLI_NOM\"];\r\n                $sub_array[] = $row[\"producto\"];\r\n                $sub_array[] = \"$\" . number_format($row[\"precio\"], 2);\r\n                $sub_array[] = $row[\"cantidad\"];\r\n                $sub_array[] = \"0\" . $row[\"iva\"] . \"%\";\r\n                $sub_array[] = \"$\" . number_format($row[\"subtotal\"], 2);\r\n                $sub_array[] = \"$\" . number_format($row[\"monto_iva\"], 2);\r\n                $sub_array[] = \"$\" . number_format($row[\"total\"], 2);\r\n\r\n                $data[] = $sub_array;\r\n            }\r\n\r\n            $results = array(\r\n                \"sEcho\" => 1,\r\n                \"iTotalRecords\" => count($data),\r\n                \"iTotalDisplayRecords\" => count($data),\r\n                \"aaData\" => $data\r\n            );\r\n            echo json_encode($results);\r\n            break;\r\n\r\n\r\n\r\n        case \"mostrar\":\r\n            $datos = $factura->get_Factura_id($_POST[\"id\"]);\r\n            if (is_array($datos) == true and count($datos) > 0) {\r\n                foreach ($datos as $row) {\r\n                    $output[\"factura_id\"] = $row[\"factura_id\"];\r\n                    $output[\"id\"] = $row[\"id\"];\r\n                    $output[\"Fecha\"] = $row[\"Fecha\"];\r\n                    $output[\"CLI_NOM\"] = $row[\"CLI_NOM\"];\r\n                    $output[\"producto\"] = $row[\"producto\"];\r\n                    $output[\"precio\"] = $row[\"precio\"];\r\n                    $output[\"subtotal\"] = $row[\"subtotal\"];\r\n                    $output[\"monto_iva\"] = $row[\"monto_iva\"];\r\n                    $output[\"total\"] = $row[\"total\"];\r\n                    $output[\"Total\"] = $row[\"Total\"];\r\n                    \r\n                    $output[\"CLI_CORREO\"] = $row[\"CLI_CORREO\"];\r\n                    $output[\"CLI_DIRECCION\"] = $row[\"CLI_DIRECCION\"];\r\n                    $output[\"CLI_TELEFONO\"] = $row[\"CLI_TELEFONO\"];\r\n                }\r\n                echo json_encode($output);\r\n            }\r\n            break;\r\n\r\n\r\n\r\n        case \"listartopproducto\":\r\n\r\n            $datos = $factura->get_Factura_id($_POST[\"id\"]);\r\n            $data = array();\r\n\r\n            foreach ($datos as $row) {\r\n?>\r\n                <tr>\r\n                    <td>\r\n                        <h5 class=\"fs-14 my-1 fw-normal\"><?php echo $row[\'producto\']; ?></h5>\r\n                        <span class=\"text-muted\">Producto</span>\r\n                    </td>\r\n                    <td>\r\n                        <h5 class=\"fs-14 my-1 fw-normal\"><?php echo $row[\'CLI_NOM\']; ?></h5>\r\n                        <span class=\"text-muted\">Cliente</span>\r\n                    </td>\r\n                    <td>\r\n                        <h5 class=\"fs-14 my-1 fw-normal\"><?php echo $row[\'precio\']; ?></h5>\r\n                        <span class=\"text-muted\">Precio</span>\r\n                    </td>\r\n                    <td>\r\n                        <h5 class=\"fs-14 my-1 fw-normal\"><?php echo $row[\'cantidad\']; ?></h5>\r\n                        <span class=\"text-muted\">Cantidad</span>\r\n                    </td>\r\n                    \r\n                    <td>\r\n                        <h5 class=\"fs-14 my-1 fw-normal\">0<?php echo $row[\'iva\']; ?></h5>\r\n                        <span class=\"text-muted\">IVA</span>\r\n                    </td>\r\n                </tr>\r\n<?php\r\n                // Agregar datos al array para el JSON\r\n                $data[] = array(\r\n                    \"factura_id\" => $row[\"factura_id\"],\r\n                    \"subtotal\" => $row[\"subtotal\"],\r\n                    \"monto_iva\" => $row[\"monto_iva\"]\r\n                );\r\n            }\r\n\r\n            // Retornar datos en formato JSON\r\n            $results = array(\r\n                \"sEcho\" => 1,\r\n                \"iTotalRecords\" => count($data),\r\n                \"iTotalDisplayRecords\" => count($data),\r\n                \"aaData\" => $data\r\n            );\r\n            echo json_encode($results);\r\n\r\n            break;\r\n\r\n\r\n\r\n\r\n\r\n\r\n        case \"guardar\":\r\n\r\n            if (isset($_POST[\'factura\'])) {\r\n\r\n                $facturaData = json_decode($_POST[\'factura\'], true);\r\n\r\n\r\n                $facturaModel = new Factura();\r\n\r\n                try {\r\n                    $resultado = $facturaModel->guardarFactura($facturaData);\r\n\r\n                    if ($resultado) {\r\n\r\n                        echo json_encode([\r\n                            \"status\" => \"success\",\r\n                            \"message\" => \"Factura guardada correctamente.\"\r\n                        ]);\r\n                    } else {\r\n                        echo json_encode([\r\n                            \"status\" => \"error\",\r\n                            \"message\" => \"No se pudo guardar la factura.\"\r\n                        ]);\r\n                    }\r\n                } catch (PDOException $e) {\r\n\r\n                    echo json_encode([\r\n                        \"status\" => \"error\",\r\n                        \"message\" => \"Error al guardar la factura: \" . $e->getMessage()\r\n                    ]);\r\n                }\r\n            } else {\r\n                echo json_encode([\r\n                    \"status\" => \"error\",\r\n                    \"message\" => \"No se recibieron datos de la factura.\"\r\n                ]);\r\n            }\r\n            break;\r\n\r\n        default:\r\n            echo json_encode([\r\n                \"status\" => \"error\",\r\n                \"message\" => \"Operación no reconocida.\"\r\n            ]);\r\n            break;\r\n    }\r\n} else {\r\n    echo json_encode([\r\n        \"status\" => \"error\",\r\n        \"message\" => \"No se especificó ninguna operación.\"\r\n    ]);\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"card border-danger mb-3\">\n    <div class=\"card-header bg-danger text-white\">\n      Vulnerabilidades de Seguridad\n    </div>\n    <div class=\"card-body\">\n\n      <h5 class=\"card-title\">Inyección SQL</h5>\n      <p class=\"card-text\">\n        <b>Línea aproximada:</b> Varias líneas donde se usa <code>$_GET[\'op\']</code> y <code>$_POST[\"id\"]</code> directamente en consultas a la base de datos (ej: casos \"listar_items\", \"mostrar\", \"listartopproducto\").\n      </p>\n      <p class=\"card-text\">\n        <b>Descripción:</b> El código usa parámetros <code>$_GET</code> y <code>$_POST</code> directamente en las consultas SQL sin sanitización ni validación. Esto permite a un atacante inyectar código SQL malicioso que podría comprometer la base de datos (leer, modificar o eliminar datos).\n      </p>\n      <p class=\"card-text\">\n        <b>Mitigación:</b>\n        <ul>\n          <li><b>Usar consultas preparadas (prepared statements) con PDO o MySQLi:</b>  Las consultas preparadas separan la lógica SQL de los datos, previniendo la inyección SQL.</li>\n          <li><b>Validar y sanitizar las entradas:</b>  Asegurarse de que los valores de <code>$_GET</code> y <code>$_POST</code> sean del tipo y formato esperados, y escaparlos adecuadamente antes de usarlos en las consultas.  Para \'op\', usar una lista blanca de valores permitidos.</li>\n        </ul>\n      </p>\n      <p class=\"card-text\">\n        <b>Ejemplo (Consulta Preparada):</b>\n        En lugar de:\n        <pre><code>$datos = $factura->get_Factura_id($_POST[\"id\"]);</code></pre>\n        Usar algo como (asumiendo que <code>get_Factura_id</code> utiliza PDO):\n        <pre><code>\n  $stmt = $pdo->prepare(\"SELECT * FROM facturas WHERE id = ?\");\n  $stmt->execute([$_POST[\"id\"]]);\n  $datos = $stmt->fetchAll();\n        </code></pre>\n      </p>\n    </div>\n  </div>\n\n  <div class=\"card border-warning mb-3\">\n    <div class=\"card-header bg-warning text-white\">\n      Métricas de Calidad del Código\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Complejidad Ciclomática</h5>\n      <p class=\"card-text\">\n        El <code>switch</code> con múltiples casos aumenta la complejidad ciclomática. Cada caso introduce una nueva rama de ejecución, haciendo que el código sea más difícil de entender, probar y mantener.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Refactorizar el <code>switch</code> en funciones o clases separadas para cada operación. Usar un patrón de diseño como Command o Strategy para reducir la complejidad.\n      </p>\n\n      <h5 class=\"card-title\">Duplicación de Código</h5>\n      <p class=\"card-text\">\n        La estructura de los bloques <code>case</code> \"listar\" y \"listar_items\"  es similar (creación de un array <code>$data</code>, iteración sobre resultados de la base de datos, creación de <code>$sub_array</code>, codificación JSON de la respuesta).\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Extraer la lógica común en funciones o métodos reutilizables.  Por ejemplo, una función para formatear los datos en un array y otra para codificar la respuesta JSON.\n      </p>\n\n      <h5 class=\"card-title\">Legibilidad</h5>\n      <p class=\"card-text\">\n        La mezcla de HTML y PHP en el caso <code>\"listartopproducto\"</code> dificulta la lectura y el mantenimiento del código.  Además, el código está mezclando lógica de presentación y lógica de negocio.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Separar la lógica de presentación de la lógica de negocio.  Usar un motor de plantillas como Twig o Blade, o generar el HTML mediante código PHP de manera más estructurada.  Evitar el uso de <code>echo</code> para generar grandes bloques de HTML.\n      </p>\n\n      <h5 class=\"card-title\">Acoplamiento</h5>\n      <p class=\"card-text\">\n        El código está acoplado a las variables globales <code>$_GET</code> y <code>$_POST</code> directamente dentro de la lógica de negocio.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Inyectar las dependencias (como los datos de la petición) en lugar de acceder directamente a las variables globales.  Esto hace que el código sea más fácil de probar y reutilizar.\n      </p>\n\n      <h5 class=\"card-title\">Validación de Datos</h5>\n      <p class=\"card-text\">\n        Falta validación de los datos recibidos.  Por ejemplo, no se verifica que <code>$_POST[\"id\"]</code> sea un entero válido.  Tampoco se valida el formato de los datos que se van a guardar en la base de datos en el caso \"guardar\".\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b>  Implementar validación exhaustiva de los datos de entrada. Usar funciones como <code>filter_var</code> para validar tipos de datos y formatos.  En el caso \"guardar\", validar la estructura y los tipos de datos del array <code>$facturaData</code>.\n      </p>\n\n      <h5 class=\"card-title\">Manejo de Errores</h5>\n      <p class=\"card-text\">\n        El manejo de errores es básico.  Sólo se captura la excepción PDO en el caso \"guardar\", pero no se manejan otros posibles errores (ej: fallo al obtener datos de la base de datos, datos de entrada inválidos).\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Implementar un manejo de errores más robusto.  Usar bloques <code>try...catch</code> para capturar excepciones en otras partes del código.  Registrar los errores en un archivo de log para facilitar la depuración.  Mostrar mensajes de error amigables al usuario.\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success mb-3\'>\n    <div class=\"card-header bg-success text-white\">\n      Solución Propuesta\n    </div>\n    <div class=\"card-body\">\n      <ol>\n        <li>\n          <b>Sanitización de Entradas:</b> Implementar funciones de sanitización y validación para todas las variables <code>$_GET</code> y <code>$_POST</code> antes de usarlas.  Usar <code>filter_var()</code> con los filtros apropiados.\n        </li>\n        <li>\n          <b>Consultas Preparadas:</b> Reemplazar la concatenación directa de strings en las consultas SQL con consultas preparadas usando PDO.\n        </li>\n        <li>\n          <b>Separación de la Lógica de Presentación:</b> Usar un motor de plantillas o una función para generar HTML de forma estructurada, separando la lógica de presentación de la lógica de negocio (especialmente en \"listartopproducto\").\n        </li>\n        <li>\n          <b>Refactorización del `switch`:</b>  Dividir el <code>switch</code> en funciones o clases separadas para cada operación.  Considerar el patrón Command.\n        </li>\n        <li>\n          <b>Extracción de Lógica Común:</b> Crear funciones reutilizables para tareas repetitivas, como formatear datos y codificar respuestas JSON.\n        </li>\n        <li>\n          <b>Validación Exhaustiva:</b>  Asegurarse de que todos los datos de entrada, especialmente en el caso \"guardar\", sean validados con respecto a su tipo, formato y rango esperados.\n        </li>\n        <li>\n          <b>Manejo de Excepciones:</b>  Implementar bloques <code>try...catch</code> donde sea necesario para capturar excepciones y errores, registrar los errores, y proporcionar mensajes de error apropiados.\n        </li>\n        <li>\n          <b>Control de Acceso:</b>  (No presente en el código, pero crucial) Implementar un sistema de autenticación y autorización para controlar el acceso a las diferentes operaciones.\n        </li>\n      </ol>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:50:02', 6),
(32, 'producto.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\ninclude_once(\"../models/Producto.php\");\r\n\r\n$producto = new Producto();\r\n\r\nswitch ($_GET[\"op\"]) {\r\n    case \"listar\":\r\n        $datos = $producto->get_productos();\r\n        $data = array();\r\n        foreach ($datos as $row) {\r\n            $sub_array = array();\r\n           \r\n            $sub_array[] = $row[\"PROD_NOM\"];\r\n            $sub_array[] = $row[\"PROD_DESCRIP\"];\r\n            $sub_array[] = $row[\"PROD_PRECIO\"];\r\n            $sub_array[] = $row[\"PROD_STOCK\"];\r\n            $sub_array[] = $row[\"IVA\"];\r\n            $sub_array[] = $row[\"ESTADO\"];\r\n            $sub_array[] = $row[\"FECH_CREA\"];\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"editar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"><i class=\"ri-edit-2-line\"></i></button>\';\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"eliminar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\"><i class=\"ri-delete-bin-5-line\"></i></button>\';\r\n            $data[] = $sub_array;\r\n        }\r\n\r\n        $results = array(\r\n            \"sEcho\" => 1,\r\n            \"iTotalRecords\" => count($data),\r\n            \"iTotalDisplayRecords\" => count($data),\r\n            \"aaData\" => $data\r\n        );\r\n        echo json_encode($results);\r\n        break;\r\n\r\n    case \"mostrar\":\r\n        $datos = $producto->get_producto_id($_POST[\"prod_id\"]);\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            foreach ($datos as $row) {\r\n                $output[\"PROD_ID\"] = $row[\"PROD_ID\"];\r\n                $output[\"PROD_NOM\"] = $row[\"PROD_NOM\"];\r\n                $output[\"PROD_PRECIO\"] = $row[\"PROD_PRECIO\"];\r\n                $output[\"PROD_STOCK\"] = $row[\"PROD_STOCK\"];\r\n            }\r\n            echo json_encode($output);\r\n        }\r\n        break;\r\n\r\n    case \"combo\";\r\n        $datos = $producto->get_productos();\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            $html = \"\";\r\n            $html .= \"<option selected>Seleccionar</option>\";\r\n            foreach ($datos as $row) {\r\n                $html .= \"<option value=\'\" . $row[\"PROD_ID\"] . \"\'>\" . $row[\"PROD_NOM\"] . \"</option>\";\r\n            }\r\n            echo $html;\r\n        }\r\n        break;\r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección HTML/XSS</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> 21 y 22.<br>\n                        <b>Descripción:</b> La construcción de los botones de edición y eliminación inserta directamente el ID del producto en el atributo <code>onClick</code>.  Esto permite la inyección de código HTML/JavaScript malicioso si el valor de <code>$row[\"PROD_ID\"]</code> proviene de una fuente no confiable (e.g., si se pudiera modificar el valor del ID del producto en la base de datos o en la solicitud).  Un atacante podría inyectar JavaScript que se ejecute en el contexto del usuario que visualiza la lista de productos.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b> Escapar los datos al construir las cadenas HTML.  Utilizar funciones de escape específicas del contexto (ej: <code>htmlspecialchars()</code> en PHP) para asegurar que el ID del producto se interprete como texto y no como código ejecutable.  Preferiblemente, evitar la inyección directa de variables en atributos de eventos como <code>onClick</code>; mejor adjuntar listeners a los botones a través de JavaScript y usar atributos <code>data-*</code> para almacenar el ID del producto.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Ejemplo de Mitigación:</b> Usar <code>htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\')</code> al construir las cadenas HTML para el atributo <code>onClick</code>.\n                    </p>\n\n                    <h5 class=\"card-title\">Vulnerabilidad de Inyección SQL (Potencial)</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> Depende de las funciones <code>get_productos()</code> y <code>get_producto_id()</code> del modelo <code>Producto</code>.<br>\n                        <b>Descripción:</b> Si las funciones <code>get_productos()</code> y <code>get_producto_id()</code> en el modelo <code>Producto</code> no están utilizando consultas preparadas o no están escapando los datos correctamente, existe la posibilidad de una vulnerabilidad de inyección SQL.  Esto es especialmente crítico en la función <code>get_producto_id($_POST[\"prod_id\"])</code> donde se usa <code>$_POST[\"prod_id\"]</code>.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b>\n                         *  Utilizar consultas preparadas con parámetros en las funciones del modelo <code>Producto</code>.\n                         *  Si no es posible usar consultas preparadas, escapar los datos de entrada con funciones como <code>mysqli_real_escape_string()</code> antes de usarlos en las consultas SQL.\n                         *  Validar y sanitizar las entradas (<code>$_GET[\"op\"]</code> y <code>$_POST[\"prod_id\"]</code>) antes de usarlas.\n                    </p>\n\n                    <h5 class=\"card-title\">Acceso No Autorizado (Autorización)</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> Todas.<br>\n                        <b>Descripción:</b> El código no implementa ningún tipo de autenticación o autorización.  Cualquier usuario podría acceder a las funciones de listar, mostrar y combo sin restricciones.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b> Implementar un sistema de autenticación y autorización que verifique que el usuario tiene los permisos necesarios para acceder a las diferentes funciones.  Esto podría incluir verificar la identidad del usuario y su rol antes de permitir el acceso a las funciones.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Complejidad</h5>\n                    <p class=\"card-text\">\n                        La complejidad ciclomática del código es relativamente baja, ya que solo contiene una estructura <code>switch</code> y bucles <code>foreach</code>.  Sin embargo, la complejidad puede aumentar si las funciones del modelo <code>Producto</code> contienen lógica compleja.\n                    </p>\n\n                    <h5 class=\"card-title\">Duplicación</h5>\n                    <p class=\"card-text\">\n                        Existe cierta duplicación en la forma en que se construyen las cadenas HTML para los botones y en la comprobación de arrays en los casos \"mostrar\" y \"combo\".  La refactorización para eliminar esta duplicación mejoraría la mantenibilidad del código.\n                    </p>\n\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        El código es relativamente legible. Sin embargo, el uso de nombres de variables más descriptivos (por ejemplo, en lugar de <code>$row</code>) mejoraría la legibilidad.  Además, agregar comentarios para explicar la lógica de las diferentes secciones del código sería beneficioso.\n                    </p>\n\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        El código está acoplado al modelo <code>Producto</code> y a la configuración de la base de datos (a través de <code>conexion.php</code>).  Si bien esto es inevitable en cierta medida, se podría reducir el acoplamiento mediante el uso de interfaces y la inyección de dependencias.\n                    </p>\n\n                    <h5 class=\"card-title\">Falta de Manejo de Errores</h5>\n                    <p class=\"card-text\">\n                         El código no maneja errores de base de datos o excepciones que puedan ocurrir en el modelo. Esto podría llevar a comportamientos inesperados y dificultar la depuración. Se deben agregar bloques <code>try-catch</code> para capturar excepciones y manejar errores de manera adecuada, por ejemplo, registrando el error o mostrando un mensaje amigable al usuario.\n                    </p>\n\n                    <h5 class=\"card-title\">Falta de Validación de Entrada</h5>\n                    <p class=\"card-text\">\n                        El código confía implícitamente en los datos recibidos a través de <code>$_GET</code> y <code>$_POST</code>.  No hay validación para asegurar que los datos tengan el formato esperado o que estén dentro de un rango aceptable.  Esto puede llevar a errores inesperados o incluso a vulnerabilidades de seguridad. Se deben implementar validaciones para verificar que los datos de entrada cumplen con los requisitos antes de usarlos.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <ol>\n                        <li>\n                            <b>Sanitizar la entrada:</b> Escapar <code>$row[\"PROD_ID\"]</code> utilizando <code>htmlspecialchars()</code> al generar el HTML para los botones de editar y eliminar. Ejemplo:\n                            <pre><code>&lt;button type=\"button\" onClick=\"editar(&lt;?php echo htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;)\" id=\"&lt;?php echo htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;\" class=\"btn btn-warning btn-icon waves-effect waves-light\"&gt;&lt;i class=\"ri-edit-2-line\"&gt;&lt;/i&gt;&lt;/button&gt;</code></pre>\n                            <pre><code>&lt;button type=\"button\" onClick=\"eliminar(&lt;?php echo htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;)\" id=\"&lt;?php echo htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;\" class=\"btn btn-danger btn-icon waves-effect waves-light\"&gt;&lt;i class=\"ri-delete-bin-5-line\"&gt;&lt;/i&gt;&lt;/button&gt;</code></pre>\n                            O mejor aún, usar atributos <code>data-*</code> y JavaScript para manejar los eventos click.\n                        </li>\n                        <li>\n                            <b>Usar consultas preparadas:</b> Modificar las funciones <code>get_productos()</code> y <code>get_producto_id()</code> en el modelo <code>Producto</code> para utilizar consultas preparadas con parámetros.  Esto previene la inyección SQL.\n                        </li>\n                         <li>\n                            <b>Validación de entradas:</b> Validar <code>$_GET[\"op\"]</code> y <code>$_POST[\"prod_id\"]</code> para asegurar que contienen valores esperados.\n                        </li>\n                        <li>\n                            <b>Agregar autenticación y autorización:</b> Implementar un sistema de autenticación para verificar la identidad del usuario y un sistema de autorización para controlar el acceso a las diferentes funciones.\n                        </li>\n                        <li>\n                            <b>Refactorización:</b>  Crear funciones o clases auxiliares para generar el HTML de los botones y para realizar las comprobaciones de arrays. Esto reducirá la duplicación del código.\n                        </li>\n                        <li>\n                            <b>Manejo de errores:</b> Implementar manejo de errores (try-catch) para capturar excepciones y mostrar mensajes de error amigables. Registrar los errores para facilitar la depuración.\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:50:36', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(33, 'factura.php', 'Detectado por GPT', '<!DOCTYPE html>\r\n<html lang=\"es\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Factura con Estilo Bootstrap</title>\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"assests/bootstrap.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- DataTables CSS (Integrado con Bootstrap) -->\r\n    <link rel=\"stylesheet\" href=\"assests/dataTables.bootstrap5.min.css\">\r\n\r\n    <!-- SweetAlert2 -->\r\n    <script src=\"assests/sweetalert2@11.js\"></script>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"assests/jquery-3.6.0.min.js\"></script>\r\n\r\n    <!-- DataTables JS -->\r\n    <script src=\"assests/jquery.dataTables.min.js\"></script>\r\n    <script src=\"assests/dataTables.bootstrap5.min.js\"></script>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css\" rel=\"stylesheet\">\r\n    <style>\r\n\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"main-content\">\r\n\r\n        <div class=\"page-content\">\r\n            <div class=\"container-fluid\">\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col-xxl-9\">\r\n                        <div class=\"card\" id=\"demo\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"card-header border-bottom-dashed p-4\">\r\n                                        <div class=\"d-flex\">\r\n                                            <div class=\"flex-grow-1\">\r\n                                                <img src=\"assests/imagenes/pcgerente_logo.jpg\" class=\"card-logo card-logo-dark\" alt=\"logo dark\" height=\"50\">\r\n\r\n                                                <div class=\"mt-sm-5 mt-4\">\r\n                                                    <h6 class=\"text-muted text-uppercase fw-semibold\">Direccion</h6>\r\n                                                    <p class=\"text-muted mb-1\" id=\"txtdirecc\">Avenida 9 de Octubre</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"flex-shrink-0 mt-sm-0 mt-3\">\r\n                                                <h6><span class=\"text-muted fw-normal\">RUC: </span><span id=\"txtruc\">0604537183</span></h6>\r\n                                                <h6><span class=\"text-muted fw-normal\">Email: </span><span id=\"txtemail\">pcgerente@pc_generente.com</span></h6>\r\n                                                <h6><span class=\"text-muted fw-normal\">Website: </span> <a href=\"https://themesbrand.com/\" class=\"link-primary\" target=\"_blank\" id=\"txtweb\">www.pc_generente.com</a></h6>\r\n                                                <h6 class=\"mb-0\"><span class=\"text-muted fw-normal\">Telefono: </span><span id=\"txttelf\">0993096567</span></h6>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <!--end card-header-->\r\n                                </div><!--end col-->\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"card-body p-4\">\r\n                                        <div class=\"row g-3\">\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Nro de Venta</p>\r\n                                                <h5 class=\"fs-14 mb-0\">V-<span id=\"txtid\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Fecha</p>\r\n                                                <h5 class=\"fs-14 mb-0\"><span id=\"txtfecha\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Tipo de Pago</p>\r\n                                                <span class=\"badge badge-soft-success fs-11\" id=\"pag_nom\">Efectivo</span>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Total</p>\r\n                                                <h5 class=\"fs-14 mb-0\">$<span id=\"txtTotal\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                        </div>\r\n                                        <!--end row-->\r\n                                    </div>\r\n                                    <!--end card-body-->\r\n                                </div><!--end col-->\r\n\r\n\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"card-body p-4 border-top border-top-dashed\">\r\n                                        <div class=\"row g-3\">\r\n                                            <div class=\"row g-3\">\r\n                                                <div class=\"col-6\">\r\n                                                    <h6 class=\"text-muted text-uppercase fw-semibold mb-3\">Datos del Cliente</h6>\r\n                                                </div>\r\n                                            </div>\r\n                                            <!--end row-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Nombre:</p>\r\n                                                <h5 class=\"fs-14 mb-0\"><span id=\"txtcli_nom\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Telefono</p>\r\n                                                <h5 class=\"fs-14 mb-0\"><span id=\"txtcli_telefono\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Direccion</p>\r\n                                                <span id=\"txtcli_direccion\"></span>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                            <div class=\"col-lg-3 col-6\">\r\n                                                <p class=\"text-muted mb-2 text-uppercase fw-semibold\">Correo</p>\r\n                                                <h5 class=\"fs-14 mb-0\"><span id=\"txtcli_correo\"></span></h5>\r\n                                            </div>\r\n                                            <!--end col-->\r\n                                        </div>\r\n                                        <!--end row-->\r\n                                    </div>\r\n                                    <!--end card-body-->\r\n                                </div><!--end col-->\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"card-body p-4\">\r\n                                        <div class=\"table-responsive\">\r\n                                            <table class=\"table table-borderless text-center table-nowrap align-middle mb-0\">\r\n                                                <thead>\r\n                                                    <tr class=\"table-active\">\r\n                                                        <th>Producto</th>\r\n                                                        <th>Cliente</th>\r\n                                                        <th>Precio</th>\r\n                                                        <th>Cantidad</th>\r\n                                                        <th>Iva</th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody id=\"products-list\">\r\n\r\n                                                </tbody>\r\n                                            </table><!--end table-->\r\n                                        </div>\r\n                                        <div class=\"border-top border-top-dashed mt-2\">\r\n                                            <table class=\"table table-borderless table-nowrap align-middle mb-0 ms-auto\" style=\"width:250px\">\r\n                                                <tbody>\r\n                                                    <tr>\r\n                                                        <td>Sub Total</td>\r\n                                                        <td class=\"text-end\" id=\"txtdtsubtotal\"></td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                        <td>IVA</td>\r\n                                                        <td class=\"text-end\" id=\"txtdtmonto_iva\"></td>\r\n                                                    </tr>\r\n                                                    <tr class=\"border-top border-top-dashed fs-15\">\r\n                                                        <th scope=\"row\">Precio Total</th>\r\n                                                        <th class=\"text-end\" id=\"txtdttotal\"></th>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n                                            <!--end table-->\r\n                                        </div>\r\n                                        <div class=\"mt-4\">\r\n                                            <div class=\"alert alert-info\">\r\n                                                <p class=\"mb-0\"><span class=\"fw-semibold\">COMENTARIO:</span>\r\n                                                    <span id=\"vent_coment\">\r\n                                                        Gracias por su compra. Asegúrese de revisar todos los detalles de la factura. Si tiene alguna pregunta o inquietud, no dude en ponerse en contacto con nosotros.\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"hstack gap-2 justify-content-end d-print-none mt-4\">\r\n                                            <a href=\"javascript:window.print()\" class=\"btn btn-success\"><i class=\"ri-printer-line align-bottom me-1\"></i> Print</a>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                    <!--end card-body-->\r\n                                </div><!--end col-->\r\n                            </div><!--end row-->\r\n                        </div>\r\n                        <!--end card-->\r\n                    </div>\r\n                    <!--end col-->\r\n                </div>\r\n                <!--end row-->\r\n\r\n            </div><!-- container-fluid -->\r\n        </div><!-- End Page-content -->\r\n\r\n\r\n    </div><!-- end main content-->\r\n    <!-- Bootstrap JS -->\r\n    <script src=\"assests/js/bootstrap.bundle.min.js\"></script>\r\n\r\n    <script>\r\n        $(document).ready(function() {\r\n            var id = getUrlParameter(\'v\')\r\n            $.post(\"controllers/factura.php?op=mostrar\", {\r\n                id: id\r\n            }, function(data) {\r\n                data = JSON.parse(data);\r\n                $(\'#txtdttotal\').html(data.Total);\r\n                $(\'#txtdtsubtotal\').html(data.subtotal);\r\n                $(\'#txtdtmonto_iva\').html(data.monto_iva);\r\n                $(\'#txtid\').html(data.id);\r\n                $(\'#txtfecha\').html(data.Fecha);\r\n                $(\'#txtTotal\').html(data.Total);\r\n                $(\'#txtcli_nom\').html(data.CLI_NOM);\r\n                $(\'#txtcli_direccion\').html(data.CLI_DIRECCION);\r\n                $(\'#txtcli_correo\').html(data.CLI_CORREO);\r\n                $(\'#txtcli_telefono\').html(data.CLI_TELEFONO);\r\n            });\r\n\r\n            $.post(\"controllers/factura.php?op=listartopproducto\", {\r\n                id: id\r\n            }, function(data) {\r\n                $(\'#products-list\').html(data);\r\n            });\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        var getUrlParameter = function getUrlParameter(sParam) {\r\n            var sPageURL = decodeURIComponent(window.location.search.substring(1)),\r\n                sURLVariables = sPageURL.split(\'&\'),\r\n                sParameterName,\r\n                i;\r\n\r\n            for (i = 0; i < sURLVariables.length; i++) {\r\n                sParameterName = sURLVariables[i].split(\'=\');\r\n\r\n                if (sParameterName[0] === sParam) {\r\n                    return sParameterName[1] === undefined ? true : sParameterName[1];\r\n                }\r\n            }\r\n        };\r\n    </script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n  <div class=\"row\">\n\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad Detectadas\n        </div>\n        <div class=\"card-body\">\n\n          <h5 class=\"card-title\">1. Cross-Site Scripting (XSS)</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> XSS (Cross-Site Scripting)\n            <br>\n            <b>Línea Aproximada:</b> Dentro de la función `$(document).ready(function() { ... });`, las líneas donde se asignan valores a elementos HTML usando `.html()`:\n            <ul>\n              <li>`$(\'#txtdttotal\').html(data.Total);`</li>\n              <li>`$(\'#txtdtsubtotal\').html(data.subtotal);`</li>\n              <li>`$(\'#txtdtmonto_iva\').html(data.monto_iva);`</li>\n              <li>`$(\'#txtid\').html(data.id);`</li>\n              <li>`$(\'#txtfecha\').html(data.Fecha);`</li>\n              <li>`$(\'#txtTotal\').html(data.Total);`</li>\n              <li>`$(\'#txtcli_nom\').html(data.CLI_NOM);`</li>\n              <li>`$(\'#txtcli_direccion\').html(data.CLI_DIRECCION);`</li>\n              <li>`$(\'#txtcli_correo\').html(data.CLI_CORREO);`</li>\n              <li>`$(\'#txtcli_telefono\').html(data.CLI_TELEFONO);`</li>\n              <li>`$(\'#products-list\').html(data);`</li>\n            </ul>\n            <b>Explicación:</b> Si los datos que provienen de `data.Total`, `data.subtotal`, `data.monto_iva`, `data.id`, `data.Fecha`, `data.CLI_NOM`, `data.CLI_DIRECCION`, `data.CLI_CORREO`, `data.CLI_TELEFONO` o `data` (en la petición de `listartopproducto`) contienen código HTML malicioso (por ejemplo, `<script>alert(\'XSS\')</script>`), este código se ejecutará en el navegador del usuario.  El uso de `.html()` inserta el string directamente como HTML, lo que lo hace vulnerable.\n            <br>\n            <b>Mitigación:</b>  Utilizar `.text()` en lugar de `.html()` para insertar contenido de texto.  Si se necesita mostrar HTML, se debe sanitizar los datos antes de insertarlos. Para `products-list`, revisar y sanitizar la salida generada por `controllers/factura.php?op=listartopproducto` antes de insertarla en el DOM.\n            <br>\n            <b>Ejemplo de Mitigación:</b>\n            <ul>\n              <li>`$(\'#txtdttotal\').text(data.Total);`</li>\n              <li>`$(\'#txtdtsubtotal\').text(data.subtotal);`</li>\n              <li>`$(\'#txtdtmonto_iva\').text(data.monto_iva);`</li>\n              <li>`$(\'#txtid\').text(data.id);`</li>\n              <li>`$(\'#txtfecha\').text(data.Fecha);`</li>\n              <li>`$(\'#txtTotal\').text(data.Total);`</li>\n              <li>`$(\'#txtcli_nom\').text(data.CLI_NOM);`</li>\n              <li>`$(\'#txtcli_direccion\').text(data.CLI_DIRECCION);`</li>\n              <li>`$(\'#txtcli_correo\').text(data.CLI_CORREO);`</li>\n              <li>`$(\'#txtcli_telefono\').text(data.CLI_TELEFONO);`</li>\n            </ul>\n          </p>\n\n          <h5 class=\"card-title\">2. Inyección SQL (Potencial)</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Inyección SQL (Potencial)\n            <br>\n            <b>Línea Aproximada:</b> Las peticiones POST a `controllers/factura.php`:\n            <ul>\n              <li>`$.post(\"controllers/factura.php?op=mostrar\", { id: id }, ...);`</li>\n              <li>`$.post(\"controllers/factura.php?op=listartopproducto\", { id: id }, ...);`</li>\n            </ul>\n            <b>Explicación:</b> Si el valor de `id` (obtenido de la URL mediante `getUrlParameter(\'v\')`) no se sanitiza correctamente antes de ser usado en una consulta SQL dentro de `controllers/factura.php`, podría ser vulnerable a inyección SQL. Un atacante podría modificar el parámetro \'v\' en la URL para inyectar código SQL malicioso.\n            <br>\n            <b>Mitigación:</b>  Validar y sanitizar el valor de `id` en el backend (`controllers/factura.php`) antes de usarlo en cualquier consulta SQL. Usar consultas preparadas (prepared statements) o procedimientos almacenados para evitar la inyección SQL.\n          </p>\n\n          <h5 class=\"card-title\">3. Obtención de parámetros por URL</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Obtención de parámetros por URL.\n            <br>\n            <b>Línea Aproximada:</b>\n            `var id = getUrlParameter(\'v\')`\n            <br>\n            <b>Explicación:</b>  Aunque no es inherentemente una vulnerabilidad, depender de parámetros en la URL para identificar recursos (como la factura a mostrar) puede ser riesgoso.  Es susceptible a manipulación por parte del usuario. Si se usa este `id` para acceso a datos sensibles sin una validación adecuada, se puede obtener información no autorizada.\n            <br>\n            <b>Mitigación:</b>  Además de sanitizar la entrada (ver punto anterior), considerar métodos alternativos como el uso de sesiones, tokens, o métodos POST para pasar el `id`, especialmente si se trata de operaciones sensibles.  Siempre validar que el usuario tenga permisos para acceder a la factura con el `id` dado.\n          </p>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12 mt-3\">\n      <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-dark\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n\n          <h5 class=\"card-title\">1. Legibilidad</h5>\n          <p class=\"card-text\">\n            El código HTML está bien estructurado y usa clases de Bootstrap, lo que facilita la lectura y el mantenimiento. Sin embargo, la falta de comentarios en el código JavaScript dificulta la comprensión del propósito de cada sección.\n            <br>\n            <b>Mejora:</b> Añadir comentarios descriptivos en el código JavaScript, especialmente en la función `$(document).ready()` y `getUrlParameter()`.\n          </p>\n\n          <h5 class=\"card-title\">2. Acoplamiento</h5>\n          <p class=\"card-text\">\n            El código tiene un acoplamiento moderado. El JavaScript está acoplado al HTML mediante los IDs de los elementos. Los archivos CSS y JS de Bootstrap y DataTables están acoplados al proyecto, pero esto es esperable para el uso de estas librerías.\n          </p>\n\n          <h5 class=\"card-title\">3. Complejidad</h5>\n          <p class=\"card-text\">\n            La complejidad ciclomática del JavaScript es baja. La función `getUrlParameter()` es sencilla. La función `$(document).ready()` realiza algunas peticiones AJAX y manipulación del DOM, pero no es excesivamente compleja.\n            <br>\n            <b>Mejora:</b>  Si la lógica dentro de `controllers/factura.php` se vuelve más compleja, considerar refactorizarla en funciones más pequeñas y modulares.\n          </p>\n\n          <h5 class=\"card-title\">4. Duplicación</h5>\n          <p class=\"card-text\">\n            No se observa duplicación de código significativa en el fragmento proporcionado.\n          </p>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12 mt-3\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <ol>\n            <li>\n              <b>Sanitizar las salidas:</b> Usar `.text()` en lugar de `.html()` para evitar XSS.  En el caso del contenido de `products-list`, sanitizar el HTML generado por `controllers/factura.php?op=listartopproducto` antes de insertarlo en el DOM.\n            </li>\n            <li>\n              <b>Validación y Sanitización de Entradas en el Backend:</b> En `controllers/factura.php`, sanitizar y validar el parámetro `id` antes de usarlo en las consultas SQL.  Usar prepared statements o procedimientos almacenados para prevenir inyección SQL.\n            </li>\n            <li>\n              <b>Alternativas a Parámetros en la URL:</b> Considerar usar métodos POST, sesiones, o tokens para pasar el `id` en lugar de la URL. Validar permisos del usuario antes de mostrar la factura.\n            </li>\n            <li>\n              <b>Añadir Comentarios:</b> Comentar el código JavaScript para mejorar la legibilidad y facilitar el mantenimiento.\n            </li>\n          </ol>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n```\n', '2025-05-20 01:51:06', 6),
(34, 'index.php', 'Detectado por GPT', '\r\n<!DOCTYPE html>\r\n<html lang=\"es\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Factura con Estilo Bootstrap</title>\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"assests/bootstrap.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- DataTables CSS (Integrado con Bootstrap) -->\r\n    <link rel=\"stylesheet\" href=\"assests/dataTables.bootstrap5.min.css\">\r\n\r\n    <!-- SweetAlert2 -->\r\n    <script src=\"assests/sweetalert2@11.js\"></script>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"assests/jquery-3.6.0.min.js\"></script>\r\n\r\n    <!-- DataTables JS -->\r\n    <script src=\"assests/jquery.dataTables.min.js\"></script>\r\n    <script src=\"assests/dataTables.bootstrap5.min.js\"></script>\r\n\r\n    <style>\r\n        body {\r\n            background-color: #f1f1f1;\r\n        }\r\n\r\n        .card {\r\n            border: none;\r\n            border-radius: 0.5rem;\r\n            box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.1);\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .card-header {\r\n            background-color: #007bff;\r\n            color: #fff;\r\n            border-bottom: none;\r\n            border-radius: 0.5rem 0.5rem 0 0;\r\n        }\r\n\r\n        h2 {\r\n            margin: 2rem 0;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container\">\r\n        <h2 class=\"text-center\">Sistema de Facturación</h2>\r\n\r\n        <!-- Formulario para agregar productos -->\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h4>Agregar Producto</h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <form id=\"formFactura\">\r\n                    <!-- Datos del Cliente -->\r\n                    <h5 class=\"mb-3\">Datos del Cliente</h5>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_id\" class=\"form-label\">Cliente</label>\r\n                            <select class=\"form-select\" id=\"cli_id\" name=\"cli_id\">\r\n                                <option value=\"0\" selected>Seleccione</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_nom\" class=\"form-label\">Nombre</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_nom\" name=\"cli_nom\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_direccion\" class=\"form-label\">Dirección</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_direccion\" name=\"cli_direccion\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_telefono\" class=\"form-label\">Teléfono</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_telefono\" name=\"cli_telefono\" readonly>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Datos del Producto -->\r\n                    <h5 class=\"mb-3\">Datos del Producto</h5>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_id\" class=\"form-label\">Producto</label>\r\n                            <select class=\"form-select\" id=\"prod_id\" name=\"prod_id\">\r\n                                <option value=\"0\" selected>Seleccione</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_precio\" class=\"form-label\">Precio</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_precio\" name=\"prod_precio\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_stock\" class=\"form-label\">Stock</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_stock\" name=\"prod_stock\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_stock_resta\" class=\"form-label\">Cantidad</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_stock_resta\" name=\"prod_stock_resta\">\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"iva\" class=\"form-label\">Iva</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"iva\" name=\"iva\">\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"iva\" class=\"form-label\">Color</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_color\" name=\"prod_color\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"text-end\">\r\n                        <button type=\"button\" id=\"btnagregar\" class=\"btn btn-primary\">\r\n                            <i class=\"bi bi-cart-plus\"></i> Nueva Compra\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Tabla de productos -->\r\n        <div class=\"card mb-4\">\r\n            <div class=\"card-header bg-secondary text-white\">\r\n                <h4>Detalle de Factura</h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"tablaFactura\" class=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Producto</th>\r\n                            <th>Precio</th>\r\n                            <th>Cantidad</th>\r\n                            <th>SubTotal</th>\r\n                            <th>% Iva</th>\r\n                            <th>Iva</th>\r\n                            <th>Total</th>\r\n                            <th>Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody></tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Botones de acción -->\r\n        <div class=\"d-flex justify-content-end gap-2 mb-4\">\r\n\r\n            <a href=\"view_factura.php\" class=\"btn btn-info text-white\">Lista de Facturas</a>\r\n            <button type=\"button\" id=\"btnGuardar\" class=\"btn btn-success\">Guardar Factura</button>\r\n            <button type=\"button\" id=\"btnLimpiar\" class=\"btn btn-secondary\">Limpiar Factura</button>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Bootstrap JS -->\r\n    <script src=\"assests/js/bootstrap.bundle.min.js\"></script>\r\n\r\n    <!-- Aquí iría tu script para manejo de la factura, validaciones, etc. -->\r\n    <script>\r\n        $(document).ready(function() {\r\n            let tabla = $(\'#tablaFactura\').DataTable();\r\n\r\n            // Cargar clientes\r\n            $.post(\"controllers/cliente.php?op=combo\", function(data) {\r\n                $(\"#cli_id\").html(data);\r\n            });\r\n            $(\"#cli_id\").change(function() {\r\n                let cli_id = $(this).val();\r\n                if (cli_id != \"0\") {\r\n                    $.post(\"controllers/cliente.php?op=mostrar\", {\r\n                        cli_id: cli_id\r\n                    }, function(data) {\r\n                        let cliente = JSON.parse(data);\r\n                        $(\"#cli_nom\").val(cliente.CLI_NOM);\r\n                        $(\"#cli_direccion\").val(cliente.CLI_DIRECCION);\r\n                        $(\"#cli_telefono\").val(cliente.CLI_TELEFONO);\r\n                    });\r\n                } else {\r\n                    $(\"#cli_nom, #cli_direccion, #cli_telefono\").val(\'\');\r\n                }\r\n            });\r\n\r\n            // Cargar productos\r\n            $.post(\"controllers/producto.php?op=combo\", function(data) {\r\n                $(\"#prod_id\").html(data);\r\n            });\r\n            $(\"#prod_id\").change(function() {\r\n                let prod_id = $(this).val();\r\n                if (prod_id != \"0\") {\r\n                    $.post(\"controllers/producto.php?op=mostrar\", {\r\n                        prod_id: prod_id\r\n                    }, function(data) {\r\n                        let producto = JSON.parse(data);\r\n                        $(\"#prod_precio\").val(producto.PROD_PRECIO);\r\n                        $(\"#prod_stock\").val(producto.PROD_STOCK);\r\n                    });\r\n                } else {\r\n                    $(\"#prod_precio, #prod_stock\").val(\'\');\r\n                }\r\n            });\r\n\r\n\r\n            $(\"#btnagregar\").click(function() {\r\n                let productoTexto = $(\"#prod_id option:selected\").text();\r\n                let prod_id = $(\"#prod_id\").val();\r\n                let precio = parseFloat($(\"#prod_precio\").val());\r\n                let stock = parseInt($(\"#prod_stock\").val());\r\n                let cantidad = parseInt($(\"#prod_stock_resta\").val());\r\n                let iva = parseFloat($(\"#iva\").val()) / 100;\r\n                \r\n\r\n\r\n                if (prod_id === \"0\") {\r\n                    Swal.fire(\"Error\", \"Seleccione un producto válido\", \"error\");\r\n                    return;\r\n                }\r\n                if (isNaN(precio) || precio <= 0) {\r\n                    Swal.fire(\"Error\", \"El precio del producto no es válido\", \"error\");\r\n                    return;\r\n                }\r\n                if (isNaN(cantidad) || cantidad <= 0) {\r\n                    Swal.fire(\"Error\", \"Ingrese una cantidad válida\", \"error\");\r\n                    return;\r\n                }\r\n                if (cantidad > stock) {\r\n                    Swal.fire(\"Error\", \"La cantidad supera el stock disponible\", \"error\");\r\n                    return;\r\n                }\r\n                if (isNaN(iva) || iva < 0) {\r\n                    Swal.fire(\"Error\", \"Ingrese un IVA válido\", \"error\");\r\n                    return;\r\n                }\r\n\r\n                let subtotal = precio * cantidad;\r\n                let monto_iva = subtotal * iva;\r\n                let total = subtotal + monto_iva;\r\n\r\n\r\n                tabla.row.add([\r\n                    productoTexto,\r\n                    `$${precio.toFixed(2)}`,\r\n                    cantidad,\r\n                    `$${subtotal.toFixed(2)}`,\r\n                    `${iva.toFixed(2)} %`,\r\n                    `$${monto_iva.toFixed(2)}`,\r\n                    `$${total.toFixed(2)}`,\r\n                    `<button class=\"btn btn-danger btn-sm eliminar\">Eliminar</button>`\r\n                ]).draw();\r\n\r\n\r\n                let nuevoStock = stock - cantidad;\r\n                $(\"#prod_stock\").val(nuevoStock);\r\n                $(\"#prod_stock_resta\").val(\"\");\r\n\r\n                Swal.fire(\"Producto Agregado\", \"Se ha agregado el producto a la factura\", \"success\");\r\n            });\r\n\r\n\r\n            $(\"#tablaFactura tbody\").on(\"click\", \".eliminar\", function() {\r\n                let fila = $(this).closest(\"tr\");\r\n                let cantidad = parseInt(fila.find(\"td:eq(2)\").text());\r\n\r\n                tabla.row(fila).remove().draw();\r\n                Swal.fire(\"Producto Eliminado\", \"El producto fue eliminado de la factura\", \"warning\");\r\n            });\r\n\r\n\r\n            $(\"#btnGuardar\").click(function() {\r\n                let factura = {\r\n                    cliente: $(\"#cli_id\").val(),\r\n                    productos: []\r\n                };\r\n\r\n\r\n                tabla.rows().every(function(rowIdx, tableLoop, rowLoop) {\r\n                    let data = this.data();\r\n\r\n                    let producto = data[0];\r\n                    let precio = parseFloat(data[1].replace(\"$\", \"\"));\r\n                    let cantidad = parseInt(data[2]);\r\n                    let subtotal = parseFloat(data[3].replace(\"$\", \"\"));\r\n                    let ivaPorcentaje = parseFloat(data[4].replace(\"%\", \"\"));\r\n\r\n                    \r\n                    let monto_iva = subtotal * ivaPorcentaje;\r\n\r\n\r\n                    let total = subtotal + monto_iva;\r\n\r\n\r\n                    factura.productos.push({\r\n                        producto: producto,\r\n                        precio: precio.toFixed(2),\r\n                        cantidad: cantidad,\r\n                        subtotal: subtotal.toFixed(2),\r\n                        iva: ivaPorcentaje.toFixed(2),\r\n                        monto_iva: monto_iva.toFixed(2),\r\n                        total: total.toFixed(2),\r\n                        color: prod_color\r\n                    });\r\n                });\r\n\r\n\r\n                if (factura.productos.length === 0) {\r\n                    Swal.fire(\"Error\", \"No hay productos en la factura\", \"error\");\r\n                    return;\r\n                }\r\n\r\n                console.log(\"Datos de factura a enviar:\", JSON.stringify(factura, null, 2));\r\n\r\n\r\n                $.ajax({\r\n                    url: \"controllers/factura.php?op=guardar\",\r\n                    type: \"POST\",\r\n                    data: {\r\n                        factura: JSON.stringify(factura)\r\n                    },\r\n                    success: function(response) {\r\n\r\n                        Swal.fire(\"Factura Guardada\", \"La factura se ha guardado correctamente\", \"success\");\r\n\r\n\r\n                        tabla.clear().draw();\r\n                        $(\"#formFactura\")[0].reset();\r\n                    },\r\n                    error: function(xhr, status, error) {\r\n\r\n                        Swal.fire(\"Error\", \"No se pudo guardar la factura\", \"error\");\r\n                    }\r\n                });\r\n            });\r\n\r\n\r\n\r\n\r\n            $(\"#btnLimpiar\").click(function() {\r\n                Swal.fire({\r\n                    title: \"Confirmar\",\r\n                    text: \"¿Está seguro de limpiar la factura?\",\r\n                    icon: \"question\",\r\n                    showCancelButton: true,\r\n                    confirmButtonText: \"Sí, limpiar\",\r\n                    cancelButtonText: \"Cancelar\"\r\n                }).then((result) => {\r\n                    if (result.isConfirmed) {\r\n                        tabla.clear().draw();\r\n                        $(\"#formFactura\")[0].reset();\r\n                        Swal.fire(\"Factura Limpiada\", \"La factura se ha limpiado correctamente\", \"success\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n            <h4>Análisis de Seguridad</h4>\n        </div>\n        <div class=\"card-body\">\n            <ul>\n                <li>\n                    <strong>Vulnerabilidad:</strong> Inyección SQL potencial en <code>controllers/cliente.php</code>,\n                    <code>controllers/producto.php</code> y <code>controllers/factura.php</code>.\n                    <br>\n                    <strong>Línea Aproximada:</strong> Depende de la implementación interna de los archivos PHP.  Asumiendo que la variable `op` viene directamente de la petición GET sin sanitizar ni validar.\n                    <br>\n                    <strong>Mitigación:</strong> Utilizar consultas preparadas (prepared statements) o procedimientos\n                    almacenados con parámetros en las consultas a la base de datos.  Validar y sanitizar siempre\n                    las entradas del usuario, incluyendo parámetros GET y POST.\n                    <br>\n                    <strong>Ejemplo:</strong> En lugar de concatenar directamente <code>$_GET[\'op\']</code> en la consulta SQL, usar\n                    parámetros en la consulta preparada.\n                    <br>\n                    <strong>Mejora de calidad:</strong> Esto también mejora la legibilidad y mantenibilidad del código en el backend.\n                </li>\n                <li>\n                    <strong>Vulnerabilidad:</strong> Cross-Site Scripting (XSS) potencial.\n                    <br>\n                    <strong>Línea Aproximada:</strong> Posiblemente en la forma en que se muestran los datos del cliente y del producto\n                    en los campos <code>input</code> (<code>cli_nom</code>, <code>cli_direccion</code>, <code>cli_telefono</code>,\n                    <code>prod_precio</code>, <code>prod_stock</code>) y en la tabla.\n                    <br>\n                    <strong>Mitigación:</strong> Escapar los datos que se insertan en el HTML.  Por ejemplo, usar\n                    <code>DOMPurify</code> o funciones de escape específicas del lenguaje del servidor.  En el cliente, usa\n                    <code>.text()</code> en lugar de <code>.html()</code> para insertar datos.\n                    <br>\n                    <strong>Ejemplo:</strong> <code>$(\"#cli_nom\").val(escapeHtml(cliente.CLI_NOM));</code> donde `escapeHtml` es una\n                    función que escapa los caracteres especiales HTML.\n                    <br>\n                    <strong>Mejora de calidad:</strong> Mejora la seguridad y previene la inyección de código malicioso.\n                </li>\n                 <li>\n                    <strong>Vulnerabilidad:</strong> Falta de validación y sanitización en el campo `prod_color`.\n                    <br>\n                    <strong>Línea Aproximada:</strong>\n\n                    <pre><code>\n                    factura.productos.push({\n                       // ...otros campos\n                        color: prod_color // &lt;--\n                    });\n                    </code></pre>\n\n                    <br>\n                    <strong>Mitigación:</strong> Antes de enviar los datos al servidor, validar y sanitizar el valor de `prod_color` para prevenir inyección de código malicioso o datos inesperados.\n                </li>\n                <li>\n                    <strong>Vulnerabilidad:</strong> No se realiza una validación adecuada en el backend para asegurar que los datos\n                    recibidos son coherentes y válidos antes de realizar la inserción en la base de datos.\n                    <br>\n                    <strong>Línea Aproximada:</strong> En <code>controllers/factura.php</code>, antes de insertar la factura en la base\n                    de datos.\n                    <br>\n                    <strong>Mitigación:</strong> Implementar validaciones robustas en el backend para asegurar la integridad\n                    de los datos.\n                    <br>\n                    <strong>Mejora de calidad:</strong> Mejora la fiabilidad y la consistencia de la base de datos.\n                </li>\n                <li>\n                    <strong>Vulnerabilidad:</strong> Posible Denegación de Servicio (DoS) si no se controla la cantidad de productos\n                    que se pueden agregar a la factura.\n                    <br>\n                    <strong>Línea Aproximada:</strong> En el bucle de la función <code>$(\"#btnGuardar\").click(function()</code>.\n                    <br>\n                    <strong>Mitigación:</strong> Limitar la cantidad de productos que se pueden agregar a la factura.\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-white\">\n            <h4>Métricas de Calidad del Código</h4>\n        </div>\n        <div class=\"card-body\">\n            <ul>\n                <li>\n                    <strong>Complejidad:</strong> La lógica dentro de los event handlers (<code>$(\"#cli_id\").change</code>,\n                    <code>$(\"#prod_id\").change</code>, <code>$(\"#btnagregar\").click</code>,\n                    <code>$(\"#btnGuardar\").click</code>, <code>$(\"#btnLimpiar\").click</code>) podría ser simplificada.\n                    <br>\n                    <strong>Mejora:</strong> Refactorizar el código en funciones más pequeñas y reutilizables. Usar promesas o async/await para mejorar la legibilidad de las llamadas asíncronas.\n                    <br>\n                    <strong>Ejemplo:</strong> Extraer la lógica de validación de los campos en una función separada.\n                </li>\n                <li>\n                    <strong>Duplicación:</strong> Cierta duplicación en el manejo de las llamadas AJAX (<code>$.post</code> y\n                    <code>$.ajax</code>).\n                    <br>\n                    <strong>Mejora:</strong> Crear una función genérica para realizar las llamadas AJAX y manejar los errores.\n                    <br>\n                    <strong>Ejemplo:</strong> <code>function hacerPeticion(url, data) { ... }</code>.\n                </li>\n                <li>\n                    <strong>Legibilidad:</strong> El código en general es legible, pero la longitud de algunas funciones podría\n                    dificultar su comprensión.\n                    <br>\n                    <strong>Mejora:</strong> Dividir las funciones largas en funciones más pequeñas y con nombres descriptivos.\n                    Usar comentarios para explicar la lógica compleja.\n                </li>\n                <li>\n                    <strong>Acoplamiento:</strong> El código está acoplado a los IDs de los elementos HTML.\n                    <br>\n                    <strong>Mejora:</strong> Usar clases CSS en lugar de IDs para seleccionar los elementos.\n                    Esto hace que el código sea más flexible y reutilizable.\n                    <br>\n                    <strong>Ejemplo:</strong> En lugar de <code>$(\"#cli_nom\").val(...)</code>, usar <code>$(\".cli_nom\").val(...)</code>\n                    y asignar la clase <code>cli_nom</code> al elemento HTML correspondiente.\n                </li>\n                <li>\n                    <strong>Mantenibilidad:</strong> La mezcla de HTML, CSS y JavaScript en un solo archivo dificulta la\n                    mantenibilidad.\n                    <br>\n                    <strong>Mejora:</strong> Separar el HTML, CSS y JavaScript en archivos separados.\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n            <h4>Solución Propuesta</h4>\n        </div>\n        <div class=\"card-body\">\n            <ol>\n                <li>\n                    <strong>Seguridad:</strong>\n                    <ul>\n                        <li>\n                            Implementar consultas preparadas o procedimientos almacenados en <code>controllers/cliente.php</code>,\n                            <code>controllers/producto.php</code> y <code>controllers/factura.php</code>.\n                        </li>\n                        <li>\n                            Escapar los datos que se muestran en el HTML para prevenir XSS.  Usar una biblioteca como\n                            <code>DOMPurify</code> o funciones de escape específicas del lenguaje del servidor.\n                        </li>\n                        <li>\n                            Validar y sanitizar todas las entradas del usuario, tanto en el cliente como en el servidor.\n                        </li>\n                         <li>\n                            Validar y sanitizar el campo `prod_color`.\n                        </li>\n                    </ul>\n                </li>\n                <li>\n                    <strong>Calidad del Código:</strong>\n                    <ul>\n                        <li>\n                            Refactorizar el código en funciones más pequeñas y reutilizables.\n                        </li>\n                        <li>\n                            Crear una función genérica para realizar las llamadas AJAX y manejar los errores.\n                        </li>\n                        <li>\n                            Dividir las funciones largas en funciones más pequeñas y con nombres descriptivos.\n                        </li>\n                        <li>\n                            Usar clases CSS en lugar de IDs para seleccionar los elementos.\n                        </li>\n                        <li>\n                            Separar el HTML, CSS y JavaScript en archivos separados.\n                        </li>\n                         <li>\n                            Implementar validaciones robustas en el backend para asegurar la integridad\n                            de los datos.\n                        </li>\n                    </ul>\n                </li>\n            </ol>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:51:40', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(35, 'modal.php', 'Detectado por GPT', '<div id=\"modalmantenimiento\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: none;\">\r\n    <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header bg-primary text-white\">\r\n                <h5 class=\"modal-title\" id=\"lbltitulo\">Detalle de Factura</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n\r\n\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n                <div class=\"table-responsive\">\r\n                    <table id=\"detalleTabla\" class=\"table table-bordered table-striped\">\r\n                        <thead class=\"table-light\">\r\n                            <tr>\r\n                                <th>ID Producto</th>\r\n                                <th>Cliente</th>\r\n                                <th>Producto</th>\r\n                                <th>Precio</th>\r\n                                <th>Cantidad</th>\r\n                                <th>Iva</th>\r\n                                <th>Saldo Iva</th>\r\n                                <th>SubTotal</th>\r\n                                <th>Total</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <!-- Se rellenará dinámicamente -->\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                \r\n               \r\n                <button type=\"reset\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n                <button type=\"submit\" name=\"action\" value=\"add\" class=\"btn btn-primary\">Guardar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">Vulnerabilidades de Seguridad</div>\n        <div class=\"card-body\">\n\n          <h5 class=\"card-title\">Posible Vulnerabilidad XSS</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Cross-Site Scripting (XSS)\n            <br>\n            <b>Línea Aproximada:</b> Rellenado dinámico de la tabla <code>#detalleTabla</code> (<code>tbody</code>).\n            <br>\n            <b>Descripción:</b> Si los datos que se utilizan para rellenar la tabla (ID Producto, Cliente, Producto, etc.) provienen de una fuente no confiable (por ejemplo, entrada del usuario, base de datos vulnerable), y no se sanitizan correctamente antes de insertarlos en el DOM, un atacante podría inyectar código JavaScript malicioso. Este código se ejecutaría en el navegador del usuario cuando la página se renderiza.\n            <br>\n            <b>Mitigación:</b>\n            <ol>\n              <li><b>Sanitización de Entrada:</b> Antes de mostrar cualquier dato en la tabla, especialmente los campos `Cliente` y `Producto`, utilizar funciones de escape HTML. En JavaScript, se puede usar una función para reemplazar caracteres especiales como <code>&</code>, <code><</code>, <code>></code>, <code>\"</code>, y <code>\'</code> con sus correspondientes entidades HTML (<code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&quot;</code>, <code>&#39;</code>).</li>\n              <li><b>Validación de Entrada:</b> Validar los datos antes de guardarlos en la base de datos o usarlos en la aplicación.  Asegurarse de que cumplan con el formato y tipo esperados.</li>\n              <li><b>Content Security Policy (CSP):</b> Implementar una política CSP para controlar qué recursos puede cargar el navegador. Esto puede ayudar a prevenir la ejecución de código malicioso inyectado.</li>\n            </ol>\n          </p>\n          <h5 class=\"card-title\">Posible Vulnerabilidad CSRF</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Cross-Site Request Forgery (CSRF)\n            <br>\n            <b>Línea Aproximada:</b> <code>&lt;button type=\"submit\" name=\"action\" value=\"add\" class=\"btn btn-primary\"&gt;Guardar&lt;/button&gt;</code>\n            <br>\n            <b>Descripción:</b>  El formulario que envía la factura, tiene un botón submit que puede ser manipulado por un atacante, haciendo que el usuario ejecute acciones no deseadas sin su conocimiento.\n            <br>\n            <b>Mitigación:</b>\n            <ol>\n              <li><b>Tokens CSRF:</b>  Generar un token único y secreto para cada sesión de usuario. Incluir este token como un campo oculto en el formulario.  En el servidor, verificar que el token enviado con la solicitud coincida con el token almacenado para la sesión del usuario antes de procesar la solicitud.</li>\n              <li><b>Misma política de origen (SameSite Cookies):</b>  Configurar las cookies de sesión con el atributo `SameSite` establecido en `Strict` o `Lax` (dependiendo de las necesidades de la aplicación). Esto ayuda a prevenir que las cookies se envíen con solicitudes entre sitios.</li>\n            </ol>\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">Métricas de Calidad del Código</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            El código HTML en sí mismo es bastante legible debido al uso de clases de Bootstrap y nombres de atributos descriptivos.  Sin embargo, la legibilidad podría mejorarse aún más con:\n            <ul>\n              <li>Comentarios más detallados, especialmente en la parte donde se rellena dinámicamente la tabla.</li>\n              <li>Consistencia en el uso de espacios y sangrías.</li>\n            </ul>\n          </p>\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            El código HTML tiene un acoplamiento moderado con Bootstrap. Si bien Bootstrap facilita la creación de interfaces de usuario, el código se vuelve dependiente de esta biblioteca. Si se quisiera cambiar el framework CSS, sería necesario modificar el HTML.\n          </p>\n          <h5 class=\"card-title\">Complejidad</h5>\n          <p class=\"card-text\">\n            La complejidad del HTML es baja en este fragmento. La lógica principal (rellenar la tabla dinámicamente) reside probablemente en el JavaScript asociado.\n          </p>\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            En este fragmento no se observa duplicación significativa.\n          </p>\n\n        </div>\n      </div>\n\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">Solución Propuesta</div>\n        <div class=\"card-body\">\n          <ol>\n            <li><b>Implementar Sanitización de Datos:</b>  Antes de insertar los datos en la tabla, usar una función de escape HTML para prevenir ataques XSS. Ejemplo:\n\n                ```javascript\n                function escapeHtml(text) {\n                  var map = {\n                    \'&\': \'&amp;\',\n                    \'<\': \'&lt;\',\n                    \'>\': \'&gt;\',\n                    \'\"\': \'&quot;\',\n                    \"\'\": \'&#039;\'\n                  };\n\n                  return text.replace(/[&<>\"\']/g, function(m) { return map[m]; });\n                }\n\n                // Ejemplo de uso al rellenar la tabla:\n                var producto = escapeHtml(data.producto); // Suponiendo que \'data.producto\' viene de la base de datos.\n                ```\n            </li>\n            <li><b>Añadir Token CSRF:</b>  Implementar un token CSRF para proteger el formulario contra ataques CSRF.\n\n                ```html\n                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo $_SESSION[\'csrf_token\']; ?>\">\n                ```\n\n                Y verificar el token en el servidor antes de procesar la solicitud.\n            </li>\n            <li><b>Validación de Entrada:</b>  Validar todos los datos que se reciben del cliente antes de utilizarlos en la aplicación o guardarlos en la base de datos.</li>\n\n          </ol>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 01:52:18', 6),
(36, 'Cliente.php', 'Detectado por GPT', '<?php\r\nclass Cliente extends Conectar\r\n{\r\n    public function get_clientes()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_CLIENTE_01\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n    public function get_cliente_id($cli_id)\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_CLIENTE_02 ?\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->bindValue(1, $cli_id);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n    \r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Análisis de Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n\n                    <div class=\"card\">\n                        <div class=\"card-header\">\n                            Vulnerabilidad: Inyección SQL (Potencial)\n                        </div>\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title\">Descripción</h5>\n                            <p class=\"card-text\">\n                                La función <code>get_cliente_id</code>, específicamente en la línea:\n                                <pre><code>$sql = \"SP_L_CLIENTE_02 ?\";</code></pre>\n                                utiliza un marcador de posición (<code>?</code>) en la consulta SQL, lo cual es un buen comienzo para prevenir la inyección SQL.  Sin embargo, es crucial verificar que el procedimiento almacenado <code>SP_L_CLIENTE_02</code>  esté implementado de forma segura y no sea vulnerable a inyección SQL internamente. Si el procedimiento almacenado realiza concatenación de cadenas o utiliza la entrada sin validación dentro de sus propias consultas, la vulnerabilidad de inyección SQL todavía puede existir.\n                            </p>\n                            <h5 class=\"card-title\">Línea Afectada (Aproximada)</h5>\n                            <p class=\"card-text\">\n                                Línea: 16 (pero la vulnerabilidad real *podría* estar dentro de la implementación del procedimiento almacenado `SP_L_CLIENTE_02`).\n                            </p>\n                            <h5 class=\"card-title\">Mitigación</h5>\n                            <ol class=\"card-text\">\n                                <li><b>Revisión del Procedimiento Almacenado:</b>  El punto principal es auditar el procedimiento almacenado <code>SP_L_CLIENTE_02</code>. Asegurarse de que *dentro* del procedimiento almacenado, la entrada <code>cli_id</code> se maneje correctamente y que no se construyan dinámicamente cadenas SQL vulnerables. Usar parámetros en todas las consultas SQL dentro del procedimiento almacenado.</li>\n                                <li><b>Validación de Entrada:</b> Aunque se usa <code>bindValue</code>, considere validar la entrada <code>$cli_id</code> antes de pasarla a la consulta.  Asegurarse de que es del tipo esperado (por ejemplo, un entero) y que cumple con cualquier restricción de formato o rango.  Esto añade una capa adicional de seguridad.</li>\n                                <li><b>Principio de Privilegio Mínimo:</b> Asegúrese de que la cuenta de base de datos utilizada por la aplicación tenga solo los permisos necesarios para realizar sus operaciones.  Esto limita el daño potencial en caso de una vulnerabilidad exitosa.</li>\n                            </ol>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-warning\">\n                <div class=\"card-header bg-warning text-white\">\n                    Análisis de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n\n                    <div class=\"card\">\n                        <div class=\"card-header\">\n                            Métricas de Calidad\n                        </div>\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title\">Complejidad</h5>\n                            <p class=\"card-text\">\n                                La complejidad ciclomática es baja. Cada método es sencillo y realiza una única tarea (obtener clientes o un cliente por ID). No hay lógica condicional compleja.\n                            </p>\n                            <h5 class=\"card-title\">Duplicación</h5>\n                            <p class=\"card-text\">\n                                Existe una ligera duplicación entre los métodos <code>get_clientes</code> y <code>get_cliente_id</code>. Ambos establecen una conexión y preparan una consulta. Esta duplicación es mínima en este caso, pero en proyectos más grandes, se podría considerar extraer la lógica de conexión a un método reutilizable.\n                            </p>\n                            <h5 class=\"card-title\">Legibilidad</h5>\n                            <p class=\"card-text\">\n                                El código es bastante legible. Los nombres de las variables son claros y la estructura es sencilla.  El uso de comentarios podría mejorar la comprensión, especialmente para documentar el propósito de los procedimientos almacenados que se invocan.\n                            </p>\n                            <h5 class=\"card-title\">Acoplamiento</h5>\n                            <p class=\"card-text\">\n                                Existe un acoplamiento al procedimiento almacenado.  Si la estructura del procedimiento almacenado cambia, el código PHP también deberá modificarse.  Esto se puede mitigar ligeramente abstrayendo la lógica de acceso a datos en una capa separada, pero la dependencia del procedimiento almacenado persistirá hasta cierto punto.\n                            </p>\n                            <h5 class=\"card-title\">Mejoras Generales</h5>\n                            <ul class=\"card-text\">\n                                <li><b>Manejo de Excepciones:</b> No hay manejo de excepciones explícito. Si la conexión a la base de datos falla o la consulta falla, el código no maneja estos errores de manera adecuada. Se deben agregar bloques <code>try-catch</code> para manejar estas situaciones y registrarlas o mostrarlas de manera controlada.</li>\n                                <li><b>Logging:</b> Agregar logging para registrar las consultas que se ejecutan y cualquier error que ocurra. Esto facilita la depuración y el monitoreo de la aplicación.</li>\n                                <li><b>Validación de Datos de Salida:</b> Aunque no es estrictamente una vulnerabilidad, validar los datos que se devuelven desde la base de datos puede ayudar a prevenir errores inesperados en la aplicación.</li>\n                            </ul>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row mt-3\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-success\">\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Propuestas de Mejora</h5>\n                    <ol class=\"card-text\">\n                        <li><b>Auditoría y Refuerzo de Procedimientos Almacenados:</b> Realizar una auditoría exhaustiva de todos los procedimientos almacenados utilizados por la aplicación para identificar y corregir cualquier vulnerabilidad de inyección SQL.  Usar parámetros en *todas* las consultas dentro de los procedimientos almacenados.</li>\n                        <li><b>Implementación de Validación de Entrada:</b> Agregar validación de entrada robusta para todos los parámetros que se pasan a las consultas SQL, incluso si se están utilizando procedimientos almacenados.  Esto incluye verificar el tipo de datos, el formato y el rango de los valores.</li>\n                        <li><b>Manejo de Excepciones y Logging:</b> Implementar un manejo de excepciones adecuado para capturar y registrar cualquier error que ocurra durante la ejecución de las consultas SQL.  Esto facilita la depuración y el monitoreo de la aplicación.  El logging debe incluir información relevante como la consulta que se ejecutó, los parámetros que se utilizaron y el error que ocurrió.</li>\n                        <li><b>Abstracción de la Capa de Datos (Opcional):</b>  Considerar la posibilidad de abstraer la lógica de acceso a datos en una capa separada para reducir el acoplamiento y facilitar las pruebas unitarias.  Esto podría implicar la creación de interfaces para los objetos de acceso a datos y la inyección de dependencias para desacoplar el código.  Esta opción es más relevante para proyectos grandes.</li>\n                    </ol>\n                    <p class=\"card-text\">\n                        La seguridad debe ser una preocupación central en el desarrollo de aplicaciones web. Una auditoría continua del código y la implementación de prácticas seguras de codificación son esenciales para proteger la aplicación contra ataques.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:52:45', 6),
(37, 'Factura.php', 'Detectado por GPT', '<?php\r\nrequire_once(\"../config/conexion.php\");\r\n\r\nclass Factura extends Conectar\r\n{\r\n    public function guardarFactura($factura)\r\n    {\r\n        $conectar = parent::Conexion();\r\n\r\n        try {\r\n\r\n            $conectar->beginTransaction();\r\n\r\n\r\n            $totalFactura = 0;\r\n            foreach ($factura[\'productos\'] as $prod) {\r\n                $totalFactura += floatval($prod[\'total\']);\r\n            }\r\n\r\n\r\n            $sqlFactura = \"INSERT INTO TM_FACTURA (cli_id, total) VALUES (?, ?)\";\r\n            $queryFactura = $conectar->prepare($sqlFactura);\r\n            $queryFactura->execute([\r\n                $factura[\'cliente\'],\r\n                $totalFactura\r\n            ]);\r\n\r\n\r\n            $factura_id = $conectar->lastInsertId();\r\n\r\n\r\n            $sqlDetalle = \"INSERT INTO TM_FACTURA_DETALLE (factura_id, producto, precio, cantidad, subtotal, iva, total,monto_iva) \r\n               VALUES (:factura_id, :producto, :precio, :cantidad, :subtotal, :iva, :total, :monto_iva)\";\r\n            $queryDetalle = $conectar->prepare($sqlDetalle);\r\n\r\n            foreach ($factura[\'productos\'] as $producto) {\r\n                $queryDetalle->execute([\r\n                    \':factura_id\' => $factura_id,\r\n                    \':producto\' => $producto[\'producto\'],\r\n                    \':precio\' => $producto[\'precio\'],\r\n                    \':cantidad\' => $producto[\'cantidad\'],\r\n                    \':subtotal\' => $producto[\'subtotal\'],\r\n                    \':iva\' => $producto[\'iva\'],\r\n                    \':total\' => $producto[\'total\'],\r\n                    \':monto_iva\' => $producto[\'monto_iva\']\r\n                ]);\r\n            }\r\n\r\n\r\n            $conectar->commit();\r\n            return true;\r\n        } catch (PDOException $e) {\r\n            // En caso de error, revierte la transacción.\r\n            $conectar->rollback();\r\n            throw $e;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public function get_Factura()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_TM_FACTURA_01\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n    public function get_Factura_id($id)\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_TM_FACTURA_02 ?\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->bindValue(1, $id);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n}\r\n', '```html\n<div class=\"container\">\n\n    <div class=\'card border-danger mb-3\'>\n        <div class=\'card-header bg-danger text-white\'>\n            Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Inyección SQL (Potencial) - Línea:  57</h5>\n                <p>\n                    <b>Descripción:</b> La función `get_Factura_id` usa concatenación o interpolación directa de la variable `$id` en la consulta SQL, lo que la hace vulnerable a inyección SQL si `$id` proviene de una fuente no confiable (como la entrada del usuario).\n                    <br>\n                    <b>Línea Aproximada:</b> `57` -  `$sql = \"SP_L_TM_FACTURA_02 ?\";`\n                    <br>\n                    <b>Explicación:</b>  Aunque la linea 58 utiliza `bindValue`, la linea 57 define el query string con un placeholder `?`.  Si el Stored Procedure `SP_L_TM_FACTURA_02` internamente concatena o usa interpolación directa de datos sin validar, la inyección SQL se vuelve posible.  Es imperativo revisar y corregir el Stored Procedure en sí.\n                    <br>\n                    <b>Mitigación:</b> Asegurarse de que el Stored Procedure  `SP_L_TM_FACTURA_02` utiliza parámetros preparados y/o valida correctamente los datos de entrada. Validar y sanitizar la entrada del usuario para `$id` antes de pasarlo a la consulta.  Preferiblemente, utilizar parámetros nombrados en lugar de parámetros posicionales con `bindValue`.\n                </p>\n            </div>\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Falta de validación de entradas en `guardarFactura`</h5>\n                <p>\n                    <b>Descripción:</b>  La función `guardarFactura` recibe un array `$factura` directamente de una fuente externa (probablemente una solicitud HTTP). No se realiza ninguna validación o sanitización de los datos dentro de este array, lo que podría llevar a diversas vulnerabilidades.\n                    <br>\n                    <b>Línea Aproximada:</b> 6-47 (toda la función)\n                    <br>\n                    <b>Explicación:</b> Si los datos en `$factura[\'productos\']`, `$factura[\'cliente\']`, `$producto[\'producto\']`, `$producto[\'precio\']`, `$producto[\'cantidad\']`, etc. no son validados, un atacante podría inyectar datos maliciosos que corrompan la base de datos o causen otros problemas. Por ejemplo, un valor negativo en `$producto[\'cantidad\']` podría llevar a cálculos incorrectos.\n                    <br>\n                    <b>Mitigación:</b> Validar todos los datos de entrada en `guardarFactura` antes de usarlos en la consulta SQL.  Asegurarse de que los tipos de datos sean correctos, los rangos sean válidos y que no haya caracteres no permitidos.  Sanitizar los datos para prevenir la inyección de código. Utilizar `filter_var` con los filtros apropiados es una buena opción.\n                </p>\n            </div>\n\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Manejo de errores (Sensible Data Exposure)</h5>\n                <p>\n                    <b>Descripción:</b> En el bloque `catch`, se lanza la excepción `$e` sin modificar.  Esto podría exponer información sensible sobre la base de datos (por ejemplo, el nombre de la tabla, el nombre de la columna, el tipo de error) a un atacante.\n                    <br>\n                    <b>Línea Aproximada:</b> 45\n                    <br>\n                    <b>Mitigación:</b> Loggear el error para su posterior análisis, pero no exponer directamente la información del error al usuario.  En su lugar, devolver un mensaje de error genérico al usuario.\n                </p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'card border-warning mb-3\'>\n        <div class=\'card-header bg-warning text-dark\'>\n            Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Complejidad Ciclomática</h5>\n                <p>\n                    <b>Descripción:</b> La función `guardarFactura` tiene una complejidad ciclomática moderada debido al bucle `foreach` y al bloque `try...catch`.\n                    <br>\n                    <b>Mejora:</b> Se podría reducir la complejidad refactorizando parte de la lógica del bucle `foreach` en funciones separadas.\n                </p>\n            </div>\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Acoplamiento</h5>\n                <p>\n                    <b>Descripción:</b> La clase `Factura` está acoplada a la clase `Conectar` (herencia) y directamente a la base de datos (a través de PDO).\n                    <br>\n                    <b>Mejora:</b> Se podría reducir el acoplamiento utilizando una interfaz para la conexión a la base de datos y una clase separada para la gestión de transacciones.  Considerar el uso de un ORM.\n                </p>\n            </div>\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Legibilidad</h5>\n                <p>\n                    <b>Descripción:</b> En general, el código es bastante legible. Sin embargo, la falta de comentarios en ciertas partes (especialmente dentro del bloque `try...catch`) dificulta un poco la comprensión.\n                    <br>\n                    <b>Mejora:</b> Agregar comentarios para explicar la lógica de las secciones más complejas del código.  Utilizar nombres de variables más descriptivos.\n                </p>\n            </div>\n            <div class=\'card-text\'>\n                <h5 class=\'card-title\'>Duplicación</h5>\n                <p>\n                    <b>Descripción:</b> Hay una ligera duplicación de código en la obtención de la conexión a la base de datos en las funciones `guardarFactura`, `get_Factura` y `get_Factura_id`.\n                    <br>\n                    <b>Mejora:</b> Se podría extraer la lógica de obtener la conexión a la base de datos en una función privada dentro de la clase `Factura`.\n                </p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n            Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n            <div class=\'card-text\'>\n                <ol>\n                    <li><b>Validación de Entradas:</b> Implementar una validación exhaustiva de todas las entradas en la función `guardarFactura`.  Usar `filter_var` para asegurar que los datos sean del tipo esperado y estén dentro de los rangos válidos.  Validar la existencia de las keys dentro del array `$factura` antes de acceder a ellas para evitar errores `undefined index`.</li>\n                    <li><b>Stored Procedures Seguros:</b>  Revisar y corregir el Stored Procedure `SP_L_TM_FACTURA_02` para asegurarse de que utiliza parámetros preparados y/o valida correctamente los datos de entrada.</li>\n                    <li><b>Manejo de Errores Mejorado:</b> Loggear las excepciones en el bloque `catch`, pero devolver un mensaje de error genérico al usuario para evitar exponer información sensible.</li>\n                    <li><b>Refactorización:</b> Extraer la lógica de obtención de la conexión a la base de datos en una función privada para reducir la duplicación de código.  Considerar refactorizar el bucle `foreach` en `guardarFactura` en funciones separadas para reducir la complejidad.</li>\n                    <li><b>Abstracción de la Base de Datos:</b> Considerar el uso de una interfaz o un ORM para abstraer la interacción con la base de datos y reducir el acoplamiento.</li>\n                    <li><b>Comentarios:</b> Agregar comentarios para explicar la lógica de las secciones más complejas del código.</li>\n                </ol>\n            </div>\n        </div>\n    </div>\n\n</div>\n```\n', '2025-05-20 01:53:08', 6),
(38, 'Producto.php', 'Detectado por GPT', '<?php\r\nclass Producto extends Conectar\r\n{\r\n    public function get_productos()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_PRODUCTO_01\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n    public function get_producto_id($prod_id)\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_PRODUCTO_02 ?\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->bindValue(1, $prod_id);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n    \r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"card border-danger mb-3\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL (Potencial)</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> <code>$sql = \"SP_L_PRODUCTO_02 ?\";</code> en el método <code>get_producto_id($prod_id)</code>.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> Aunque se usa una sentencia preparada, el riesgo reside en que <code>SP_L_PRODUCTO_02</code> sea un stored procedure vulnerable a inyección SQL.  Si este procedimiento no está correctamente parametrizado internamente y concatena directamente la entrada <code>prod_id</code> en su lógica, la aplicación sigue siendo vulnerable.  Debemos asegurarnos de que el procedimiento almacenado utiliza parámetros y escapa correctamente cualquier entrada del usuario antes de incorporarla a la consulta SQL.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b>\n                        <ol>\n                            <li>Revisar y fortalecer el stored procedure <code>SP_L_PRODUCTO_02</code>.  Asegurarse de que utiliza parámetros y escapa correctamente los datos de entrada.</li>\n                            <li>Considerar usar un ORM para la gestión de base de datos, lo que puede simplificar y mejorar la seguridad.</li>\n                            <li>Implementar validación y saneamiento de la entrada <code>$prod_id</code> antes de pasarla al stored procedure.  Asegurarse de que el tipo de dato es el esperado (entero, por ejemplo) y que no contiene caracteres inesperados.</li>\n                        </ol>\n                    </p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"col-md-6\">\n            <div class=\"card border-warning mb-3\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> La clase `Producto` depende directamente de la clase `Conectar`. Esto significa que si la clase `Conectar` cambia, es probable que la clase `Producto` también necesite ser modificada.  Esto es un alto acoplamiento.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mejora:</b> Considerar la inyección de dependencias. En lugar de que la clase `Producto` herede de `Conectar`, se podría pasar una instancia de la conexión como dependencia al constructor.  Esto reduce el acoplamiento y facilita las pruebas unitarias.\n                    </p>\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código es relativamente legible, pero se podría mejorar.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mejora:</b>\n                        <ul>\n                            <li>Añadir comentarios JSDoc a los métodos para describir su propósito, parámetros y valores de retorno.</li>\n                            <li>Considerar nombres más descriptivos para las variables (e.g., `$productoId` en lugar de `$prod_id`).</li>\n                            <li>Asegurarse de que el código sigue las convenciones de estilo de la comunidad PHP (PSR).</li>\n                        </ul>\n                    </p>\n                    <h5 class=\"card-title\">Simplicidad</h5>\n                     <p class=\"card-text\">\n                        <b>Descripción:</b>  El código es bastante simple.\n                    </p>\n                     <p class=\"card-text\">\n                        <b>Mejora:</b>  Podría hacerse más robusto, pero en terminos de complejidad cumple con la tarea.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-success mb-3\">\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <p class=\"card-text\">\n                        A continuación se presenta un ejemplo de cómo se podría mejorar el código para abordar las vulnerabilidades y métricas de calidad mencionadas.  Este ejemplo incluye validación de entradas, el uso de inyección de dependencias y el refuerzo de la seguridad del stored procedure (asumiendo que el stored procedure se puede modificar o que hay control sobre su diseño).\n                    </p>\n                    <pre><code class=\"language-php\">\n&lt;?php\nclass Producto\n{\n    private $conexion;\n\n    public function __construct(PDO $conexion)\n    {\n        $this->conexion = $conexion;\n    }\n\n    /**\n     * Obtiene todos los productos.\n     *\n     * @return array Un array asociativo con la información de los productos.\n     */\n    public function get_productos(): array\n    {\n        $sql = \"SP_L_PRODUCTO_01\";\n        $query = $this->conexion->prepare($sql);\n        $query->execute();\n        return $query->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    /**\n     * Obtiene un producto por su ID.\n     *\n     * @param int $prod_id El ID del producto.\n     * @return array|false Un array asociativo con la información del producto, o false si no se encuentra.\n     * @throws InvalidArgumentException Si el ID del producto no es un entero positivo.\n     */\n    public function get_producto_id(int $prod_id): array|false\n    {\n        if (!is_int($prod_id) || $prod_id <= 0) {\n            throw new InvalidArgumentException(\"El ID del producto debe ser un entero positivo.\");\n        }\n\n        // Asumiendo que el Stored Procedure utiliza parámetros de forma segura.\n        $sql = \"CALL SP_L_PRODUCTO_02(?)\";\n        $query = $this->conexion->prepare($sql);\n        $query->bindValue(1, $prod_id, PDO::PARAM_INT);  // Especificar el tipo de dato explícitamente\n        $query->execute();\n\n        return $query->fetchAll(PDO::FETCH_ASSOC) ?: false;\n    }\n}\n                    </code></pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:53:31', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(39, 'view_factura.php', 'Detectado por GPT', '<!DOCTYPE html>\r\n<html lang=\"es\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Factura con Estilo Bootstrap</title>\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"assests/bootstrap.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- DataTables CSS (Integrado con Bootstrap) -->\r\n    <link rel=\"stylesheet\" href=\"assests/dataTables.bootstrap5.min.css\">\r\n\r\n    <!-- SweetAlert2 -->\r\n    <script src=\"assests/sweetalert2@11.js\"></script>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"assests/jquery-3.6.0.min.js\"></script>\r\n\r\n    <!-- DataTables JS -->\r\n    <script src=\"assests/jquery.dataTables.min.js\"></script>\r\n    <script src=\"assests/dataTables.bootstrap5.min.js\"></script>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css\" rel=\"stylesheet\">\r\n    <style>\r\n        body {\r\n            background-color: #f1f1f1;\r\n        }\r\n\r\n        .card {\r\n            border: none;\r\n            border-radius: 0.5rem;\r\n            box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.1);\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .card-header {\r\n            background-color: #007bff;\r\n            color: #fff;\r\n            border-bottom: none;\r\n            border-radius: 0.5rem 0.5rem 0 0;\r\n        }\r\n\r\n        h2 {\r\n            margin: 2rem 0;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container\">\r\n        <h2 class=\"text-center\">Sistema de Facturación</h2>\r\n\r\n        <!-- Formulario para agregar productos -->\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h4>LISTA DE FACTURAS</h4>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Tabla de productos -->\r\n        <div class=\"card mb-4\">\r\n            <div class=\"card-body\">\r\n                <table id=\"table_data\" class=\"table table-bordered dt-responsive nowrap table-striped align-middle\" style=\"width:100%\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Cliente</th>\r\n                            <th>Total</th>\r\n                            <th>SubTotal</th>\r\n                            <th>Fecha</th>\r\n                            <th>Acciones</th>\r\n                            <th>Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody></tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <?php require_once(\"modal.php\"); ?>\r\n    <!-- Bootstrap JS -->\r\n    <script src=\"assests/js/bootstrap.bundle.min.js\"></script>\r\n\r\n    <!-- Aquí iría tu script para manejo de la factura, validaciones, etc. -->\r\n    <script>\r\n        $(document).ready(function() {\r\n            $(\'#table_data\').DataTable({\r\n                \"aProcessing\": true,\r\n                \"aServerSide\": true,\r\n                dom: \'Bfrtip\',\r\n                buttons: [\r\n                    \'copyHtml5\',\r\n                    \'excelHtml5\',\r\n                    \'csvHtml5\',\r\n                ],\r\n                \"ajax\": {\r\n                    url: \"controllers/factura.php?op=listar\",\r\n                    type: \"post\",\r\n                },\r\n                \"bDestroy\": true,\r\n                \"responsive\": true,\r\n                \"bInfo\": true,\r\n                \"iDisplayLength\": 20,\r\n                \"order\": [\r\n                    [0, \"desc\"]\r\n                ],\r\n                \"language\": {\r\n                    \"sProcessing\": \"Procesando...\",\r\n                    \"sLengthMenu\": \"Mostrar _MENU_ registros\",\r\n                    \"sZeroRecords\": \"No se encontraron resultados\",\r\n                    \"sEmptyTable\": \"Ningún dato disponible en esta tabla\",\r\n                    \"sInfo\": \"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros\",\r\n                    \"sInfoEmpty\": \"Mostrando registros del 0 al 0 de un total de 0 registros\",\r\n                    \"sInfoFiltered\": \"(filtrado de un total de _MAX_ registros)\",\r\n                    \"sInfoPostFix\": \"\",\r\n                    \"sSearch\": \"Buscar:\",\r\n                    \"sUrl\": \"\",\r\n                    \"sInfoThousands\": \",\",\r\n                    \"sLoadingRecords\": \"Cargando...\",\r\n                    \"oPaginate\": {\r\n                        \"sFirst\": \"Primero\",\r\n                        \"sLast\": \"Último\",\r\n                        \"sNext\": \"Siguiente\",\r\n                        \"sPrevious\": \"Anterior\"\r\n                    },\r\n                    \"oAria\": {\r\n                        \"sSortAscending\": \": Activar para ordenar la columna de manera ascendente\",\r\n                        \"sSortDescending\": \": Activar para ordenar la columna de manera descendente\"\r\n                    }\r\n                },\r\n            });\r\n\r\n        });\r\n\r\n        function editar(id) {\r\n    $.post(\"controllers/factura.php?op=listar_items\", { id: id }, function(response) {\r\n        let jsonResponse = JSON.parse(response);\r\n        console.log(\"Detalle de productos:\", jsonResponse);\r\n\r\n       \r\n        let items = jsonResponse.aaData; \r\n        let tableBody = \"\";\r\n\r\n        \r\n\r\n        items.forEach(function(item) {\r\n            tableBody += `<tr>\r\n                            <td>${item[0]}</td>\r\n                            <td>${item[1]}</td>\r\n                            <td>${item[2]}</td>\r\n                            <td>${item[3]}</td>\r\n                            <td>${item[4]}</td>\r\n                            <td>${item[5]}</td>\r\n                            <td>${item[6]}</td>\r\n                            <td>${item[7]}</td>\r\n                            <td>${item[8]}</td>\r\n                          </tr>`;\r\n        });\r\n\r\n        $(\"#detalleTabla tbody\").html(tableBody);\r\n        $(\'#modalmantenimiento\').modal(\'show\'); // Mostrar el modal de detalle\r\n    });\r\n}\r\n    </script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n            Análisis de Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Posible Inyección SQL</h5>\n            <p class=\"card-text\">\n                <b>Tipo:</b> Inyección SQL\n            </p>\n            <p class=\"card-text\">\n                <b>Línea Aproximada:</b>  El problema se encuentra en el archivo `controllers/factura.php` y afecta tanto a `op=listar` como a `op=listar_items`, aunque el código proporcionado no contiene ese archivo.\n            </p>\n            <p class=\"card-text\">\n                <b>Descripción:</b>  La vulnerabilidad surge si los parámetros `op` e `id` (especialmente `id` en `listar_items`) se utilizan directamente en consultas SQL sin sanitización o validación.  Un atacante podría manipular estos parámetros para inyectar código SQL malicioso, comprometiendo la base de datos.  Ejemplo: `controllers/factura.php?op=listar_items&id=1; DROP TABLE facturas;`\n            </p>\n            <p class=\"card-text\">\n                <b>Mitigación:</b>\n                <ul>\n                    <li><b>Sanitización de Entradas:</b>  Validar y limpiar todas las entradas de usuario antes de usarlas en consultas SQL.  Usar funciones de escape específicas de la base de datos (ej., `mysqli_real_escape_string` en PHP con MySQL).</li>\n                    <li><b>Consultas Parametrizadas (Prepared Statements):</b>  Utilizar consultas preparadas o parametrizadas.  Esto separa los datos de las consultas, previniendo que la entrada del usuario se interprete como código SQL.  Es la forma más recomendada.</li>\n                    <li><b>Principio de Privilegio Mínimo:</b> Asegurarse de que la cuenta de la base de datos utilizada por la aplicación tenga solo los privilegios necesarios para realizar sus funciones.</li>\n                </ul>\n            </p>\n            <p class=\"card-text\">\n                <b>Ejemplo de mitigación (ejemplo conceptual):</b>\n                <pre><code>\n// Ejemplo de consulta parametrizada (PDO)\n$id = $_POST[\'id\']; // Obtener el ID (¡Nunca usar directamente!)\n\n// Sanitizar el ID (ejemplo básico, ¡adapta según el tipo de dato!)\n$id = intval($id); // Asegurarse de que sea un entero\n\n$stmt = $pdo->prepare(\"SELECT * FROM productos WHERE id = ?\"); // Usa el signo de interrogación como marcador de posición\n$stmt->execute([$id]); // Pasar el ID como un parámetro\n\n$resultado = $stmt->fetchAll();\n</code></pre>\n            </p>\n            <p class=\"card-text\">\n                <b>Impacto:</b>  Pérdida o corrupción de datos, acceso no autorizado a información sensible, denegación de servicio, e incluso la posibilidad de ejecutar comandos en el servidor de la base de datos.\n            </p>\n        </div>\n    </div>\n\n    <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-white\">\n            Análisis de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Métricas Relevantes</h5>\n            <ul>\n                <li>\n                    <b>Acoplamiento:</b>  El código tiene un acoplamiento moderado debido a la dependencia de múltiples bibliotecas externas (Bootstrap, DataTables, jQuery, SweetAlert2, RemixIcon). Reducir la cantidad de dependencias externas puede mejorar la mantenibilidad. El uso excesivo de `$.post` en la función `editar` también indica un acoplamiento directo a la implementación de la API.\n                </li>\n                <li>\n                    <b>Legibilidad:</b>  En general, el código HTML es legible, gracias al uso de clases de Bootstrap.  El código JavaScript es también relativamente legible, pero la función `editar` podría beneficiarse de una mejor organización y comentarios.  Las cadenas de texto largas con interpolación dentro del template string (`tableBody += \\`<tr>...\\` `) pueden ser difíciles de leer; considera usar una función para generar cada fila de la tabla.\n                </li>\n                <li>\n                    <b>Complejidad Ciclomática:</b>  No se puede determinar con certeza sin analizar el código en `controllers/factura.php`, pero es probable que contenga lógica compleja, especialmente si no utiliza consultas parametrizadas. La función `editar` aunque corta, muestra una lógica básica de manipulación del DOM; el grado de complejidad dependerá de lo que haga `controllers/factura.php`.\n                </li>\n                <li>\n                    <b>Duplicación:</b>  No hay una duplicación evidente en el código proporcionado.\n                </li>\n                <li>\n                  <b>Errores en la consola:</b>  Se imprimen datos en la consola con `console.log(\"Detalle de productos:\", jsonResponse);` dejar instrucciones `console.log` en el codigo de producción no es una buena practica.\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n            Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Mejoras de Seguridad y Calidad</h5>\n            <ul>\n                <li>\n                    <b>Seguridad:</b>\n                    <ul>\n                        <li>Implementar consultas parametrizadas en `controllers/factura.php` para prevenir inyecciones SQL.</li>\n                        <li>Validar y sanitizar la entrada del usuario en el servidor (PHP) antes de usarla en cualquier operación.</li>\n                        <li>Aplicar el principio de mínimo privilegio a las cuentas de base de datos.</li>\n                        <li>Implementar validaciones en el lado del cliente, pero NUNCA confiar únicamente en ellas para la seguridad.  La validación del lado del servidor es fundamental.</li>\n                    </ul>\n                </li>\n                <li>\n                    <b>Calidad:</b>\n                    <ul>\n                        <li><b>Acoplamiento:</b>  Considerar el uso de una capa de abstracción de datos (ej., un ORM) para reducir el acoplamiento directo a la base de datos.</li>\n                        <li><b>Legibilidad:</b>  Refactorizar la función `editar` para mejorar la legibilidad.  Por ejemplo:\n                            <ul>\n                                <li>Crear una función separada para generar cada fila de la tabla HTML.</li>\n                                <li>Utilizar template literals de forma más concisa.</li>\n                                <li>Agregar comentarios para explicar la lógica del código.</li>\n                                <li>Eliminar logs de consola en el entorno de producción.</li>\n                            </ul>\n                        </li>\n                        <li><b>Complejidad:</b>  Analizar y simplificar la lógica en `controllers/factura.php`.  Si la lógica es compleja, considerar dividirla en funciones más pequeñas y manejables.  Usar herramientas de análisis estático para identificar áreas de alta complejidad.</li>\n                    </ul>\n                </li>\n            </ul>\n            <p><b>Ejemplo de mejora en la función `editar` (solo ejemplo):</b></p>\n            <pre><code>\nfunction construirFilaTabla(item) {\n  return `<tr>\n            <td>${item[0]}</td>\n            <td>${item[1]}</td>\n            <td>${item[2]}</td>\n            <td>${item[3]}</td>\n            <td>${item[4]}</td>\n            <td>${item[5]}</td>\n            <td>${item[6]}</td>\n            <td>${item[7]}</td>\n            <td>${item[8]}</td>\n          </tr>`;\n}\n\nfunction editar(id) {\n  $.post(\"controllers/factura.php?op=listar_items\", { id: id }, function(response) {\n    let jsonResponse = JSON.parse(response);\n    let items = jsonResponse.aaData;\n    let tableBody = items.map(construirFilaTabla).join(\'\'); // Utiliza map para generar las filas\n    $(\"#detalleTabla tbody\").html(tableBody);\n    $(\'#modalmantenimiento\').modal(\'show\');\n  });\n}\n            </code></pre>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 01:53:57', 6);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(40, 'bootstrap.min.css', 'Detectado por GPT', '@charset \"UTF-8\";/*!\r\n * Bootstrap  v5.3.0 (https://getbootstrap.com/)\r\n * Copyright 2011-2023 The Bootstrap Authors\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\r\n */:root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,\"Segoe UI\",Roboto,\"Helvetica Neue\",\"Noto Sans\",\"Liberation Sans\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, 0.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13, 110, 253, 0.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color:#adb5bd;--bs-body-color-rgb:173,181,189;--bs-body-bg:#212529;--bs-body-bg-rgb:33,37,41;--bs-emphasis-color:#fff;--bs-emphasis-color-rgb:255,255,255;--bs-secondary-color:rgba(173, 181, 189, 0.75);--bs-secondary-color-rgb:173,181,189;--bs-secondary-bg:#343a40;--bs-secondary-bg-rgb:52,58,64;--bs-tertiary-color:rgba(173, 181, 189, 0.5);--bs-tertiary-color-rgb:173,181,189;--bs-tertiary-bg:#2b3035;--bs-tertiary-bg-rgb:43,48,53;--bs-primary-text-emphasis:#6ea8fe;--bs-secondary-text-emphasis:#a7acb1;--bs-success-text-emphasis:#75b798;--bs-info-text-emphasis:#6edff6;--bs-warning-text-emphasis:#ffda6a;--bs-danger-text-emphasis:#ea868f;--bs-light-text-emphasis:#f8f9fa;--bs-dark-text-emphasis:#dee2e6;--bs-primary-bg-subtle:#031633;--bs-secondary-bg-subtle:#161719;--bs-success-bg-subtle:#051b11;--bs-info-bg-subtle:#032830;--bs-warning-bg-subtle:#332701;--bs-danger-bg-subtle:#2c0b0e;--bs-light-bg-subtle:#343a40;--bs-dark-bg-subtle:#1a1d20;--bs-primary-border-subtle:#084298;--bs-secondary-border-subtle:#41464b;--bs-success-border-subtle:#0f5132;--bs-info-border-subtle:#087990;--bs-warning-border-subtle:#997404;--bs-danger-border-subtle:#842029;--bs-light-border-subtle:#495057;--bs-dark-border-subtle:#343a40;--bs-heading-color:inherit;--bs-link-color:#6ea8fe;--bs-link-hover-color:#8bb9fe;--bs-link-color-rgb:110,168,254;--bs-link-hover-color-rgb:139,185,254;--bs-code-color:#e685b5;--bs-border-color:#495057;--bs-border-color-translucent:rgba(255, 255, 255, 0.15);--bs-form-valid-color:#75b798;--bs-form-valid-border-color:#75b798;--bs-form-invalid-color:#ea868f;--bs-form-invalid-border-color:#ea868f}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity,1));text-decoration:underline}a:hover{--bs-link-color-rgb:var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none!important}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:\"— \"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}:root{--bs-breakpoint-xs:0;--bs-breakpoint-sm:576px;--bs-breakpoint-md:768px;--bs-breakpoint-lg:992px;--bs-breakpoint-xl:1200px;--bs-breakpoint-xxl:1400px}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-color-type:initial;--bs-table-bg-type:initial;--bs-table-color-state:initial;--bs-table-bg-state:initial;--bs-table-color:var(--bs-body-color);--bs-table-bg:var(--bs-body-bg);--bs-table-border-color:var(--bs-border-color);--bs-table-accent-bg:transparent;--bs-table-striped-color:var(--bs-body-color);--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:var(--bs-body-color);--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:var(--bs-body-color);--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;color:var(--bs-table-color-state,var(--bs-table-color-type,var(--bs-table-color)));background-color:var(--bs-table-bg);border-bottom-width:var(--bs-border-width);box-shadow:inset 0 0 0 9999px var(--bs-table-bg-state,var(--bs-table-bg-type,var(--bs-table-accent-bg)))}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:calc(var(--bs-border-width) * 2) solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:var(--bs-border-width) 0}.table-bordered>:not(caption)>*>*{border-width:0 var(--bs-border-width)}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-striped-columns>:not(caption)>tr>:nth-child(2n){--bs-table-color-type:var(--bs-table-striped-color);--bs-table-bg-type:var(--bs-table-striped-bg)}.table-active{--bs-table-color-state:var(--bs-table-active-color);--bs-table-bg-state:var(--bs-table-active-bg)}.table-hover>tbody>tr:hover>*{--bs-table-color-state:var(--bs-table-hover-color);--bs-table-bg-state:var(--bs-table-hover-bg)}.table-primary{--bs-table-color:#000;--bs-table-bg:#cfe2ff;--bs-table-border-color:#bacbe6;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color:#000;--bs-table-bg:#e2e3e5;--bs-table-border-color:#cbccce;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color:#000;--bs-table-bg:#d1e7dd;--bs-table-border-color:#bcd0c7;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color:#000;--bs-table-bg:#cff4fc;--bs-table-border-color:#badce3;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color:#000;--bs-table-bg:#fff3cd;--bs-table-border-color:#e6dbb9;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color:#000;--bs-table-bg:#f8d7da;--bs-table-border-color:#dfc2c4;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color:#000;--bs-table-bg:#f8f9fa;--bs-table-border-color:#dfe0e1;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color:#fff;--bs-table-bg:#212529;--bs-table-border-color:#373b3e;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(.375rem + var(--bs-border-width));padding-bottom:calc(.375rem + var(--bs-border-width));margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + var(--bs-border-width));padding-bottom:calc(.5rem + var(--bs-border-width));font-size:1.25rem}.col-form-label-sm{padding-top:calc(.25rem + var(--bs-border-width));padding-bottom:calc(.25rem + var(--bs-border-width));font-size:.875rem}.form-text{margin-top:.25rem;font-size:.875em;color:var(--bs-secondary-color)}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-control::-webkit-date-and-time-value{min-width:85px;height:1.5em;margin:0}.form-control::-webkit-datetime-edit{display:block;padding:0}.form-control::-moz-placeholder{color:var(--bs-secondary-color);opacity:1}.form-control::placeholder{color:var(--bs-secondary-color);opacity:1}.form-control:disabled{background-color:var(--bs-secondary-bg);opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-.375rem -.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:var(--bs-body-color);background-color:var(--bs-tertiary-bg);pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--bs-border-width);border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:var(--bs-secondary-bg)}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:var(--bs-secondary-bg)}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:var(--bs-body-color);background-color:transparent;border:solid transparent;border-width:var(--bs-border-width) 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2));padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-.25rem -.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2));padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2))}textarea.form-control-sm{min-height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}textarea.form-control-lg{min-height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-control-color{width:3rem;height:calc(1.5em + .75rem + calc(var(--bs-border-width) * 2));padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color::-webkit-color-swatch{border:0!important;border-radius:var(--bs-border-radius)}.form-control-color.form-control-sm{height:calc(1.5em + .5rem + calc(var(--bs-border-width) * 2))}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + calc(var(--bs-border-width) * 2))}.form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23343a40\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\");display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:var(--bs-form-select-bg-img),var(--bs-form-select-bg-icon,none);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-select{transition:none}}.form-select:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-select[multiple],.form-select[size]:not([size=\"1\"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:var(--bs-secondary-bg)}.form-select:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--bs-body-color)}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}[data-bs-theme=dark] .form-select{--bs-form-select-bg-img:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 16 16\'%3e%3cpath fill=\'none\' stroke=\'%23adb5bd\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'m2 5 6 6 6-6\'/%3e%3c/svg%3e\")}.form-check{display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{--bs-form-check-bg:var(--bs-body-bg);width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:var(--bs-form-check-bg);background-image:var(--bs-form-check-bg-image);background-repeat:no-repeat;background-position:center;background-size:contain;border:var(--bs-border-width) solid var(--bs-border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.form-check-input:checked{background-color:#0d6efd;border-color:#0d6efd}.form-check-input:checked[type=checkbox]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'m6 10 3 3 6-6\'/%3e%3c/svg%3e\")}.form-check-input:checked[type=radio]{--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'2\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-check-input[type=checkbox]:indeterminate{background-color:#0d6efd;border-color:#0d6efd;--bs-form-check-bg-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 20 20\'%3e%3cpath fill=\'none\' stroke=\'%23fff\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'3\' d=\'M6 10h8\'/%3e%3c/svg%3e\")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%280, 0, 0, 0.25%29\'/%3e%3c/svg%3e\");width:2em;margin-left:-2.5em;background-image:var(--bs-form-switch-bg);background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%2386b7fe\'/%3e%3c/svg%3e\")}.form-switch .form-check-input:checked{background-position:right center;--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'%23fff\'/%3e%3c/svg%3e\")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.btn-check:disabled+.btn,.btn-check[disabled]+.btn{pointer-events:none;filter:none;opacity:.65}[data-bs-theme=dark] .form-switch .form-check-input:not(:checked):not(:focus){--bs-form-switch-bg:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'-4 -4 8 8\'%3e%3ccircle r=\'3\' fill=\'rgba%28255, 255, 255, 0.25%29\'/%3e%3c/svg%3e\")}.form-range{width:100%;height:1.5rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(13,110,253,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#0d6efd;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#b6d4fe}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#0d6efd;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#b6d4fe}.form-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:var(--bs-tertiary-bg);border-color:transparent;border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:var(--bs-secondary-color)}.form-range:disabled::-moz-range-thumb{background-color:var(--bs-secondary-color)}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + calc(var(--bs-border-width) * 2));min-height:calc(3.5rem + calc(var(--bs-border-width) * 2));line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;z-index:2;height:100%;padding:1rem .75rem;overflow:hidden;text-align:start;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:var(--bs-border-width) solid transparent;transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media (prefers-reduced-motion:reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control-plaintext::-moz-placeholder,.form-floating>.form-control::-moz-placeholder{color:transparent}.form-floating>.form-control-plaintext::placeholder,.form-floating>.form-control::placeholder{color:transparent}.form-floating>.form-control-plaintext:not(:-moz-placeholder-shown),.form-floating>.form-control:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown),.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control-plaintext:-webkit-autofill,.form-floating>.form-control:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label,.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-select~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control:not(:-moz-placeholder-shown)~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control-plaintext~label::after,.form-floating>.form-control:focus~label::after,.form-floating>.form-control:not(:placeholder-shown)~label::after,.form-floating>.form-select~label::after{position:absolute;inset:1rem 0.375rem;z-index:-1;height:1.5em;content:\"\";background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius)}.form-floating>.form-control:-webkit-autofill~label{color:rgba(var(--bs-body-color-rgb),.65);transform:scale(.85) translateY(-.5rem) translateX(.15rem)}.form-floating>.form-control-plaintext~label{border-width:var(--bs-border-width) 0}.form-floating>:disabled~label{color:#6c757d}.form-floating>:disabled~label::after{background-color:var(--bs-secondary-bg)}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-floating,.input-group>.form-select{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-floating:focus-within,.input-group>.form-select:focus{z-index:5}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:5}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);text-align:center;white-space:nowrap;background-color:var(--bs-tertiary-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.input-group-lg>.btn,.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;border-radius:var(--bs-border-radius-lg)}.input-group-sm>.btn,.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text{padding:.25rem .5rem;font-size:.875rem;border-radius:var(--bs-border-radius-sm)}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select,.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select,.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:calc(var(--bs-border-width) * -1);border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-valid-color)}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-success);border-radius:var(--bs-border-radius)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:var(--bs-form-valid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-valid,.was-validated .form-select:valid{border-color:var(--bs-form-valid-border-color)}.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size=\"1\"],.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 8 8\'%3e%3cpath fill=\'%23198754\' d=\'M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-valid:focus,.was-validated .form-select:valid:focus{border-color:var(--bs-form-valid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-control-color.is-valid,.was-validated .form-control-color:valid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-valid,.was-validated .form-check-input:valid{border-color:var(--bs-form-valid-border-color)}.form-check-input.is-valid:checked,.was-validated .form-check-input:valid:checked{background-color:var(--bs-form-valid-color)}.form-check-input.is-valid:focus,.was-validated .form-check-input:valid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:var(--bs-form-valid-color)}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-valid,.input-group>.form-floating:not(:focus-within).is-valid,.input-group>.form-select:not(:focus).is-valid,.was-validated .input-group>.form-control:not(:focus):valid,.was-validated .input-group>.form-floating:not(:focus-within):valid,.was-validated .input-group>.form-select:not(:focus):valid{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;color:#fff;background-color:var(--bs-danger);border-radius:var(--bs-border-radius)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:var(--bs-form-invalid-border-color);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.form-select.is-invalid,.was-validated .form-select:invalid{border-color:var(--bs-form-invalid-border-color)}.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size=\"1\"],.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size=\"1\"]{--bs-form-select-bg-icon:url(\"data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 12 12\' width=\'12\' height=\'12\' fill=\'none\' stroke=\'%23dc3545\'%3e%3ccircle cx=\'6\' cy=\'6\' r=\'4.5\'/%3e%3cpath stroke-linejoin=\'round\' d=\'M5.8 3.6h.4L6 6.5z\'/%3e%3ccircle cx=\'6\' cy=\'8.2\' r=\'.6\' fill=\'%23dc3545\' stroke=\'none\'/%3e%3c/svg%3e\");padding-right:4.125rem;background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(.75em + .375rem) calc(.75em + .375rem)}.form-select.is-invalid:focus,.was-validated .form-select:invalid:focus{border-color:var(--bs-form-invalid-border-color);box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-control-color.is-invalid,.was-validated .form-control-color:invalid{width:calc(3rem + calc(1.5em + .75rem))}.form-check-input.is-invalid,.was-validated .form-check-input:invalid{border-color:var(--bs-form-invalid-border-color)}.form-check-input.is-invalid:checked,.was-validated .form-check-input:invalid:checked{background-color:var(--bs-form-invalid-color)}.form-check-input.is-invalid:focus,.was-validated .form-check-input:invalid:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:var(--bs-form-invalid-color)}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.input-group>.form-control:not(:focus).is-invalid,.input-group>.form-floating:not(:focus-within).is-invalid,.input-group>.form-select:not(:focus).is-invalid,.was-validated .input-group>.form-control:not(:focus):invalid,.was-validated .input-group>.form-floating:not(:focus-within):invalid,.was-validated .input-group>.form-select:not(:focus):invalid{z-index:4}.btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 rgba(255, 255, 255, 0.15),0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn.active,.btn.show,.btn:first-child:active,:not(.btn-check)+.btn:active{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible,.btn:first-child:active:focus-visible,:not(.btn-check)+.btn:active:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}.btn-secondary{--bs-btn-color:#fff;--bs-btn-bg:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#5c636a;--bs-btn-hover-border-color:#565e64;--bs-btn-focus-shadow-rgb:130,138,145;--bs-btn-active-color:#fff;--bs-btn-active-bg:#565e64;--bs-btn-active-border-color:#51585e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#6c757d;--bs-btn-disabled-border-color:#6c757d}.btn-success{--bs-btn-color:#fff;--bs-btn-bg:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#157347;--bs-btn-hover-border-color:#146c43;--bs-btn-focus-shadow-rgb:60,153,110;--bs-btn-active-color:#fff;--bs-btn-active-bg:#146c43;--bs-btn-active-border-color:#13653f;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#198754;--bs-btn-disabled-border-color:#198754}.btn-info{--bs-btn-color:#000;--bs-btn-bg:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#31d2f2;--bs-btn-hover-border-color:#25cff2;--bs-btn-focus-shadow-rgb:11,172,204;--bs-btn-active-color:#000;--bs-btn-active-bg:#3dd5f3;--bs-btn-active-border-color:#25cff2;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#0dcaf0;--bs-btn-disabled-border-color:#0dcaf0}.btn-warning{--bs-btn-color:#000;--bs-btn-bg:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffca2c;--bs-btn-hover-border-color:#ffc720;--bs-btn-focus-shadow-rgb:217,164,6;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffcd39;--bs-btn-active-border-color:#ffc720;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#ffc107;--bs-btn-disabled-border-color:#ffc107}.btn-danger{--bs-btn-color:#fff;--bs-btn-bg:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#bb2d3b;--bs-btn-hover-border-color:#b02a37;--bs-btn-focus-shadow-rgb:225,83,97;--bs-btn-active-color:#fff;--bs-btn-active-bg:#b02a37;--bs-btn-active-border-color:#a52834;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#dc3545;--bs-btn-disabled-border-color:#dc3545}.btn-light{--bs-btn-color:#000;--bs-btn-bg:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#d3d4d5;--bs-btn-hover-border-color:#c6c7c8;--bs-btn-focus-shadow-rgb:211,212,213;--bs-btn-active-color:#000;--bs-btn-active-bg:#c6c7c8;--bs-btn-active-border-color:#babbbc;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#000;--bs-btn-disabled-bg:#f8f9fa;--bs-btn-disabled-border-color:#f8f9fa}.btn-dark{--bs-btn-color:#fff;--bs-btn-bg:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#424649;--bs-btn-hover-border-color:#373b3e;--bs-btn-focus-shadow-rgb:66,70,73;--bs-btn-active-color:#fff;--bs-btn-active-bg:#4d5154;--bs-btn-active-border-color:#373b3e;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#212529;--bs-btn-disabled-border-color:#212529}.btn-outline-primary{--bs-btn-color:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0d6efd;--bs-btn-hover-border-color:#0d6efd;--bs-btn-focus-shadow-rgb:13,110,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0d6efd;--bs-btn-active-border-color:#0d6efd;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0d6efd;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0d6efd;--bs-gradient:none}.btn-outline-secondary{--bs-btn-color:#6c757d;--bs-btn-border-color:#6c757d;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#6c757d;--bs-btn-hover-border-color:#6c757d;--bs-btn-focus-shadow-rgb:108,117,125;--bs-btn-active-color:#fff;--bs-btn-active-bg:#6c757d;--bs-btn-active-border-color:#6c757d;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#6c757d;--bs-gradient:none}.btn-outline-success{--bs-btn-color:#198754;--bs-btn-border-color:#198754;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#198754;--bs-btn-hover-border-color:#198754;--bs-btn-focus-shadow-rgb:25,135,84;--bs-btn-active-color:#fff;--bs-btn-active-bg:#198754;--bs-btn-active-border-color:#198754;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#198754;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#198754;--bs-gradient:none}.btn-outline-info{--bs-btn-color:#0dcaf0;--bs-btn-border-color:#0dcaf0;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#0dcaf0;--bs-btn-hover-border-color:#0dcaf0;--bs-btn-focus-shadow-rgb:13,202,240;--bs-btn-active-color:#000;--bs-btn-active-bg:#0dcaf0;--bs-btn-active-border-color:#0dcaf0;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#0dcaf0;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#0dcaf0;--bs-gradient:none}.btn-outline-warning{--bs-btn-color:#ffc107;--bs-btn-border-color:#ffc107;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#ffc107;--bs-btn-hover-border-color:#ffc107;--bs-btn-focus-shadow-rgb:255,193,7;--bs-btn-active-color:#000;--bs-btn-active-bg:#ffc107;--bs-btn-active-border-color:#ffc107;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#ffc107;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#ffc107;--bs-gradient:none}.btn-outline-danger{--bs-btn-color:#dc3545;--bs-btn-border-color:#dc3545;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#dc3545;--bs-btn-hover-border-color:#dc3545;--bs-btn-focus-shadow-rgb:220,53,69;--bs-btn-active-color:#fff;--bs-btn-active-bg:#dc3545;--bs-btn-active-border-color:#dc3545;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#dc3545;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#dc3545;--bs-gradient:none}.btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}.btn-outline-dark{--bs-btn-color:#212529;--bs-btn-border-color:#212529;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#212529;--bs-btn-hover-border-color:#212529;--bs-btn-focus-shadow-rgb:33,37,41;--bs-btn-active-color:#fff;--bs-btn-active-bg:#212529;--bs-btn-active-border-color:#212529;--bs-btn-active-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color:#212529;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#212529;--bs-gradient:none}.btn-link{--bs-btn-font-weight:400;--bs-btn-color:var(--bs-link-color);--bs-btn-bg:transparent;--bs-btn-border-color:transparent;--bs-btn-hover-color:var(--bs-link-hover-color);--bs-btn-hover-border-color:transparent;--bs-btn-active-color:var(--bs-link-hover-color);--bs-btn-active-border-color:transparent;--bs-btn-disabled-color:#6c757d;--bs-btn-disabled-border-color:transparent;--bs-btn-box-shadow:0 0 0 #000;--bs-btn-focus-shadow-rgb:49,132,253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-group-lg>.btn,.btn-lg{--bs-btn-padding-y:0.5rem;--bs-btn-padding-x:1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius:var(--bs-border-radius-lg)}.btn-group-sm>.btn,.btn-sm{--bs-btn-padding-y:0.25rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius:var(--bs-border-radius-sm)}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media (prefers-reduced-motion:reduce){.collapsing.collapse-horizontal{transition:none}}.dropdown,.dropdown-center,.dropend,.dropstart,.dropup,.dropup-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-zindex:1000;--bs-dropdown-min-width:10rem;--bs-dropdown-padding-x:0;--bs-dropdown-padding-y:0.5rem;--bs-dropdown-spacer:0.125rem;--bs-dropdown-font-size:1rem;--bs-dropdown-color:var(--bs-body-color);--bs-dropdown-bg:var(--bs-body-bg);--bs-dropdown-border-color:var(--bs-border-color-translucent);--bs-dropdown-border-radius:var(--bs-border-radius);--bs-dropdown-border-width:var(--bs-border-width);--bs-dropdown-inner-border-radius:calc(var(--bs-border-radius) - va', '```html\n<div class=\"card\">\n  <div class=\"card-header bg-danger text-white\">\n    Vulnerabilidades de Seguridad Encontradas\n  </div>\n  <div class=\"card-body\">\n  No se encontraron vulnerabilidades de seguridad en este código, ya que se trata principalmente de un archivo CSS que define estilos para la biblioteca Bootstrap. Los archivos CSS generalmente no contienen código ejecutable que pueda ser explotado para ejecutar código malicioso o acceder a información sensible. Sin embargo, es importante tener en cuenta que si este archivo CSS fuera dinámicamente generado o modificado por un script del lado del servidor que no escapa correctamente las entradas del usuario, podría existir una vulnerabilidad de inyección CSS.\n  </div>\n</div>\n\n<div class=\"card\">\n  <div class=\"card-header bg-warning\">\n    Métricas de Calidad del Código\n  </div>\n  <div class=\"card-body\">\n    <h5 class=\"card-title\">Complejidad</h5>\n    <p class=\"card-text\">La complejidad ciclomática no es directamente aplicable a CSS. Sin embargo, la complejidad general del archivo es alta debido a la gran cantidad de selectores y reglas. Esto puede dificultar el mantenimiento y la comprensión del código.</p>\n\n    <h5 class=\"card-title\">Duplicación</h5>\n    <p class=\"card-text\">Es probable que haya cierta duplicación en las definiciones de variables y reglas, especialmente en los breakpoints. Herramientas de análisis de código CSS podrían ayudar a identificar y eliminar duplicados.</p>\n\n    <h5 class=\"card-title\">Legibilidad</h5>\n    <p class=\"card-text\">El código es minificado, lo que lo hace difícil de leer y mantener directamente. Se recomienda trabajar con la versión no minificada y usar un preprocesador CSS (como Sass o Less) para mejorar la organización y legibilidad.</p>\n\n    <h5 class=\"card-title\">Acoplamiento</h5>\n    <p class=\"card-text\">El acoplamiento es alto, ya que este archivo CSS contiene estilos para todos los componentes de Bootstrap. Un enfoque más modular podría reducir el acoplamiento y mejorar la reutilización de estilos.</p>\n  </div>\n</div>\n\n<div class=\'card border-success\'>\n  <div class=\'card-header bg-success text-white\'>\n    Solución Propuesta\n  </div>\n  <div class=\'card-body\'>\n    <h5 class=\'card-title\'>Mitigación de la Vulnerabilidad de Inyección CSS (si aplica)</h5>\n    <p class=\'card-text\'>\n        Si el archivo CSS es generado dinámicamente, se deben escapar todas las entradas de usuario antes de incluirlas en el archivo CSS. Esto puede hacerse utilizando funciones de escape específicas del lenguaje del lado del servidor utilizado.\n    </p>\n    <h5 class=\'card-title\'>Mejoras en las Métricas de Calidad del Código</h5>\n    <ul>\n      <li><b>Usar un Preprocesador CSS (Sass/Less):</b> Permite usar variables, mixins, funciones y otras características para organizar y reutilizar el código CSS, reduciendo la duplicación y mejorando la legibilidad.</li>\n      <li><b>Modularización:</b> Dividir el CSS en módulos más pequeños y enfocados en componentes específicos. Esto reduce el acoplamiento y facilita el mantenimiento.</li>\n      <li><b>Automatización de Tareas (Gulp/Webpack):</b> Utilizar herramientas de automatización para minificar el CSS antes de la publicación, optimizando el tamaño del archivo y mejorando el rendimiento.</li>\n      <li><b>Linting CSS:</b> Usar un linter CSS para aplicar reglas de estilo consistentes y detectar posibles errores.</li>\n    </ul>\n  </div>\n</div>\n```', '2025-05-20 02:02:30', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(41, 'dataTables.bootstrap5.min.css', 'Detectado por GPT', ':root{--dt-row-selected: 13, 110, 253;--dt-row-selected-text: 255, 255, 255;--dt-row-selected-link: 9, 10, 11}table.dataTable td.dt-control{text-align:center;cursor:pointer}table.dataTable td.dt-control:before{height:1em;width:1em;margin-top:-9px;display:inline-block;color:white;border:.15em solid white;border-radius:1em;box-shadow:0 0 .2em #444;box-sizing:content-box;text-align:center;text-indent:0 !important;font-family:\"Courier New\",Courier,monospace;line-height:1em;content:\"+\";background-color:#31b131}table.dataTable tr.dt-hasChild td.dt-control:before{content:\"-\";background-color:#d33333}table.dataTable thead>tr>th.sorting,table.dataTable thead>tr>th.sorting_asc,table.dataTable thead>tr>th.sorting_desc,table.dataTable thead>tr>th.sorting_asc_disabled,table.dataTable thead>tr>th.sorting_desc_disabled,table.dataTable thead>tr>td.sorting,table.dataTable thead>tr>td.sorting_asc,table.dataTable thead>tr>td.sorting_desc,table.dataTable thead>tr>td.sorting_asc_disabled,table.dataTable thead>tr>td.sorting_desc_disabled{cursor:pointer;position:relative;padding-right:26px}table.dataTable thead>tr>th.sorting:before,table.dataTable thead>tr>th.sorting:after,table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_asc:after,table.dataTable thead>tr>th.sorting_desc:before,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>th.sorting_asc_disabled:after,table.dataTable thead>tr>th.sorting_desc_disabled:before,table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting:before,table.dataTable thead>tr>td.sorting:after,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_asc:after,table.dataTable thead>tr>td.sorting_desc:before,table.dataTable thead>tr>td.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_asc_disabled:after,table.dataTable thead>tr>td.sorting_desc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:after{position:absolute;display:block;opacity:.125;right:10px;line-height:9px;font-size:.8em}table.dataTable thead>tr>th.sorting:before,table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_desc:before,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>th.sorting_desc_disabled:before,table.dataTable thead>tr>td.sorting:before,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_desc:before,table.dataTable thead>tr>td.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:before{bottom:50%;content:\"▲\";content:\"▲\"/\"\"}table.dataTable thead>tr>th.sorting:after,table.dataTable thead>tr>th.sorting_asc:after,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>th.sorting_asc_disabled:after,table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting:after,table.dataTable thead>tr>td.sorting_asc:after,table.dataTable thead>tr>td.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc_disabled:after,table.dataTable thead>tr>td.sorting_desc_disabled:after{top:50%;content:\"▼\";content:\"▼\"/\"\"}table.dataTable thead>tr>th.sorting_asc:before,table.dataTable thead>tr>th.sorting_desc:after,table.dataTable thead>tr>td.sorting_asc:before,table.dataTable thead>tr>td.sorting_desc:after{opacity:.6}table.dataTable thead>tr>th.sorting_desc_disabled:after,table.dataTable thead>tr>th.sorting_asc_disabled:before,table.dataTable thead>tr>td.sorting_desc_disabled:after,table.dataTable thead>tr>td.sorting_asc_disabled:before{display:none}table.dataTable thead>tr>th:active,table.dataTable thead>tr>td:active{outline:none}div.dataTables_scrollBody>table.dataTable>thead>tr>th:before,div.dataTables_scrollBody>table.dataTable>thead>tr>th:after,div.dataTables_scrollBody>table.dataTable>thead>tr>td:before,div.dataTables_scrollBody>table.dataTable>thead>tr>td:after{display:none}div.dataTables_processing{position:absolute;top:50%;left:50%;width:200px;margin-left:-100px;margin-top:-26px;text-align:center;padding:2px}div.dataTables_processing>div:last-child{position:relative;width:80px;height:15px;margin:1em auto}div.dataTables_processing>div:last-child>div{position:absolute;top:0;width:13px;height:13px;border-radius:50%;background:rgb(13, 110, 253);background:rgb(var(--dt-row-selected));animation-timing-function:cubic-bezier(0, 1, 1, 0)}div.dataTables_processing>div:last-child>div:nth-child(1){left:8px;animation:datatables-loader-1 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(2){left:8px;animation:datatables-loader-2 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(3){left:32px;animation:datatables-loader-2 .6s infinite}div.dataTables_processing>div:last-child>div:nth-child(4){left:56px;animation:datatables-loader-3 .6s infinite}@keyframes datatables-loader-1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes datatables-loader-3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes datatables-loader-2{0%{transform:translate(0, 0)}100%{transform:translate(24px, 0)}}table.dataTable.nowrap th,table.dataTable.nowrap td{white-space:nowrap}table.dataTable th.dt-left,table.dataTable td.dt-left{text-align:left}table.dataTable th.dt-center,table.dataTable td.dt-center,table.dataTable td.dataTables_empty{text-align:center}table.dataTable th.dt-right,table.dataTable td.dt-right{text-align:right}table.dataTable th.dt-justify,table.dataTable td.dt-justify{text-align:justify}table.dataTable th.dt-nowrap,table.dataTable td.dt-nowrap{white-space:nowrap}table.dataTable thead th,table.dataTable thead td,table.dataTable tfoot th,table.dataTable tfoot td{text-align:left}table.dataTable thead th.dt-head-left,table.dataTable thead td.dt-head-left,table.dataTable tfoot th.dt-head-left,table.dataTable tfoot td.dt-head-left{text-align:left}table.dataTable thead th.dt-head-center,table.dataTable thead td.dt-head-center,table.dataTable tfoot th.dt-head-center,table.dataTable tfoot td.dt-head-center{text-align:center}table.dataTable thead th.dt-head-right,table.dataTable thead td.dt-head-right,table.dataTable tfoot th.dt-head-right,table.dataTable tfoot td.dt-head-right{text-align:right}table.dataTable thead th.dt-head-justify,table.dataTable thead td.dt-head-justify,table.dataTable tfoot th.dt-head-justify,table.dataTable tfoot td.dt-head-justify{text-align:justify}table.dataTable thead th.dt-head-nowrap,table.dataTable thead td.dt-head-nowrap,table.dataTable tfoot th.dt-head-nowrap,table.dataTable tfoot td.dt-head-nowrap{white-space:nowrap}table.dataTable tbody th.dt-body-left,table.dataTable tbody td.dt-body-left{text-align:left}table.dataTable tbody th.dt-body-center,table.dataTable tbody td.dt-body-center{text-align:center}table.dataTable tbody th.dt-body-right,table.dataTable tbody td.dt-body-right{text-align:right}table.dataTable tbody th.dt-body-justify,table.dataTable tbody td.dt-body-justify{text-align:justify}table.dataTable tbody th.dt-body-nowrap,table.dataTable tbody td.dt-body-nowrap{white-space:nowrap}/*! Bootstrap 5 integration for DataTables\r\n *\r\n * ©2020 SpryMedia Ltd, all rights reserved.\r\n * License: MIT datatables.net/license/mit\r\n */table.dataTable{clear:both;margin-top:6px !important;margin-bottom:6px !important;max-width:none !important;border-collapse:separate !important;border-spacing:0}table.dataTable td,table.dataTable th{-webkit-box-sizing:content-box;box-sizing:content-box}table.dataTable td.dataTables_empty,table.dataTable th.dataTables_empty{text-align:center}table.dataTable.nowrap th,table.dataTable.nowrap td{white-space:nowrap}table.dataTable.table-striped>tbody>tr:nth-of-type(2n+1)>*{box-shadow:none}table.dataTable>tbody>tr{background-color:transparent}table.dataTable>tbody>tr.selected>*{box-shadow:inset 0 0 0 9999px rgb(13, 110, 253);box-shadow:inset 0 0 0 9999px rgb(var(--dt-row-selected));color:rgb(255, 255, 255);color:rgb(var(--dt-row-selected-text))}table.dataTable>tbody>tr.selected a{color:rgb(9, 10, 11);color:rgb(var(--dt-row-selected-link))}table.dataTable.table-striped>tbody>tr.odd>*{box-shadow:inset 0 0 0 9999px rgba(0, 0, 0, 0.05)}table.dataTable.table-striped>tbody>tr.odd.selected>*{box-shadow:inset 0 0 0 9999px rgba(13, 110, 253, 0.95);box-shadow:inset 0 0 0 9999px rgba(var(--dt-row-selected), 0.95)}table.dataTable.table-hover>tbody>tr:hover>*{box-shadow:inset 0 0 0 9999px rgba(0, 0, 0, 0.075)}table.dataTable.table-hover>tbody>tr.selected:hover>*{box-shadow:inset 0 0 0 9999px rgba(13, 110, 253, 0.975);box-shadow:inset 0 0 0 9999px rgba(var(--dt-row-selected), 0.975)}div.dataTables_wrapper div.dataTables_length label{font-weight:normal;text-align:left;white-space:nowrap}div.dataTables_wrapper div.dataTables_length select{width:auto;display:inline-block}div.dataTables_wrapper div.dataTables_filter{text-align:right}div.dataTables_wrapper div.dataTables_filter label{font-weight:normal;white-space:nowrap;text-align:left}div.dataTables_wrapper div.dataTables_filter input{margin-left:.5em;display:inline-block;width:auto}div.dataTables_wrapper div.dataTables_info{padding-top:.85em}div.dataTables_wrapper div.dataTables_paginate{margin:0;white-space:nowrap;text-align:right}div.dataTables_wrapper div.dataTables_paginate ul.pagination{margin:2px 0;white-space:nowrap;justify-content:flex-end}div.dataTables_wrapper div.dt-row{position:relative}div.dataTables_scrollHead table.dataTable{margin-bottom:0 !important}div.dataTables_scrollBody>table{border-top:none;margin-top:0 !important;margin-bottom:0 !important}div.dataTables_scrollBody>table>thead .sorting:before,div.dataTables_scrollBody>table>thead .sorting_asc:before,div.dataTables_scrollBody>table>thead .sorting_desc:before,div.dataTables_scrollBody>table>thead .sorting:after,div.dataTables_scrollBody>table>thead .sorting_asc:after,div.dataTables_scrollBody>table>thead .sorting_desc:after{display:none}div.dataTables_scrollBody>table>tbody tr:first-child th,div.dataTables_scrollBody>table>tbody tr:first-child td{border-top:none}div.dataTables_scrollFoot>.dataTables_scrollFootInner{box-sizing:content-box}div.dataTables_scrollFoot>.dataTables_scrollFootInner>table{margin-top:0 !important;border-top:none}@media screen and (max-width: 767px){div.dataTables_wrapper div.dataTables_length,div.dataTables_wrapper div.dataTables_filter,div.dataTables_wrapper div.dataTables_info,div.dataTables_wrapper div.dataTables_paginate{text-align:center}div.dataTables_wrapper div.dataTables_paginate ul.pagination{justify-content:center !important}}table.dataTable.table-sm>thead>tr>th:not(.sorting_disabled){padding-right:20px}table.table-bordered.dataTable{border-right-width:0}table.table-bordered.dataTable thead tr:first-child th,table.table-bordered.dataTable thead tr:first-child td{border-top-width:1px}table.table-bordered.dataTable th,table.table-bordered.dataTable td{border-left-width:0}table.table-bordered.dataTable th:first-child,table.table-bordered.dataTable th:first-child,table.table-bordered.dataTable td:first-child,table.table-bordered.dataTable td:first-child{border-left-width:1px}table.table-bordered.dataTable th:last-child,table.table-bordered.dataTable th:last-child,table.table-bordered.dataTable td:last-child,table.table-bordered.dataTable td:last-child{border-right-width:1px}table.table-bordered.dataTable th,table.table-bordered.dataTable td{border-bottom-width:1px}div.dataTables_scrollHead table.table-bordered{border-bottom-width:0}div.table-responsive>div.dataTables_wrapper>div.row{margin:0}div.table-responsive>div.dataTables_wrapper>div.row>div[class^=col-]:first-child{padding-left:0}div.table-responsive>div.dataTables_wrapper>div.row>div[class^=col-]:last-child{padding-right:0}', '```html\n<div class=\"container\">\n    <div class=\"card\">\n        <div class=\"card-header\">\n            Análisis de Seguridad y Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Resumen</h5>\n            <p class=\"card-text\">El código proporcionado es CSS y, por lo tanto, no es susceptible a las vulnerabilidades de seguridad típicas asociadas con lenguajes de programación como inyección SQL, XSS o desbordamiento de búfer.  Sin embargo, la calidad del código puede mejorarse en términos de legibilidad y mantenibilidad.</p>\n        </div>\n    </div>\n\n    <div class=\"card\">\n        <div class=\"card-header\">\n            Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Ausencia de Vulnerabilidades Directas</h5>\n            <p class=\"card-text\">Dado que este es CSS, no existen vulnerabilidades de seguridad inherentes en el código en sí.  Las vulnerabilidades asociadas a CSS suelen estar relacionadas con cómo se integra con el HTML y JavaScript, pero esas consideraciones están fuera del alcance de este fragmento de código aislado.</p>\n        </div>\n    </div>\n\n    <div class=\"card\">\n        <div class=\"card-header\">\n            Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Análisis de Métricas</h5>\n            <ul>\n                <li>\n                    <strong>Complejidad:</strong> Alta.  Las repeticiones de selectores, especialmente para estados de ordenación, aumentan la complejidad y dificultan el mantenimiento.\n                </li>\n                <li>\n                    <strong>Duplicación:</strong> Alta. Hay una gran cantidad de código duplicado, especialmente en las reglas para diferentes estados de ordenación (sorting, sorting_asc, sorting_desc, etc.) y para `th` y `td` elementos.\n                </li>\n                <li>\n                    <strong>Legibilidad:</strong> Baja. La longitud de las reglas CSS y la repetición de selectores dificultan la lectura y comprensión del código.  El uso de variables CSS mejora un poco la situación, pero no elimina el problema de la duplicación.\n                </li>\n                <li>\n                    <strong>Acoplamiento:</strong> Moderado. El código está fuertemente acoplado a la estructura HTML específica de DataTables. Los cambios en la estructura HTML requerirán modificaciones significativas en el CSS.\n                </li>\n            </ul>\n            <p class=\"card-text\">La principal mejora que se debe realizar es reducir la duplicación del código. Esto mejorará la legibilidad y la mantenibilidad, reduciendo el riesgo de errores y facilitando las actualizaciones.</p>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\"card-header\">\n            Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Refactorización CSS</h5>\n            <p class=\"card-text\">La refactorización se centra en reducir la duplicación y mejorar la legibilidad.</p>\n\n            <ol>\n                <li>\n                    <strong>Agrupación de Selectores:</strong> Combinar selectores con propiedades comunes. Por ejemplo, en lugar de repetir las propiedades `position`, `display`, `opacity`, `right`, `line-height` y `font-size` para cada estado de ordenación, usar un selector agrupado.\n                </li>\n                <li>\n                    <strong>Uso de Mixins (si es posible preprocesador CSS):</strong> Si se utiliza un preprocesador CSS como Sass o Less, se pueden crear mixins para encapsular los estilos comunes.\n                </li>\n                <li>\n                    <strong>Clases Base y Modificadores:</strong>  Utilizar una clase base para estilos generales de la tabla DataTables y clases modificadoras para estados específicos (por ejemplo, `.dt-sortable` para estilos de ordenación comunes y `.dt-sortable--asc` o `.dt-sortable--desc` para estilos específicos de orden ascendente/descendente).\n                </li>\n                <li>\n                  <strong>Variables CSS:</strong> Seguir utilizando variables CSS para colores y otros valores reutilizables.\n                </li>\n            </ol>\n\n            <p class=\"card-text\">\n              <strong>Ejemplo de Refactorización (Simplificado):</strong>\n            </p>\n            <pre>\n            <code>\n/* Variables */\n:root {\n  --dt-row-selected: 13, 110, 253;\n  --dt-row-selected-text: 255, 255, 255;\n  --dt-row-selected-link: 9, 10, 11;\n  --sorting-arrow-opacity: .125; /* Opacidad para las flechas de ordenación */\n  --sorting-arrow-size: .8em;      /* Tamaño de las flechas de ordenación */\n  --sorting-arrow-right-margin: 10px; /* Márgen derecho para las flechas de ordenación */\n}\n\n/* Estilos generales para celdas de control */\ntable.dataTable td.dt-control {\n  text-align: center;\n  cursor: pointer;\n}\n\n/* Estilos para el botón de expansión/contracción */\ntable.dataTable td.dt-control:before {\n  /* ... (estilos existentes) ... */\n}\n\n/* Estilos para filas con hijos */\ntable.dataTable tr.dt-hasChild td.dt-control:before {\n  /* ... (estilos existentes) ... */\n}\n\n/* Estilos comunes para elementos ordenables (th y td) */\ntable.dataTable thead>tr>th.sorting,\ntable.dataTable thead>tr>th.sorting_asc,\ntable.dataTable thead>tr>th.sorting_desc,\ntable.dataTable thead>tr>th.sorting_asc_disabled,\ntable.dataTable thead>tr>th.sorting_desc_disabled,\ntable.dataTable thead>tr>td.sorting,\ntable.dataTable thead>tr>td.sorting_asc,\ntable.dataTable thead>tr>td.sorting_desc,\ntable.dataTable thead>tr>td.sorting_asc_disabled,\ntable.dataTable thead>tr>td.sorting_desc_disabled {\n  cursor: pointer;\n  position: relative;\n  padding-right: 26px;\n}\n\n/* Estilos comunes para flechas de ordenación */\ntable.dataTable thead>tr>th.sorting:before,\ntable.dataTable thead>tr>th.sorting:after,\ntable.dataTable thead>tr>th.sorting_asc:before,\ntable.dataTable thead>tr>th.sorting_asc:after,\ntable.dataTable thead>tr>th.sorting_desc:before,\ntable.dataTable thead>tr>th.sorting_desc:after,\ntable.dataTable thead>tr>th.sorting_asc_disabled:before,\ntable.dataTable thead>tr>th.sorting_asc_disabled:after,\ntable.dataTable thead>tr>th.sorting_desc_disabled:before,\ntable.dataTable thead>tr>th.sorting_desc_disabled:after,\ntable.dataTable thead>tr>td.sorting:before,\ntable.dataTable thead>tr>td.sorting:after,\ntable.dataTable thead>tr>td.sorting_asc:before,\ntable.dataTable thead>tr>td.sorting_asc:after,\ntable.dataTable thead>tr>td.sorting_desc:before,\ntable.dataTable thead>tr>td.sorting_desc:after,\ntable.dataTable thead>tr>td.sorting_asc_disabled:before,\ntable.dataTable thead>tr>td.sorting_asc_disabled:after,\ntable.dataTable thead>tr>td.sorting_desc_disabled:before,\ntable.dataTable thead>tr>td.sorting_desc_disabled:after {\n  position: absolute;\n  display: block;\n  right: var(--sorting-arrow-right-margin);\n  line-height: 9px;\n  font-size: var(--sorting-arrow-size);\n}\n\n/* Flecha ascendente (por defecto) */\ntable.dataTable thead>tr>th.sorting:before,\ntable.dataTable thead>tr>th.sorting_asc:before,\ntable.dataTable thead>tr>td.sorting:before,\ntable.dataTable thead>tr>td.sorting_asc:before{\n  bottom: 50%;\n  content: \"▲\";\n  opacity: var(--sorting-arrow-opacity);\n}\n\n/* Flecha descendente (por defecto) */\ntable.dataTable thead>tr>th.sorting:after,\ntable.dataTable thead>tr>th.sorting_desc:after,\ntable.dataTable thead>tr>td.sorting:after,\ntable.dataTable thead>tr>td.sorting_desc:after {\n  top: 50%;\n  content: \"▼\";\n  opacity: var(--sorting-arrow-opacity);\n}\n\n/* Estilos para flechas activas (ascendente) */\ntable.dataTable thead>tr>th.sorting_asc:before,\ntable.dataTable thead>tr>td.sorting_asc:before {\n  opacity: .6;\n}\n\n/* Estilos para flechas activas (descendente) */\ntable.dataTable thead>tr>th.sorting_desc:after,\ntable.dataTable thead>tr>td.sorting_desc:after {\n  opacity: .6;\n}\n\n/* Ocultar flechas deshabilitadas */\ntable.dataTable thead>tr>th.sorting_desc_disabled:after,\ntable.dataTable thead>tr>th.sorting_asc_disabled:before,\ntable.dataTable thead>tr>td.sorting_desc_disabled:after,\ntable.dataTable thead>tr>td.sorting_asc_disabled:before {\n  display: none;\n}\n            </code>\n            </pre>\n            <p class=\"card-text\">Este ejemplo reduce significativamente la duplicación al agrupar selectores con estilos comunes y al definir estilos separados para los diferentes estados de la ordenación. Se incluyen comentarios para mejor comprensión del código.</p>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:07:53', 7),
(42, 'dataTables.bootstrap5.min.js', 'Detectado por GPT', '/*! DataTables Bootstrap 5 integration\r\n * 2020 SpryMedia Ltd - datatables.net/license\r\n */\r\n!function(t){var n,r;\"function\"==typeof define&&define.amd?define([\"jquery\",\"datatables.net\"],function(e){return t(e,window,document)}):\"object\"==typeof exports?(n=require(\"jquery\"),r=function(e,a){a.fn.dataTable||require(\"datatables.net\")(e,a)},\"undefined\"!=typeof window?module.exports=function(e,a){return e=e||window,a=a||n(e),r(e,a),t(a,0,e.document)}:(r(window,n),module.exports=t(n,window,window.document))):t(jQuery,window,document)}(function(x,e,r,i){\"use strict\";var o=x.fn.dataTable;return x.extend(!0,o.defaults,{dom:\"<\'row\'<\'col-sm-12 col-md-6\'l><\'col-sm-12 col-md-6\'f>><\'row dt-row\'<\'col-sm-12\'tr>><\'row\'<\'col-sm-12 col-md-5\'i><\'col-sm-12 col-md-7\'p>>\",renderer:\"bootstrap\"}),x.extend(o.ext.classes,{sWrapper:\"dataTables_wrapper dt-bootstrap5\",sFilterInput:\"form-control form-control-sm\",sLengthSelect:\"form-select form-select-sm\",sProcessing:\"dataTables_processing card\",sPageButton:\"paginate_button page-item\"}),o.ext.renderer.pageButton.bootstrap=function(d,e,s,a,l,c){function u(e,a){for(var t,n,r=function(e){e.preventDefault(),x(e.currentTarget).hasClass(\"disabled\")||b.page()==e.data.action||b.page(e.data.action).draw(\"page\")},i=0,o=a.length;i<o;i++)if(t=a[i],Array.isArray(t))u(e,t);else{switch(f=p=\"\",t){case\"ellipsis\":p=\"&#x2026;\",f=\"disabled\";break;case\"first\":p=g.sFirst,f=t+(0<l?\"\":\" disabled\");break;case\"previous\":p=g.sPrevious,f=t+(0<l?\"\":\" disabled\");break;case\"next\":p=g.sNext,f=t+(l<c-1?\"\":\" disabled\");break;case\"last\":p=g.sLast,f=t+(l<c-1?\"\":\" disabled\");break;default:p=t+1,f=l===t?\"active\":\"\"}p&&(n=-1!==f.indexOf(\"disabled\"),n=x(\"<li>\",{class:m.sPageButton+\" \"+f,id:0===s&&\"string\"==typeof t?d.sTableId+\"_\"+t:null}).append(x(\"<a>\",{href:n?null:\"#\",\"aria-controls\":d.sTableId,\"aria-disabled\":n?\"true\":null,\"aria-label\":w[t],\"aria-role\":\"link\",\"aria-current\":\"active\"===f?\"page\":null,\"data-dt-idx\":t,tabindex:d.iTabIndex,class:\"page-link\"}).html(p)).appendTo(e),d.oApi._fnBindAction(n,{action:t},r))}}var p,f,t,b=new o.Api(d),m=d.oClasses,g=d.oLanguage.oPaginate,w=d.oLanguage.oAria.paginate||{},e=x(e);try{t=e.find(r.activeElement).data(\"dt-idx\")}catch(e){}var n=e.children(\"ul.pagination\");n.length?n.empty():n=e.html(\"<ul/>\").children(\"ul\").addClass(\"pagination\"),u(n,a),t!==i&&e.find(\"[data-dt-idx=\"+t+\"]\").trigger(\"focus\")},o});', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Identificación de Vulnerabilidades\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Posible XSS en la manipulación de DOM</h5>\n          <p class=\'card-text\'>\n            <b>Línea aproximada:</b> 68: `n=e.html(\"<ul/>\").children(\"ul\").addClass(\"pagination\")`\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> La función `html()` de jQuery, cuando se usa con contenido proporcionado externamente (aunque aquí parece ser un string constante, es una potencial area a explotar si se modificase), puede ser susceptible a Cross-Site Scripting (XSS) si el contenido HTML inyectado contiene código JavaScript malicioso.  Si el valor de `<ul/>` llegase a ser dinámico, un atacante podría inyectar scripts maliciosos.  Aunque en el estado actual no hay riesgo, es importante prevenir este tipo de vulnerabilidades en el futuro.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            Aunque en este caso el contenido parece ser estático, se recomienda utilizar métodos más seguros de manipulación del DOM, como la creación de elementos utilizando `document.createElement()` y la configuración de sus propiedades con `setAttribute()` o `.textContent`.  También se podría considerar sanitizar la entrada si esta fuese dinámicamente generada.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de Métricas:</b> No aplica directamente a métricas de calidad del código en este caso, pero la adopción de prácticas más seguras de manipulación del DOM mejora la mantenibilidad y la seguridad.\n          </p>\n\n           <h5 class=\'card-title\'>getAttribute potencial a XSS</h5>\n          <p class=\'card-text\'>\n            <b>Línea aproximada:</b> 57: `n=x(\"<li>\",{class:m.sPageButton+\" \"+f,id:0===s&&\"string\"==typeof t?d.sTableId+\"_\"+t:null}).append(x(\"<a>\",{href:n?null:\"#\",\"aria-controls\":d.sTableId,\"aria-disabled\":n?\"true\":null,\"aria-label\":w[t],\"aria-role\":\"link\",\"aria-current\":\"active\"===f?\"page\":null,\"data-dt-idx\":t,tabindex:d.iTabIndex,class:\"page-link\"}).html(p)).appendTo(e),d.oApi._fnBindAction(n,{action:t},r))`\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> En la construcción de elementos HTML, existe la posibilidad de XSS si las variables `d.sTableId`, `w[t]`, o `p` (dentro de `.html(p)`) contienen código malicioso.  Esto es especialmente cierto si estas variables provienen de fuentes no confiables (por ejemplo, entrada del usuario). La concatenación de strings para formar atributos HTML puede llevar a la inyección de HTML/JavaScript.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            *   Sanitizar las variables `d.sTableId`, `w[t]`, y `p` antes de usarlas en la construcción de elementos HTML.  Utilizar una librería de sanitización o escapar los caracteres especiales HTML.\n            *   Usar `.text()` en lugar de `.html()` para insertar contenido de texto, de esta forma se evita la interpretación de HTML en `p`.\n            *   Validar y escapar cualquier dato que se use para construir el ID.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de Métricas:</b> Reducir el acoplamiento al evitar concatenar strings para formar atributos HTML complejos. Utilizar funciones o métodos que construyan los atributos de manera más segura y legible.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card\'>\n        <div class=\'card-header bg-warning text-dark\'>\n          Análisis de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Complejidad Ciclomática</h5>\n          <p class=\'card-text\'>\n            La función `o.ext.renderer.pageButton.bootstrap` (línea 35) parece tener una complejidad ciclomática relativamente alta debido a la anidación de condicionales (`if`, `switch`) y bucles (`for`).  Esto puede dificultar la comprensión y el mantenimiento del código.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Descomponer la función en funciones más pequeñas y específicas.  Considerar el uso de patrones de diseño como \"Strategy\" o \"Command\" para reducir la complejidad de la lógica de paginación.\n          </p>\n\n          <h5 class=\'card-title\'>Legibilidad</h5>\n          <p class=\'card-text\'>\n            El código es relativamente legible, pero algunas partes, como la construcción de elementos HTML en la línea 57, podrían ser más claras. El uso extensivo de abreviaturas (ej. `d`, `e`, `s`, `a`, `l`, `c`, `u`, `p`, `f`, `t`, `b`, `m`, `g`, `w`) dificulta la comprensión rápida del código.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Utilizar nombres de variables más descriptivos.  Separar la construcción de elementos HTML en pasos más pequeños y comprensibles.  Agregar comentarios para explicar la lógica compleja.\n          </p>\n\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            El código está acoplado a jQuery y DataTables.  Esto es inherente a la naturaleza del plugin, pero se podría reducir el acoplamiento al encapsular la lógica específica de jQuery y DataTables en funciones o módulos separados.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Definir interfaces claras para la interacción con jQuery y DataTables.  Esto facilitaría la sustitución de estas bibliotecas en el futuro.\n          </p>\n\n          <h5 class=\'card-title\'>Duplicación</h5>\n          <p class=\'card-text\'>\n            No se observa una duplicación significativa de código. Sin embargo, la lógica dentro del `switch` (líneas 43-50) podría beneficiarse de una refactorización si se repite en otras partes del código.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b> Extraer la lógica común en funciones reutilizables.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Refactorización con foco en seguridad y legibilidad</h5>\n          <p class=\'card-text\'>\n            El siguiente fragmento ilustra una posible refactorización de la línea 57 (y la lógica circundante) para mejorar la seguridad y la legibilidad.  Se enfoca en el uso de métodos seguros de manipulación del DOM y en la claridad del código.\n          </p>\n          <pre><code class=\'language-javascript\'>\nfunction createPageButton(d, t, p, f, l, r, m, g, w, b, e) {\n  const isDisabled = f.includes(\"disabled\");\n  const li = document.createElement(\'li\');\n  li.className = m.sPageButton + \" \" + f;\n  li.id = (0 === s && \"string\" === typeof t) ? d.sTableId + \"_\" + t : null;\n\n  const a = document.createElement(\'a\');\n  a.href = isDisabled ? null : \"#\";\n  a.setAttribute(\"aria-controls\", d.sTableId);\n  a.setAttribute(\"aria-disabled\", isDisabled ? \"true\" : null);\n  a.setAttribute(\"aria-label\", w[t] || \"\"); // Valor por defecto si no existe\n  a.setAttribute(\"aria-role\", \"link\");\n  a.setAttribute(\"aria-current\", \"active\" === f ? \"page\" : null);\n  a.setAttribute(\"data-dt-idx\", t);\n  a.tabIndex = d.iTabIndex;\n  a.className = \"page-link\";\n  a.textContent = p; // Usar textContent para evitar XSS\n\n  li.appendChild(a);\n  e.appendChild(li); // \'e\' representa el elemento al que se adjunta el botón\n\n  d.oApi._fnBindAction(li, { action: t }, r);\n}\n\n//Uso dentro de la función bootstrap\n//Reemplazando la linea 57 y adaptando los parametros\ncreatePageButton(d, t, p, f, l, r, m, g, w, b, n);\n\n          </code></pre>\n\n          <p class=\'card-text\'>\n            <b>Explicación:</b>\n            *   Se crea una función `createPageButton` para encapsular la lógica de creación de los botones de paginación.\n            *   Se utiliza `document.createElement()` para crear los elementos HTML de forma segura.\n            *   Se usa `setAttribute()` para establecer los atributos de los elementos.\n            *   Se utiliza `textContent` en lugar de `html()` para insertar el texto del botón, previniendo XSS.\n            *   Se pasan los parámetros necesarios a la función para que pueda ser reutilizada.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:08:40', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(43, 'jquery-3.6.0.min.js', 'Detectado por GPT', '/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */\r\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id=\'\"+S+\"\'></a><select id=\'\"+S+\"-\\r\\\\\' msallowcapture=\'\'><option selected=\'\'></option></select>\",e.querySelectorAll(\"[msallowcapture^=\'\']\").length&&v.push(\"[*^$]=\"+M+\"*(?:\'\'|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name=\'\']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:\'\'|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!=\'\']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(j).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href=\'#\'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple=\'multiple\'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^([^.]*)(?:\\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function Ee(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Ne=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function je(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function De(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function qe(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(Ne,\"\"),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join(\"|\"),\"i\");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=[\"Webkit\",\"Moz\",\"ms\"],$e=E.createElement(\"div\").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Ge={letterSpacing:\"0\",fontWeight:\"400\"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Qe(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=We(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),\"normal\"===i&&t in Ge&&(i=Ge[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,\"marginLeft\"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st(\"show\"),slideUp:st(\"hide\"),slideToggle:st(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement(\"input\"),nt=E.createElement(\"select\").appendChild(E.createElement(\"option\")),tt.type=\"checkbox\",y.checkOn=\"\"!==tt.value,y.optSelected=nt.selected,(tt=E.createElement(\"input\")).value=\"t\",tt.type=\"radio\",y.radioValue=\"t\"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}', '```html\n<div class=\'container\'>\n    <div class=\'card\'>\n        <div class=\'card-header\'>\n            Análisis de Seguridad y Calidad del Código jQuery v3.6.0\n        </div>\n        <div class=\'card-body\'>\n            El código proporcionado corresponde a una versión específica de la biblioteca jQuery.  El análisis de seguridad de una biblioteca ampliamente utilizada como jQuery se centra en identificar potenciales vulnerabilidades que podrían ser explotadas si se utiliza en un contexto vulnerable (como un sitio web que permite inyección de código).\n            <br>\n            Las métricas de calidad del código son relevantes para el mantenimiento, la legibilidad y la eficiencia del código.\n        </div>\n    </div>\n\n    <div class=\'card\'>\n        <div class=\'card-header\'>\n            Vulnerabilidades de Seguridad Potenciales\n        </div>\n        <div class=\'card-body\'>\n\n            <ul>\n                <li>\n                    <b>Vulnerabilidad:</b> Cross-Site Scripting (XSS)\n                    <br>\n                    <b>Línea Aproximada:</b>  A lo largo de todo el código, pero especialmente en las funciones de manipulación del DOM (ej: html, append, prepend) y en el selector de Sizzle.\n                    <br>\n                    <b>Descripción:</b> Si jQuery se usa en un contexto donde se manipulan datos proporcionados por el usuario sin una sanitización adecuada, se podría introducir código JavaScript malicioso en la página.  Por ejemplo, el uso directo de la función `html()` con contenido no escapado proporcionado por el usuario es una fuente común de vulnerabilidades XSS. El selector Sizzle (integrado) podría ser susceptible a XSS si una consulta malformada permite inyectar código.\n                    <br>\n                    <b>Mitigación:</b>\n                    <ul>\n                        <li>Siempre sanitizar y escapar cualquier dato proporcionado por el usuario antes de insertarlo en la página (especialmente utilizando `html()`). Considerar usar métodos de codificación HTML o funciones de escape específicas del contexto.</li>\n                        <li>Utilizar Content Security Policy (CSP) para mitigar el impacto de una posible vulnerabilidad XSS.</li>\n                        <li>Evitar construir selectores dinámicamente con datos del usuario. Si es necesario, validar y escapar los datos del usuario antes de utilizarlos en un selector.</li>\n                    </ul>\n                </li>\n                 <li>\n                    <b>Vulnerabilidad:</b> Inyección de código (indirectamente)\n                    <br>\n                    <b>Línea Aproximada:</b>  Función `globalEval` y `_evalUrl`\n                    <br>\n                    <b>Descripción:</b> Aunque estas funciones internamente no presentan vulnerabilidades, si el código a ejecutar proviene de una fuente no confiable (e.g., una URL controlada por un atacante)  podría permitir la ejecución de código malicioso en el contexto de la página.\n                    <br>\n                    <b>Mitigación:</b>\n                    <ul>\n                        <li>Evitar el uso de estas funciones con código que no sea de confianza.</li>\n                        <li>Validar cuidadosamente la URL y el origen del script a ejecutar.</li>\n                        <li>Implementar subresource integrity (SRI) para asegurar que los recursos externos no han sido manipulados.</li>\n                    </ul>\n                </li>\n                <li>\n                   <b>Vulnerabilidad:</b>  Ataques de Prototype Pollution\n                   <br>\n                   <b>Línea Aproximada:</b>  Función `S.extend` y `S.fn.extend`\n                   <br>\n                   <b>Descripción:</b>  Si bien las versiones recientes de jQuery han mitigado en gran medida las vulnerabilidades directas de prototype pollution, el uso indiscriminado o no validado de `S.extend(true, target, source)` con datos controlados por el usuario aún podría ser explotable, aunque de manera indirecta.  Es importante recordar que modificar el prototipo de Object puede tener consecuencias impredecibles y peligrosas en la aplicación.\n                   <br>\n                   <b>Mitigación:</b>\n                    <ul>\n                        <li>Evitar el uso de `S.extend(true, ...)` con datos provenientes directamente del usuario.</li>\n                        <li>Validar y filtrar las propiedades que se van a extender, evitando claves como `__proto__`, `constructor` y `prototype`.</li>\n                        <li>Usar `Object.create(null)` para crear objetos sin prototipo cuando sea apropiado.</li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\'card\'>\n        <div class=\'card-header\'>\n            Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n            <ul>\n                <li>\n                    <b>Complejidad Ciclomática:</b> Alta en ciertas funciones (especialmente en el selector Sizzle).  El uso extensivo de condicionales y bucles anidados incrementa la dificultad para entender y mantener el código.\n                    <br>\n                    <b>Mejora:</b> Refactorizar las funciones complejas en funciones más pequeñas y modulares.  Utilizar patrones de diseño para simplificar la lógica.\n                </li>\n                <li>\n                    <b>Duplicación de Código:</b>  Potencialmente presente en las funciones de manipulación del DOM y en la lógica de manejo de eventos.\n                    <br>\n                    <b>Mejora:</b> Identificar y extraer las secciones de código duplicadas en funciones reutilizables.\n                </li>\n                <li>\n                    <b>Legibilidad:</b>  Puede ser difícil de seguir debido al alto grado de optimización y al uso de nombres de variables abreviados. El código minificado también reduce la legibilidad.\n                    <br>\n                    <b>Mejora:</b>  Añadir comentarios explicativos, usar nombres de variables más descriptivos y utilizar un formateador de código para mejorar la estructura y la consistencia.\n                </li>\n                <li>\n                    <b>Acoplamiento:</b> Alto acoplamiento entre los diferentes componentes de jQuery.  Cambios en un componente pueden tener un impacto significativo en otros.\n                    <br>\n                    <b>Mejora:</b>  Refactorizar el código para reducir las dependencias entre los componentes.  Utilizar interfaces y abstracciones para desacoplar los componentes.\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\'card-header\'>\n            Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n            <p>\n                Considerando el análisis anterior, las siguientes acciones son recomendables:\n            </p>\n            <ol>\n                <li>\n                    <b>Actualizar a la última versión de jQuery:</b> Las versiones más recientes de jQuery (o incluso el uso de alternativas más modernas como Vanilla JavaScript o frameworks como React/Vue/Angular)  incorporan mejoras de seguridad y rendimiento, así como correcciones de errores.\n                </li>\n                <li>\n                    <b>Revisar y Sanitizar la entrada de datos:</b>  Asegurar que toda la entrada de datos del usuario se valide y escape correctamente para prevenir ataques XSS.\n                </li>\n                <li>\n                     <b>Aplicar CSP:</b> Implementar una política de seguridad de contenido (CSP) restrictiva para mitigar el impacto de potenciales vulnerabilidades XSS.\n                </li>\n                <li>\n                    <b>Refactorizar el código:</b>  Refactorizar el código para mejorar la legibilidad, reducir la complejidad y disminuir el acoplamiento.  Utilizar herramientas de análisis estático para identificar problemas de calidad del código.\n                </li>\n                <li>\n                    <b>Usar Subresource Integrity (SRI):</b> Implementar SRI para verificar la integridad de los archivos JavaScript externos.\n                </li>\n                <li>\n                    <b>Realizar pruebas de seguridad:</b> Realizar pruebas de penetración y análisis de vulnerabilidades para identificar y corregir posibles problemas de seguridad.\n                </li>\n            </ol>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:09:08', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(44, 'jquery.dataTables.min.js', 'Detectado por GPT', '/*! DataTables 1.13.4\r\n * ©2008-2023 SpryMedia Ltd - datatables.net/license\r\n */\r\n!function(n){\"use strict\";var a;\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return n(t,window,document)}):\"object\"==typeof exports?(a=require(\"jquery\"),\"undefined\"!=typeof window?module.exports=function(t,e){return t=t||window,e=e||a(t),n(e,t,t.document)}:n(a,window,window.document)):window.DataTable=n(jQuery,window,document)}(function(P,j,y,N){\"use strict\";function d(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null}function l(t,e,n){var a=typeof t,r=\"string\"==a;return\"number\"==a||\"bigint\"==a||!!h(t)||(e&&r&&(t=G(t,e)),n&&r&&(t=t.replace(q,\"\")),!isNaN(parseFloat(t))&&isFinite(t))}function a(t,e,n){var a;return!!h(t)||(h(a=t)||\"string\"==typeof a)&&!!l(t.replace(V,\"\"),e,n)||null}function m(t,e,n,a){var r=[],o=0,i=e.length;if(a!==N)for(;o<i;o++)t[e[o]][n]&&r.push(t[e[o]][n][a]);else for(;o<i;o++)r.push(t[e[o]][n]);return r}function f(t,e){var n,a=[];e===N?(e=0,n=t):(n=e,e=t);for(var r=e;r<n;r++)a.push(r);return a}function _(t){for(var e=[],n=0,a=t.length;n<a;n++)t[n]&&e.push(t[n]);return e}function s(t,e){return-1!==this.indexOf(t,e=e===N?0:e)}var p,e,t,w=function(t,v){if(w.factory(t,v))return w;if(this instanceof w)return P(t).DataTable(v);v=t,this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new B(t?ge(this[p.iApiIndex]):this)},this.fnAddData=function(t,e){var n=this.api(!0),t=(Array.isArray(t)&&(Array.isArray(t[0])||P.isPlainObject(t[0]))?n.rows:n.row).add(t);return e!==N&&!e||n.draw(),t.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],a=n.oScroll;t===N||t?e.draw(!1):\"\"===a.sX&&\"\"===a.sY||Qt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();t!==N&&!t||e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var a=this.api(!0),t=a.rows(t),r=t.settings()[0],o=r.aoData[t[0][0]];return t.remove(),e&&e.call(this,r,o),n!==N&&!n||a.draw(),o},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,a,r,o){var i=this.api(!0);(null===e||e===N?i:i.column(e)).search(t,n,a,o),i.draw()},this.fnGetData=function(t,e){var n,a=this.api(!0);return t!==N?(n=t.nodeName?t.nodeName.toLowerCase():\"\",e!==N||\"td\"==n||\"th\"==n?a.cell(t,e).data():a.row(t).data()||null):a.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==N?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return\"TR\"==n?e.row(t).index():\"TD\"==n||\"TH\"==n?[(n=e.cell(t).index()).row,n.columnVisible,n.column]:null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){t=this.api(!0).page(t);e!==N&&!e||t.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e);n!==N&&!n||t.columns.adjust().draw()},this.fnSettings=function(){return ge(this[p.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,a,r){var o=this.api(!0);return(n===N||null===n?o.row(e):o.cell(e,n)).data(t),r!==N&&!r||o.columns.adjust(),a!==N&&!a||o.draw(),0},this.fnVersionCheck=p.fnVersionCheck;var e,y=this,D=v===N,_=this.length;for(e in D&&(v={}),this.oApi=this.internal=p.internal,w.ext.internal)e&&(this[e]=Ge(e));return this.each(function(){var r=1<_?be({},v,!0):v,o=0,t=this.getAttribute(\"id\"),i=!1,e=w.defaults,l=P(this);if(\"table\"!=this.nodeName.toLowerCase())W(null,0,\"Non-table node initialisation (\"+this.nodeName+\")\",2);else{K(e),Q(e.column),C(e,e,!0),C(e.column,e.column,!0),C(e,P.extend(r,l.data()),!0);for(var n=w.settings,o=0,s=n.length;o<s;o++){var a=n[o];if(a.nTable==this||a.nTHead&&a.nTHead.parentNode==this||a.nTFoot&&a.nTFoot.parentNode==this){var u=(r.bRetrieve!==N?r:e).bRetrieve,c=(r.bDestroy!==N?r:e).bDestroy;if(D||u)return a.oInstance;if(c){a.oInstance.fnDestroy();break}return void W(a,0,\"Cannot reinitialise DataTable\",3)}if(a.sTableId==this.id){n.splice(o,1);break}}null!==t&&\"\"!==t||(t=\"DataTables_Table_\"+w.ext._unique++,this.id=t);var f,d,h=P.extend(!0,{},w.models.oSettings,{sDestroyWidth:l[0].style.width,sInstance:t,sTableId:t}),p=(h.nTable=this,h.oApi=y.internal,h.oInit=r,n.push(h),h.oInstance=1===y.length?y:l.dataTable(),K(r),Z(r.oLanguage),r.aLengthMenu&&!r.iDisplayLength&&(r.iDisplayLength=(Array.isArray(r.aLengthMenu[0])?r.aLengthMenu[0]:r.aLengthMenu)[0]),r=be(P.extend(!0,{},e),r),F(h.oFeatures,r,[\"bPaginate\",\"bLengthChange\",\"bFilter\",\"bSort\",\"bSortMulti\",\"bInfo\",\"bProcessing\",\"bAutoWidth\",\"bSortClasses\",\"bServerSide\",\"bDeferRender\"]),F(h,r,[\"asStripeClasses\",\"ajax\",\"fnServerData\",\"fnFormatNumber\",\"sServerMethod\",\"aaSorting\",\"aaSortingFixed\",\"aLengthMenu\",\"sPaginationType\",\"sAjaxSource\",\"sAjaxDataProp\",\"iStateDuration\",\"sDom\",\"bSortCellsTop\",\"iTabIndex\",\"fnStateLoadCallback\",\"fnStateSaveCallback\",\"renderer\",\"searchDelay\",\"rowId\",[\"iCookieDuration\",\"iStateDuration\"],[\"oSearch\",\"oPreviousSearch\"],[\"aoSearchCols\",\"aoPreSearchCols\"],[\"iDisplayLength\",\"_iDisplayLength\"]]),F(h.oScroll,r,[[\"sScrollX\",\"sX\"],[\"sScrollXInner\",\"sXInner\"],[\"sScrollY\",\"sY\"],[\"bScrollCollapse\",\"bCollapse\"]]),F(h.oLanguage,r,\"fnInfoCallback\"),L(h,\"aoDrawCallback\",r.fnDrawCallback,\"user\"),L(h,\"aoServerParams\",r.fnServerParams,\"user\"),L(h,\"aoStateSaveParams\",r.fnStateSaveParams,\"user\"),L(h,\"aoStateLoadParams\",r.fnStateLoadParams,\"user\"),L(h,\"aoStateLoaded\",r.fnStateLoaded,\"user\"),L(h,\"aoRowCallback\",r.fnRowCallback,\"user\"),L(h,\"aoRowCreatedCallback\",r.fnCreatedRow,\"user\"),L(h,\"aoHeaderCallback\",r.fnHeaderCallback,\"user\"),L(h,\"aoFooterCallback\",r.fnFooterCallback,\"user\"),L(h,\"aoInitComplete\",r.fnInitComplete,\"user\"),L(h,\"aoPreDrawCallback\",r.fnPreDrawCallback,\"user\"),h.rowIdFn=A(r.rowId),tt(h),h.oClasses),g=(P.extend(p,w.ext.classes,r.oClasses),l.addClass(p.sTable),h.iInitDisplayStart===N&&(h.iInitDisplayStart=r.iDisplayStart,h._iDisplayStart=r.iDisplayStart),null!==r.iDeferLoading&&(h.bDeferLoading=!0,t=Array.isArray(r.iDeferLoading),h._iRecordsDisplay=t?r.iDeferLoading[0]:r.iDeferLoading,h._iRecordsTotal=t?r.iDeferLoading[1]:r.iDeferLoading),h.oLanguage),t=(P.extend(!0,g,r.oLanguage),g.sUrl?(P.ajax({dataType:\"json\",url:g.sUrl,success:function(t){C(e.oLanguage,t),Z(t),P.extend(!0,g,t,h.oInit.oLanguage),R(h,null,\"i18n\",[h]),Jt(h)},error:function(){Jt(h)}}),i=!0):R(h,null,\"i18n\",[h]),null===r.asStripeClasses&&(h.asStripeClasses=[p.sStripeOdd,p.sStripeEven]),h.asStripeClasses),b=l.children(\"tbody\").find(\"tr\").eq(0),m=(-1!==P.inArray(!0,P.map(t,function(t,e){return b.hasClass(t)}))&&(P(\"tbody tr\",this).removeClass(t.join(\" \")),h.asDestroyStripes=t.slice()),[]),t=this.getElementsByTagName(\"thead\");if(0!==t.length&&(wt(h.aoHeader,t[0]),m=Ct(h)),null===r.aoColumns)for(f=[],o=0,s=m.length;o<s;o++)f.push(null);else f=r.aoColumns;for(o=0,s=f.length;o<s;o++)nt(h,m?m[o]:null);st(h,r.aoColumnDefs,f,function(t,e){at(h,t,e)}),b.length&&(d=function(t,e){return null!==t.getAttribute(\"data-\"+e)?e:null},P(b[0]).children(\"th, td\").each(function(t,e){var n,a=h.aoColumns[t];a||W(h,0,\"Incorrect column count\",18),a.mData===t&&(n=d(e,\"sort\")||d(e,\"order\"),e=d(e,\"filter\")||d(e,\"search\"),null===n&&null===e||(a.mData={_:t+\".display\",sort:null!==n?t+\".@data-\"+n:N,type:null!==n?t+\".@data-\"+n:N,filter:null!==e?t+\".@data-\"+e:N},a._isArrayHost=!0,at(h,t)))}));var S=h.oFeatures,t=function(){if(r.aaSorting===N){var t=h.aaSorting;for(o=0,s=t.length;o<s;o++)t[o][1]=h.aoColumns[o].asSorting[0]}ce(h),S.bSort&&L(h,\"aoDrawCallback\",function(){var t,n;h.bSorted&&(t=I(h),n={},P.each(t,function(t,e){n[e.src]=e.dir}),R(h,null,\"order\",[h,t,n]),le(h))}),L(h,\"aoDrawCallback\",function(){(h.bSorted||\"ssp\"===E(h)||S.bDeferRender)&&ce(h)},\"sc\");var e=l.children(\"caption\").each(function(){this._captionSide=P(this).css(\"caption-side\")}),n=l.children(\"thead\"),a=(0===n.length&&(n=P(\"<thead/>\").appendTo(l)),h.nTHead=n[0],l.children(\"tbody\")),n=(0===a.length&&(a=P(\"<tbody/>\").insertAfter(n)),h.nTBody=a[0],l.children(\"tfoot\"));if(0===(n=0===n.length&&0<e.length&&(\"\"!==h.oScroll.sX||\"\"!==h.oScroll.sY)?P(\"<tfoot/>\").appendTo(l):n).length||0===n.children().length?l.addClass(p.sNoFooter):0<n.length&&(h.nTFoot=n[0],wt(h.aoFooter,h.nTFoot)),r.aaData)for(o=0;o<r.aaData.length;o++)x(h,r.aaData[o]);else!h.bDeferLoading&&\"dom\"!=E(h)||ut(h,P(h.nTBody).children(\"tr\"));h.aiDisplay=h.aiDisplayMaster.slice(),!(h.bInitialised=!0)===i&&Jt(h)};L(h,\"aoDrawCallback\",de,\"state_save\"),r.bStateSave?(S.bStateSave=!0,he(h,0,t)):t()}}),y=null,this},c={},U=/[\\r\\n\\u2028]/g,V=/<.*?>/g,X=/^\\d{2,4}[\\.\\/\\-]\\d{1,2}[\\.\\/\\-]\\d{1,2}([T ]{1}\\d{1,2}[:\\.]\\d{2}([\\.:]\\d{2})?)?$/,J=new RegExp(\"(\\\\\"+[\"/\",\".\",\"*\",\"+\",\"?\",\"|\",\"(\",\")\",\"[\",\"]\",\"{\",\"}\",\"\\\\\",\"$\",\"^\",\"-\"].join(\"|\\\\\")+\")\",\"g\"),q=/[\'\\u00A0,$£€¥%\\u2009\\u202F\\u20BD\\u20a9\\u20BArfkɃΞ]/gi,h=function(t){return!t||!0===t||\"-\"===t},G=function(t,e){return c[e]||(c[e]=new RegExp(Ot(e),\"g\")),\"string\"==typeof t&&\".\"!==e?t.replace(/\\./g,\"\").replace(c[e],\".\"):t},H=function(t,e,n){var a=[],r=0,o=t.length;if(n!==N)for(;r<o;r++)t[r]&&t[r][e]&&a.push(t[r][e][n]);else for(;r<o;r++)t[r]&&a.push(t[r][e]);return a},$=function(t){if(!(t.length<2))for(var e=t.slice().sort(),n=e[0],a=1,r=e.length;a<r;a++){if(e[a]===n)return!1;n=e[a]}return!0},z=function(t){if($(t))return t.slice();var e,n,a,r=[],o=t.length,i=0;t:for(n=0;n<o;n++){for(e=t[n],a=0;a<i;a++)if(r[a]===e)continue t;r.push(e),i++}return r},Y=function(t,e){if(Array.isArray(e))for(var n=0;n<e.length;n++)Y(t,e[n]);else t.push(e);return t};function i(n){var a,r,o={};P.each(n,function(t,e){(a=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!==\"a aa ai ao as b fn i m o s \".indexOf(a[1]+\" \")&&(r=t.replace(a[0],a[2].toLowerCase()),o[r]=t,\"o\"===a[1])&&i(n[t])}),n._hungarianMap=o}function C(n,a,r){var o;n._hungarianMap||i(n),P.each(a,function(t,e){(o=n._hungarianMap[t])===N||!r&&a[o]!==N||(\"o\"===o.charAt(0)?(a[o]||(a[o]={}),P.extend(!0,a[o],a[t]),C(n[o],a[o],r)):a[o]=a[t])})}function Z(t){var e,n=w.defaults.oLanguage,a=n.sDecimal;a&&Me(a),t&&(e=t.sZeroRecords,!t.sEmptyTable&&e&&\"No data available in table\"===n.sEmptyTable&&F(t,t,\"sZeroRecords\",\"sEmptyTable\"),!t.sLoadingRecords&&e&&\"Loading...\"===n.sLoadingRecords&&F(t,t,\"sZeroRecords\",\"sLoadingRecords\"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),e=t.sDecimal)&&a!==e&&Me(e)}Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),Array.prototype.includes||(Array.prototype.includes=s),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")}),String.prototype.includes||(String.prototype.includes=s),w.util={throttle:function(a,t){var r,o,i=t!==N?t:200;return function(){var t=this,e=+new Date,n=arguments;r&&e<r+i?(clearTimeout(o),o=setTimeout(function(){r=N,a.apply(t,n)},i)):(r=e,a.apply(t,n))}},escapeRegex:function(t){return t.replace(J,\"\\\\$1\")},set:function(a){var d;return P.isPlainObject(a)?w.util.set(a._):null===a?function(){}:\"function\"==typeof a?function(t,e,n){a(t,\"set\",e,n)}:\"string\"!=typeof a||-1===a.indexOf(\".\")&&-1===a.indexOf(\"[\")&&-1===a.indexOf(\"(\")?function(t,e){t[a]=e}:(d=function(t,e,n){for(var a,r,o,i,l=dt(n),n=l[l.length-1],s=0,u=l.length-1;s<u;s++){if(\"__proto__\"===l[s]||\"constructor\"===l[s])throw new Error(\"Cannot set prototype values\");if(a=l[s].match(ft),r=l[s].match(g),a){if(l[s]=l[s].replace(ft,\"\"),t[l[s]]=[],(a=l.slice()).splice(0,s+1),i=a.join(\".\"),Array.isArray(e))for(var c=0,f=e.length;c<f;c++)d(o={},e[c],i),t[l[s]].push(o);else t[l[s]]=e;return}r&&(l[s]=l[s].replace(g,\"\"),t=t[l[s]](e)),null!==t[l[s]]&&t[l[s]]!==N||(t[l[s]]={}),t=t[l[s]]}n.match(g)?t[n.replace(g,\"\")](e):t[n.replace(ft,\"\")]=e},function(t,e){return d(t,e,a)})},get:function(r){var o,d;return P.isPlainObject(r)?(o={},P.each(r,function(t,e){e&&(o[t]=w.util.get(e))}),function(t,e,n,a){var r=o[e]||o._;return r!==N?r(t,e,n,a):t}):null===r?function(t){return t}:\"function\"==typeof r?function(t,e,n,a){return r(t,e,n,a)}:\"string\"!=typeof r||-1===r.indexOf(\".\")&&-1===r.indexOf(\"[\")&&-1===r.indexOf(\"(\")?function(t,e){return t[r]}:(d=function(t,e,n){var a,r,o;if(\"\"!==n)for(var i=dt(n),l=0,s=i.length;l<s;l++){if(f=i[l].match(ft),a=i[l].match(g),f){if(i[l]=i[l].replace(ft,\"\"),\"\"!==i[l]&&(t=t[i[l]]),r=[],i.splice(0,l+1),o=i.join(\".\"),Array.isArray(t))for(var u=0,c=t.length;u<c;u++)r.push(d(t[u],e,o));var f=f[0].substring(1,f[0].length-1);t=\"\"===f?r:r.join(f);break}if(a)i[l]=i[l].replace(g,\"\"),t=t[i[l]]();else{if(null===t||t[i[l]]===N)return N;t=t[i[l]]}}return t},function(t,e){return d(t,e,r)})}};var r=function(t,e,n){t[e]!==N&&(t[n]=t[e])};function K(t){r(t,\"ordering\",\"bSort\"),r(t,\"orderMulti\",\"bSortMulti\"),r(t,\"orderClasses\",\"bSortClasses\"),r(t,\"orderCellsTop\",\"bSortCellsTop\"),r(t,\"order\",\"aaSorting\"),r(t,\"orderFixed\",\"aaSortingFixed\"),r(t,\"paging\",\"bPaginate\"),r(t,\"pagingType\",\"sPaginationType\"),r(t,\"pageLength\",\"iDisplayLength\"),r(t,\"searching\",\"bFilter\"),\"boolean\"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?\"100%\":\"\"),\"boolean\"==typeof t.scrollX&&(t.scrollX=t.scrollX?\"100%\":\"\");var e=t.aoSearchCols;if(e)for(var n=0,a=e.length;n<a;n++)e[n]&&C(w.models.oSearch,e[n])}function Q(t){r(t,\"orderable\",\"bSortable\"),r(t,\"orderData\",\"aDataSort\"),r(t,\"orderSequence\",\"asSorting\"),r(t,\"orderDataType\",\"sortDataType\");var e=t.aDataSort;\"number\"!=typeof e||Array.isArray(e)||(t.aDataSort=[e])}function tt(t){var e,n,a,r;w.__browser||(w.__browser=e={},r=(a=(n=P(\"<div/>\").css({position:\"fixed\",top:0,left:-1*P(j).scrollLeft(),height:1,width:1,overflow:\"hidden\"}).append(P(\"<div/>\").css({position:\"absolute\",top:1,left:1,width:100,overflow:\"scroll\"}).append(P(\"<div/>\").css({width:\"100%\",height:10}))).appendTo(\"body\")).children()).children(),e.barWidth=a[0].offsetWidth-a[0].clientWidth,e.bScrollOversize=100===r[0].offsetWidth&&100!==a[0].clientWidth,e.bScrollbarLeft=1!==Math.round(r.offset().left),e.bBounding=!!n[0].getBoundingClientRect().width,n.remove()),P.extend(t.oBrowser,w.__browser),t.oScroll.iBarWidth=w.__browser.barWidth}function et(t,e,n,a,r,o){var i,l=a,s=!1;for(n!==N&&(i=n,s=!0);l!==r;)t.hasOwnProperty(l)&&(i=s?e(i,t[l],l,t):t[l],s=!0,l+=o);return i}function nt(t,e){var n=w.defaults.column,a=t.aoColumns.length,n=P.extend({},w.models.oColumn,n,{nTh:e||y.createElement(\"th\"),sTitle:n.sTitle||(e?e.innerHTML:\"\"),aDataSort:n.aDataSort||[a],mData:n.mData||a,idx:a}),n=(t.aoColumns.push(n),t.aoPreSearchCols);n[a]=P.extend({},w.models.oSearch,n[a]),at(t,a,P(e).data())}function at(t,e,n){function a(t){return\"string\"==typeof t&&-1!==t.indexOf(\"@\")}var e=t.aoColumns[e],r=t.oClasses,o=P(e.nTh),i=(!e.sWidthOrig&&(e.sWidthOrig=o.attr(\"width\")||null,u=(o.attr(\"style\")||\"\").match(/width:\\s*(\\d+[pxem%]+)/))&&(e.sWidthOrig=u[1]),n!==N&&null!==n&&(Q(n),C(w.defaults.column,n,!0),n.mDataProp===N||n.mData||(n.mData=n.mDataProp),n.sType&&(e._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),n.sClass&&o.addClass(n.sClass),u=e.sClass,P.extend(e,n),F(e,n,\"sWidth\",\"sWidthOrig\"),u!==e.sClass&&(e.sClass=u+\" \"+e.sClass),n.iDataSort!==N&&(e.aDataSort=[n.iDataSort]),F(e,n,\"aDataSort\")),e.mData),l=A(i),s=e.mRender?A(e.mRender):null,u=(e._bAttrSrc=P.isPlainObject(i)&&(a(i.sort)||a(i.type)||a(i.filter)),e._setter=null,e.fnGetData=function(t,e,n){var a=l(t,e,N,n);return s&&e?s(a,e,t,n):a},e.fnSetData=function(t,e,n){return b(i)(t,e,n)},\"number\"==typeof i||e._isArrayHost||(t._rowReadObject=!0),t.oFeatures.bSort||(e.bSortable=!1,o.addClass(r.sSortableNone)),-1!==P.inArray(\"asc\",e.asSorting)),n=-1!==P.inArray(\"desc\",e.asSorting);e.bSortable&&(u||n)?u&&!n?(e.sSortingClass=r.sSortableAsc,e.sSortingClassJUI=r.sSortJUIAscAllowed):!u&&n?(e.sSortingClass=r.sSortableDesc,e.sSortingClassJUI=r.sSortJUIDescAllowed):(e.sSortingClass=r.sSortable,e.sSortingClassJUI=r.sSortJUI):(e.sSortingClass=r.sSortableNone,e.sSortingClassJUI=\"\")}function O(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;ee(t);for(var n=0,a=e.length;n<a;n++)e[n].nTh.style.width=e[n].sWidth}var r=t.oScroll;\"\"===r.sY&&\"\"===r.sX||Qt(t),R(t,null,\"column-sizing\",[t])}function rt(t,e){t=it(t,\"bVisible\");return\"number\"==typeof t[e]?t[e]:null}function ot(t,e){t=it(t,\"bVisible\"),e=P.inArray(e,t);return-1!==e?e:null}function T(t){var n=0;return P.each(t.aoColumns,function(t,e){e.bVisible&&\"none\"!==P(e.nTh).css(\"display\")&&n++}),n}function it(t,n){var a=[];return P.map(t.aoColumns,function(t,e){t[n]&&a.push(e)}),a}function lt(t){for(var e,n,a,r,o,i,l,s=t.aoColumns,u=t.aoData,c=w.ext.type.detect,f=0,d=s.length;f<d;f++)if(l=[],!(o=s[f]).sType&&o._sManualType)o.sType=o._sManualType;else if(!o.sType){for(e=0,n=c.length;e<n;e++){for(a=0,r=u.length;a<r&&(l[a]===N&&(l[a]=S(t,a,f,\"type\")),(i=c[e](l[a],t))||e===c.length-1)&&(\"html\"!==i||h(l[a]));a++);if(i){o.sType=i;break}}o.sType||(o.sType=\"string\")}}function st(t,e,n,a){var r,o,i,l,s=t.aoColumns;if(e)for(r=e.length-1;0<=r;r--)for(var u,c=(u=e[r]).target!==N?u.target:u.targets!==N?u.targets:u.aTargets,f=0,d=(c=Array.isArray(c)?c:[c]).length;f<d;f++)if(\"number\"==typeof c[f]&&0<=c[f]){for(;s.length<=c[f];)nt(t);a(c[f],u)}else if(\"number\"==typeof c[f]&&c[f]<0)a(s.length+c[f],u);else if(\"string\"==typeof c[f])for(i=0,l=s.length;i<l;i++)\"_all\"!=c[f]&&!P(s[i].nTh).hasClass(c[f])||a(i,u);if(n)for(r=0,o=n.length;r<o;r++)a(r,n[r])}function x(t,e,n,a){for(var r=t.aoData.length,o=P.extend(!0,{},w.models.oRow,{src:n?\"dom\":\"data\",idx:r}),i=(o._aData=e,t.aoData.push(o),t.aoColumns),l=0,s=i.length;l<s;l++)i[l].sType=null;t.aiDisplayMaster.push(r);e=t.rowIdFn(e);return e!==N&&(t.aIds[e]=o),!n&&t.oFeatures.bDeferRender||St(t,r,n,a),r}function ut(n,t){var a;return(t=t instanceof P?t:P(t)).map(function(t,e){return a=mt(n,e),x(n,a.data,e,a.cells)})}function S(t,e,n,a){\"search\"===a?a=\"filter\":\"order\"===a&&(a=\"sort\");var r=t.iDraw,o=t.aoColumns[n],i=t.aoData[e]._aData,l=o.sDefaultContent,s=o.fnGetData(i,a,{settings:t,row:e,col:n});if(s===N)return t.iDrawError!=r&&null===l&&(W(t,0,\"Requested unknown parameter \"+(\"function\"==typeof o.mData?\"{function}\":\"\'\"+o.mData+\"\'\")+\" for row \"+e+\", column \"+n,4),t.iDrawError=r),l;if(s!==i&&null!==s||null===l||a===N){if(\"function\"==typeof s)return s.call(i)}else s=l;return null===s&&\"display\"===a?\"\":\"filter\"===a&&(e=w.ext.type.search)[o.sType]?e[o.sType](s):s}function ct(t,e,n,a){var r=t.aoColumns[n],o=t.aoData[e]._aData;r.fnSetData(o,a,{settings:t,row:e,col:n})}var ft=/\\[.*?\\]$/,g=/\\(\\)$/;function dt(t){return P.map(t.match(/(\\\\.|[^\\.])+/g)||[\"\"],function(t){return t.replace(/\\\\\\./g,\".\")})}var A=w.util.get,b=w.util.set;function ht(t){return H(t.aoData,\"_aData\")}function pt(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function gt(t,e,n){for(var a=-1,r=0,o=t.length;r<o;r++)t[r]==e?a=r:t[r]>e&&t[r]--;-1!=a&&n===N&&t.splice(a,1)}function bt(n,a,t,e){function r(t,e){for(;t.childNodes.length;)t.removeChild(t.firstChild);t.innerHTML=S(n,a,e,\"display\")}var o,i,l=n.aoData[a];if(\"dom\"!==t&&(t&&\"auto\"!==t||\"dom\"!==l.src)){var s=l.anCells;if(s)if(e!==N)r(s[e],e);else for(o=0,i=s.length;o<i;o++)r(s[o],o)}else l._aData=mt(n,l,e,e===N?N:l._aData).data;l._aSortData=null,l._aFilterData=null;var u=n.aoColumns;if(e!==N)u[e].sType=null;else{for(o=0,i=u.length;o<i;o++)u[o].sType=null;vt(n,l)}}function mt(t,e,n,a){function r(t,e){var n;\"string\"==typeof t&&-1!==(n=t.indexOf(\"@\"))&&(n=t.substring(n+1),b(t)(a,e.getAttribute(n)))}function o(t){n!==N&&n!==f||(l=d[f],s=t.innerHTML.trim(),l&&l._bAttrSrc?(b(l.mData._)(a,s),r(l.mData.sort,t),r(l.mData.type,t),r(l.mData.filter,t)):h?(l._setter||(l._setter=b(l.mData)),l._setter(a,s)):a[f]=s),f++}var i,l,s,u=[],c=e.firstChild,f=0,d=t.aoColumns,h=t._rowReadObject;a=a!==N?a:h?{}:[];if(c)for(;c;)\"TD\"!=(i=c.nodeName.toUpperCase())&&\"TH\"!=i||(o(c),u.push(c)),c=c.nextSibling;else for(var p=0,g=(u=e.anCells).length;p<g;p++)o(u[p]);var e=e.firstChild?e:e.nTr;return e&&(e=e.getAttribute(\"id\"))&&b(t.rowId)(a,e),{data:a,cells:u}}function St(t,e,n,a){var r,o,i,l,s,u,c=t.aoData[e],f=c._aData,d=[];if(null===c.nTr){for(r=n||y.createElement(\"tr\"),c.nTr=r,c.anCells=d,r._DT_RowIndex=e,vt(t,c),l=0,s=t.aoColumns.length;l<s;l++)i=t.aoColumns[l],(o=(u=!n)?y.createElement(i.sCellType):a[l])||W(t,0,\"Incorrect column count\",18),o._DT_CellIndex={row:e,column:l},d.push(o),!u&&(!i.mRender&&i.mData===l||P.isPlainObject(i.mData)&&i.mData._===l+\".display\")||(o.innerHTML=S(t,e,l,\"display\")),i.sClass&&(o.className+=\" \"+i.sClass),i.bVisible&&!n?r.appendChild(o):!i.bVisible&&n&&o.parentNode.removeChild(o),i.fnCreatedCell&&i.fnCreatedCell.call(t.oInstance,o,S(t,e,l),f,e,l);R(t,\"aoRowCreatedCallback\",null,[r,f,e,d])}}function vt(t,e){var n=e.nTr,a=e._aData;n&&((t=t.rowIdFn(a))&&(n.id=t),a.DT_RowClass&&(t=a.DT_RowClass.split(\" \"),e.__rowc=e.__rowc?z(e.__rowc.concat(t)):t,P(n).removeClass(e.__rowc.join(\" \")).addClass(a.DT_RowClass)),a.DT_RowAttr&&P(n).attr(a.DT_RowAttr),a.DT_RowData)&&P(n).data(a.DT_RowData)}function yt(t){var e,n,a,r=t.nTHead,o=t.nTFoot,i=0===P(\"th, td\",r).length,l=t.oClasses,s=t.aoColumns;for(i&&(n=P(\"<tr/>\").appendTo(r)),c=0,f=s.length;c<f;c++)a=s[c],e=P(a.nTh).addClass(a.sClass),i&&e.appendTo(n),t.oFeatures.bSort&&(e.addClass(a.sSortingClass),!1!==a.bSortable)&&(e.attr(\"tabindex\",t.iTabIndex).attr(\"aria-controls\",t.sTableId),ue(t,a.nTh,c)),a.sTitle!=e[0].innerHTML&&e.html(a.sTitle),ve(t,\"header\")(t,e,a,l);if(i&&wt(t.aoHeader,r),P(r).children(\"tr\").children(\"th, td\").addClass(l.sHeaderTH),P(o).children(\"tr\").children(\"th, td\").addClass(l.sFooterTH),null!==o)for(var u=t.aoFooter[0],c=0,f=u.length;c<f;c++)(a=s[c])?(a.nTf=u[c].cell,a.sClass&&P(a.nTf).addClass(a.sClass)):W(t,0,\"Incorrect column count\",18)}function Dt(t,e,n){var a,r,o,i,l,s,u,c,f,d=[],h=[],p=t.aoColumns.length;if(e){for(n===N&&(n=!1),a=0,r=e.length;a<r;a++){for(d[a]=e[a].slice(),d[a].nTr=e[a].nTr,o=p-1;0<=o;o--)t.aoColumns[o].bVisible||n||d[a].splice(o,1);h.push([])}for(a=0,r=d.length;a<r;a++){if(u=d[a].nTr)for(;s=u.firstChild;)u.removeChild(s);for(o=0,i=d[a].length;o<i;o++)if(f=c=1,h[a][o]===N){for(u.appendChild(d[a][o].cell),h[a][o]=1;d[a+c]!==N&&d[a][o].cell==d[a+c][o].cell;)h[a+c][o]=1,c++;for(;d[a][o+f]!==N&&d[a][o].cell==d[a][o+f].cell;){for(l=0;l<c;l++)h[a+l][o+f]=1;f++}P(d[a][o].cell).attr(\"rowspan\",c).attr(\"colspan\",f)}}}}function v(t,e){n=\"ssp\"==E(s=t),(l=s.iInitDisplayStart)!==N&&-1!==l&&(s._iDisplayStart=!n&&l>=s.fnRecordsDisplay()?0:l,s.iInitDisplayStart=-1);var n=R(t,\"aoPreDrawCallback\",\"preDraw\",[t]);if(-1!==P.inArray(!1,n))D(t,!1);else{var a=[],r=0,o=t.asStripeClasses,i=o.length,l=t.oLanguage,s=\"ssp\"==E(t),u=t.aiDisplay,n=t._iDisplayStart,c=t.fnDisplayEnd();if(t.bDrawing=!0,t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,D(t,!1);else if(s){if(!t.bDestroying&&!e)return void xt(t)}else t.iDraw++;if(0!==u.length)for(var f=s?t.aoData.length:c,d=s?0:n;d<f;d++){var h,p=u[d],g=t.aoData[p],b=(null===g.nTr&&St(t,p),g.nTr);0!==i&&(h=o[r%i],g._sRowStripe!=h)&&(P(b).removeClass(g._sRowStripe).addClass(h),g._sRowStripe=h),R(t,\"aoRowCallback\",null,[b,g._aData,r,d,p]),a.push(b),r++}else{e=l.sZeroRecords;1==t.iDraw&&\"ajax\"==E(t)?e=l.sLoadingRecords:l.sEmptyTable&&0===t.fnRecordsTotal()&&(e=l.sEmptyTable),a[0]=P(\"<tr/>\",{class:i?o[0]:\"\"}).append(P(\"<td />\",{valign:\"top\",colSpan:T(t),class:t.oClasses.sRowEmpty}).html(e))[0]}R(t,\"aoHeaderCallback\",\"header\",[P(t.nTHead).children(\"tr\")[0],ht(t),n,c,u]),R(t,\"aoFooterCallback\",\"footer\",[P(t.nTFoot).children(\"tr\")[0],ht(t),n,c,u]);s=P(t.nTBody);s.children().detach(),s.append(P(a)),R(t,\"aoDrawCallback\",\"draw\",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function u(t,e){var n=t.oFeatures,a=n.bSort,n=n.bFilter;a&&ie(t),n?Rt(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,v(t),t._drawHold=!1}function _t(t){for(var e,n,a,r,o,i,l,s=t.oClasses,u=P(t.nTable),u=P(\"<div/>\").insertBefore(u),c=t.oFeatures,f=P(\"<div/>\",{id:t.sTableId+\"_wrapper\",class:s.sWrapper+(t.nTFoot?\"\":\" \"+s.sNoFooter)}),d=(t.nHolding=u[0],t.nTableWrapper=f[0],t.nTableReinsertBefore=t.nTable.nextSibling,t.sDom.split(\"\")),h=0;h<d.length;h++){if(e=null,\"<\"==(n=d[h])){if(a=P(\"<div/>\")[0],\"\'\"==(r=d[h+1])||\'\"\'==r){for(o=\"\",i=2;d[h+i]!=r;)o+=d[h+i],i++;\"H\"==o?o=s.sJUIHeader:\"F\"==o&&(o=s.sJUIFooter),-1!=o.indexOf(\".\")?(l=o.split(\".\"),a.id=l[0].substr(1,l[0].length-1),a.className=l[1]):\"#\"==o.charAt(0)?a.id=o.substr(1,o.length-1):a.className=o,h+=i}f.append(a),f=P(a)}else if(\">\"==n)f=f.parent();else if(\"l\"==n&&c.bPaginate&&c.bLengthChange)e=$t(t);else if(\"f\"==n&&c.bFilter)e=Lt(t);else if(\"r\"==n&&c.bProcessing)e=Zt(t);else if(\"t\"==n)e=Kt(t);else if(\"i\"==n&&c.bInfo)e=Ut(t);else if(\"p\"==n&&c.bPaginate)e=zt(t);else if(0!==w.ext.feature.length)for(var p=w.ext.feature,g=0,b=p.length;g<b;g++)if(n==p[g].cFeature){e=p[g].fnInit(t);break}e&&((l=t.aanFeatures)[n]||(l[n]=[]),l[n].push(e),f.append(e))}u.replaceWith(f),t.nHolding=null}function wt(t,e){var n,a,r,o,i,l,s,u,c,f,d=P(e).children(\"tr\");for(t.splice(0,t.length),r=0,l=d.length;r<l;r++)t.push([]);for(r=0,l=d.length;r<l;r++)for(a=(n=d[r]).firstChild;a;){if(\"TD\"==a.nodeName.toUpperCase()||\"TH\"==a.nodeName.toUpperCase())for(u=(u=+a.getAttribute(\"colspan\"))&&0!=u&&1!=u?u:1,c=(c=+a.getAttribute(\"rowspan\"))&&0!=c&&1!=c?c:1,s=function(t,e,n){for(var a=t[e];a[n];)n++;return n}(t,r,0),f=1==u,i=0;i<u;i++)for(o=0;o<c;o++)t[r+o][s+i]={cell:a,unique:f},t[r+o].nTr=n;a=a.nextSibling}}function Ct(t,e,n){var a=[];n||(n=t.aoHeader,e&&wt(n=[],e));for(var r=0,o=n.length;r<o;r++)for(var i=0,l=n[r].length;i<l;i++)!n[r][i].unique||a[i]&&t.bSortCellsTop||(a[i]=n[r][i].cell);return a}function Tt(r,t,n){function e(t){var e=r.jqXHR?r.jqXHR.status:null;(null===t||\"number\"==typeof e&&204==e)&&Ft(r,t={},[]),(e=t.error||t.sError)&&W(r,0,e),r.json=t,R(r,null,\"xhr\",[r,t,r.jqXHR]),n(t)}R(r,\"aoServerParams\",\"serverParams\",[t]),t&&Array.isArray(t)&&(a={},o=/(.*?)\\[\\]$/,P.each(t,function(t,e){var n=e.name.match(o);n?(n=n[0],a[n]||(a[n]=[]),a[n].push(e.value)):a[e.name]=e.value}),t=a);var a,o,i,l=r.ajax,s=r.oInstance,u=(P.isPlainObject(l)&&l.data&&(u=\"function\"==typeof(i=l.data)?i(t,r):i,t=\"function\"==typeof i&&u?u:P.extend(!0,t,u),delete l.data),{data:t,success:e,dataType:\"json\",cache:!1,type:r.sServerMethod,error:function(t,e,n){var a=R(r,null,\"xhr\",[r,null,r.jqXHR]);-1===P.inArray(!0,a)&&(\"parsererror\"==e?W(r,0,\"Invalid JSON response\",1):4===t.readyState&&W(r,0,\"Ajax error\",7)),D(r,!1)}});r.oAjaxData=t,R(r,null,\"preXhr\",[r,t]),r.fnServerData?r.fnServerData.call(s,r.sAjaxSource,P.map(t,function(t,e){return{name:e,value:t}}),e,r):r.sAjaxSource||\"string\"==typeof l?r.jqXHR=P.ajax(P.extend(u,{url:l||r.sAjaxSource})):\"function\"==typeof l?r.jqXHR=l.call(s,t,e,r):(r.jqXHR=P.ajax(P.extend(u,l)),l.data=i)}function xt(e){e.iDraw++,D(e,!0),Tt(e,At(e),function(t){It(e,t)})}function At(t){for(var e,n,a,r=t.aoColumns,o=r.length,i=t.oFeatures,l=t.oPreviousSearch,s=t.aoPreSearchCols,u=[],c=I(t),f=t._iDisplayStart,d=!1!==i.bPaginate?t._iDisplayLength:-1,h=function(t,e){u.push({name:t,value:e})},p=(h(\"sEcho\",t.iDraw),h(\"iColumns\",o),h(\"sColumns\",H(r,\"sName\").join(\",\")),h(\"iDisplayStart\",f),h(\"iDisplayLength\",d),{draw:t.iDraw,columns:[],order:[],start:f,length:d,search:{value:l.sSearch,regex:l.bRegex}}),g=0;g<o;g++)n=r[g],a=s[g],e=\"function\"==typeof n.mData?\"function\":n.mData,p.columns.push({data:e,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),h(\"mDataProp_\"+g,e),i.bFilter&&(h(\"sSearch_\"+g,a.sSearch),h(\"bRegex_\"+g,a.bRegex),h(\"bSearchable_\"+g,n.bSearchable)),i.bSort&&h(\"bSortable_\"+g,n.bSortable);i.bFilter&&(h(\"sSearch\",l.sSearch),h(\"bRegex\",l.bRegex)),i.bSort&&(P.each(c,function(t,e){p.order.push({column:e.col,dir:e.dir}),h(\"iSortCol_\"+t,e.col),h(\"sSortDir_\"+t,e.dir)}),h(\"iSortingCols\",c.length));f=w.ext.legacy.ajax;return null===f?t.sAjaxSource?u:p:f?u:p}function It(t,n){function e(t,e){return n[t]!==N?n[t]:n[e]}var a=Ft(t,n),r=e(\"sEcho\",\"draw\"),o=e(\"iTotalRecords\",\"recordsTotal\"),i=e(\"iTotalDisplayRecords\",\"recordsFiltered\");if(r!==N){if(+r<t.iDraw)return;t.iDraw=+r}a=a||[],pt(t),t._iRecordsTotal=parseInt(o,10),t._iRecordsDisplay=parseInt(i,10);for(var l=0,s=a.length;l<s;l++)x(t,a[l]);t.aiDisplay=t.aiDisplayMaster.slice(),v(t,!0),t._bInitComplete||qt(t,n),D(t,!1)}function Ft(t,e,n){t=P.isPlainObject(t.ajax)&&t.ajax.dataSrc!==N?t.ajax.dataSrc:t.sAjaxDataProp;if(!n)return\"data\"===t?e.aaData||e[t]:\"\"!==t?A(t)(e):e;b(t)(e,n)}function Lt(n){function e(t){i.f;var e=this.value||\"\";o.return&&\"Enter\"!==t.key||e!=o.sSearch&&(Rt(n,{sSearch:e,bRegex:o.bRegex,bSmart:o.bSmart,bCaseInsensitive:o.bCaseInsensitive,return:o.return}),n._iDisplayStart=0,v(n))}var t=n.oClasses,a=n.sTableId,r=n.oLanguage,o=n.oPreviousSearch,i=n.aanFeatures,l=\'<input type=\"search\" class=\"\'+t.sFilterInput+\'\"/>\',s=(s=r.sSearch).match(/_INPUT_/)?s.replace(\"_INPUT_\",l):s+l,l=P(\"<div/>\",{id:i.f?null:a+\"_filter\",class:t.sFilter}).append(P(\"<label/>\").append(s)),t=null!==n.searchDelay?n.searchDelay:\"ssp\"===E(n)?400:0,u=P(\"input\",l).val(o.sSearch).attr(\"placeholder\",r.sSearchPlaceholder).on(\"keyup.DT search.DT input.DT paste.DT cut.DT\",t?ne(e,t):e).on(\"mouseup\",function(t){setTimeout(function(){e.call(u[0],t)},10)}).on(\"keypress.DT\",function(t){if(13==t.keyCode)return!1}).attr(\"aria-controls\",a);return P(n.nTable).on(\"search.dt.DT\",function(t,e){if(n===e)try{u[0]!==y.activeElement&&u.val(o.sSearch)}catch(t){}}),l[0]}function Rt(t,e,n){function a(t){o.sSearch=t.sSearch,o.bRegex=t.bRegex,o.bSmart=t.bSmart,o.bCaseInsensitive=t.bCaseInsensitive,o.return=t.return}function r(t){return t.bEscapeRegex!==N?!t.bEscapeRegex:t.bRegex}var o=t.oPreviousSearch,i=t.aoPreSearchCols;if(lt(t),\"ssp\"!=E(t)){Nt(t,e.sSearch,n,r(e),e.bSmart,e.bCaseInsensitive,e.return),a(e);for(var l=0;l<i.length;l++)jt(t,i[l].sSearch,l,r(i[l]),i[l].bSmart,i[l].bCaseInsensitive);Pt(t)}else a(e);t.bFiltered=!0,R(t,null,\"search\",[t])}function Pt(t){for(var e,n,a=w.ext.search,r=t.aiDisplay,o=0,i=a.length;o<i;o++){for(var l=[],s=0,u=r.length;s<u;s++)n=r[s],e=t.aoData[n],a[o](t,e._aFilterData,n,e._aData,s)&&l.push(n);r.length=0,P.merge(r,l)}}function jt(t,e,n,a,r,o){if(\"\"!==e){for(var i,l=[],s=t.aiDisplay,u=Ht(e,a,r,o),c=0;c<s.length;c++)i=t.aoData[s[c]]._aFilterData[n],u.test(i)&&l.push(s[c]);t.aiDisplay=l}}function Nt(t,e,n,a,r,o){var i,l,s,u=Ht(e,a,r,o),r=t.oPreviousSearch.sSearch,o=t.aiDisplayMaster,c=[];if(0!==w.ext.search.length&&(n=!0),l=Wt(t),e.length<=0)t.aiDisplay=o.slice();else{for((l||n||a||r.length>e.length||0!==e.indexOf(r)||t.bSorted)&&(t.aiDisplay=o.slice()),i=t.aiDisplay,s=0;s<i.length;s++)u.test(t.aoData[i[s]]._sFilterRow)&&c.push(i[s]);t.aiDisplay=c}}function Ht(t,e,n,a){return t=e?t:Ot(t),n&&(t=\"^(?=.*?\"+P.map(t.match(/\"[^\"]+\"|[^ ]+/g)||[\"\"],function(t){var e;return(t=\'\"\'===t.charAt(0)?(e=t.match(/^\"(.*)\"$/))?e[1]:t:t).replace(\'\"\',\"\")}).join(\")(?=.*?\")+\").*$\"),new RegExp(t,a?\"i\":\"\")}var Ot=w.util.escapeRegex,kt=P(\"<div>\")[0],Mt=kt.textContent!==N;function Wt(t){for(var e,n,a,r,o,i=t.aoColumns,l=!1,s=0,u=t.aoData.length;s<u;s++)if(!(o=t.aoData[s])._aFilterData){for(a=[],e=0,n=i.length;e<n;e++)i[e].bSearchable?\"string\"!=typeof(r=null===(r=S(t,s,e,\"filter\"))?\"\":r)&&r.toString&&(r=r.toString()):r=\"\",r.indexOf&&-1!==r.indexOf(\"&\")&&(kt.innerHTML=r,r=Mt?kt.textContent:kt.innerText),r.replace&&(r=r.replace(/[\\r\\n\\u2028]/g,\"\")),a.push(r);o._aFilterData=a,o._sFilterRow=a.join(\"  \"),l=!0}return l}function Et(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function Bt(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function Ut(t){var e=t.sTableId,n=t.aanFeatures.i,a=P(\"<div/>\",{class:t.oClasses.sInfo,id:n?null:e+\"_info\"});return n||(t.aoDrawCallback.push({fn:Vt,sName:\"information\"}),a.attr(\"role\",\"status\").attr(\"aria-live\",\"polite\"),P(t.nTable).attr(\"aria-describedby\",e+\"_info\")),a[0]}function Vt(t){var e,n,a,r,o,i,l=t.aanFeatures.i;0!==l.length&&(i=t.oLanguage,e=t._iDisplayStart+1,n=t.fnDisplayEnd(),a=t.fnRecordsTotal(),o=(r=t.fnRecordsDisplay())?i.sInfo:i.sInfoEmpty,r!==a&&(o+=\" \"+i.sInfoFiltered),o=Xt(t,o+=i.sInfoPostFix),null!==(i=i.fnInfoCallback)&&(o=i.call(t.oInstance,t,e,n,a,r,o)),P(l).html(o))}function Xt(t,e){var n=t.fnFormatNumber,a=t._iDisplayStart+1,r=t._iDisplayLength,o=t.fnRecordsDisplay(),i=-1===r;return e.replace(/_START_/g,n.call(t,a)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,i?1:Math.ceil(a/r))).replace(/_PAGES_/g,n.call(t,i?1:Math.ceil(o/r)))}function Jt(n){var a,t,e,r=n.iInitDisplayStart,o=n.aoColumns,i=n.oFeatures,l=n.bDeferLoading;if(n.bInitialised){for(_t(n),yt(n),Dt(n,n.aoHeader),Dt(n,n.aoFooter),D(n,!0),i.bAutoWidth&&ee(n),a=0,t=o.length;a<t;a++)(e=o[a]).sWidth&&(e.nTh.style.width=M(e.sWidth));R(n,null,\"preInit\",[n]),u(n);i=E(n);\"ssp\"==i&&!l||(\"ajax\"==i?Tt(n,[],function(t){var e=Ft(n,t);for(a=0;a<e.length;a++)x(n,e[a]);n.iInitDisplayStart=r,u(n),D(n,!1),qt(n,t)}):(D(n,!1),qt(n)))}else setTimeout(function(){Jt(n)},200)}function qt(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&O(t),R(t,null,\"plugin-init\",[t,e]),R(t,\"aoInitComplete\",\"init\",[t,e])}function Gt(t,e){e=parseInt(e,10);t._iDisplayLength=e,Se(t),R(t,null,\"length\",[t,e])}function $t(a){for(var t=a.oClasses,e=a.sTableId,n=a.aLengthMenu,r=Array.isArray(n[0]),o=r?n[0]:n,i=r?n[1]:n,l=P(\"<select/>\",{name:e+\"_length\",\"aria-controls\":e,class:t.sLengthSelect}),s=0,u=o.length;s<u;s++)l[0][s]=new Option(\"number\"==typeof i[s]?a.fnFormatNumber(i[s]):i[s],o[s]);var c=P(\"<div><label/></div>\").addClass(t.sLength);return a.aanFeatures.l||(c[0].id=e+\"_length\"),c.children().append(a.oLanguage.sLengthMenu.replace(\"_MENU_\",l[0].outerHTML)),P(\"select\",c).val(a._iDisplayLength).on(\"change.DT\",function(t){Gt(a,P(this).val()),v(a)}),P(a.nTable).on(\"length.dt.DT\",function(t,e,n){a===e&&P(\"select\",c).val(n)}),c[0]}function zt(t){function c(t){v(t)}var e=t.sPaginationType,f=w.ext.pager[e],d=\"function\"==typeof f,e=P(\"<div/>\").addClass(t.oClasses.sPaging+e)[0],h=t.aanFeatures;return d||f.fnInit(t,e,c),h.p||(e.id=t.sTableId+\"_paginate\",t.aoDrawCallback.push({fn:function(t){if(d)for(var e=t._iDisplayStart,n=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===n,o=r?0:Math.ceil(e/n),i=r?1:Math.ceil(a/n),l=f(o,i),s=0,u=h.p.length;s<u;s++)ve(t,\"pageButton\")(t,h.p[s],s,l,o,i);else f.fnUpdate(t,c)},sName:\"pagination\"})),e}function Yt(t,e,n){var a=t._iDisplayStart,r=t._iDisplayLength,o=t.fnRecordsDisplay(),o=(0===o||-1===r?a=0:\"number\"==typeof e?o<(a=e*r)&&(a=0):\"first\"==e?a=0:\"previous\"==e?(a=0<=r?a-r:0)<0&&(a=0):\"next\"==e?a+r<o&&(a+=r):\"last\"==e?a=Math.floor((o-1)/r)*r:W(t,0,\"Unknown paging action: \"+e,5),t._iDisplayStart!==a);return t._iDisplayStart=a,o?(R(t,null,\"page\",[t]),n&&v(t)):R(t,null,\"page-nc\",[t]),o}function Zt(t){return P(\"<div/>\",{id:t.aanFeatures.r?null:t.sTableId+\"_processing\",class:t.oClasses.sProcessing,role:\"status\"}).html(t.oLanguage.sProcessing).append(\"<div><div></div><div></div><div></div><div></div></div>\").insertBefore(t.nTable)[0]}function D(t,e){t.oFeatures.bProcessing&&P(t.aanFeatures.r).css(\"display\",e?\"block\":\"none\"),R(t,null,\"processing\",[t,e])}function Kt(t){var e,n,a,r,o,i,l,s,u,c,f,d,h=P(t.nTable),p=t.oScroll;return\"\"===p.sX&&\"\"===p.sY?t.nTable:(e=p.sX,n=p.sY,a=t.oClasses,o=(r=h.children(\"caption\")).length?r[0]._captionSide:null,s=P(h[0].cloneNode(!1)),i=P(h[0].cloneNode(!1)),u=function(t){return t?M(t):null},(l=h.children(\"tfoot\")).length||(l=null),s=P(f=\"<div/>\",{class:a.sScrollWrapper}).append(P(f,{class:a.sScrollHead}).css({overflow:\"hidden\",position:\"relative\",border:0,width:e?u(e):\"100%\"}).append(P(f,{class:a.sScrollHeadInner}).css({\"box-sizing\":\"content-box\",width:p.sXInner||\"100%\"}).append(s.removeAttr(\"id\").css(\"margin-left\",0).append(\"top\"===o?r:null).append(h.children(\"thead\"))))).append(P(f,{class:a.sScrollBody}).css({position:\"relative\",overflow:\"auto\",width:u(e)}).append(h)),l&&s.append(P(f,{class:a.sScrollFoot}).css({overflow:\"hidden\",border:0,width:e?u(e):\"100%\"}).append(P(f,{class:a.sScrollFootInner}).append(i.removeAttr(\"id\").css(\"margin-left\",0).append(\"bottom\"===o?r:null).append(h.children(\"tfoot\"))))),u=s.children(),c=u[0],f=u[1],d=l?u[2]:null,e&&P(f).on(\"scroll.DT\",function(t){var e=this.scrollLeft;c.scrollLeft=e,l&&(d.scrollLeft=e)}),P(f).css(\"max-height\",n),p.bCollapse||P(f).css(\"height\",n),t.nScrollHead=c,t.nScrollBody=f,t.nScrollFoot=d,t.aoDrawCallback.push({fn:Qt,sName:\"scrolling\"}),s[0])}function Qt(n){function t(t){(t=t.style).paddingTop=\"0\",t.paddingBottom=\"0\",t.borderTopWidth=\"0\",t.borderBottomWidth=\"0\",t.height=0}var e,a,r,o,i,l=n.oScroll,s=l.sX,u=l.sXInner,c=l.sY,l=l.iBarWidth,f=P(n.nScrollHead),d=f[0].style,h=f.children(\"div\"),p=h[0].style,h=h.children(\"table\"),g=n.nScrollBody,b=P(g),m=g.style,S=P(n.nScrollFoot).children(\"div\"),v=S.children(\"table\"),y=P(n.nTHead),D=P(n.nTable),_=D[0],w=_.style,C=n.nTFoot?P(n.nTFoot):null,T=n.oBrowser,x=T.bScrollOversize,A=(H(n.aoColumns,\"nTh\"),[]),I=[],F=[],L=[],R=g.scrollHeight>g.clientHeight;n.scrollBarVis!==R&&n.scrollBarVis!==N?(n.scrollBarVis=R,O(n)):(n.scrollBarVis=R,D.children(\"thead, tfoot\").remove(),C&&(R=C.clone().prependTo(D),i=C.find(\"tr\"),a=R.find(\"tr\"),R.find(\"[id]\").removeAttr(\"id\")),R=y.clone().prependTo(D),y=y.find(\"tr\"),e=R.find(\"tr\"),R.find(\"th, td\").removeAttr(\"tabindex\"),R.find(\"[id]\").removeAttr(\"id\"),s||(m.width=\"100%\",f[0].style.width=\"100%\"),P.each(Ct(n,R),function(t,e){r=rt(n,t),e.style.width=n.aoColumns[r].sWidth}),C&&k(function(t){t.style.width=\"\"},a),f=D.outerWidth(),\"\"===s?(w.width=\"100%\",x&&(D.find(\"tbody\").height()>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\"))&&(w.width=M(D.outerWidth()-l)),f=D.outerWidth()):\"\"!==u&&(w.width=M(u),f=D.outerWidth()),k(t,e),k(function(t){var e=j.getComputedStyle?j.getComputedStyle(t).width:M(P(t).width());F.push(t.innerHTML),A.push(e)},e),k(function(t,e){t.style.width=A[e]},y),P(e).css(\"height\",0),C&&(k(t,a),k(function(t){L.push(t.innerHTML),I.push(M(P(t).css(\"width\")))},a),k(function(t,e){t.style.width=I[e]},i),P(a).height(0)),k(function(t,e){t.innerHTML=\'<div class=\"dataTables_sizing\">\'+F[e]+\"</div>\",t.childNodes[0].style.height=\"0\",t.childNodes[0].style.overflow=\"hidden\",t.style.width=A[e]},e),C&&k(function(t,e){t.innerHTML=\'<div class=\"dataTables_sizing\">\'+L[e]+\"</div>\",t.childNodes[0].style.height=\"0\",t.childNodes[0].style.overflow=\"hidden\",t.style.width=I[e]},a),Math.round(D.outerWidth())<Math.round(f)?(o=g.scrollHeight>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\")?f+l:f,x&&(g.scrollHeight>g.offsetHeight||\"scroll\"==b.css(\"overflow-y\"))&&(w.width=M(o-l)),\"\"!==s&&\"\"===u||W(n,1,\"Possible column misalignment\",6)):o=\"100%\",m.width=M(o),d.width=M(o),C&&(n.nScrollFoot.style.width=M(o)),c||x&&(m.height=M(_.offsetHeight+l)),R=D.outerWidth(),h[0].style.width=M(R),p.width=M(R),y=D.height()>g.clientHeight||\"scroll\"==b.css(\"overflow-y\"),p[i=\"padding\"+(T.bScrollbarLeft?\"Left\":\"Right\")]=y?l+\"px\":\"0px\",C&&(v[0].style.width=M(R),S[0].style.width=M(R),S[0].style[i]=y?l+\"px\":\"0px\"),D.children(\"colgroup\").insertBefore(D.children(\"thead\")),b.trigger(\"scroll\"),!n.bSorted&&!n.bFiltered||n._drawHold||(g.scrollTop=0))}function k(t,e,n){for(var a,r,o=0,i=0,l=e.length;i<l;){for(a=e[i].firstChild,r=n?n[i].firstChild:null;a;)1===a.nodeType&&(n?t(a,r,o):t(a,o),o++),a=a.nextSibling,r=n?r.nextSibling:null;i++}}var te=/<.*?>/g;function ee(t){var e,n,a=t.nTable,r=t.aoColumns,o=t.oScroll,i=o.sY,l=o.sX,o=o.sXInner,s=r.length,u=it(t,\"bVisible\"),c=P(\"th\",t.nTHead),f=a.getAttribute(\"width\"),d=a.parentNode,h=!1,p=t.oBrowser,g=p.bScrollOversize,b=a.style.width;for(b&&-1!==b.indexOf(\"%\")&&(f=b),D=0;D<u.length;D++)null!==(e=r[u[D]]).sWidth&&(e.sWidth=ae(e.sWidthOrig,d),h=!0);if(g||!h&&!l&&!i&&s==T(t)&&s==c.length)for(D=0;D<s;D++){var m=rt(t,D);null!==m&&(r[m].sWidth=M(c.eq(D).width()))}else{var b=P(a).clone().css(\"visibility\",\"hidden\").removeAttr(\"id\"),S=(b.find(\"tbody tr\").remove(),P(\"<tr/>\").appendTo(b.find(\"tbody\")));for(b.find(\"thead, tfoot\").remove(),b.append(P(t.nTHead).clone()).append(P(t.nTFoot).clone()),b.find(\"tfoot th, tfoot td\").css(\"width\",\"\"),c=Ct(t,b.find(\"thead\")[0]),D=0;D<u.length;D++)e=r[u[D]],c[D].style.width=null!==e.sWidthOrig&&\"\"!==e.sWidthOrig?M(e.sWidthOrig):\"\",e.sWidthOrig&&l&&P(c[D]).append(P(\"<div/>\").css({width:e.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(t.aoData.length)for(D=0;D<u.length;D++)e=r[n=u[D]],P(re(t,n)).clone(!1).append(e.sContentPadding).appendTo(S);P(\"[name]\",b).removeAttr(\"name\");for(var v=P(\"<div/>\").css(l||i?{position:\"absolute\",top:0,left:0,height:1,right:0,overflow:\"hidden\"}:{}).append(b).appendTo(d),y=(l&&o?b.width(o):l?(b.css(\"width\",\"auto\"),b.removeAttr(\"width\"),b.width()<d.clientWidth&&f&&b.width(d.clientWidth)):i?b.width(d.clientWidth):f&&b.width(f),0),D=0;D<u.length;D++){var _=P(c[D]),w=_.outerWidth()-_.width(),_=p.bBounding?Math.ceil(c[D].getBoundingClientRect().width):_.outerWidth();y+=_,r[u[D]].sWidth=M(_-w)}a.style.width=M(y),v.remove()}f&&(a.style.width=M(f)),!f&&!l||t._reszEvt||(o=function(){P(j).on(\"resize.DT-\"+t.sInstance,ne(function(){O(t)}))},g?setTimeout(o,1e3):o(),t._reszEvt=!0)}var ne=w.util.throttle;function ae(t,e){return t?(e=(t=P(\"<div/>\").css(\"width\",M(t)).appendTo(e||y.body))[0].offsetWidth,t.remove(),e):0}function re(t,e){var n,a=oe(t,e);return a<0?null:(n=t.aoData[a]).nTr?n.anCells[e]:P(\"<td/>\").html(S(t,a,e,\"display\"))[0]}function oe(t,e){for(var n,a=-1,r=-1,o=0,i=t.aoData.length;o<i;o++)(n=(n=(n=S(t,o,e,\"display\")+\"\").replace(te,\"\")).replace(/&nbsp;/g,\" \")).length>a&&(a=n.length,r=o);return r}function M(t){return null===t?\"0px\":\"number\"==typeof t?t<0?\"0px\":t+\"px\":t.match(/\\d$/)?t+\"px\":t}function I(t){function e(t){t.length&&!Array.isArray(t[0])?h.push(t):P.merge(h,t)}var n,a,r,o,i,l,s,u=[],c=t.aoColumns,f=t.aaSortingFixed,d=P.isPlainObject(f),h=[];for(Array.isArray(f)&&e(f),d&&f.pre&&e(f.pre),e(t.aaSorting),d&&f.post&&e(f.post),n=0;n<h.length;n++)for(r=(o=c[s=h[n][a=0]].aDataSort).length;a<r;a++)l=c[i=o[a]].sType||\"string\",h[n]._idx===N&&(h[n]._idx=P.inArray(h[n][1],c[i].asSorting)),u.push({src:s,col:i,dir:h[n][1],index:h[n]._idx,type:l,formatter:w.ext.type.order[l+\"-pre\"]});return u}function ie(t){var e,n,a,r,c,f=[],u=w.ext.type.order,d=t.aoData,o=(t.aoColumns,0),i=t.aiDisplayMaster;for(lt(t),e=0,n=(c=I(t)).length;e<n;e++)(r=c[e]).formatter&&o++,fe(t,r.col);if(\"ssp\"!=E(t)&&0!==c.length){for(e=0,a=i.length;e<a;e++)f[i[e]]=e;o===c.length?i.sort(function(t,e){for(var n,a,r,o,i=c.length,l=d[t]._aSortData,s=d[e]._aSortData,u=0;u<i;u++)if(0!=(r=(n=l[(o=c[u]).col])<(a=s[o.col])?-1:a<n?1:0))return\"asc\"===o.dir?r:-r;return(n=f[t])<(a=f[e])?-1:a<n?1:0}):i.sort(function(t,e){for(var n,a,r,o=c.length,i=d[t]._aSortData,l=d[e]._aSortData,s=0;s<o;s++)if(n=i[(r=c[s]).col],a=l[r.col],0!==(r=(u[r.type+\"-\"+r.dir]||u[\"string-\"+r.dir])(n,a)))return r;return(n=f[t])<(a=f[e])?-1:a<n?1:0})}t.bSorted=!0}function le(t){for(var e=t.aoColumns,n=I(t),a=t.oLanguage.oAria,r=0,o=e.length;r<o;r++){var i=e[r],l=i.asSorting,s=i.ariaTitle||i.sTitle.replace(/<.*?>/g,\"\"),u=i.nTh;u.removeAttribute(\"aria-sort\"),i=i.bSortable?s+(\"asc\"===(0<n.length&&n[0].col==r&&(u.setAttribute(\"aria-sort\",\"asc\"==n[0].dir?\"ascending\":\"descending\"),l[n[0].index+1])||l[0])?a.sSortAscending:a.sSortDescending):s,u.setAttribute(\"aria-label\",i)}}function se(t,e,n,a){function r(t,e){var n=t._idx;return(n=n===N?P.inArray(t[1],s):n)+1<s.length?n+1:e?null:0}var o,i=t.aoColumns[e],l=t.aaSorting,s=i.asSorting;\"number\"==typeof l[0]&&(l=t.aaSorting=[l]),n&&t.oFeatures.bSortMulti?-1!==(i=P.inArray(e,H(l,\"0\")))?null===(o=null===(o=r(l[i],!0))&&1===l.length?0:o)?l.splice(i,1):(l[i][1]=s[o],l[i]._idx=o):(l.push([e,s[0],0]),l[l.length-1]._idx=0):l.length&&l[0][0]==e?(o=r(l[0]),l.length=1,l[0][1]=s[o],l[0]._idx=o):(l.length=0,l.push([e,s[0]]),l[0]._idx=0),u(t),\"function\"==typeof a&&a(t)}function ue(e,t,n,a){var r=e.aoColumns[n];me(t,{},function(t){!1!==r.bSortable&&(e.oFeatures.bProcessing?(D(e,!0),setTimeout(function(){se(e,n,t.shiftKey,a),\"ssp\"!==E(e)&&D(e,!1)},0)):se(e,n,t.shiftKey,a))})}function ce(t){var e,n,a,r=t.aLastSort,o=t.oClasses.sSortColumn,i=I(t),l=t.oFeatures;if(l.bSort&&l.bSortClasses){for(e=0,n=r.length;e<n;e++)a=r[e].src,P(H(t.aoData,\"anCells\",a)).removeClass(o+(e<2?e+1:3));for(e=0,n=i.length;e<n;e++)a=i[e].src,P(H(t.aoData,\"anCells\",a)).addClass(o+(e<2?e+1:3))}t.aLastSort=i}function fe(t,e){for(var n,a,r,o=t.aoColumns[e],i=w.ext.order[o.sSortDataType],l=(i&&(n=i.call(t.oInstance,t,e,ot(t,e))),w.ext.type.order[o.sType+\"-pre\"]),s=0,u=t.aoData.length;s<u;s++)(a=t.aoData[s])._aSortData||(a._aSortData=[]),a._aSortData[e]&&!i||(r=i?n[s]:S(t,s,e,\"sort\"),a._aSortData[e]=l?l(r):r)}function de(n){var t;n._bLoadingState||(t={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:P.extend(!0,[],n.aaSorting),search:Et(n.oPreviousSearch),columns:P.map(n.aoColumns,function(t,e){return{visible:t.bVisible,search:Et(n.aoPreSearchCols[e])}})},n.oSavedState=t,R(n,\"aoStateSaveParams\",\"stateSaveParams\",[n,t]),n.oFeatures.bStateSave&&!n.bDestroying&&n.fnStateSaveCallback.call(n.oInstance,n,t))}function he(e,t,n){var a;if(e.oFeatures.bStateSave)return(a=e.fnStateLoadCallback.call(e.oInstance,e,function(t){pe(e,t,n)}))!==N&&pe(e,a,n),!0;n()}function pe(n,t,e){var a,r,o=n.aoColumns,i=(n._bLoadingState=!0,n._bInitComplete?new w.Api(n):null);if(t&&t.time){var l=R(n,\"aoStateLoadParams\",\"stateLoadParams\",[n,t]);if(-1!==P.inArray(!1,l))n._bLoadingState=!1;else{l=n.iStateDuration;if(0<l&&t.time<+new Date-1e3*l)n._bLoadingState=!1;else if(t.columns&&o.length!==t.columns.length)n._bLoadingState=!1;else{if(n.oLoadedState=P.extend(!0,{},t),t.length!==N&&(i?i.page.len(t.length):n._iDisplayLength=t.length),t.start!==N&&(null===i?(n._iDisplayStart=t.start,n.iInitDisplayStart=t.start):Yt(n,t.start/n._iDisplayLength)),t.order!==N&&(n.aaSorting=[],P.each(t.order,function(t,e){n.aaSorting.push(e[0]>=o.length?[0,e[1]]:e)})),t.search!==N&&P.extend(n.oPreviousSearch,Bt(t.search)),t.columns){for(a=0,r=t.columns.length;a<r;a++){var s=t.columns[a];s.visible!==N&&(i?i.column(a).visible(s.visible,!1):o[a].bVisible=s.visible),s.search!==N&&P.extend(n.aoPreSearchCols[a],Bt(s.search))}i&&i.columns.adjust()}n._bLoadingState=!1,R(n,\"aoStateLoaded\",\"stateLoaded\",[n,t])}}}else n._bLoadingState=!1;e()}function ge(t){var e=w.settings,t=P.inArray(t,H(e,\"nTable\"));return-1!==t?e[t]:null}function W(t,e,n,a){if(n=\"DataTables warning: \"+(t?\"table id=\"+t.sTableId+\" - \":\"\")+n,a&&(n+=\". For more information about this error, please see http://datatables.net/tn/\"+a),e)j.console&&console.log&&console.log(n);else{e=w.ext,e=e.sErrMode||e.errMode;if(t&&R(t,null,\"error\",[t,a,n]),\"alert\"==e)alert(n);else{if(\"throw\"==e)throw new Error(n);\"function\"==typeof e&&e(t,a,n)}}}function F(n,a,t,e){Array.isArray(t)?P.each(t,function(t,e){Array.isArray(e)?F(n,a,e[0],e[1]):F(n,a,e)}):(e===N&&(e=t),a[t]!==N&&(n[e]=a[t]))}function be(t,e,n){var a,r;for(r in e)e.hasOwnProperty(r)&&(a=e[r],P.isPlainObject(a)?(P.isPlainObject(t[r])||(t[r]={}),P.extend(!0,t[r],a)):n&&\"data\"!==r&&\"aaData\"!==r&&Array.isArray(a)?t[r]=a.slice():t[r]=a);return t}function me(e,t,n){P(e).on(\"click.DT\",t,function(t){P(e).trigger(\"blur\"),n(t)}).on(\"keypress.DT\",t,function(t){13===t.which&&(t.preventDefault(),n(t))}).on(\"selectstart.DT\",function(){return!1})}function L(t,e,n,a){n&&t[e].push({fn:n,sName:a})}function R(n,t,e,a){var r=[];return t&&(r=P.map(n[t].slice().reverse(),function(t,e){return t.fn.apply(n.oInstance,a)})),null!==e&&(t=P.Event(e+\".dt\"),(e=P(n.nTable)).trigger(t,a),0===e.parents(\"body\").length&&P(\"body\").trigger(t,a),r.push(t.result)),r}function Se(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),a=t._iDisplayLength;n<=e&&(e=n-a),e-=e%a,t._iDisplayStart=e=-1===a||e<0?0:e}function ve(t,e){var t=t.renderer,n=w.ext.renderer[e];return P.isPlainObject(t)&&t[e]?n[t[e]]||n._:\"string\"==typeof t&&n[t]||n._}function E(t){return t.oFeatures.bServerSide?\"ssp\":t.ajax||t.sAjaxSource?\"ajax\":\"dom\"}function ye(t,n){var a;return Array.isArray(t)?P.map(t,function(t){return ye(t,n)}):\"number\"==typeof t?[n[t]]:(a=P.map(n,function(t,e){return t.nTable}),P(a).filter(t).map(function(t){var e=P.inArray(this,a);return n[e]}).toArray())}function De(r,o,t){var e,n;t&&(e=new B(r)).one(\"draw\",function(){t(e.ajax.json())}),\"ssp\"==E(r)?u(r,o):(D(r,!0),(n=r.jqXHR)&&4!==n.readyState&&n.abort(),Tt(r,[],function(t){pt(r);for(var e=Ft(r,t),n=0,a=e.length;n<a;n++)x(r,e[n]);u(r,o),D(r,!1)}))}function _e(t,e,n,a,r){for(var o,i,l,s,u=[],c=typeof e,f=0,d=(e=e&&\"string\"!=c&&\"function\"!=c&&e.length!==N?e:[e]).length;f<d;f++)for(l=0,s=(i=e[f]&&e[f].split&&!e[f].match(/[\\[\\(:]/)?e[f].split(\",\"):[e[f]]).length;l<s;l++)(o=n(\"string\"==typeof i[l]?i[l].trim():i[l]))&&o.length&&(u=u.concat(o));var h=p.selector[t];if(h.length)for(f=0,d=h.length;f<d;f++)u=h[f](a,r,u);return z(u)}function we(t){return(t=t||{}).filter&&t.search===N&&(t.search=t.filter),P.extend({search:\"none\",order:\"current\",page:\"all\"},t)}function Ce(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t}function Te(o,t,e,n){function i(t,e){var n;if(Array.isArray(t)||t instanceof P)for(var a=0,r=t.length;a<r;a++)i(t[a],e);else t.nodeName&&\"tr\"===t.nodeName.toLowerCase()?l.push(t):(n=P(\"<tr><td></td></tr>\").addClass(e),P(\"td\",n).addClass(e).html(t)[0].colSpan=T(o),l.push(n[0]))}var l=[];i(e,n),t._details&&t._details.detach(),t._details=P(l),t._detailsShow&&t._details.insertAfter(t.nTr)}function xe(t,e){var n=t.context;if(n.length&&t.length){var a=n[0].aoData[t[0]];if(a._details){(a._detailsShow=e)?(a._details.insertAfter(a.nTr),P(a.nTr).addClass(\"dt-hasChild\")):(a._details.detach(),P(a.nTr).removeClass(\"dt-hasChild\")),R(n[0],null,\"childRow\",[e,t.row(t[0])]);var s=n[0],r=new B(s),a=\".dt.DT_details\",e=\"draw\"+a,t=\"column-sizing\"+a,a=\"destroy\"+a,u=s.aoData;if(r.off(e+\" \"+t+\" \"+a),H(u,\"_details\").length>0){r.on(e,function(t,e){if(s!==e)return;r.rows({page:\"current\"}).eq(0).each(function(t){var e=u[t];if(e._detailsShow)e._details.insertAfter(e.nTr)})});r.on(t,function(t,e,n,a){if(s!==e)return;var r,o=T(e);for(var i=0,l=u.length;i<l;i++){r=u[i];if(r._details)r._details.children(\"td[colspan]\").attr(\"colspan\",o)}});r.on(a,function(t,e){if(s!==e)return;for(var n=0,a=u.length;n<a;n++)if(u[n]._details)Re(r,n)})}Le(n)}}}function Ae(t,e,n,a,r){for(var o=[],i=0,l=r.length;i<l;i++)o.push(S(t,r[i],e));return o}var Ie=[],o=Array.prototype,B=function(t,e){if(!(this instanceof B))return new B(t,e);function n(t){var e,n,a,r;t=t,a=w.settings,r=P.map(a,function(t,e){return t.nTable}),(t=t?t.nTable&&t.oApi?[t]:t.nodeName&&\"table\"===t.nodeName.toLowerCase()?-1!==(e=P.inArray(t,r))?[a[e]]:null:t&&\"function\"==typeof t.settings?t.settings().toArray():(\"string\"==typeof t?n=P(t):t instanceof P&&(n=t),n?n.map(function(t){return-1!==(e=P.inArray(this,r))?a[e]:null}).toArray():void 0):[])&&o.push.apply(o,t)}var o=[];if(Array.isArray(t))for(var a=0,r=t.length;a<r;a++)n(t[a]);else n(t);this.context=z(o),e&&P.merge(this,e),this.selector={rows:null,cols:null,opts:null},B.extend(this,this,Ie)},Fe=(w.Api=B,P.extend(B.prototype,{any:function(){return 0!==this.count()},concat:o.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new B(e[t],this[t]):null},filter:function(t){var e=[];if(o.filter)e=o.filter.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new B(this.context,e)},flatten:function(){var t=[];return new B(this.context,t.concat.apply(t,this.toArray()))},join:o.join,indexOf:o.indexOf||function(t,e){for(var n=e||0,a=this.length;n<a;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,a){var r,o,i,l,s,u,c,f,d=[],h=this.context,p=this.selector;for(\"string\"==typeof t&&(a=n,n=e,e=t,t=!1),o=0,i=h.length;o<i;o++){var g=new B(h[o]);if(\"table\"===e)(r=n.call(g,h[o],o))!==N&&d.push(r);else if(\"columns\"===e||\"rows\"===e)(r=n.call(g,h[o],this[o],o))!==N&&d.push(r);else if(\"column\"===e||\"column-rows\"===e||\"row\"===e||\"cell\"===e)for(c=this[o],\"column-rows\"===e&&(u=Fe(h[o],p.opts)),l=0,s=c.length;l<s;l++)f=c[l],(r=\"cell\"===e?n.call(g,h[o],f.row,f.column,o,l):n.call(g,h[o],f,o,l,u))!==N&&d.push(r)}return d.length||a?((t=(a=new B(h,t?d.concat.apply([],d):d)).selector).rows=p.rows,t.cols=p.cols,t.opts=p.opts,a):this},lastIndexOf:o.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(o.map)e=o.map.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)e.push(t.call(this,this[n],n));return new B(this.context,e)},pluck:function(t){var e=w.util.get(t);return this.map(function(t){return e(t)})},pop:o.pop,push:o.push,reduce:o.reduce||function(t,e){return et(this,t,e,0,this.length,1)},reduceRight:o.reduceRight||function(t,e){return et(this,t,e,this.length-1,-1,-1)},reverse:o.reverse,selector:null,shift:o.shift,slice:function(){return new B(this.context,this)},sort:o.sort,splice:o.splice,toArray:function(){return o.slice.call(this)},to$:function(){return P(this)},toJQuery:function(){return P(this)},unique:function(){return new B(this.context,z(this))},unshift:o.unshift}),B.extend=function(t,e,n){if(n.length&&e&&(e instanceof B||e.__dt_wrapper))for(var a,r=0,o=n.length;r<o;r++)e[(a=n[r]).name]=\"function\"===a.type?function(e,n,a){return function(){var t=n.apply(e,arguments);return B.extend(t,t,a.methodExt),t}}(t,a.val,a):\"object\"===a.type?{}:a.val,e[a.name].__dt_wrapper=!0,B.extend(t,e[a.name],a.propExt)},B.register=e=function(t,e){if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)B.register(t[n],e);else for(var r=t.split(\".\"),o=Ie,i=0,l=r.length;i<l;i++){var s,u,c=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n].name===e)return t[n];return null}(o,u=(s=-1!==r[i].indexOf(\"()\"))?r[i].replace(\"()\",\"\"):r[i]);c||o.push(c={name:u,val:{},methodExt:[],propExt:[],type:\"object\"}),i===l-1?(c.val=e,c.type=\"function\"==typeof e?\"function\":P.isPlainObject(e)?\"object\":\"other\"):o=s?c.methodExt:c.propExt}},B.registerPlural=t=function(t,e,n){B.register(t,n),B.register(e,function(){var t=n.apply(this,arguments);return t===this?this:t instanceof B?t.length?Array.isArray(t[0])?new B(t.context,t[0]):t[0]:N:t})},e(\"tables()\",function(t){return t!==N&&null!==t?new B(ye(t,this.context)):this}),e(\"table()\",function(t){var t=this.tables(t),e=t.context;return e.length?new B(e[0]):t}),t(\"tables().nodes()\",\"table().node()\",function(){return this.iterator(\"table\",function(t){return t.nTable},1)}),t(\"tables().body()\",\"table().body()\",function(){return this.iterator(\"table\",function(t){return t.nTBody},1)}),t(\"tables().header()\",\"table().header()\",function(){return this.iterator(\"table\",function(t){return t.nTHead},1)}),t(\"tables().footer()\",\"table().footer()\",function(){return this.iterator(\"table\",function(t){return t.nTFoot},1)}),t(\"tables().containers()\",\"table().container()\",function(){return this.iterator(\"table\",function(t){return t.nTableWrapper},1)}),e(\"draw()\",function(e){return this.iterator(\"table\",function(t){\"page\"===e?v(t):u(t,!1===(e=\"string\"==typeof e?\"full-hold\"!==e:e))})}),e(\"page()\",function(e){return e===N?this.page.info().page:this.iterator(\"table\",function(t){Yt(t,e)})}),e(\"page.info()\",function(t){var e,n,a,r,o;return 0===this.context.length?N:(n=(e=this.context[0])._iDisplayStart,a=e.oFeatures.bPaginate?e._iDisplayLength:-1,r=e.fnRecordsDisplay(),{page:(o=-1===a)?0:Math.floor(n/a),pages:o?1:Math.ceil(r/a),start:n,end:e.fnDisplayEnd(),length:a,recordsTotal:e.fnRecordsTotal(),recordsDisplay:r,serverSide:\"ssp\"===E(e)})}),e(\"page.len()\",function(e){return e===N?0!==this.context.length?this.context[0]._iDisplayLength:N:this.iterator(\"table\",function(t){Gt(t,e)})}),e(\"ajax.json()\",function(){var t=this.context;if(0<t.length)return t[0].json}),e(\"ajax.params()\",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),e(\"ajax.reload()\",function(e,n){return this.iterator(\"table\",function(t){De(t,!1===n,e)})}),e(\"ajax.url()\",function(e){var t=this.context;return e===N?0===t.length?N:(t=t[0]).ajax?P.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource:this.iterator(\"table\",function(t){P.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),e(\"ajax.url().load()\",function(e,n){return this.iterator(\"table\",function(t){De(t,!1===n,e)})}),function(t,e){var n,a=[],r=t.aiDisplay,o=t.aiDisplayMaster,i=e.search,l=e.order,e=e.page;if(\"ssp\"==E(t))return\"removed\"===i?[]:f(0,o.length);if(\"current\"==e)for(u=t._iDisplayStart,c=t.fnDisplayEnd();u<c;u++)a.push(r[u]);else if(\"current\"==l||\"applied\"==l){if(\"none\"==i)a=o.slice();else if(\"applied\"==i)a=r.slice();else if(\"removed\"==i){for(var s={},u=0,c=r.length;u<c;u++)s[r[u]]=null;a=P.map(o,function(t){return s.hasOwnProperty(t)?null:t})}}else if(\"index\"==l||\"original\"==l)for(u=0,c=t.aoData.length;u<c;u++)(\"none\"==i||-1===(n=P.inArray(u,r))&&\"removed\"==i||0<=n&&\"applied\"==i)&&a.push(u);return a}),Le=(e(\"rows()\",function(e,n){e===N?e=\"\":P.isPlainObject(e)&&(n=e,e=\"\"),n=we(n);var t=this.iterator(\"table\",function(t){return _e(\"row\",e,function(n){var t=d(n),a=r.aoData;if(null!==t&&!o)return[t];if(i=i||Fe(r,o),null!==t&&-1!==P.inArray(t,i))return[t];if(null===n||n===N||\"\"===n)return i;if(\"function\"==typeof n)return P.map(i,function(t){var e=a[t];return n(t,e._aData,e.nTr)?t:null});if(n.nodeName)return t=n._DT_RowIndex,e=n._DT_CellIndex,t!==N?a[t]&&a[t].nTr===n?[t]:[]:e?a[e.row]&&a[e.row].nTr===n.parentNode?[e.row]:[]:(t=P(n).closest(\"*[data-dt-row]\")).length?[t.data(\"dt-row\")]:[];if(\"string\"==typeof n&&\"#\"===n.charAt(0)){var e=r.aIds[n.replace(/^#/,\"\")];if(e!==N)return[e.idx]}t=_(m(r.aoData,i,\"nTr\"));return P(t).filter(n).map(function(){return this._DT_RowIndex}).toArray()},r=t,o=n);var r,o,i},1);return t.selector.rows=e,t.selector.opts=n,t}),e(\"rows().nodes()\",function(){return this.iterator(\"row\",function(t,e){return t.aoData[e].nTr||N},1)}),e(\"rows().data()\",function(){return this.iterator(!0,\"rows\",function(t,e){return m(t.aoData,e,\"_aData\")},1)}),t(\"rows().cache()\",\"row().cache()\",function(n){return this.iterator(\"row\",function(t,e){t=t.aoData[e];return\"search\"===n?t._aFilterData:t._aSortData},1)}),t(\"rows().invalidate()\",\"row().invalidate()\",function(n){return this.iterator(\"row\",function(t,e){bt(t,e,n)})}),t(\"rows().indexes()\",\"row().index()\",function(){return this.iterator(\"row\",function(t,e){return e},1)}),t(\"rows().ids()\",\"row().id()\",function(t){for(var e=[],n=this.context,a=0,r=n.length;a<r;a++)for(var o=0,i=this[a].length;o<i;o++){var l=n[a].rowIdFn(n[a].aoData[this[a][o]]._aData);e.push((!0===t?\"#\":\"\")+l)}return new B(n,e)}),t(\"rows().remove()\",\"row().remove()\",function(){var f=this;return this.iterator(\"row\",function(t,e,n){var a,r,o,i,l,s,u=t.aoData,c=u[e];for(u.splice(e,1),a=0,r=u.length;a<r;a++)if(s=(l=u[a]).anCells,null!==l.nTr&&(l.nTr._DT_RowIndex=a),null!==s)for(o=0,i=s.length;o<i;o++)s[o]._DT_CellIndex.row=a;gt(t.aiDisplayMaster,e),gt(t.aiDisplay,e),gt(f[n],e,!1),0<t._iRecordsDisplay&&t._iRecordsDisplay--,Se(t);n=t.rowIdFn(c._aData);n!==N&&delete t.aIds[n]}),this.iterator(\"table\",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),e(\"rows.add()\",function(o){var t=this.iterator(\"table\",function(t){for(var e,n=[],a=0,r=o.length;a<r;a++)(e=o[a]).nodeName&&\"TR\"===e.nodeName.toUpperCase()?n.push(ut(t,e)[0]):n.push(x(t,e));return n},1),e=this.rows(-1);return e.pop(),P.merge(e,t),e}),e(\"row()\",function(t,e){return Ce(this.rows(t,e))}),e(\"row().data()\",function(t){var e,n=this.context;return t===N?n.length&&this.length?n[0].aoData[this[0]]._aData:N:((e=n[0].aoData[this[0]])._aData=t,Array.isArray(t)&&e.nTr&&e.nTr.id&&b(n[0].rowId)(t,e.nTr.id),bt(n[0],this[0],\"data\"),this)}),e(\"row().node()\",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null}),e(\"row.add()\",function(e){e instanceof P&&e.length&&(e=e[0]);var t=this.iterator(\"table\",function(t){return e.nodeName&&\"TR\"===e.nodeName.toUpperCase()?ut(t,e)[0]:x(t,e)});return this.row(t[0])}),P(y).on(\"plugin-init.dt\",function(t,e){var n=new B(e),a=\"on-plugin-init\",r=\"stateSaveParams.\"+a,o=\"destroy. \"+a,a=(n.on(r,function(t,e,n){for(var a=e.rowIdFn,r=e.aoData,o=[],i=0;i<r.length;i++)r[i]._detailsShow&&o.push(\"#\"+a(r[i]._aData));n.childRows=o}),n.on(o,function(){n.off(r+\" \"+o)}),n.state.loaded());a&&a.childRows&&n.rows(P.map(a.childRows,function(t){return t.replace(/:/g,\"\\\\:\")})).every(function(){R(e,null,\"requestChild\",[this])})}),w.util.throttle(function(t){de(t[0])},500)),Re=function(t,e){var n=t.context;n.length&&(e=n[0].aoData[e!==N?e:t[0]])&&e._details&&(e._details.remove(),e._detailsShow=N,e._details=N,P(e.nTr).removeClass(\"dt-hasChild\"),Le(n))},Pe=\"row().child\",je=Pe+\"()\",Ne=(e(je,function(t,e){var n=this.context;return t===N?n.length&&this.length?n[0].aoData[this[0]]._details:N:(!0===t?this.child.show():!1===t?Re(this):n.length&&this.length&&Te(n[0],n[0].aoData[this[0]],t,e),this)}),e([Pe+\".show()\",je+\".show()\"],function(t){return xe(this,!0),this}),e([Pe+\".hide()\",je+\".hide()\"],function(){return xe(this,!1),this}),e([Pe+\".remove()\",je+\".remove()\"],function(){return Re(this),this}),e(Pe+\".isShown()\",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1}),/^([^:]+):(name|visIdx|visible)$/),He=(e(\"columns()\",function(n,a){n===N?n=\"\":P.isPlainObject(n)&&(a=n,n=\"\"),a=we(a);var t=this.iterator(\"table\",function(t){return e=n,l=a,s=(i=t).aoColumns,u=H(s,\"sName\"),c=H(s,\"nTh\"),_e(\"column\",e,function(n){var a,t=d(n);if(\"\"===n)return f(s.length);if(null!==t)return[0<=t?t:s.length+t];if(\"function\"==typeof n)return a=Fe(i,l),P.map(s,function(t,e){return n(e,Ae(i,e,0,0,a),c[e])?e:null});var r=\"string\"==typeof n?n.match(Ne):\"\";if(r)switch(r[2]){case\"visIdx\":case\"visible\":var e,o=parseInt(r[1],10);return o<0?[(e=P.map(s,function(t,e){return t.bVisible?e:null}))[e.length+o]]:[rt(i,o)];case\"name\":return P.map(u,function(t,e){return t===r[1]?e:null});default:return[]}return n.nodeName&&n._DT_CellIndex?[n._DT_CellIndex.column]:(t=P(c).filter(n).map(function(){return P.inArray(this,c)}).toArray()).length||!n.nodeName?t:(t=P(n).closest(\"*[data-dt-column]\")).length?[t.data(\"dt-column\")]:[]},i,l);var i,e,l,s,u,c},1);return t.selector.cols=n,t.selector.opts=a,t}),t(\"columns().header()\",\"column().header()\",function(t,e){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].nTh},1)}),t(\"columns().footer()\",\"column().footer()\",function(t,e){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].nTf},1)}),t(\"columns().data()\",\"column().data()\",function(){return this.iterator(\"column-rows\",Ae,1)}),t(\"columns().dataSrc()\",\"column().dataSrc()\",function(){return this.iterator(\"column\",function(t,e){return t.aoColumns[e].mData},1)}),t(\"columns().cache()\",\"column().cache()\",function(o){return this.iterator(\"column-rows\",function(t,e,n,a,r){return m(t.aoData,r,\"search\"===o?\"_aFilterData\":\"_aSortData\",e)},1)}),t(\"columns().nodes()\",\"column().nodes()\",function(){return this.iterator(\"column-rows\",function(t,e,n,a,r){return m(t.aoData,r,\"anCells\",e)},1)}),t(\"columns().visible()\",\"column().visible()\",function(f,n){var e=this,t=this.iterator(\"column\",function(t,e){if(f===N)return t.aoColumns[e].bVisible;var n,a,r=e,e=f,o=t.aoColumns,i=o[r],l=t.aoData;if(e===N)i.bVisible;else if(i.bVisible!==e){if(e)for(var s=P.inArray(!0,H(o,\"bVisible\"),r+1),u=0,c=l.length;u<c;u++)a=l[u].nTr,n=l[u].anCells,a&&a.insertBefore(n[r],n[s]||null);else P(H(t.aoData,\"anCells\",r)).detach();i.bVisible=e}});return f!==N&&this.iterator(\"table\",function(t){Dt(t,t.aoHeader),Dt(t,t.aoFooter),t.aiDisplay.length||P(t.nTBody).find(\"td[colspan]\").attr(\"colspan\",T(t)),de(t),e.iterator(\"column\",function(t,e){R(t,null,\"column-visibility\",[t,e,f,n])}),n!==N&&!n||e.columns.adjust()}),t}),t(\"columns().indexes()\",\"column().index()\",function(n){return this.iterator(\"column\",function(t,e){return\"visible\"===n?ot(t,e):e},1)}),e(\"columns.adjust()\",function(){return this.iterator(\"table\",function(t){O(t)},1)}),e(\"column.index()\",function(t,e){var n;if(0!==this.context.length)return n=this.context[0],\"fromVisible\"===t||\"toData\"===t?rt(n,e):\"fromData\"===t||\"toVisible\"===t?ot(n,e):void 0}),e(\"column()\",function(t,e){return Ce(this.columns(t,e))}),e(\"cells()\",function(g,t,b){var a,r,o,i,l,s,e;return P.isPlainObject(g)&&(g.row===N?(b=g,g=null):(b=t,t=null)),P.isPlainObject(t)&&(b=t,t=null),null===t||t===N?this.iterator(\"table\",function(t){return a=t,t=g,e=we(b),f=a.aoData,d=Fe(a,e),n=_(m(f,d,\"anCells\")),h=P(Y([],n)),p=a.aoColumns.length,_e(\"cell\",t,function(t){var e,n=\"function\"==typeof t;if(null===t||t===N||n){for(o=[],i=0,l=d.length;i<l;i++)for(r=d[i],s=0;s<p;s++)u={row:r,column:s},(!n||(c=f[r],t(u,S(a,r,s),c.anCells?c.anCells[s]:null)))&&o.push(u);return o}return P.isPlainObject(t)?t.column!==N&&t.row!==N&&-1!==P.inArray(t.row,d)?[t]:[]:(e=h.filter(t).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray()).length||!t.nodeName?e:(c=P(t).closest(\"*[data-dt-row]\")).length?[{row:c.data(\"dt-row\"),column:c.data(\"dt-column\")}]:[]},a,e);var a,e,r,o,i,l,s,u,c,f,d,n,h,p}):(e=b?{page:b.page,order:b.order,search:b.search}:{},a=this.columns(t,e),r=this.rows(g,e),e=this.iterator(\"table\",function(t,e){var n=[];for(o=0,i=r[e].length;o<i;o++)for(l=0,s=a[e].length;l<s;l++)n.push({row:r[e][o],column:a[e][l]});return n},1),e=b&&b.selected?this.cells(e,b):e,P.extend(e.selector,{cols:t,rows:g,opts:b}),e)}),t(\"cells().nodes()\",\"cell().node()\",function(){return thi', '```html\n<div class=\'container\'>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-danger text-white\'>\n      Vulnerabilidades de Seguridad Identificadas\n    </div>\n    <div class=\'card-body\'>\n\n      <div class=\'card border-warning\'>\n        <div class=\'card-header\'>\n          <h5 class=\'card-title\'>Vulnerabilidad: Cross-Site Scripting (XSS)</h5>\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> El código tiene múltiples lugares donde se inserta contenido HTML dinámicamente en el DOM, principalmente a través de funciones como `S(t,e,n,a)`, `We(t)`, innerHTML, entre otros.\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> Si los datos proporcionados a estas funciones no se escapan correctamente, un atacante podría inyectar código JavaScript malicioso en la página, lo que llevaría a XSS.  El uso indiscriminado de `innerHTML` para insertar contenido HTML sin sanitizar es un riesgo común.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Escapar la salida:</b> Escapar todos los datos proporcionados por el usuario antes de insertarlos en el DOM.  Utilizar una función de codificación HTML segura para escapar caracteres especiales como `<`, `>`, `&`, `\"` y `\'`. La función `We(t)` ofrece un mecanismo de escape, pero debe asegurarse de que se usa consistentemente en todas las salidas.</li>\n              <li><b>Evitar innerHTML:</b>  Siempre que sea posible, utilizar métodos de manipulación del DOM más seguros como `textContent` o `createElement`/`appendChild` en lugar de `innerHTML`.</li>\n              <li><b>Política de seguridad de contenido (CSP):</b> Implementar una política de seguridad de contenido estricta para mitigar el impacto de los ataques XSS.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Métricas de Calidad del Código:</b>\n            <ul>\n              <li><b>Legibilidad:</b> La falta de un escape consistente hace que el código sea más difícil de auditar para vulnerabilidades XSS.</li>\n              <li><b>Acoplamiento:</b> El uso de `innerHTML` acopla la lógica de presentación a los datos, lo que dificulta el cambio de la presentación sin afectar la seguridad.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de las Métricas de Calidad:</b>\n            <ul>\n              <li><b>Legibilidad:</b> Implementar una función de escape centralizada y utilizarla consistentemente.</li>\n              <li><b>Acoplamiento:</b>  Separar la lógica de presentación de los datos utilizando plantillas o un motor de renderizado.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-warning\'>\n        <div class=\'card-header\'>\n          <h5 class=\'card-title\'>Vulnerabilidad:  Posible Denegación de Servicio (DoS) debido a expresiones regulares complejas</h5>\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> El código utiliza expresiones regulares para filtrar y buscar datos, por ejemplo, la variable `q=/[\'\\u00A0,$£€¥%\\u2009\\u202F\\u20BD\\u20a9\\u20BArfkɃΞ]/gi`.\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b>  Expresiones regulares muy complejas o mal construidas pueden causar un consumo excesivo de CPU, especialmente al procesar grandes cantidades de datos o cadenas de entrada especialmente diseñadas.  Esto podría llevar a una denegación de servicio (ReDoS).\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Simplificar expresiones regulares:</b>  Revisar y simplificar las expresiones regulares complejas. Evitar el uso excesivo de retroceso (backtracking) en las expresiones regulares.</li>\n              <li><b>Limitar la longitud de la entrada:</b>  Limitar la longitud de las cadenas de entrada que se procesan con expresiones regulares para evitar ataques DoS.</li>\n              <li><b>Evaluar el rendimiento:</b>  Evaluar el rendimiento de las expresiones regulares con diferentes entradas para identificar posibles problemas.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Métricas de Calidad del Código:</b>\n            <ul>\n              <li><b>Complejidad:</b> Expresiones regulares complejas contribuyen a la complejidad del código y dificultan su mantenimiento.</li>\n              <li><b>Rendimiento:</b> El rendimiento de las expresiones regulares puede afectar significativamente el rendimiento general de la aplicación.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de las Métricas de Calidad:</b>\n            <ul>\n              <li><b>Complejidad:</b> Utilizar alternativas más sencillas a las expresiones regulares si es posible. Documentar claramente el propósito de las expresiones regulares complejas.</li>\n              <li><b>Rendimiento:</b>  Utilizar herramientas de análisis de rendimiento para identificar cuellos de botella relacionados con las expresiones regulares.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-warning\'>\n        <div class=\'card-header\'>\n          <h5 class=\'card-title\'>Vulnerabilidad: Inyección de Código (posible) en `w.util.get` y `w.util.set`</h5>\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            <b>Línea Aproximada:</b> Las funciones `w.util.get` y `w.util.set` permiten acceder y modificar propiedades de objetos utilizando cadenas como rutas (`a.b.c`, `a[0].b`, etc.).\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> Si estas rutas provienen de la entrada del usuario y no están correctamente validadas, un atacante podría acceder o modificar propiedades no deseadas, o incluso ejecutar código arbitrario si se combinan con funciones. El uso de `__proto__` o `constructor` en la ruta es un vector de ataque común.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Validación estricta de rutas:</b> Validar que las rutas de acceso a propiedades provengan de fuentes confiables y que no contengan caracteres o palabras clave peligrosas como `__proto__` o `constructor`.  Se hace una validación parcial en el set, pero no en el get.</li>\n              <li><b>Listas blancas de propiedades permitidas:</b>  En lugar de permitir rutas arbitrarias, definir una lista blanca de propiedades a las que se puede acceder o modificar.</li>\n              <li><b>Evitar la evaluación de cadenas como código:</b>  Evitar el uso de `eval()` o funciones similares para evaluar rutas de acceso.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Métricas de Calidad del Código:</b>\n            <ul>\n              <li><b>Seguridad:</b>  La falta de validación de rutas introduce un riesgo de inyección de código.</li>\n              <li><b>Complejidad:</b>  La lógica para acceder a propiedades utilizando cadenas como rutas puede ser compleja y difícil de entender.</li>\n            </ul>\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora de las Métricas de Calidad:</b>\n            <ul>\n              <li><b>Seguridad:</b> Implementar una validación estricta de rutas o utilizar listas blancas de propiedades permitidas.</li>\n              <li><b>Complejidad:</b>  Refactorizar el código para utilizar métodos más seguros y sencillos de acceso a propiedades.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\'card-header bg-success text-white\'>\n      Solución Propuesta\n    </div>\n    <div class=\'card-body\'>\n      <p class=\'card-text\'>\n        La solución general implica:\n        <ol>\n          <li><b>Sanitizar la entrada del usuario:</b> Todos los datos introducidos por el usuario deben limpiarse, validarse y codificarse.</li>\n          <li><b>Escapar la salida:</b>  Todos los datos presentados al usuario deben escapar para prevenir XSS.</li>\n          <li><b>Limitar el acceso a las funciones:</b>  Las funciones peligrosas deben ser limitadas o eliminadas.</li>\n          <li><b>Actualizaciones regulares:</b>  Mantener la biblioteca y sus dependencias actualizadas para parchear cualquier vulnerabilidad conocida.</li>\n        </ol>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card\'>\n    <div class=\'card-header bg-info text-white\'>\n      Métricas de Calidad del Código (Generales)\n    </div>\n    <div class=\'card-body\'>\n      <p class=\'card-text\'>\n        <ul>\n          <li><b>Complejidad Ciclomática:</b> El código es bastante complejo, con muchas funciones anidadas y lógica condicional.  Esto dificulta la comprensión y el mantenimiento.  Muchas funciones probablemente exceden los umbrales recomendados para la complejidad ciclomática.</li>\n          <li><b>Duplicación de código:</b>  Es posible que haya duplicación de código, especialmente en funciones similares que realizan tareas similares.</li>\n          <li><b>Legibilidad:</b> El código es difícil de leer debido a su complejidad y a la falta de comentarios. El uso de nombres de variables cortos y poco descriptivos también dificulta la comprensión.</li>\n          <li><b>Acoplamiento:</b>  El código está altamente acoplado, con muchas dependencias entre funciones y módulos.  Esto dificulta la modificación o el reemplazo de componentes individuales.</li>\n          <li><b>Cohesión:</b> Algunas funciones parecen realizar múltiples tareas, lo que indica una baja cohesión.</li>\n        </ul>\n      </p>\n      <p class=\'card-text\'>\n        <b>Mejoras Propuestas:</b>\n        <ul>\n          <li><b>Refactorización:</b> Refactorizar el código para dividir funciones complejas en funciones más pequeñas y manejables.</li>\n          <li><b>Abstracción:</b>  Utilizar abstracciones para reducir la duplicación de código y mejorar la reutilización.</li>\n          <li><b>Comentarios:</b>  Añadir comentarios para explicar la lógica del código y facilitar su comprensión.</li>\n          <li><b>Nombres de variables:</b> Utilizar nombres de variables descriptivos para mejorar la legibilidad.</li>\n          <li><b>Desacoplamiento:</b>  Reducir el acoplamiento entre componentes mediante el uso de interfaces y patrones de diseño.</li>\n          <li><b>Pruebas unitarias:</b> Escribir pruebas unitarias para garantizar que el código funciona correctamente y para facilitar la refactorización.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n</div>\n```\n', '2025-05-20 02:10:48', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(45, 'bootstrap.bundle.min.js', 'Detectado por GPT', '/*!\r\n  * Bootstrap v5.3.0 (https://getbootstrap.com/)\r\n  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\r\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\r\n  */\r\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){\"use strict\";const t=new Map,e={set(e,i,n){t.has(e)||t.set(e,new Map);const s=t.get(e);s.has(i)||0===s.size?s.set(i,n):console.error(`Bootstrap doesn\'t allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(e,i)=>t.has(e)&&t.get(e).get(i)||null,remove(e,i){if(!t.has(e))return;const n=t.get(e);n.delete(i),0===n.size&&t.delete(e)}},i=\"transitionend\",n=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\\s\"#\']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),s=t=>{t.dispatchEvent(new Event(i))},o=t=>!(!t||\"object\"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),r=t=>o(t)?t.jquery?t[0]:t:\"string\"==typeof t&&t.length>0?document.querySelector(n(t)):null,a=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e=\"visible\"===getComputedStyle(t).getPropertyValue(\"visibility\"),i=t.closest(\"details:not([open])\");if(!i)return e;if(i!==t){const e=t.closest(\"summary\");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},l=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains(\"disabled\")||(void 0!==t.disabled?t.disabled:t.hasAttribute(\"disabled\")&&\"false\"!==t.getAttribute(\"disabled\")),c=t=>{if(!document.documentElement.attachShadow)return null;if(\"function\"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c(t.parentNode):null},h=()=>{},d=t=>{t.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute(\"data-bs-no-jquery\")?window.jQuery:null,f=[],p=()=>\"rtl\"===document.documentElement.dir,m=t=>{var e;e=()=>{const e=u();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}},\"loading\"===document.readyState?(f.length||document.addEventListener(\"DOMContentLoaded\",(()=>{for(const t of f)t()})),f.push(e)):e()},g=(t,e=[],i=t)=>\"function\"==typeof t?t(...e):i,_=(t,e,n=!0)=>{if(!n)return void g(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),s=Number.parseFloat(i);return n||s?(e=e.split(\",\")[0],i=i.split(\",\")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let r=!1;const a=({target:n})=>{n===e&&(r=!0,e.removeEventListener(i,a),g(t))};e.addEventListener(i,a),setTimeout((()=>{r||s(e)}),o)},b=(t,e,i,n)=>{const s=t.length;let o=t.indexOf(e);return-1===o?!i&&n?t[s-1]:t[0]:(o+=i?1:-1,n&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))])},v=/[^.]*(?=\\..*)\\.|.*/,y=/\\..*/,w=/::\\d+$/,A={};let E=1;const T={mouseenter:\"mouseover\",mouseleave:\"mouseout\"},C=new Set([\"click\",\"dblclick\",\"mouseup\",\"mousedown\",\"contextmenu\",\"mousewheel\",\"DOMMouseScroll\",\"mouseover\",\"mouseout\",\"mousemove\",\"selectstart\",\"selectend\",\"keydown\",\"keypress\",\"keyup\",\"orientationchange\",\"touchstart\",\"touchmove\",\"touchend\",\"touchcancel\",\"pointerdown\",\"pointermove\",\"pointerup\",\"pointerleave\",\"pointercancel\",\"gesturestart\",\"gesturechange\",\"gestureend\",\"focus\",\"blur\",\"change\",\"reset\",\"select\",\"submit\",\"focusin\",\"focusout\",\"load\",\"unload\",\"beforeunload\",\"resize\",\"move\",\"DOMContentLoaded\",\"readystatechange\",\"error\",\"abort\",\"scroll\"]);function O(t,e){return e&&`${e}::${E++}`||t.uidEvent||E++}function x(t){const e=O(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function k(t,e,i=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function L(t,e,i){const n=\"string\"==typeof e,s=n?i:e||i;let o=N(t);return C.has(o)||(o=t),[n,s,o]}function S(t,e,i,n,s){if(\"string\"!=typeof e||!t)return;let[o,r,a]=L(e,i,n);if(e in T){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};r=t(r)}const l=x(t),c=l[a]||(l[a]={}),h=k(c,r,o?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const d=O(r,e.replace(v,\"\")),u=o?function(t,e,i){return function n(s){const o=t.querySelectorAll(e);for(let{target:r}=s;r&&r!==this;r=r.parentNode)for(const a of o)if(a===r)return M(s,{delegateTarget:r}),n.oneOff&&P.off(t,s.type,e,i),i.apply(r,[s])}}(t,i,r):function(t,e){return function i(n){return M(n,{delegateTarget:t}),i.oneOff&&P.off(t,n.type,e),e.apply(t,[n])}}(t,r);u.delegationSelector=o?i:null,u.callable=r,u.oneOff=s,u.uidEvent=d,c[d]=u,t.addEventListener(a,u,o)}function D(t,e,i,n,s){const o=k(e[i],n,s);o&&(t.removeEventListener(i,o,Boolean(s)),delete e[i][o.uidEvent])}function I(t,e,i,n){const s=e[i]||{};for(const[o,r]of Object.entries(s))o.includes(n)&&D(t,e,i,r.callable,r.delegationSelector)}function N(t){return t=t.replace(y,\"\"),T[t]||t}const P={on(t,e,i,n){S(t,e,i,n,!1)},one(t,e,i,n){S(t,e,i,n,!0)},off(t,e,i,n){if(\"string\"!=typeof e||!t)return;const[s,o,r]=L(e,i,n),a=r!==e,l=x(t),c=l[r]||{},h=e.startsWith(\".\");if(void 0===o){if(h)for(const i of Object.keys(l))I(t,l,i,e.slice(1));for(const[i,n]of Object.entries(c)){const s=i.replace(w,\"\");a&&!e.includes(s)||D(t,l,r,n.callable,n.delegationSelector)}}else{if(!Object.keys(c).length)return;D(t,l,r,o,s?i:null)}},trigger(t,e,i){if(\"string\"!=typeof e||!t)return null;const n=u();let s=null,o=!0,r=!0,a=!1;e!==N(e)&&n&&(s=n.Event(e,i),n(t).trigger(s),o=!s.isPropagationStopped(),r=!s.isImmediatePropagationStopped(),a=s.isDefaultPrevented());const l=M(new Event(e,{bubbles:o,cancelable:!0}),i);return a&&l.preventDefault(),r&&t.dispatchEvent(l),l.defaultPrevented&&s&&s.preventDefault(),l}};function M(t,e={}){for(const[i,n]of Object.entries(e))try{t[i]=n}catch(e){Object.defineProperty(t,i,{configurable:!0,get:()=>n})}return t}function j(t){if(\"true\"===t)return!0;if(\"false\"===t)return!1;if(t===Number(t).toString())return Number(t);if(\"\"===t||\"null\"===t)return null;if(\"string\"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function F(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const H={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${F(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${F(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith(\"bs\")&&!t.startsWith(\"bsConfig\")));for(const n of i){let i=n.replace(/^bs/,\"\");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=j(t.dataset[n])}return e},getDataAttribute:(t,e)=>j(t.getAttribute(`data-bs-${F(e)}`))};class ${static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error(\'You have to implement the static method \"NAME\", for each component!\')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=o(e)?H.getDataAttribute(e,\"config\"):{};return{...this.constructor.Default,...\"object\"==typeof i?i:{},...o(e)?H.getDataAttributes(e):{},...\"object\"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,s]of Object.entries(e)){const e=t[n],r=o(e)?\"element\":null==(i=e)?`${i}`:Object.prototype.toString.call(i).match(/\\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option \"${n}\" provided type \"${r}\" but expected type \"${s}\".`)}var i}}class W extends ${constructor(t,i){super(),(t=r(t))&&(this._element=t,this._config=this._getConfig(i),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){_(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(r(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,\"object\"==typeof e?e:null)}static get VERSION(){return\"5.3.0\"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const B=t=>{let e=t.getAttribute(\"data-bs-target\");if(!e||\"#\"===e){let i=t.getAttribute(\"href\");if(!i||!i.includes(\"#\")&&!i.startsWith(\".\"))return null;i.includes(\"#\")&&!i.startsWith(\"#\")&&(i=`#${i.split(\"#\")[1]}`),e=i&&\"#\"!==i?i.trim():null}return n(e)},z={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=[\"a\",\"button\",\"input\",\"textarea\",\"select\",\"details\",\"[tabindex]\",\'[contenteditable=\"true\"]\'].map((t=>`${t}:not([tabindex^=\"-\"])`)).join(\",\");return this.find(e,t).filter((t=>!l(t)&&a(t)))},getSelectorFromElement(t){const e=B(t);return e&&z.findOne(e)?e:null},getElementFromSelector(t){const e=B(t);return e?z.findOne(e):null},getMultipleElementsFromSelector(t){const e=B(t);return e?z.find(e):[]}},R=(t,e=\"hide\")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;P.on(document,i,`[data-bs-dismiss=\"${n}\"]`,(function(i){if([\"A\",\"AREA\"].includes(this.tagName)&&i.preventDefault(),l(this))return;const s=z.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(s)[e]()}))};class q extends W{static get NAME(){return\"alert\"}close(){if(P.trigger(this._element,\"close.bs.alert\").defaultPrevented)return;this._element.classList.remove(\"show\");const t=this._element.classList.contains(\"fade\");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),P.trigger(this._element,\"closed.bs.alert\"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}R(q,\"close\"),m(q);const V=\'[data-bs-toggle=\"button\"]\';class K extends W{static get NAME(){return\"button\"}toggle(){this._element.setAttribute(\"aria-pressed\",this._element.classList.toggle(\"active\"))}static jQueryInterface(t){return this.each((function(){const e=K.getOrCreateInstance(this);\"toggle\"===t&&e[t]()}))}}P.on(document,\"click.bs.button.data-api\",V,(t=>{t.preventDefault();const e=t.target.closest(V);K.getOrCreateInstance(e).toggle()})),m(K);const Q={endCallback:null,leftCallback:null,rightCallback:null},X={endCallback:\"(function|null)\",leftCallback:\"(function|null)\",rightCallback:\"(function|null)\"};class Y extends ${constructor(t,e){super(),this._element=t,t&&Y.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Q}static get DefaultType(){return X}static get NAME(){return\"swipe\"}dispose(){P.off(this._element,\".bs.swipe\")}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),g(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&g(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,\"pointerdown.bs.swipe\",(t=>this._start(t))),P.on(this._element,\"pointerup.bs.swipe\",(t=>this._end(t))),this._element.classList.add(\"pointer-event\")):(P.on(this._element,\"touchstart.bs.swipe\",(t=>this._start(t))),P.on(this._element,\"touchmove.bs.swipe\",(t=>this._move(t))),P.on(this._element,\"touchend.bs.swipe\",(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(\"pen\"===t.pointerType||\"touch\"===t.pointerType)}static isSupported(){return\"ontouchstart\"in document.documentElement||navigator.maxTouchPoints>0}}const U=\"next\",G=\"prev\",J=\"left\",Z=\"right\",tt=\"slid.bs.carousel\",et=\"carousel\",it=\"active\",nt={ArrowLeft:Z,ArrowRight:J},st={interval:5e3,keyboard:!0,pause:\"hover\",ride:!1,touch:!0,wrap:!0},ot={interval:\"(number|boolean)\",keyboard:\"boolean\",pause:\"(string|boolean)\",ride:\"(boolean|string)\",touch:\"boolean\",wrap:\"boolean\"};class rt extends W{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(\".carousel-indicators\",this._element),this._addEventListeners(),this._config.ride===et&&this.cycle()}static get Default(){return st}static get DefaultType(){return ot}static get NAME(){return\"carousel\"}next(){this._slide(U)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(G)}pause(){this._isSliding&&s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,tt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void P.one(this._element,tt,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const n=t>i?U:G;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,\"keydown.bs.carousel\",(t=>this._keydown(t))),\"hover\"===this._config.pause&&(P.on(this._element,\"mouseenter.bs.carousel\",(()=>this.pause())),P.on(this._element,\"mouseleave.bs.carousel\",(()=>this._maybeEnableCycle()))),this._config.touch&&Y.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of z.find(\".carousel-item img\",this._element))P.on(t,\"dragstart.bs.carousel\",(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(J)),rightCallback:()=>this._slide(this._directionToOrder(Z)),endCallback:()=>{\"hover\"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Y(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=nt[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=z.findOne(\".active\",this._indicatorsElement);e.classList.remove(it),e.removeAttribute(\"aria-current\");const i=z.findOne(`[data-bs-slide-to=\"${t}\"]`,this._indicatorsElement);i&&(i.classList.add(it),i.setAttribute(\"aria-current\",\"true\"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute(\"data-bs-interval\"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),n=t===U,s=e||b(this._getItems(),i,n,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),r=e=>P.trigger(this._element,e,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(r(\"slide.bs.carousel\").defaultPrevented)return;if(!i||!s)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const l=n?\"carousel-item-start\":\"carousel-item-end\",c=n?\"carousel-item-next\":\"carousel-item-prev\";s.classList.add(c),d(s),i.classList.add(l),s.classList.add(l),this._queueCallback((()=>{s.classList.remove(l,c),s.classList.add(it),i.classList.remove(it,c,l),this._isSliding=!1,r(tt)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains(\"slide\")}_getActive(){return z.findOne(\".active.carousel-item\",this._element)}_getItems(){return z.find(\".carousel-item\",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return p()?t===J?G:U:t===J?U:G}_orderToDirection(t){return p()?t===G?J:Z:t===G?Z:J}static jQueryInterface(t){return this.each((function(){const e=rt.getOrCreateInstance(this,t);if(\"number\"!=typeof t){if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t]()}}else e.to(t)}))}}P.on(document,\"click.bs.carousel.data-api\",\"[data-bs-slide], [data-bs-slide-to]\",(function(t){const e=z.getElementFromSelector(this);if(!e||!e.classList.contains(et))return;t.preventDefault();const i=rt.getOrCreateInstance(e),n=this.getAttribute(\"data-bs-slide-to\");return n?(i.to(n),void i._maybeEnableCycle()):\"next\"===H.getDataAttribute(this,\"slide\")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),P.on(window,\"load.bs.carousel.data-api\",(()=>{const t=z.find(\'[data-bs-ride=\"carousel\"]\');for(const e of t)rt.getOrCreateInstance(e)})),m(rt);const at=\"show\",lt=\"collapse\",ct=\"collapsing\",ht=\'[data-bs-toggle=\"collapse\"]\',dt={parent:null,toggle:!0},ut={parent:\"(null|element)\",toggle:\"boolean\"};class ft extends W{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=z.find(ht);for(const t of i){const e=z.getSelectorFromElement(t),i=z.find(e).filter((t=>t===this._element));null!==e&&i.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return dt}static get DefaultType(){return ut}static get NAME(){return\"collapse\"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(\".collapse.show, .collapse.collapsing\").filter((t=>t!==this._element)).map((t=>ft.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(P.trigger(this._element,\"show.bs.collapse\").defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(lt),this._element.classList.add(ct),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt,at),this._element.style[e]=\"\",P.trigger(this._element,\"shown.bs.collapse\")}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,\"hide.bs.collapse\").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,d(this._element),this._element.classList.add(ct),this._element.classList.remove(lt,at);for(const t of this._triggerArray){const e=z.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]=\"\",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ct),this._element.classList.add(lt),P.trigger(this._element,\"hidden.bs.collapse\")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(at)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=r(t.parent),t}_getDimension(){return this._element.classList.contains(\"collapse-horizontal\")?\"width\":\"height\"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ht);for(const e of t){const t=z.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=z.find(\":scope .collapse .collapse\",this._config.parent);return z.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(\"collapsed\",!e),i.setAttribute(\"aria-expanded\",e)}static jQueryInterface(t){const e={};return\"string\"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=ft.getOrCreateInstance(this,e);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t]()}}))}}P.on(document,\"click.bs.collapse.data-api\",ht,(function(t){(\"A\"===t.target.tagName||t.delegateTarget&&\"A\"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of z.getMultipleElementsFromSelector(this))ft.getOrCreateInstance(t,{toggle:!1}).toggle()})),m(ft);var pt=\"top\",mt=\"bottom\",gt=\"right\",_t=\"left\",bt=\"auto\",vt=[pt,mt,gt,_t],yt=\"start\",wt=\"end\",At=\"clippingParents\",Et=\"viewport\",Tt=\"popper\",Ct=\"reference\",Ot=vt.reduce((function(t,e){return t.concat([e+\"-\"+yt,e+\"-\"+wt])}),[]),xt=[].concat(vt,[bt]).reduce((function(t,e){return t.concat([e,e+\"-\"+yt,e+\"-\"+wt])}),[]),kt=\"beforeRead\",Lt=\"read\",St=\"afterRead\",Dt=\"beforeMain\",It=\"main\",Nt=\"afterMain\",Pt=\"beforeWrite\",Mt=\"write\",jt=\"afterWrite\",Ft=[kt,Lt,St,Dt,It,Nt,Pt,Mt,jt];function Ht(t){return t?(t.nodeName||\"\").toLowerCase():null}function $t(t){if(null==t)return window;if(\"[object Window]\"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wt(t){return t instanceof $t(t).Element||t instanceof Element}function Bt(t){return t instanceof $t(t).HTMLElement||t instanceof HTMLElement}function zt(t){return\"undefined\"!=typeof ShadowRoot&&(t instanceof $t(t).ShadowRoot||t instanceof ShadowRoot)}const Rt={name:\"applyStyles\",enabled:!0,phase:\"write\",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];Bt(s)&&Ht(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?\"\":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:\"0\",top:\"0\",margin:\"0\"},arrow:{position:\"absolute\"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]=\"\",t}),{});Bt(n)&&Ht(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:[\"computeStyles\"]};function qt(t){return t.split(\"-\")[0]}var Vt=Math.max,Kt=Math.min,Qt=Math.round;function Xt(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+\"/\"+t.version})).join(\" \"):navigator.userAgent}function Yt(){return!/^((?!chrome|android).)*safari/i.test(Xt())}function Ut(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&Bt(t)&&(s=t.offsetWidth>0&&Qt(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Qt(n.height)/t.offsetHeight||1);var r=(Wt(t)?$t(t):window).visualViewport,a=!Yt()&&i,l=(n.left+(a&&r?r.offsetLeft:0))/s,c=(n.top+(a&&r?r.offsetTop:0))/o,h=n.width/s,d=n.height/o;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l,x:l,y:c}}function Gt(t){var e=Ut(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Jt(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&zt(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Zt(t){return $t(t).getComputedStyle(t)}function te(t){return[\"table\",\"td\",\"th\"].indexOf(Ht(t))>=0}function ee(t){return((Wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ie(t){return\"html\"===Ht(t)?t:t.assignedSlot||t.parentNode||(zt(t)?t.host:null)||ee(t)}function ne(t){return Bt(t)&&\"fixed\"!==Zt(t).position?t.offsetParent:null}function se(t){for(var e=$t(t),i=ne(t);i&&te(i)&&\"static\"===Zt(i).position;)i=ne(i);return i&&(\"html\"===Ht(i)||\"body\"===Ht(i)&&\"static\"===Zt(i).position)?e:i||function(t){var e=/firefox/i.test(Xt());if(/Trident/i.test(Xt())&&Bt(t)&&\"fixed\"===Zt(t).position)return null;var i=ie(t);for(zt(i)&&(i=i.host);Bt(i)&&[\"html\",\"body\"].indexOf(Ht(i))<0;){var n=Zt(i);if(\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||-1!==[\"transform\",\"perspective\"].indexOf(n.willChange)||e&&\"filter\"===n.willChange||e&&n.filter&&\"none\"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function oe(t){return[\"top\",\"bottom\"].indexOf(t)>=0?\"x\":\"y\"}function re(t,e,i){return Vt(t,Kt(e,i))}function ae(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function le(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const ce={name:\"arrow\",enabled:!0,phase:\"main\",fn:function(t){var e,i=t.state,n=t.name,s=t.options,o=i.elements.arrow,r=i.modifiersData.popperOffsets,a=qt(i.placement),l=oe(a),c=[_t,gt].indexOf(a)>=0?\"height\":\"width\";if(o&&r){var h=function(t,e){return ae(\"number\"!=typeof(t=\"function\"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:le(t,vt))}(s.padding,i),d=Gt(o),u=\"y\"===l?pt:_t,f=\"y\"===l?mt:gt,p=i.rects.reference[c]+i.rects.reference[l]-r[l]-i.rects.popper[c],m=r[l]-i.rects.reference[l],g=se(o),_=g?\"y\"===l?g.clientHeight||0:g.clientWidth||0:0,b=p/2-m/2,v=h[u],y=_-d[c]-h[f],w=_/2-d[c]/2+b,A=re(v,w,y),E=l;i.modifiersData[n]=((e={})[E]=A,e.centerOffset=A-w,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?\"[data-popper-arrow]\":i;null!=n&&(\"string\"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Jt(e.elements.popper,n)&&(e.elements.arrow=n)},requires:[\"popperOffsets\"],requiresIfExists:[\"preventOverflow\"]};function he(t){return t.split(\"-\")[1]}var de={top:\"auto\",right:\"auto\",bottom:\"auto\",left:\"auto\"};function ue(t){var e,i=t.popper,n=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,u=r.x,f=void 0===u?0:u,p=r.y,m=void 0===p?0:p,g=\"function\"==typeof h?h({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var _=r.hasOwnProperty(\"x\"),b=r.hasOwnProperty(\"y\"),v=_t,y=pt,w=window;if(c){var A=se(i),E=\"clientHeight\",T=\"clientWidth\";A===$t(i)&&\"static\"!==Zt(A=ee(i)).position&&\"absolute\"===a&&(E=\"scrollHeight\",T=\"scrollWidth\"),(s===pt||(s===_t||s===gt)&&o===wt)&&(y=mt,m-=(d&&A===w&&w.visualViewport?w.visualViewport.height:A[E])-n.height,m*=l?1:-1),s!==_t&&(s!==pt&&s!==mt||o!==wt)||(v=gt,f-=(d&&A===w&&w.visualViewport?w.visualViewport.width:A[T])-n.width,f*=l?1:-1)}var C,O=Object.assign({position:a},c&&de),x=!0===h?function(t,e){var i=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:Qt(i*s)/s||0,y:Qt(n*s)/s||0}}({x:f,y:m},$t(i)):{x:f,y:m};return f=x.x,m=x.y,l?Object.assign({},O,((C={})[y]=b?\"0\":\"\",C[v]=_?\"0\":\"\",C.transform=(w.devicePixelRatio||1)<=1?\"translate(\"+f+\"px, \"+m+\"px)\":\"translate3d(\"+f+\"px, \"+m+\"px, 0)\",C)):Object.assign({},O,((e={})[y]=b?m+\"px\":\"\",e[v]=_?f+\"px\":\"\",e.transform=\"\",e))}const fe={name:\"computeStyles\",enabled:!0,phase:\"beforeWrite\",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,o=i.adaptive,r=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:qt(e.placement),variation:he(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:\"fixed\"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ue(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ue(Object.assign({},c,{offsets:e.modifiersData.arrow,position:\"absolute\",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{\"data-popper-placement\":e.placement})},data:{}};var pe={passive:!0};const me={name:\"eventListeners\",enabled:!0,phase:\"write\",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,o=void 0===s||s,r=n.resize,a=void 0===r||r,l=$t(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener(\"scroll\",i.update,pe)})),a&&l.addEventListener(\"resize\",i.update,pe),function(){o&&c.forEach((function(t){t.removeEventListener(\"scroll\",i.update,pe)})),a&&l.removeEventListener(\"resize\",i.update,pe)}},data:{}};var ge={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function _e(t){return t.replace(/left|right|bottom|top/g,(function(t){return ge[t]}))}var be={start:\"end\",end:\"start\"};function ve(t){return t.replace(/start|end/g,(function(t){return be[t]}))}function ye(t){var e=$t(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function we(t){return Ut(ee(t)).left+ye(t).scrollLeft}function Ae(t){var e=Zt(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function Ee(t){return[\"html\",\"body\",\"#document\"].indexOf(Ht(t))>=0?t.ownerDocument.body:Bt(t)&&Ae(t)?t:Ee(ie(t))}function Te(t,e){var i;void 0===e&&(e=[]);var n=Ee(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),o=$t(n),r=s?[o].concat(o.visualViewport||[],Ae(n)?n:[]):n,a=e.concat(r);return s?a:a.concat(Te(ie(r)))}function Ce(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Oe(t,e,i){return e===Et?Ce(function(t,e){var i=$t(t),n=ee(t),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;var c=Yt();(c||!c&&\"fixed\"===e)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a+we(t),y:l}}(t,i)):Wt(e)?function(t,e){var i=Ut(t,!1,\"fixed\"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):Ce(function(t){var e,i=ee(t),n=ye(t),s=null==(e=t.ownerDocument)?void 0:e.body,o=Vt(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=Vt(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+we(t),l=-n.scrollTop;return\"rtl\"===Zt(s||i).direction&&(a+=Vt(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(ee(t)))}function xe(t){var e,i=t.reference,n=t.element,s=t.placement,o=s?qt(s):null,r=s?he(s):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(o){case pt:e={x:a,y:i.y-n.height};break;case mt:e={x:a,y:i.y+i.height};break;case gt:e={x:i.x+i.width,y:l};break;case _t:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var c=o?oe(o):null;if(null!=c){var h=\"y\"===c?\"height\":\"width\";switch(r){case yt:e[c]=e[c]-(i[h]/2-n[h]/2);break;case wt:e[c]=e[c]+(i[h]/2-n[h]/2)}}return e}function ke(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,o=i.strategy,r=void 0===o?t.strategy:o,a=i.boundary,l=void 0===a?At:a,c=i.rootBoundary,h=void 0===c?Et:c,d=i.elementContext,u=void 0===d?Tt:d,f=i.altBoundary,p=void 0!==f&&f,m=i.padding,g=void 0===m?0:m,_=ae(\"number\"!=typeof g?g:le(g,vt)),b=u===Tt?Ct:Tt,v=t.rects.popper,y=t.elements[p?b:u],w=function(t,e,i,n){var s=\"clippingParents\"===e?function(t){var e=Te(ie(t)),i=[\"absolute\",\"fixed\"].indexOf(Zt(t).position)>=0&&Bt(t)?se(t):t;return Wt(i)?e.filter((function(t){return Wt(t)&&Jt(t,i)&&\"body\"!==Ht(t)})):[]}(t):[].concat(e),o=[].concat(s,[i]),r=o[0],a=o.reduce((function(e,i){var s=Oe(t,i,n);return e.top=Vt(s.top,e.top),e.right=Kt(s.right,e.right),e.bottom=Kt(s.bottom,e.bottom),e.left=Vt(s.left,e.left),e}),Oe(t,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Wt(y)?y:y.contextElement||ee(t.elements.popper),l,h,r),A=Ut(t.elements.reference),E=xe({reference:A,element:v,strategy:\"absolute\",placement:s}),T=Ce(Object.assign({},v,E)),C=u===Tt?T:A,O={top:w.top-C.top+_.top,bottom:C.bottom-w.bottom+_.bottom,left:w.left-C.left+_.left,right:C.right-w.right+_.right},x=t.modifiersData.offset;if(u===Tt&&x){var k=x[s];Object.keys(O).forEach((function(t){var e=[gt,mt].indexOf(t)>=0?1:-1,i=[pt,mt].indexOf(t)>=0?\"y\":\"x\";O[t]+=k[i]*e}))}return O}function Le(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,o=i.rootBoundary,r=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?xt:l,h=he(n),d=h?a?Ot:Ot.filter((function(t){return he(t)===h})):vt,u=d.filter((function(t){return c.indexOf(t)>=0}));0===u.length&&(u=d);var f=u.reduce((function(e,i){return e[i]=ke(t,{placement:i,boundary:s,rootBoundary:o,padding:r})[qt(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}const Se={name:\"flip\",enabled:!0,phase:\"main\",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0===r||r,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,f=i.flipVariations,p=void 0===f||f,m=i.allowedAutoPlacements,g=e.options.placement,_=qt(g),b=l||(_!==g&&p?function(t){if(qt(t)===bt)return[];var e=_e(t);return[ve(t),e,ve(e)]}(g):[_e(g)]),v=[g].concat(b).reduce((function(t,i){return t.concat(qt(i)===bt?Le(e,{placement:i,boundary:h,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):i)}),[]),y=e.rects.reference,w=e.rects.popper,A=new Map,E=!0,T=v[0],C=0;C<v.length;C++){var O=v[C],x=qt(O),k=he(O)===yt,L=[pt,mt].indexOf(x)>=0,S=L?\"width\":\"height\",D=ke(e,{placement:O,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),I=L?k?gt:_t:k?mt:pt;y[S]>w[S]&&(I=_e(I));var N=_e(I),P=[];if(o&&P.push(D[x]<=0),a&&P.push(D[I]<=0,D[N]<=0),P.every((function(t){return t}))){T=O,E=!1;break}A.set(O,P)}if(E)for(var M=function(t){var e=v.find((function(e){var i=A.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return T=e,\"break\"},j=p?3:1;j>0&&\"break\"!==M(j);j--);e.placement!==T&&(e.modifiersData[n]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:[\"offset\"],data:{_skip:!1}};function De(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ie(t){return[pt,gt,mt,_t].some((function(e){return t[e]>=0}))}const Ne={name:\"hide\",enabled:!0,phase:\"main\",requiresIfExists:[\"preventOverflow\"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=ke(e,{elementContext:\"reference\"}),a=ke(e,{altBoundary:!0}),l=De(r,n),c=De(a,s,o),h=Ie(l),d=Ie(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{\"data-popper-reference-hidden\":h,\"data-popper-escaped\":d})}},Pe={name:\"offset\",enabled:!0,phase:\"main\",requires:[\"popperOffsets\"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,o=void 0===s?[0,0]:s,r=xt.reduce((function(t,i){return t[i]=function(t,e,i){var n=qt(t),s=[_t,pt].indexOf(n)>=0?-1:1,o=\"function\"==typeof i?i(Object.assign({},e,{placement:t})):i,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[_t,gt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}(i,e.rects,o),t}),{}),a=r[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=r}},Me={name:\"popperOffsets\",enabled:!0,phase:\"read\",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=xe({reference:e.rects.reference,element:e.rects.popper,strategy:\"absolute\",placement:e.placement})},data:{}},je={name:\"preventOverflow\",enabled:!0,phase:\"main\",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,o=void 0===s||s,r=i.altAxis,a=void 0!==r&&r,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,f=void 0===u||u,p=i.tetherOffset,m=void 0===p?0:p,g=ke(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),_=qt(e.placement),b=he(e.placement),v=!b,y=oe(_),w=\"x\"===y?\"y\":\"x\",A=e.modifiersData.popperOffsets,E=e.rects.reference,T=e.rects.popper,C=\"function\"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,O=\"number\"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(A){if(o){var L,S=\"y\"===y?pt:_t,D=\"y\"===y?mt:gt,I=\"y\"===y?\"height\":\"width\",N=A[y],P=N+g[S],M=N-g[D],j=f?-T[I]/2:0,F=b===yt?E[I]:T[I],H=b===yt?-T[I]:-E[I],$=e.elements.arrow,W=f&&$?Gt($):{width:0,height:0},B=e.modifiersData[\"arrow#persistent\"]?e.modifiersData[\"arrow#persistent\"].padding:{top:0,right:0,bottom:0,left:0},z=B[S],R=B[D],q=re(0,E[I],W[I]),V=v?E[I]/2-j-q-z-O.mainAxis:F-q-z-O.mainAxis,K=v?-E[I]/2+j+q+R+O.mainAxis:H+q+R+O.mainAxis,Q=e.elements.arrow&&se(e.elements.arrow),X=Q?\"y\"===y?Q.clientTop||0:Q.clientLeft||0:0,Y=null!=(L=null==x?void 0:x[y])?L:0,U=N+K-Y,G=re(f?Kt(P,N+V-Y-X):P,N,f?Vt(M,U):M);A[y]=G,k[y]=G-N}if(a){var J,Z=\"x\"===y?pt:_t,tt=\"x\"===y?mt:gt,et=A[w],it=\"y\"===w?\"height\":\"width\",nt=et+g[Z],st=et-g[tt],ot=-1!==[pt,_t].indexOf(_),rt=null!=(J=null==x?void 0:x[w])?J:0,at=ot?nt:et-E[it]-T[it]-rt+O.altAxis,lt=ot?et+E[it]+T[it]-rt-O.altAxis:st,ct=f&&ot?function(t,e,i){var n=re(t,e,i);return n>i?i:n}(at,et,lt):re(f?at:nt,et,f?lt:st);A[w]=ct,k[w]=ct-et}e.modifiersData[n]=k}},requiresIfExists:[\"offset\"]};function Fe(t,e,i){void 0===i&&(i=!1);var n,s,o=Bt(e),r=Bt(e)&&function(t){var e=t.getBoundingClientRect(),i=Qt(e.width)/t.offsetWidth||1,n=Qt(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=ee(e),l=Ut(t,r,i),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&((\"body\"!==Ht(e)||Ae(a))&&(c=(n=e)!==$t(n)&&Bt(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:ye(n)),Bt(e)?((h=Ut(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=we(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function He(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var $e={placement:\"bottom\",modifiers:[],strategy:\"absolute\"};function We(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&\"function\"==typeof t.getBoundingClientRect)}))}function Be(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,o=void 0===s?$e:s;return function(t,e,i){void 0===i&&(i=o);var s,r,a={placement:\"bottom\",orderedModifiers:[],options:Object.assign({},$e,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(i){var s=\"function\"==typeof i?i(a.options):i;d(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:Wt(t)?Te(t):t.contextElement?Te(t.contextElement):[],popper:Te(e)};var r,c,u=function(t){var e=He(t);return Ft.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,a.options.modifiers),c=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=u.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if(\"function\"==typeof s){var o=s({state:a,name:e,instance:h,options:n});l.push(o||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,i=t.popper;if(We(e,i)){a.rects={reference:Fe(e,se(i),\"fixed\"===a.options.strategy),popper:Gt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],o=s.fn,r=s.options,l=void 0===r?{}:r,d=s.name;\"function\"==typeof o&&(a=o({state:a,options:l,name:d,instance:h})||a)}else a.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(s())}))}))),r}),destroy:function(){d(),c=!0}};if(!We(t,e))return h;function d(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var ze=Be(),Re=Be({defaultModifiers:[me,Me,fe,Rt]}),qe=Be({defaultModifiers:[me,Me,fe,Rt,Pe,Se,je,ce,Ne]});const Ve=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nt,afterRead:St,afterWrite:jt,applyStyles:Rt,arrow:ce,auto:bt,basePlacements:vt,beforeMain:Dt,beforeRead:kt,beforeWrite:Pt,bottom:mt,clippingParents:At,computeStyles:fe,createPopper:qe,createPopperBase:ze,createPopperLite:Re,detectOverflow:ke,end:wt,eventListeners:me,flip:Se,hide:Ne,left:_t,main:It,modifierPhases:Ft,offset:Pe,placements:xt,popper:Tt,popperGenerator:Be,popperOffsets:Me,preventOverflow:je,read:Lt,reference:Ct,right:gt,start:yt,top:pt,variationPlacements:Ot,viewport:Et,write:Mt},Symbol.toStringTag,{value:\"Module\"})),Ke=\"dropdown\",Qe=\"ArrowUp\",Xe=\"ArrowDown\",Ye=\"click.bs.dropdown.data-api\",Ue=\"keydown.bs.dropdown.data-api\",Ge=\"show\",Je=\'[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)\',Ze=`${Je}.show`,ti=\".dropdown-menu\",ei=p()?\"top-end\":\"top-start\",ii=p()?\"top-start\":\"top-end\",ni=p()?\"bottom-end\":\"bottom-start\",si=p()?\"bottom-start\":\"bottom-end\",oi=p()?\"left-start\":\"right-start\",ri=p()?\"right-start\":\"left-start\",ai={autoClose:!0,boundary:\"clippingParents\",display:\"dynamic\",offset:[0,2],popperConfig:null,reference:\"toggle\"},li={autoClose:\"(boolean|string)\",boundary:\"(string|element)\",display:\"string\",offset:\"(array|string|function)\",popperConfig:\"(null|object|function)\",reference:\"(string|element|object)\"};class ci extends W{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,ti)[0]||z.prev(this._element,ti)[0]||z.findOne(ti,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ai}static get DefaultType(){return li}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,\"show.bs.dropdown\",t).defaultPrevented){if(this._createPopper(),\"ontouchstart\"in document.documentElement&&!this._parent.closest(\".navbar-nav\"))for(const t of[].concat(...document.body.children))P.on(t,\"mouseover\",h);this._element.focus(),this._element.setAttribute(\"aria-expanded\",!0),this._menu.classList.add(Ge),this._element.classList.add(Ge),P.trigger(this._element,\"shown.bs.dropdown\",t)}}hide(){if(l(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,\"hide.bs.dropdown\",t).defaultPrevented){if(\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,\"mouseover\",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ge),this._element.classList.remove(Ge),this._element.setAttribute(\"aria-expanded\",\"false\"),H.removeDataAttribute(this._menu,\"popper\"),P.trigger(this._element,\"hidden.bs.dropdown\",t)}}_getConfig(t){if(\"object\"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&\"function\"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);return t}_createPopper(){if(void 0===Ve)throw new TypeError(\"Bootstrap\'s dropdowns require Popper (https://popper.js.org)\");let t=this._element;\"parent\"===this._config.reference?t=this._parent:o(this._config.reference)?t=r(this._config.reference):\"object\"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=qe(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Ge)}_getPlacement(){const t=this._parent;if(t.classList.contains(\"dropend\"))return oi;if(t.classList.contains(\"dropstart\"))return ri;if(t.classList.contains(\"dropup-center\"))return\"top\";if(t.classList.contains(\"dropdown-center\"))return\"bottom\";const e=\"end\"===getComputedStyle(this._menu).getPropertyValue(\"--bs-position\").trim();return t.classList.contains(\"dropup\")?e?ii:ei:e?si:ni}_detectNavbar(){return null!==this._element.closest(\".navbar\")}_getOffset(){const{offset:t}=this._config;return\"string\"==typeof t?t.split(\",\").map((t=>Number.parseInt(t,10))):\"function\"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:\"preventOverflow\",options:{boundary:this._config.boundary}},{name:\"offset\",options:{offset:this._getOffset()}}]};return(this._inNavbar||\"static\"===this._config.display)&&(H.setDataAttribute(this._menu,\"popper\",\"static\"),t.modifiers=[{name:\"applyStyles\",enabled:!1}]),{...t,...g(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const i=z.find(\".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)\",this._menu).filter((t=>a(t)));i.length&&b(i,e,t===Xe,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=ci.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}static clearMenus(t){if(2===t.button||\"keyup\"===t.type&&\"Tab\"!==t.key)return;const e=z.find(Ze);for(const i of e){const e=ci.getInstance(i);if(!e||!1===e._config.autoClose)continue;const n=t.composedPath(),s=n.includes(e._menu);if(n.includes(e._element)||\"inside\"===e._config.autoClose&&!s||\"outside\"===e._config.autoClose&&s)continue;if(e._menu.contains(t.target)&&(\"keyup\"===t.type&&\"Tab\"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};\"click\"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=\"Escape\"===t.key,n=[Qe,Xe].includes(t.key);if(!n&&!i)return;if(e&&!i)return;t.preventDefault();const s=this.matches(Je)?this:z.prev(this,Je)[0]||z.next(this,Je)[0]||z.findOne(Je,t.delegateTarget.parentNode),o=ci.getOrCreateInstance(s);if(n)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}P.on(document,Ue,Je,ci.dataApiKeydownHandler),P.on(document,Ue,ti,ci.dataApiKeydownHandler),P.on(document,Ye,ci.clearMenus),P.on(document,\"keyup.bs.dropdown.data-api\",ci.clearMenus),P.on(document,Ye,Je,(function(t){t.preventDefault(),ci.getOrCreateInstance(this).toggle()})),m(ci);const hi=\"show\",di=\"mousedown.bs.backdrop\",ui={className:\"modal-backdrop\",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:\"body\"},fi={className:\"string\",clickCallback:\"(function|null)\",isAnimated:\"boolean\",isVisible:\"boolean\",rootElement:\"(element|string)\"};class pi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ui}static get DefaultType(){return fi}static get NAME(){return\"backdrop\"}show(t){if(!this._config.isVisible)return void g(t);this._append();const e=this._getElement();this._config.isAnimated&&d(e),e.classList.add(hi),this._emulateAnimation((()=>{g(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(hi),this._emulateAnimation((()=>{this.dispose(),g(t)}))):g(t)}dispose(){this._isAppended&&(P.off(this._element,di),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement(\"div\");t.className=this._config.className,this._config.isAnimated&&t.classList.add(\"fade\"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=r(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,di,(()=>{g(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){_(t,this._getElement(),this._config.isAnimated)}}const mi=\".bs.focustrap\",gi=\"backward\",_i={autofocus:!0,trapElement:null},bi={autofocus:\"boolean\",trapElement:\"element\"};class vi extends ${constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _i}static get DefaultType(){return bi}static get NAME(){return\"focustrap\"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,mi),P.on(document,\"focusin.bs.focustrap\",(t=>this._handleFocusin(t))),P.on(document,\"keydown.tab.bs.focustrap\",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,mi))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=z.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===gi?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){\"Tab\"===t.key&&(this._lastTabNavDirection=t.shiftKey?gi:\"forward\")}}const yi=\".fixed-top, .fixed-bottom, .is-fixed, .sticky-top\",wi=\".sticky-top\",Ai=\"padding-right\",Ei=\"margin-right\";class Ti{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ai,(e=>e+t)),this._setElementAttributes(yi,Ai,(e=>e+t)),this._setElementAttributes(wi,Ei,(e=>e-t))}reset(){this._resetElementAttributes(this._element,\"overflow\"),this._resetElementAttributes(this._element,Ai),this._resetElementAttributes(yi,Ai),this._resetElementAttributes(wi,Ei)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,\"overflow\"),this._element.style.overflow=\"hidden\"}_setElementAttributes(t,e,i){const n=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&H.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=H.getDataAttribute(t,e);null!==i?(H.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const i of z.find(t,this._element))e(i)}}const Ci=\".bs.modal\",Oi=\"hidden.bs.modal\",xi=\"show.bs.modal\",ki=\"modal-open\",Li=\"show\",Si=\"modal-static\",Di={backdrop:!0,focus:!0,keyboard:!0},Ii={backdrop:\"(boolean|string)\",focus:\"boolean\",keyboard:\"boolean\"};class Ni extends W{constructor(t,e){super(t,e),this._dialog=z.findOne(\".modal-dialog\",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ti,this._addEventListeners()}static get Default(){return Di}static get DefaultType(){return Ii}static get NAME(){return\"modal\"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,xi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ki),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,\"hide.bs.modal\").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Li),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,Ci),P.off(this._dialog,Ci),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display=\"block\",this._element.removeAttribute(\"aria-hidden\"),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.scrollTop=0;const e=z.findOne(\".modal-body\",this._dialog);e&&(e.scrollTop=0),d(this._element),this._element.classList.add(Li),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,\"shown.bs.modal\",{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,\"keydown.dismiss.bs.modal\",(t=>{\"Escape\"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,\"resize.bs.modal\",(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,\"mousedown.dismiss.bs.modal\",(t=>{P.one(this._element,\"click.dismiss.bs.modal\",(e=>{this._element===t.target&&this._element===e.target&&(\"static\"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display=\"none\",this._element.setAttribute(\"aria-hidden\",!0),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ki),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Oi)}))}_isAnimated(){return this._element.classList.contains(\"fade\")}_triggerBackdropTransition(){if(P.trigger(this._element,\"hidePrevented.bs.modal\").defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;\"hidden\"===e||this._element.classList.contains(Si)||(t||(this._element.style.overflowY=\"hidden\"),this._element.classList.add(Si),this._queueCallback((()=>{this._element.classList.remove(Si),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=p()?\"paddingLeft\":\"paddingRight\";this._element.style[t]=`${e}px`}if(!i&&t){const t=p()?\"paddingRight\":\"paddingLeft\";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft=\"\",this._element.style.paddingRight=\"\"}static jQueryInterface(t,e){return this.each((function(){const i=Ni.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t](e)}}))}}P.on(document,\"click.bs.modal.data-api\",\'[data-bs-toggle=\"modal\"]\',(function(t){const e=z.getElementFromSelector(this);[\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),P.one(e,xi,(t=>{t.defaultPrevented||P.one(e,Oi,(()=>{a(this)&&this.focus()}))}));const i=z.findOne(\".modal.show\");i&&Ni.getInstance(i).hide(),Ni.getOrCreateInstance(e).toggle(this)})),R(Ni),m(Ni);const Pi=\"show\",Mi=\"showing\",ji=\"hiding\",Fi=\".offcanvas.show\",Hi=\"hidePrevented.bs.offcanvas\",$i=\"hidden.bs.offcanvas\",Wi={backdrop:!0,keyboard:!0,scroll:!1},Bi={backdrop:\"(boolean|string)\",keyboard:\"boolean\",scroll:\"boolean\"};class zi extends W{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wi}static get DefaultType(){return Bi}static get NAME(){return\"offcanvas\"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,\"show.bs.offcanvas\",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ti).hide(),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.classList.add(Mi),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Pi),this._element.classList.remove(Mi),P.trigger(this._element,\"shown.bs.offcanvas\",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,\"hide.bs.offcanvas\").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ji),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Pi,ji),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._config.scroll||(new Ti).reset(),P.trigger(this._element,$i)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new pi({className:\"offcanvas-backdrop\",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{\"static\"!==this._config.backdrop?this.hide():P.trigger(this._element,Hi)}:null})}_initializeFocusTrap(){return new vi({trapElement:this._element})}_addEventListeners(){P.on(this._element,\"keydown.dismiss.bs.offcanvas\",(t=>{\"Escape\"===t.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Hi))}))}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}P.on(document,\"click.bs.offcanvas.data-api\",\'[data-bs-toggle=\"offcanvas\"]\',(function(t){const e=z.getElementFromSelector(this);if([\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),l(this))return;P.one(e,$i,(()=>{a(this)&&this.focus()}));const i=z.findOne(Fi);i&&i!==e&&zi.getInstance(i).hide(),zi.getOrCreateInstance(e).toggle(this)})),P.on(window,\"load.bs.offcanvas.data-api\",(()=>{for(const t of z.find(Fi))zi.getOrCreateInstance(t).show()})),P.on(window,\"resize.bs.offcanvas\",(()=>{for(const t of z.find(\"[aria-modal][class*=show][class*=offcanvas-]\"))\"fixed\"!==getComputedStyle(t).position&&zi.getOrCreateInstance(t).hide()})),R(zi),m(zi);const Ri={\"*\":[\"class\",\"dir\",\"id\",\"lang\",\"role\",/^aria-[\\w-]*$/i],a:[\"target\",\"href\",\"title\",\"rel\"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:[\"src\",\"srcset\",\"alt\",\"title\",\"width\",\"height\"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qi=new Set([\"background\",\"cite\",\"href\",\"itemtype\",\"longdesc\",\"poster\",\"src\",\"xlink:href\"]),Vi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ki=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!qi.has(i)||Boolean(Vi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))},Qi={allowList:Ri,content:{},extraClass:\"\",html:!1,sanitize:!0,sanitizeFn:null,template:\"<div></div>\"},Xi={allowList:\"object\",content:\"object\",extraClass:\"(string|function)\",html:\"boolean\",sanitize:\"boolean\",sanitizeFn:\"(null|function)\",template:\"string\"},Yi={entry:\"(string|element|function|null)\",selector:\"(string|element)\"};class Ui extends ${constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Qi}static get DefaultType(){return Xi}static get NAME(){return\"TemplateFactory\"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement(\"div\");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,i]of Object.entries(this._config.content))this._setContent(t,i,e);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(\" \")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},Yi)}_setContent(t,e,i){const n=z.findOne(i,t);n&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(r(e),n):this._config.html?n.innerHTML=this._maybeSanitize(e):n.textContent=e:n.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&\"function\"==typeof i)return i(t);const n=(new window.DOMParser).parseFromString(t,\"text/html\"),s=[].concat(...n.body.querySelectorAll(\"*\"));for(const t of s){const i=t.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){t.remove();continue}const n=[].concat(...t.attributes),s=[].concat(e[\"*\"]||[],e[i]||[]);for(const e of n)Ki(e,s)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return g(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML=\"\",void e.append(t);e.textContent=t.textContent}}const Gi=new Set([\"sanitize\",\"allowList\",\"sanitizeFn\"]),Ji=\"fade\",Zi=\"show\",tn=\".modal\",en=\"hide.bs.modal\",nn=\"hover\",sn=\"focus\",on={AUTO:\"auto\",TOP:\"top\",RIGHT:p()?\"left\":\"right\",BOTTOM:\"bottom\",LEFT:p()?\"right\":\"left\"},rn={allowList:Ri,animation:!0,boundary:\"clippingParents\",container:!1,customClass:\"\",delay:0,fallbackPlacements:[\"top\",\"right\",\"bottom\",\"left\"],html:!1,offset:[0,6],placement:\"top\",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:\'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>\',title:\"\",trigger:\"hover focus\"},an={allowList:\"object\",animation:\"boolean\",boundary:\"(string|element)\",container:\"(string|element|boolean)\",customClass:\"(string|function)\",delay:\"(number|object)\",fallbackPlacements:\"array\",html:\"boolean\",offset:\"(array|string|function)\",placement:\"(string|function)\",popperConfig:\"(null|object|function)\",sanitize:\"boolean\",sanitizeFn:\"(null|function)\",selector:\"(string|boolean)\",template:\"string\",title:\"(string|element|function)\",trigger:\"string\"};class ln extends W{constructor(t,e){if(void 0===Ve)throw new TypeError(\"Bootstrap\'s tooltips require Popper (https://popper.js.org)\");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return rn}static get DefaultType(){return an}static get NAME(){return\"tooltip\"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(tn),en,this._hideModalHandler),this._element.getAttribute(\"data-bs-original-title\")&&this._element.setAttribute(\"title\",this._element.getAttribute(\"data-bs-original-title\")),this._disposePopper(),super.dispose()}show(){if(\"none\"===this._element.style.display)throw new Error(\"Please use show on visible elements\");if(!this._isWithContent()||!this._isEnabled)return;const t=P.trigger(this._element,this.constructor.eventName(\"show\")),e=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute(\"aria-describedby\",i.getAttribute(\"id\"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(i),P.trigger(this._element,this.constructor.eventName(\"inserted\"))),this._popper=this._createPopper(i),i.classList.add(Zi),\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.on(t,\"mouseover\",h);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName(\"shown\")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName(\"hide\")).defaultPrevented){if(this._getTipElement().classList.remove(Zi),\"ontouchstart\"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,\"mouseover\",h);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute(\"aria-describedby\"),P.trigger(this._element,this.constructor.eventName(\"hidden\")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Ji,Zi),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Ma', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad Detectadas\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>El código proporcionado parece ser una versión minificada de la biblioteca Bootstrap. Dada su naturaleza y amplio uso, es muy probable que haya sido sometido a numerosas auditorías de seguridad. Sin embargo, siempre existen posibilidades de vulnerabilidades sutiles o dependencias inseguras.  En el análisis estático se debe considerar las vulnerabilidades conocidas de la versión específica de Bootstrap utilizada y sus dependencias.</p>\n\n          <ul class=\'list-group list-group-flush\'>\n            <li class=\'list-group-item\'>\n              <strong>Tipo:</strong> Dependencias Vulnerables (Potencial)\n              <br>\n              <strong>Línea Aproximada:</strong>  Todo el código. Especialmente cuando se utiliza alguna dependencia externa, como Popper.js (mencionado en el código).\n              <br>\n              <strong>Descripción:</strong> El código depende de otras bibliotecas (por ejemplo, Popper.js). Si estas bibliotecas tienen vulnerabilidades conocidas, el código Bootstrap puede verse afectado indirectamente.\n              <br>\n              <strong>Mitigación:</strong>\n              <ul>\n                <li>Mantener las dependencias actualizadas a las últimas versiones estables para corregir vulnerabilidades conocidas.</li>\n                <li>Utilizar herramientas de análisis de dependencias (como `npm audit` o `yarn audit`) para identificar dependencias vulnerables y tomar medidas correctivas.</li>\n                <li>Considerar la posibilidad de realizar auditorías de seguridad periódicas de las dependencias.</li>\n              </ul>\n              <strong>Métricas a mejorar:</strong> Acoplamiento (reducir la dependencia de bibliotecas externas siempre que sea posible).\n            </li>\n            <li class=\'list-group-item\'>\n              <strong>Tipo:</strong> Ataques XSS (Cross-Site Scripting) - Posible si se utiliza la configuración `html: true` en Tooltips o Popovers y el contenido no está debidamente saneado.\n              <br>\n              <strong>Línea Aproximada:</strong>  Bloque de código relacionado con Tooltip (aproximadamente linea 1400) y Popover (aproximadamente linea 1500), específicamente donde se maneja la opción `html`.\n              <br>\n              <strong>Descripción:</strong> Si se permite HTML en el contenido de Tooltips o Popovers (con `html: true`), y el contenido proviene de una fuente no confiable, un atacante podría inyectar código JavaScript malicioso.\n              <br>\n              <strong>Mitigación:</strong>\n              <ul>\n                <li>Siempre que sea posible, evitar el uso de `html: true`.</li>\n                <li>Si es necesario, **saneamiento estricto** de todo el contenido HTML antes de mostrarlo. Bootstrap incluye una función de saneamiento (ver `_maybeSanitize`, linea 1340), pero es crucial asegurarse de que la configuración `allowList` sea apropiada y que la función `sanitizeFn` (si se utiliza) sea lo suficientemente robusta.</li>\n                <li>Aplicar codificación de salida HTML para escapar caracteres especiales.</li>\n              </ul>\n              <strong>Métricas a mejorar:</strong>  Legibilidad (documentar claramente los riesgos de usar `html: true` y la necesidad de saneamiento).\n            </li>\n            <li class=\'list-group-item\'>\n                <strong>Tipo:</strong>  Vulnerabilidades relacionadas con la manipulación del DOM.\n                <br>\n                <strong>Línea Aproximada:</strong>  Múltiples ubicaciones donde se manipula el DOM (ej: `_putElementInTemplate`, linea 1350).\n                <br>\n                <strong>Descripción:</strong>  La manipulación incorrecta del DOM, especialmente cuando se basa en datos del usuario, podría llevar a XSS o errores en la estructura de la página.\n                <br>\n                <strong>Mitigación:</strong>\n                <ul>\n                  <li>Utilizar las APIs del DOM de forma segura y evitar el uso de `innerHTML` cuando sea posible.</li>\n                  <li>Validar y escapar datos del usuario antes de utilizarlos para manipular el DOM.</li>\n                  <li>Realizar pruebas exhaustivas para asegurar que la manipulación del DOM se realiza de forma correcta y segura.</li>\n                </ul>\n                <strong>Métricas a mejorar:</strong>  Acoplamiento, cohesión, legibilidad, mantenibilidad.\n              </li>\n          </ul>\n        </div>\n      </div>\n      <br>\n\n      <div class=\'card\'>\n        <div class=\'card-header bg-info text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <ul class=\'list-group list-group-flush\'>\n            <li class=\'list-group-item\'>\n              <strong>Complejidad:</strong> El código está minificado, lo que dificulta la lectura y el análisis de la complejidad.  Sin embargo, Bootstrap en general puede ser complejo debido a la gran cantidad de características que ofrece.\n              <br>\n              <strong>Mejora:</strong>  La versión minificada está bien para producción, pero las versiones de desarrollo deberían tener un código bien formateado y comentado para facilitar el mantenimiento y la depuración.\n            </li>\n            <li class=\'list-group-item\'>\n              <strong>Duplicación:</strong> Es difícil evaluar la duplicación en el código minificado.\n              <br>\n              <strong>Mejora:</strong> Se puede detectar la duplicación en el código fuente antes de la minificación utilizando herramientas de análisis estático.  Refactorizar el código para eliminar la duplicación mejorará la mantenibilidad.\n            </li>\n            <li class=\'list-group-item\'>\n              <strong>Legibilidad:</strong> La minificación hace que el código sea extremadamente ilegible.\n              <br>\n              <strong>Mejora:</strong> El código fuente *no minificado* debe ser bien formateado, comentado y seguir convenciones de nomenclatura claras. La minificación solo debe aplicarse para la distribución.\n            </li>\n            <li class=\'list-group-item\'>\n              <strong>Acoplamiento:</strong>  Bootstrap tiene un acoplamiento moderado.  Depende de Popper.js para algunos componentes (como dropdowns, tooltips, y popovers).\n              <br>\n              <strong>Mejora:</strong> El acoplamiento se puede reducir diseñando los componentes de forma que dependan menos de bibliotecas externas.\n            </li>\n          </ul>\n        </div>\n      </div>\n      <br>\n\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta (Mejores Prácticas)\n        </div>\n        <div class=\'card-body\'>\n          <ol>\n            <li>\n              <strong>Actualización de Dependencias:</strong>\n              <ul>\n                <li>Mantener Bootstrap y sus dependencias (especialmente Popper.js) actualizadas a las últimas versiones estables.</li>\n                <li>Usar un gestor de paquetes (npm, yarn) para gestionar dependencias y realizar auditorías de seguridad (`npm audit`, `yarn audit`).</li>\n              </ul>\n            </li>\n            <li>\n              <strong>Saneamiento de HTML:</strong>\n              <ul>\n                <li>Evitar el uso de `html: true` en Tooltips y Popovers a menos que sea absolutamente necesario.</li>\n                <li>Si se usa `html: true`, utilizar la función `_maybeSanitize` de Bootstrap con una configuración `allowList` apropiada y/o una función `sanitizeFn` robusta.</li>\n                <li>Considerar el uso de una biblioteca de saneamiento de HTML dedicada.</li>\n              </ul>\n            </li>\n            <li>\n               <strong>Validación y Codificación de Datos:</strong>\n               <ul>\n                 <li>Validar y escapar cualquier dato de usuario antes de utilizarlo en la manipulación del DOM o en el contenido de Tooltips/Popovers.</li>\n               </ul>\n             </li>\n            <li>\n              <strong>Análisis Estático:</strong>\n              <ul>\n                <li>Utilizar herramientas de análisis estático (linters, code analyzers) para identificar posibles problemas de seguridad y calidad del código.</li>\n              </ul>\n            </li>\n            <li>\n              <strong>Pruebas de Seguridad:</strong>\n              <ul>\n                <li>Realizar pruebas de penetración y pruebas de seguridad automatizadas para identificar vulnerabilidades en el código.</li>\n              </ul>\n            </li>\n            <li>\n              <strong>Legibilidad del Código:</strong>\n              <ul>\n                <li>Asegurarse de que el código fuente (no minificado) sea bien formateado, comentado y siga convenciones de nomenclatura claras.</li>\n                <li>Usar nombres descriptivos para variables y funciones.</li>\n                <li>Mantener las funciones cortas y enfocadas.</li>\n              </ul>\n            </li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:12:21', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(46, 'sweetalert2@11.js', 'Detectado por GPT', '/*!\r\n* sweetalert2 v11.17.2\r\n* Released under the MIT License.\r\n*/\r\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).Sweetalert2=t()}(this,(function(){\"use strict\";function e(e,t,n){if(\"function\"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError(\"Private element is not present on this object\")}function t(t,n){return t.get(e(t,n))}function n(e,t,n){(function(e,t){if(t.has(e))throw new TypeError(\"Cannot initialize the same private elements twice on an object\")})(e,t),t.set(e,n)}const o={},i=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,i=window.scrollY;o.restoreFocusTimeout=setTimeout((()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),window.scrollTo(n,i)})),s=\"swal2-\",r=[\"container\",\"shown\",\"height-auto\",\"iosfix\",\"popup\",\"modal\",\"no-backdrop\",\"no-transition\",\"toast\",\"toast-shown\",\"show\",\"hide\",\"close\",\"title\",\"html-container\",\"actions\",\"confirm\",\"deny\",\"cancel\",\"default-outline\",\"footer\",\"icon\",\"icon-content\",\"image\",\"input\",\"file\",\"range\",\"select\",\"radio\",\"checkbox\",\"label\",\"textarea\",\"inputerror\",\"input-label\",\"validation-message\",\"progress-steps\",\"active-progress-step\",\"progress-step\",\"progress-step-line\",\"loader\",\"loading\",\"styled\",\"top\",\"top-start\",\"top-end\",\"top-left\",\"top-right\",\"center\",\"center-start\",\"center-end\",\"center-left\",\"center-right\",\"bottom\",\"bottom-start\",\"bottom-end\",\"bottom-left\",\"bottom-right\",\"grow-row\",\"grow-column\",\"grow-fullscreen\",\"rtl\",\"timer-progress-bar\",\"timer-progress-bar-container\",\"scrollbar-measure\",\"icon-success\",\"icon-warning\",\"icon-info\",\"icon-question\",\"icon-error\",\"draggable\",\"dragging\"].reduce(((e,t)=>(e[t]=s+t,e)),{}),a=[\"success\",\"warning\",\"info\",\"question\",\"error\"].reduce(((e,t)=>(e[t]=s+t,e)),{}),l=\"SweetAlert2:\",c=e=>e.charAt(0).toUpperCase()+e.slice(1),u=e=>{console.warn(`${l} ${\"object\"==typeof e?e.join(\" \"):e}`)},d=e=>{console.error(`${l} ${e}`)},p=[],m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;n=`\"${e}\" is deprecated and will be removed in the next major release.${t?` Use \"${t}\" instead.`:\"\"}`,p.includes(n)||(p.push(n),u(n))},h=e=>\"function\"==typeof e?e():e,g=e=>e&&\"function\"==typeof e.toPromise,f=e=>g(e)?e.toPromise():Promise.resolve(e),b=e=>e&&Promise.resolve(e)===e,y=()=>document.body.querySelector(`.${r.container}`),v=e=>{const t=y();return t?t.querySelector(e):null},w=e=>v(`.${e}`),C=()=>w(r.popup),A=()=>w(r.icon),E=()=>w(r.title),k=()=>w(r[\"html-container\"]),B=()=>w(r.image),L=()=>w(r[\"progress-steps\"]),$=()=>w(r[\"validation-message\"]),x=()=>v(`.${r.actions} .${r.confirm}`),P=()=>v(`.${r.actions} .${r.cancel}`),T=()=>v(`.${r.actions} .${r.deny}`),S=()=>v(`.${r.loader}`),O=()=>w(r.actions),M=()=>w(r.footer),j=()=>w(r[\"timer-progress-bar\"]),H=()=>w(r.close),I=()=>{const e=C();if(!e)return[];const t=e.querySelectorAll(\'[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])\'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute(\"tabindex\")||\"0\"),o=parseInt(t.getAttribute(\"tabindex\")||\"0\");return n>o?1:n<o?-1:0})),o=e.querySelectorAll(\'\\n  a[href],\\n  area[href],\\n  input:not([disabled]),\\n  select:not([disabled]),\\n  textarea:not([disabled]),\\n  button:not([disabled]),\\n  iframe,\\n  object,\\n  embed,\\n  [tabindex=\"0\"],\\n  [contenteditable],\\n  audio[controls],\\n  video[controls],\\n  summary\\n\'),i=Array.from(o).filter((e=>\"-1\"!==e.getAttribute(\"tabindex\")));return[...new Set(n.concat(i))].filter((e=>ee(e)))},D=()=>N(document.body,r.shown)&&!N(document.body,r[\"toast-shown\"])&&!N(document.body,r[\"no-backdrop\"]),q=()=>{const e=C();return!!e&&N(e,r.toast)},V=(e,t)=>{if(e.textContent=\"\",t){const n=(new DOMParser).parseFromString(t,\"text/html\"),o=n.querySelector(\"head\");o&&Array.from(o.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector(\"body\");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},N=(e,t)=>{if(!t)return!1;const n=t.split(/\\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},_=(e,t,n)=>{if(((e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(r).includes(n)||Object.values(a).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))})(e,t),!t.customClass)return;const o=t.customClass[n];o&&(\"string\"==typeof o||o.forEach?z(e,o):u(`Invalid type of customClass.${n}! Expected string or iterable object, got \"${typeof o}\"`))},F=(e,t)=>{if(!t)return null;switch(t){case\"select\":case\"textarea\":case\"file\":return e.querySelector(`.${r.popup} > .${r[t]}`);case\"checkbox\":return e.querySelector(`.${r.popup} > .${r.checkbox} input`);case\"radio\":return e.querySelector(`.${r.popup} > .${r.radio} input:checked`)||e.querySelector(`.${r.popup} > .${r.radio} input:first-child`);case\"range\":return e.querySelector(`.${r.popup} > .${r.range} input`);default:return e.querySelector(`.${r.popup} > .${r.input}`)}},R=e=>{if(e.focus(),\"file\"!==e.type){const t=e.value;e.value=\"\",e.value=t}},U=(e,t,n)=>{e&&t&&(\"string\"==typeof t&&(t=t.split(/\\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},z=(e,t)=>{U(e,t,!0)},W=(e,t)=>{U(e,t,!1)},K=(e,t)=>{const n=Array.from(e.children);for(let e=0;e<n.length;e++){const o=n[e];if(o instanceof HTMLElement&&N(o,t))return o}},Y=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,\"number\"==typeof n?`${n}px`:n):e.style.removeProperty(t)},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"flex\";e&&(e.style.display=t)},Z=e=>{e&&(e.style.display=\"none\")},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"block\";e&&new MutationObserver((()=>{Q(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},G=(e,t,n,o)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,o)},Q=function(e,t){t?X(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"flex\"):Z(e)},ee=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),te=e=>!!(e.scrollHeight>e.clientHeight),ne=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue(\"animation-duration\")||\"0\"),o=parseFloat(t.getPropertyValue(\"transition-duration\")||\"0\");return n>0||o>0},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j();n&&ee(n)&&(t&&(n.style.transition=\"none\",n.style.width=\"100%\"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width=\"0%\"}),10))},ie=`\\n <div aria-labelledby=\"${r.title}\" aria-describedby=\"${r[\"html-container\"]}\" class=\"${r.popup}\" tabindex=\"-1\">\\n   <button type=\"button\" class=\"${r.close}\"></button>\\n   <ul class=\"${r[\"progress-steps\"]}\"></ul>\\n   <div class=\"${r.icon}\"></div>\\n   <img class=\"${r.image}\" />\\n   <h2 class=\"${r.title}\" id=\"${r.title}\"></h2>\\n   <div class=\"${r[\"html-container\"]}\" id=\"${r[\"html-container\"]}\"></div>\\n   <input class=\"${r.input}\" id=\"${r.input}\" />\\n   <input type=\"file\" class=\"${r.file}\" />\\n   <div class=\"${r.range}\">\\n     <input type=\"range\" />\\n     <output></output>\\n   </div>\\n   <select class=\"${r.select}\" id=\"${r.select}\"></select>\\n   <div class=\"${r.radio}\"></div>\\n   <label class=\"${r.checkbox}\">\\n     <input type=\"checkbox\" id=\"${r.checkbox}\" />\\n     <span class=\"${r.label}\"></span>\\n   </label>\\n   <textarea class=\"${r.textarea}\" id=\"${r.textarea}\"></textarea>\\n   <div class=\"${r[\"validation-message\"]}\" id=\"${r[\"validation-message\"]}\"></div>\\n   <div class=\"${r.actions}\">\\n     <div class=\"${r.loader}\"></div>\\n     <button type=\"button\" class=\"${r.confirm}\"></button>\\n     <button type=\"button\" class=\"${r.deny}\"></button>\\n     <button type=\"button\" class=\"${r.cancel}\"></button>\\n   </div>\\n   <div class=\"${r.footer}\"></div>\\n   <div class=\"${r[\"timer-progress-bar-container\"]}\">\\n     <div class=\"${r[\"timer-progress-bar\"]}\"></div>\\n   </div>\\n </div>\\n`.replace(/(^|\\n)\\s*/g,\"\"),se=()=>{o.currentInstance.resetValidationMessage()},re=e=>{const t=(()=>{const e=y();return!!e&&(e.remove(),W([document.documentElement,document.body],[r[\"no-backdrop\"],r[\"toast-shown\"],r[\"has-column\"]]),!0)})();if(\"undefined\"==typeof window||\"undefined\"==typeof document)return void d(\"SweetAlert2 requires document to initialize\");const n=document.createElement(\"div\");n.className=r.container,t&&z(n,r[\"no-transition\"]),V(n,ie),n.dataset.swal2Theme=e.theme;const o=\"string\"==typeof(i=e.target)?document.querySelector(i):i;var i;o.appendChild(n),(e=>{const t=C();t.setAttribute(\"role\",e.toast?\"alert\":\"dialog\"),t.setAttribute(\"aria-live\",e.toast?\"polite\":\"assertive\"),e.toast||t.setAttribute(\"aria-modal\",\"true\")})(e),(e=>{\"rtl\"===window.getComputedStyle(e).direction&&z(y(),r.rtl)})(o),(()=>{const e=C(),t=K(e,r.input),n=K(e,r.file),o=e.querySelector(`.${r.range} input`),i=e.querySelector(`.${r.range} output`),s=K(e,r.select),a=e.querySelector(`.${r.checkbox} input`),l=K(e,r.textarea);t.oninput=se,n.onchange=se,s.onchange=se,a.onchange=se,l.oninput=se,o.oninput=()=>{se(),i.value=o.value},o.onchange=()=>{se(),i.value=o.value}})()},ae=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):\"object\"==typeof e?le(e,t):e&&V(t,e)},le=(e,t)=>{e.jquery?ce(t,e):V(t,e.toString())},ce=(e,t)=>{if(e.textContent=\"\",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ue=(e,t)=>{const n=O(),o=S();n&&o&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?X(n):Z(n),_(n,t,\"actions\"),function(e,t,n){const o=x(),i=T(),s=P();if(!o||!i||!s)return;de(o,\"confirm\",n),de(i,\"deny\",n),de(s,\"cancel\",n),function(e,t,n,o){if(!o.buttonsStyling)return void W([e,t,n],r.styled);z([e,t,n],r.styled),o.confirmButtonColor&&(e.style.backgroundColor=o.confirmButtonColor,z(e,r[\"default-outline\"]));o.denyButtonColor&&(t.style.backgroundColor=o.denyButtonColor,z(t,r[\"default-outline\"]));o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor,z(n,r[\"default-outline\"]))}(o,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,o),e.insertBefore(i,o)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(o,t)))}(n,o,t),V(o,t.loaderHtml||\"\"),_(o,t,\"loader\"))};function de(e,t,n){const o=c(t);Q(e,n[`show${o}Button`],\"inline-block\"),V(e,n[`${t}ButtonText`]||\"\"),e.setAttribute(\"aria-label\",n[`${t}ButtonAriaLabel`]||\"\"),e.className=r[t],_(e,n,`${t}Button`)}const pe=(e,t)=>{const n=y();n&&(!function(e,t){\"string\"==typeof t?e.style.background=t:t||z([document.documentElement,document.body],r[\"no-backdrop\"])}(n,t.backdrop),function(e,t){if(!t)return;t in r?z(e,r[t]):(u(\'The \"position\" parameter is not valid, defaulting to \"center\"\'),z(e,r.center))}(n,t.position),function(e,t){if(!t)return;z(e,r[`grow-${t}`])}(n,t.grow),_(n,t,\"container\"))};var me={innerParams:new WeakMap,domCache:new WeakMap};const he=[\"input\",\"file\",\"range\",\"select\",\"radio\",\"checkbox\",\"textarea\"],ge=e=>{if(!e.input)return;if(!Ae[e.input])return void d(`Unexpected type of input! Expected ${Object.keys(Ae).join(\" | \")}, got \"${e.input}\"`);const t=we(e.input);if(!t)return;const n=Ae[e.input](t,e);X(t),e.inputAutoFocus&&setTimeout((()=>{R(n)}))},fe=(e,t)=>{const n=C();if(!n)return;const o=F(n,e);if(o){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;[\"id\",\"type\",\"value\",\"style\"].includes(n)||e.removeAttribute(n)}})(o);for(const e in t)o.setAttribute(e,t[e])}},be=e=>{if(!e.input)return;const t=we(e.input);t&&_(t,e,\"input\")},ye=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ve=(e,t,n)=>{if(n.inputLabel){const o=document.createElement(\"label\"),i=r[\"input-label\"];o.setAttribute(\"for\",e.id),o.className=i,\"object\"==typeof n.customClass&&z(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement(\"beforebegin\",o)}},we=e=>{const t=C();if(t)return K(t,r[e]||r.input)},Ce=(e,t)=>{[\"string\",\"number\"].includes(typeof t)?e.value=`${t}`:b(t)||u(`Unexpected type of inputValue! Expected \"string\", \"number\" or \"Promise\", got \"${typeof t}\"`)},Ae={};Ae.text=Ae.email=Ae.password=Ae.number=Ae.tel=Ae.url=Ae.search=Ae.date=Ae[\"datetime-local\"]=Ae.time=Ae.week=Ae.month=(e,t)=>(Ce(e,t.inputValue),ve(e,e,t),ye(e,t),e.type=t.input,e),Ae.file=(e,t)=>(ve(e,e,t),ye(e,t),e),Ae.range=(e,t)=>{const n=e.querySelector(\"input\"),o=e.querySelector(\"output\");return Ce(n,t.inputValue),n.type=t.input,Ce(o,t.inputValue),ve(n,e,t),e},Ae.select=(e,t)=>{if(e.textContent=\"\",t.inputPlaceholder){const n=document.createElement(\"option\");V(n,t.inputPlaceholder),n.value=\"\",n.disabled=!0,n.selected=!0,e.appendChild(n)}return ve(e,e,t),e},Ae.radio=e=>(e.textContent=\"\",e),Ae.checkbox=(e,t)=>{const n=F(C(),\"checkbox\");n.value=\"1\",n.checked=Boolean(t.inputValue);const o=e.querySelector(\"span\");return V(o,t.inputPlaceholder||t.inputLabel),n},Ae.textarea=(e,t)=>{Ce(e,t.inputValue),ye(e,t),ve(e,e,t);return setTimeout((()=>{if(\"MutationObserver\"in window){const n=parseInt(window.getComputedStyle(C()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const o=e.offsetWidth+(i=e,parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight));var i;o>n?C().style.width=`${o}px`:Y(C(),\"width\",t.width)})).observe(e,{attributes:!0,attributeFilter:[\"style\"]})}})),e};const Ee=(e,t)=>{const n=k();n&&(J(n),_(n,t,\"htmlContainer\"),t.html?(ae(t.html,n),X(n,\"block\")):t.text?(n.textContent=t.text,X(n,\"block\")):Z(n),((e,t)=>{const n=C();if(!n)return;const o=me.innerParams.get(e),i=!o||t.input!==o.input;he.forEach((e=>{const o=K(n,r[e]);o&&(fe(e,t.inputAttributes),o.className=r[e],i&&Z(o))})),t.input&&(i&&ge(t),be(t))})(e,t))},ke=(e,t)=>{for(const[n,o]of Object.entries(a))t.icon!==n&&W(e,o);z(e,t.icon&&a[t.icon]),$e(e,t),Be(),_(e,t,\"icon\")},Be=()=>{const e=C();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue(\"background-color\"),n=e.querySelectorAll(\"[class^=swal2-success-circular-line], .swal2-success-fix\");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Le=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,o=\"\";if(t.iconHtml)o=xe(t.iconHtml);else if(\"success\"===t.icon)o=\'\\n  <div class=\"swal2-success-circular-line-left\"></div>\\n  <span class=\"swal2-success-line-tip\"></span> <span class=\"swal2-success-line-long\"></span>\\n  <div class=\"swal2-success-ring\"></div> <div class=\"swal2-success-fix\"></div>\\n  <div class=\"swal2-success-circular-line-right\"></div>\\n\',n=n.replace(/ style=\".*?\"/g,\"\");else if(\"error\"===t.icon)o=\'\\n  <span class=\"swal2-x-mark\">\\n    <span class=\"swal2-x-mark-line-left\"></span>\\n    <span class=\"swal2-x-mark-line-right\"></span>\\n  </span>\\n\';else if(t.icon){o=xe({question:\"?\",warning:\"!\",info:\"i\"}[t.icon])}n.trim()!==o.trim()&&V(e,o)},$e=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[\".swal2-success-line-tip\",\".swal2-success-line-long\",\".swal2-x-mark-line-left\",\".swal2-x-mark-line-right\"])G(e,n,\"background-color\",t.iconColor);G(e,\".swal2-success-ring\",\"border-color\",t.iconColor)}},xe=e=>`<div class=\"${r[\"icon-content\"]}\">${e}</div>`;let Pe=!1,Te=0,Se=0,Oe=0,Me=0;const je=e=>{const t=C();if(e.target===t||A().contains(e.target)){Pe=!0;const n=De(e);Te=n.clientX,Se=n.clientY,Oe=parseInt(t.style.insetInlineStart)||0,Me=parseInt(t.style.insetBlockStart)||0,z(t,\"swal2-dragging\")}},He=e=>{const t=C();if(Pe){let{clientX:n,clientY:o}=De(e);t.style.insetInlineStart=`${Oe+(n-Te)}px`,t.style.insetBlockStart=`${Me+(o-Se)}px`}},Ie=()=>{const e=C();Pe=!1,W(e,\"swal2-dragging\")},De=e=>{let t=0,n=0;return e.type.startsWith(\"mouse\")?(t=e.clientX,n=e.clientY):e.type.startsWith(\"touch\")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},qe=(e,t)=>{const n=y(),o=C();if(n&&o){if(t.toast){Y(n,\"width\",t.width),o.style.width=\"100%\";const e=S();e&&o.insertBefore(e,A())}else Y(o,\"width\",t.width);Y(o,\"padding\",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Z($()),Ve(o,t),t.draggable&&!t.toast?(z(o,r.draggable),(e=>{e.addEventListener(\"mousedown\",je),document.body.addEventListener(\"mousemove\",He),e.addEventListener(\"mouseup\",Ie),e.addEventListener(\"touchstart\",je),document.body.addEventListener(\"touchmove\",He),e.addEventListener(\"touchend\",Ie)})(o)):(W(o,r.draggable),(e=>{e.removeEventListener(\"mousedown\",je),document.body.removeEventListener(\"mousemove\",He),e.removeEventListener(\"mouseup\",Ie),e.removeEventListener(\"touchstart\",je),document.body.removeEventListener(\"touchmove\",He),e.removeEventListener(\"touchend\",Ie)})(o))}},Ve=(e,t)=>{const n=t.showClass||{};e.className=`${r.popup} ${ee(e)?n.popup:\"\"}`,t.toast?(z([document.documentElement,document.body],r[\"toast-shown\"]),z(e,r.toast)):z(e,r.modal),_(e,t,\"popup\"),\"string\"==typeof t.customClass&&z(e,t.customClass),t.icon&&z(e,r[`icon-${t.icon}`])},Ne=e=>{const t=document.createElement(\"li\");return z(t,r[\"progress-step\"]),V(t,e),t},_e=e=>{const t=document.createElement(\"li\");return z(t,r[\"progress-step-line\"]),e.progressStepsDistance&&Y(t,\"width\",e.progressStepsDistance),t},Fe=(e,t)=>{qe(0,t),pe(0,t),((e,t)=>{const n=L();if(!n)return;const{progressSteps:o,currentProgressStep:i}=t;o&&0!==o.length&&void 0!==i?(X(n),n.textContent=\"\",i>=o.length&&u(\"Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)\"),o.forEach(((e,s)=>{const a=Ne(e);if(n.appendChild(a),s===i&&z(a,r[\"active-progress-step\"]),s!==o.length-1){const e=_e(t);n.appendChild(e)}}))):Z(n)})(0,t),((e,t)=>{const n=me.innerParams.get(e),o=A();if(!o)return;if(n&&t.icon===n.icon)return Le(o,t),void ke(o,t);if(!t.icon&&!t.iconHtml)return void Z(o);if(t.icon&&-1===Object.keys(a).indexOf(t.icon))return d(`Unknown icon! Expected \"success\", \"error\", \"warning\", \"info\" or \"question\", got \"${t.icon}\"`),void Z(o);X(o),Le(o,t),ke(o,t),z(o,t.showClass&&t.showClass.icon),window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\",Be)})(e,t),((e,t)=>{const n=B();n&&(t.imageUrl?(X(n,\"\"),n.setAttribute(\"src\",t.imageUrl),n.setAttribute(\"alt\",t.imageAlt||\"\"),Y(n,\"width\",t.imageWidth),Y(n,\"height\",t.imageHeight),n.className=r.image,_(n,t,\"image\")):Z(n))})(0,t),((e,t)=>{const n=E();n&&(J(n),Q(n,t.title||t.titleText,\"block\"),t.title&&ae(t.title,n),t.titleText&&(n.innerText=t.titleText),_(n,t,\"title\"))})(0,t),((e,t)=>{const n=H();n&&(V(n,t.closeButtonHtml||\"\"),_(n,t,\"closeButton\"),Q(n,t.showCloseButton),n.setAttribute(\"aria-label\",t.closeButtonAriaLabel||\"\"))})(0,t),Ee(e,t),ue(0,t),((e,t)=>{const n=M();n&&(J(n),Q(n,t.footer,\"block\"),t.footer&&ae(t.footer,n),_(n,t,\"footer\"))})(0,t);const n=C();\"function\"==typeof t.didRender&&n&&t.didRender(n),o.eventEmitter.emit(\"didRender\",n)},Re=()=>{var e;return null===(e=x())||void 0===e?void 0:e.click()},Ue=Object.freeze({cancel:\"cancel\",backdrop:\"backdrop\",close:\"close\",esc:\"esc\",timer:\"timer\"}),ze=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener(\"keydown\",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},We=(e,t)=>{var n;const o=I();if(o.length)return(e+=t)===o.length?e=0:-1===e&&(e=o.length-1),void o[e].focus();null===(n=C())||void 0===n||n.focus()},Ke=[\"ArrowRight\",\"ArrowDown\"],Ye=[\"ArrowLeft\",\"ArrowUp\"],Xe=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),\"Enter\"===t.key?Ze(t,e):\"Tab\"===t.key?Je(t):[...Ke,...Ye].includes(t.key)?Ge(t.key):\"Escape\"===t.key&&Qe(t,e,n)))},Ze=(e,t)=>{if(!h(t.allowEnterKey))return;const n=F(C(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if([\"textarea\",\"file\"].includes(t.input))return;Re(),e.preventDefault()}},Je=e=>{const t=e.target,n=I();let o=-1;for(let e=0;e<n.length;e++)if(t===n[e]){o=e;break}e.shiftKey?We(o,-1):We(o,1),e.stopPropagation(),e.preventDefault()},Ge=e=>{const t=O(),n=x(),o=T(),i=P();if(!(t&&n&&o&&i))return;const s=[n,o,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const r=Ke.includes(e)?\"nextElementSibling\":\"previousElementSibling\";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[r],!a)return;if(a instanceof HTMLButtonElement&&ee(a))break}a instanceof HTMLButtonElement&&a.focus()}},Qe=(e,t,n)=>{h(t.allowEscapeKey)&&(e.preventDefault(),n(Ue.esc))};var et={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const tt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute(\"data-previous-aria-hidden\")?(e.setAttribute(\"aria-hidden\",e.getAttribute(\"data-previous-aria-hidden\")||\"\"),e.removeAttribute(\"data-previous-aria-hidden\")):e.removeAttribute(\"aria-hidden\")}))},nt=\"undefined\"!=typeof window&&!!window.GestureEvent,ot=()=>{const e=y();if(!e)return;let t;e.ontouchstart=e=>{t=it(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},it=e=>{const t=e.target,n=y(),o=k();return!(!n||!o)&&(!st(e)&&!rt(e)&&(t===n||!te(n)&&t instanceof HTMLElement&&\"INPUT\"!==t.tagName&&\"TEXTAREA\"!==t.tagName&&(!te(o)||!o.contains(t))))},st=e=>e.touches&&e.touches.length&&\"stylus\"===e.touches[0].touchType,rt=e=>e.touches&&e.touches.length>1;let at=null;const lt=e=>{null===at&&(document.body.scrollHeight>window.innerHeight||\"scroll\"===e)&&(at=parseInt(window.getComputedStyle(document.body).getPropertyValue(\"padding-right\")),document.body.style.paddingRight=`${at+(()=>{const e=document.createElement(\"div\");e.className=r[\"scrollbar-measure\"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function ct(e,t,n,s){q()?bt(e,s):(i(n).then((()=>bt(e,s))),ze(o)),nt?(t.setAttribute(\"style\",\"display:none !important\"),t.removeAttribute(\"class\"),t.innerHTML=\"\"):t.remove(),D()&&(null!==at&&(document.body.style.paddingRight=`${at}px`,at=null),(()=>{if(N(document.body,r.iosfix)){const e=parseInt(document.body.style.top,10);W(document.body,r.iosfix),document.body.style.top=\"\",document.body.scrollTop=-1*e}})(),tt()),W([document.documentElement,document.body],[r.shown,r[\"height-auto\"],r[\"no-backdrop\"],r[\"toast-shown\"]])}function ut(e){e=ht(e);const t=et.swalPromiseResolve.get(this),n=dt(this);this.isAwaitingPromise?e.isDismissed||(mt(this),t(e)):n&&t(e)}const dt=e=>{const t=C();if(!t)return!1;const n=me.innerParams.get(e);if(!n||N(t,n.hideClass.popup))return!1;W(t,n.showClass.popup),z(t,n.hideClass.popup);const o=y();return W(o,n.showClass.backdrop),z(o,n.hideClass.backdrop),gt(e,t,n),!0};function pt(e){const t=et.swalPromiseReject.get(this);mt(this),t&&t(e)}const mt=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,me.innerParams.get(e)||e._destroy())},ht=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),gt=(e,t,n)=>{var i;const s=y(),r=ne(t);\"function\"==typeof n.willClose&&n.willClose(t),null===(i=o.eventEmitter)||void 0===i||i.emit(\"willClose\",t),r?ft(e,t,s,n.returnFocus,n.didClose):ct(e,s,n.returnFocus,n.didClose)},ft=(e,t,n,i,s)=>{o.swalCloseEventFinishedCallback=ct.bind(null,e,n,i,s);const r=function(e){var n;e.target===t&&(null===(n=o.swalCloseEventFinishedCallback)||void 0===n||n.call(o),delete o.swalCloseEventFinishedCallback,t.removeEventListener(\"animationend\",r),t.removeEventListener(\"transitionend\",r))};t.addEventListener(\"animationend\",r),t.addEventListener(\"transitionend\",r)},bt=(e,t)=>{setTimeout((()=>{var n;\"function\"==typeof t&&t.bind(e.params)(),null===(n=o.eventEmitter)||void 0===n||n.emit(\"didClose\"),e._destroy&&e._destroy()}))},yt=e=>{let t=C();if(t||new Gn,t=C(),!t)return;const n=S();q()?Z(A()):vt(t,e),X(n),t.setAttribute(\"data-loading\",\"true\"),t.setAttribute(\"aria-busy\",\"true\"),t.focus()},vt=(e,t)=>{const n=O(),o=S();n&&o&&(!t&&ee(x())&&(t=x()),X(n),t&&(Z(t),o.setAttribute(\"data-button-to-replace\",t.className),n.insertBefore(o,t)),z([e,n],r.loading))},wt=e=>e.checked?1:0,Ct=e=>e.checked?e.value:null,At=e=>e.files&&e.files.length?null!==e.getAttribute(\"multiple\")?e.files:e.files[0]:null,Et=(e,t)=>{const n=C();if(!n)return;const o=e=>{\"select\"===t.input?function(e,t,n){const o=K(e,r.select);if(!o)return;const i=(e,t,o)=>{const i=document.createElement(\"option\");i.value=o,V(i,t),i.selected=Lt(o,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement(\"optgroup\");e.label=t,e.disabled=!1,o.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(o,n,t)})),o.focus()}(n,Bt(e),t):\"radio\"===t.input&&function(e,t,n){const o=K(e,r.radio);if(!o)return;t.forEach((e=>{const t=e[0],i=e[1],s=document.createElement(\"input\"),a=document.createElement(\"label\");s.type=\"radio\",s.name=r.radio,s.value=t,Lt(t,n.inputValue)&&(s.checked=!0);const l=document.createElement(\"span\");V(l,i),l.className=r.label,a.appendChild(s),a.appendChild(l),o.appendChild(a)}));const i=o.querySelectorAll(\"input\");i.length&&i[0].focus()}(n,Bt(e),t)};g(t.inputOptions)||b(t.inputOptions)?(yt(x()),f(t.inputOptions).then((t=>{e.hideLoading(),o(t)}))):\"object\"==typeof t.inputOptions?o(t.inputOptions):d(\"Unexpected type of inputOptions! Expected object, Map or Promise, got \"+typeof t.inputOptions)},kt=(e,t)=>{const n=e.getInput();n&&(Z(n),f(t.inputValue).then((o=>{n.value=\"number\"===t.input?`${parseFloat(o)||0}`:`${o}`,X(n),n.focus(),e.hideLoading()})).catch((t=>{d(`Error in inputValue promise: ${t}`),n.value=\"\",X(n),n.focus(),e.hideLoading()})))};const Bt=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let o=e;\"object\"==typeof o&&(o=Bt(o)),t.push([n,o])})):Object.keys(e).forEach((n=>{let o=e[n];\"object\"==typeof o&&(o=Bt(o)),t.push([n,o])})),t},Lt=(e,t)=>!!t&&t.toString()===e.toString(),$t=(e,t)=>{const n=me.innerParams.get(e);if(!n.input)return void d(`The \"input\" parameter is needed to be set when using returnInputValueOn${c(t)}`);const o=e.getInput(),i=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case\"checkbox\":return wt(n);case\"radio\":return Ct(n);case\"file\":return At(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,n);n.inputValidator?xt(e,i,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):\"deny\"===t?Pt(e,i):Ot(e,i)},xt=(e,t,n)=>{const o=me.innerParams.get(e);e.disableInput();Promise.resolve().then((()=>f(o.inputValidator(t,o.validationMessage)))).then((o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):\"deny\"===n?Pt(e,t):Ot(e,t)}))},Pt=(e,t)=>{const n=me.innerParams.get(e||void 0);if(n.showLoaderOnDeny&&yt(T()),n.preDeny){e.isAwaitingPromise=!0;Promise.resolve().then((()=>f(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),mt(e)):e.close({isDenied:!0,value:void 0===n?t:n})})).catch((t=>St(e||void 0,t)))}else e.close({isDenied:!0,value:t})},Tt=(e,t)=>{e.close({isConfirmed:!0,value:t})},St=(e,t)=>{e.rejectPromise(t)},Ot=(e,t)=>{const n=me.innerParams.get(e||void 0);if(n.showLoaderOnConfirm&&yt(),n.preConfirm){e.resetValidationMessage(),e.isAwaitingPromise=!0;Promise.resolve().then((()=>f(n.preConfirm(t,n.validationMessage)))).then((n=>{ee($())||!1===n?(e.hideLoading(),mt(e)):Tt(e,void 0===n?t:n)})).catch((t=>St(e||void 0,t)))}else Tt(e,t)};function Mt(){const e=me.innerParams.get(this);if(!e)return;const t=me.domCache.get(this);Z(t.loader),q()?e.icon&&X(A()):jt(t),W([t.popup,t.actions],r.loading),t.popup.removeAttribute(\"aria-busy\"),t.popup.removeAttribute(\"data-loading\"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const jt=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute(\"data-button-to-replace\"));t.length?X(t[0],\"inline-block\"):ee(x())||ee(T())||ee(P())||Z(e.actions)};function Ht(){const e=me.innerParams.get(this),t=me.domCache.get(this);return t?F(t.popup,e.input):null}function It(e,t,n){const o=me.domCache.get(e);t.forEach((e=>{o[e].disabled=n}))}function Dt(e,t){const n=C();if(n&&e)if(\"radio\"===e.type){const e=n.querySelectorAll(`[name=\"${r.radio}\"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function qt(){It(this,[\"confirmButton\",\"denyButton\",\"cancelButton\"],!1)}function Vt(){It(this,[\"confirmButton\",\"denyButton\",\"cancelButton\"],!0)}function Nt(){Dt(this.getInput(),!1)}function _t(){Dt(this.getInput(),!0)}function Ft(e){const t=me.domCache.get(this),n=me.innerParams.get(this);V(t.validationMessage,e),t.validationMessage.className=r[\"validation-message\"],n.customClass&&n.customClass.validationMessage&&z(t.validationMessage,n.customClass.validationMessage),X(t.validationMessage);const o=this.getInput();o&&(o.setAttribute(\"aria-invalid\",\"true\"),o.setAttribute(\"aria-describedby\",r[\"validation-message\"]),R(o),z(o,r.inputerror))}function Rt(){const e=me.domCache.get(this);e.validationMessage&&Z(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute(\"aria-invalid\"),t.removeAttribute(\"aria-describedby\"),W(t,r.inputerror))}const Ut={title:\"\",titleText:\"\",text:\"\",html:\"\",footer:\"\",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:\"light\",showClass:{popup:\"swal2-show\",backdrop:\"swal2-backdrop-show\",icon:\"swal2-icon-show\"},hideClass:{popup:\"swal2-hide\",backdrop:\"swal2-backdrop-hide\",icon:\"swal2-icon-hide\"},customClass:{},target:\"body\",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:\"OK\",confirmButtonAriaLabel:\"\",confirmButtonColor:void 0,denyButtonText:\"No\",denyButtonAriaLabel:\"\",denyButtonColor:void 0,cancelButtonText:\"Cancel\",cancelButtonAriaLabel:\"\",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:\"&times;\",closeButtonAriaLabel:\"Close this dialog\",loaderHtml:\"\",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:\"\",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:\"\",inputLabel:\"\",inputValue:\"\",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:\"center\",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},zt=[\"allowEscapeKey\",\"allowOutsideClick\",\"background\",\"buttonsStyling\",\"cancelButtonAriaLabel\",\"cancelButtonColor\",\"cancelButtonText\",\"closeButtonAriaLabel\",\"closeButtonHtml\",\"color\",\"confirmButtonAriaLabel\",\"confirmButtonColor\",\"confirmButtonText\",\"currentProgressStep\",\"customClass\",\"denyButtonAriaLabel\",\"denyButtonColor\",\"denyButtonText\",\"didClose\",\"didDestroy\",\"draggable\",\"footer\",\"hideClass\",\"html\",\"icon\",\"iconColor\",\"iconHtml\",\"imageAlt\",\"imageHeight\",\"imageUrl\",\"imageWidth\",\"preConfirm\",\"preDeny\",\"progressSteps\",\"returnFocus\",\"reverseButtons\",\"showCancelButton\",\"showCloseButton\",\"showConfirmButton\",\"showDenyButton\",\"text\",\"title\",\"titleText\",\"theme\",\"willClose\"],Wt={allowEnterKey:void 0},Kt=[\"allowOutsideClick\",\"allowEnterKey\",\"backdrop\",\"draggable\",\"focusConfirm\",\"focusDeny\",\"focusCancel\",\"returnFocus\",\"heightAuto\",\"keydownListenerCapture\"],Yt=e=>Object.prototype.hasOwnProperty.call(Ut,e),Xt=e=>-1!==zt.indexOf(e),Zt=e=>Wt[e],Jt=e=>{Yt(e)||u(`Unknown parameter \"${e}\"`)},Gt=e=>{Kt.includes(e)&&u(`The parameter \"${e}\" is incompatible with toasts`)},Qt=e=>{const t=Zt(e);t&&m(e,t)},en=e=>{!1===e.backdrop&&e.allowOutsideClick&&u(\'\"allowOutsideClick\" parameter requires `backdrop` parameter to be set to `true`\'),e.theme&&![\"light\",\"dark\",\"auto\",\"borderless\"].includes(e.theme)&&u(`Invalid theme \"${e.theme}\". Expected \"light\", \"dark\", \"auto\", or \"borderless\"`);for(const t in e)Jt(t),e.toast&&Gt(t),Qt(t)};function tn(e){const t=y(),n=C(),o=me.innerParams.get(this);if(!n||N(n,o.hideClass.popup))return void u(\"You\'re trying to update the closed or closing popup, that won\'t work. Use the update() method in preConfirm parameter or show a new popup.\");const i=nn(e),s=Object.assign({},o,i);en(s),t.dataset.swal2Theme=s.theme,Fe(this,s),me.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const nn=e=>{const t={};return Object.keys(e).forEach((n=>{Xt(n)?t[n]=e[n]:u(`Invalid parameter to update: ${n}`)})),t};function on(){const e=me.domCache.get(this),t=me.innerParams.get(this);t?(e.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),\"function\"==typeof t.didDestroy&&t.didDestroy(),o.eventEmitter.emit(\"didDestroy\"),sn(this)):rn(this)}const sn=e=>{rn(e),delete e.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},rn=e=>{e.isAwaitingPromise?(an(me,e),e.isAwaitingPromise=!0):(an(et,e),an(me,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},an=(e,t)=>{for(const n in e)e[n].delete(t)};var ln=Object.freeze({__proto__:null,_destroy:on,close:ut,closeModal:ut,closePopup:ut,closeToast:ut,disableButtons:Vt,disableInput:_t,disableLoading:Mt,enableButtons:qt,enableInput:Nt,getInput:Ht,handleAwaitingPromise:mt,hideLoading:Mt,rejectPromise:pt,resetValidationMessage:Rt,showValidationMessage:Ft,update:tn});const cn=(e,t,n)=>{t.popup.onclick=()=>{e&&(un(e)||e.timer||e.input)||n(Ue.close)}},un=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let dn=!1;const pn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(dn=!0)}}},mn=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(dn=!0)}}},hn=(e,t,n)=>{t.container.onclick=o=>{dn?dn=!1:o.target===t.container&&h(e.allowOutsideClick)&&n(Ue.backdrop)}},gn=e=>e instanceof Element||(e=>\"object\"==typeof e&&e.jquery)(e);const fn=()=>{if(o.timeout)return(()=>{const e=j();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty(\"transition\"),e.style.width=\"100%\";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`})(),o.timeout.stop()},bn=()=>{if(o.timeout){const e=o.timeout.start();return oe(e),e}};let yn=!1;const vn={};const wn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in vn){const n=t.getAttribute(e);if(n)return void vn[e].fire({template:n})}};o.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const o=function(){n.removeListener(e,o);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];t.apply(n,s)};this.on(e,o)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(e){console.error(e)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),o=n.indexOf(t);o>-1&&n.splice(o,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var Cn=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return\"object\"!=typeof e[0]||gn(e[0])?[\"title\",\"html\",\"icon\"].forEach(((n,o)=>{const i=e[o];\"string\"==typeof i||gn(i)?t[n]=i:void 0!==i&&d(`Unexpected type of ${n}! Expected \"string\" or \"Element\", got ${typeof i}`)})):Object.assign(t,e[0]),t},bindClickHandler:function(){vn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"data-swal-template\"]=this,yn||(document.body.addEventListener(\"click\",wn),yn=!0)},clickCancel:()=>{var e;return null===(e=P())||void 0===e?void 0:e.click()},clickConfirm:Re,clickDeny:()=>{var e;return null===(e=T())||void 0===e?void 0:e.click()},enableLoading:yt,fire:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)},getActions:O,getCancelButton:P,getCloseButton:H,getConfirmButton:x,getContainer:y,getDenyButton:T,getFocusableElements:I,getFooter:M,getHtmlContainer:k,getIcon:A,getIconContent:()=>w(r[\"icon-content\"]),getImage:B,getInputLabel:()=>w(r[\"input-label\"]),getLoader:S,getPopup:C,getProgressSteps:L,getTimerLeft:()=>o.timeout&&o.timeout.getTimerLeft(),getTimerProgressBar:j,getTitle:E,getValidationMessage:$,increaseTimer:e=>{if(o.timeout){const t=o.timeout.increase(e);return oe(t,!0),t}},isDeprecatedParameter:Zt,isLoading:()=>{const e=C();return!!e&&e.hasAttribute(\"data-loading\")},isTimerRunning:()=>!(!o.timeout||!o.timeout.isRunning()),isUpdatableParameter:Xt,isValidParameter:Yt,isVisible:()=>ee(C()),mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},off:(e,t)=>{e?t?o.eventEmitter.removeListener(e,t):o.eventEmitter.removeAllListeners(e):o.eventEmitter.reset()},on:(e,t)=>{o.eventEmitter.on(e,t)},once:(e,t)=>{o.eventEmitter.once(e,t)},resumeTimer:bn,showLoading:yt,stopTimer:fn,toggleTimer:()=>{const e=o.timeout;return e&&(e.running?fn():bn())}});class An{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const En=[\"swal-title\",\"swal-html\",\"swal-footer\"],kn=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-param\")).forEach((e=>{On(e,[\"name\",\"value\"]);const n=e.getAttribute(\"name\"),o=e.getAttribute(\"value\");n&&o&&(t[n]=\"boolean\"==typeof Ut[n]?\"false\"!==o:\"object\"==typeof Ut[n]?JSON.parse(o):o)})),t},Bn=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-function-param\")).forEach((e=>{const n=e.getAttribute(\"name\"),o=e.getAttribute(\"value\");n&&o&&(t[n]=new Function(`return ${o}`)())})),t},Ln=e=>{const t={};return Array.from(e.querySelectorAll(\"swal-button\")).forEach((e=>{On(e,[\"type\",\"color\",\"aria-label\"]);const n=e.getAttribute(\"type\");n&&[\"confirm\",\"cancel\",\"deny\"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${c(n)}Button`]=!0,e.hasAttribute(\"color\")&&(t[`${n}ButtonColor`]=e.getAttribute(\"color\")),e.hasAttribute(\"aria-label\")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute(\"aria-label\")))})),t},$n=e=>{const t={},n=e.querySelector(\"swal-image\");return n&&(On(n,[\"src\",\"width\",\"height\",\"alt\"]),n.hasAttribute(\"src\")&&(t.imageUrl=n.getAttribute(\"src\")||void 0),n.hasAttribute(\"width\")&&(t.imageWidth=n.getAttribute(\"width\")||void 0),n.hasAttribute(\"height\")&&(t.imageHeight=n.getAttribute(\"height\")||void 0),n.hasAttribute(\"alt\")&&(t.imageAlt=n.getAttribute(\"alt\")||void 0)),t},xn=e=>{const t={},n=e.querySelector(\"swal-icon\");return n&&(On(n,[\"type\",\"color\"]),n.hasAttribute(\"type\")&&(t.icon=n.getAttribute(\"type\")),n.hasAttribute(\"color\")&&(t.iconColor=n.getAttribute(\"color\")),t.iconHtml=n.innerHTML),t},Pn=e=>{const t={},n=e.querySelector(\"swal-input\");n&&(On(n,[\"type\",\"label\",\"placeholder\",\"value\"]),t.input=n.getAttribute(\"type\")||\"text\",n.hasAttribute(\"label\")&&(t.inputLabel=n.getAttribute(\"label\")),n.hasAttribute(\"placeholder\")&&(t.inputPlaceholder=n.getAttribute(\"placeholder\")),n.hasAttribute(\"value\")&&(t.inputValue=n.getAttribute(\"value\")));const o=Array.from(e.querySelectorAll(\"swal-input-option\"));return o.length&&(t.inputOptions={},o.forEach((e=>{On(e,[\"value\"]);const n=e.getAttribute(\"value\");if(!n)return;const o=e.innerHTML;t.inputOptions[n]=o}))),t},Tn=(e,t)=>{const n={};for(const o in t){const i=t[o],s=e.querySelector(i);s&&(On(s,[]),n[i.replace(/^swal-/,\"\")]=s.innerHTML.trim())}return n},Sn=e=>{const t=En.concat([\"swal-param\",\"swal-function-param\",\"swal-button\",\"swal-image\",\"swal-icon\",\"swal-input\",\"swal-input-option\"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||u(`Unrecognized element <${n}>`)}))},On=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&u([`Unrecognized attribute \"${n.name}\" on <${e.tagName.toLowerCase()}>.`,\"\"+(t.length?`Allowed attributes are: ${t.join(\", \")}`:\"To set the value, use HTML within the element.\")])}))},Mn=e=>{const t=y(),n=C();\"function\"==typeof e.willOpen&&e.willOpen(n),o.eventEmitter.emit(\"willOpen\",n);const i=window.getComputedStyle(document.body).overflowY;Dn(t,n,e),setTimeout((()=>{Hn(t,n)}),10),D()&&(In(t,e.scrollbarPadding,i),(()=>{const e=y();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute(\"aria-hidden\")&&t.setAttribute(\"data-previous-aria-hidden\",t.getAttribute(\"aria-hidden\")||\"\"),t.setAttribute(\"aria-hidden\",\"true\"))}))})()),q()||o.previousActiveElement||(o.previousActiveElement=document.activeElement),\"function\"==typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),o.eventEmitter.emit(\"didOpen\",n),W(t,r[\"no-transition\"])},jn=e=>{const t=C();if(e.target!==t)return;const n=y();t.removeEventListener(\"animationend\",jn),t.removeEventListener(\"transitionend\",jn),n.style.overflowY=\"auto\"},Hn=(e,t)=>{ne(t)?(e.style.overflowY=\"hidden\",t.addEventListener(\"animationend\",jn),t.addEventListener(\"transitionend\",jn)):e.style.overflowY=\"auto\"},In=(e,t,n)=>{(()=>{if(nt&&!N(document.body,r.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+\"px\",z(document.body,r.iosfix),ot()}})(),t&&\"hidden\"!==n&&lt(n),setTimeout((()=>{e.scrollTop=0}))},Dn=(e,t,n)=>{z(e,n.showClass.backdrop),n.animation?(t.style.setProperty(\"opacity\",\"0\",\"important\"),X(t,\"grid\"),setTimeout((()=>{z(t,n.showClass.popup),t.style.removeProperty(\"opacity\")}),10)):X(t,\"grid\"),z([document.documentElement,document.body],r.shown),n.heightAuto&&n.backdrop&&!n.toast&&z([document.documentElement,document.body],r[\"height-auto\"])};var qn=(e,t)=>/^[a-zA-Z0-9.+_\'-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||\"Invalid email address\"),Vn=(e,t)=>/^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-z]{2,63}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||\"Invalid URL\");function Nn(e){!function(e){e.inputValidator||(\"email\"===e.input&&(e.inputValidator=qn),\"url\"===e.input&&(e.inputValidator=Vn))}(e),e.showLoaderOnConfirm&&!e.preConfirm&&u(\"showLoaderOnConfirm is set to true, but preConfirm is not defined.\\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\\nhttps://sweetalert2.github.io/#ajax-request\"),function(e){(!e.target||\"string\"==typeof e.target&&!document.querySelector(e.target)||\"string\"!=typeof e.target&&!e.target.appendChild)&&(u(\'Target parameter is not valid, defaulting to \"body\"\'),e.target=\"body\")}(e),\"string\"==typeof e.title&&(e.title=e.title.split(\"\\n\").join(\"<br />\")),re(e)}let _n;var Fn=new WeakMap;class Rn{constructor(){if(n(this,Fn,void 0),\"undefined\"==typeof window)return;_n=this;for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];const s=Object.freeze(this.constructor.argsToParams(o));var r,a,l;this.params=s,this.isAwaitingPromise=!1,r=Fn,a=this,l=this._main(_n.params),r.set(e(r,a),l)}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(en(Object.assign({},t,e)),o.currentInstance){const e=et.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:t}=o.currentInstance;o.currentInstance._destroy(),t||e({isDismissed:!0}),D()&&tt()}o.currentInstance=_n;const n=zn(e,t);Nn(n),Object.freeze(n),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);const i=Wn(_n);return Fe(_n,n),me.innerParams.set(_n,n),Un(_n,i,n)}then(e){return t(Fn,this).then(e)}finally(e){return t(Fn,this).finally(e)}}const Un=(e,t,n)=>new Promise(((i,s)=>{const r=t=>{e.close({isDismissed:!0,dismiss:t})};et.swalPromiseResolve.set(e,i),et.swalPromiseReject.set(e,s),t.confirmButton.onclick=()=>{(e=>{const t=me.innerParams.get(e);e.disableButtons(),t.input?$t(e,\"confirm\"):Ot(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=me.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?$t(e,\"deny\"):Pt(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(Ue.cancel)})(e,r)},t.closeButton.onclick=()=>{r(Ue.close)},((e,t,n)=>{e.toast?cn(e,t,n):(pn(t),mn(t),hn(e,t,n))})(n,t,r),((e,t,n)=>{ze(e),t.toast||(e.keydownHandler=e=>Xe(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:C(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener(\"keydown\",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(o,n,r),((e,t)=>{\"select\"===t.input||\"radio\"===t.input?Et(e,t):[\"text\",\"email\",\"number\",\"tel\",\"textarea\"].some((e=>e===t.input))&&(g(t.inputValue)||b(t.inputValue))&&(yt(x()),kt(e,t))})(e,n),Mn(n),Kn(o,n,r),Yn(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),zn=(e,t)=>{const n=(e=>{const t=\"string\"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return Sn(n),Object.assign(kn(n),Bn(n),Ln(n),$n(n),xn(n),Pn(n),Tn(n,En))})(e),o=Object.assign({},Ut,t,n,e);return o.showClass=Object.assign({},Ut.showClass,o.showClass),o.hideClass=Object.assign({},Ut.hideClass,o.hideClass),!1===o.animation&&(o.showClass={backdrop:\"swal2-noanimation\"},o.hideClass={}),o},Wn=e=>{const t={popup:C(),container:y(),actions:O(),confirmButton:x(),denyButton:T(),cancelButton:P(),loader:S(),closeButton:H(),validationMessage:$(),progressSteps:L()};return me.domCache.set(e,t),t},Kn=(e,t,n)=>{const o=j();Z(o),t.timer&&(e.timeout=new An((()=>{n(\"timer\"),delete e.timeout}),t.timer),t.timerProgressBar&&(X(o),_(o,t,\"timerProgressBar\"),setTimeout((()=>{e.timeout&&e.timeout.running&&oe(t.timer)}))))},Yn=(e,t)=>{if(!t.toast)return h(t.allowEnterKey)?void(Xn(e)||Zn(e,t)||We(-1,1)):(m(\"allowEnterKey\"),void Jn())},Xn=e=>{const t=Array.from(e.popup.querySelectorAll(\"[autofocus]\"));for(const e of t)if(e instanceof HTMLElement&&ee(e))return e.focus(),!0;return!1},Zn=(e,t)=>t.focusDeny&&ee(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ee(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ee(e.confirmButton))&&(e.confirmButton.focus(),!0),Jn=()=>{document.activeElement instanceof HTMLElement&&\"function\"==typeof document.activeElement.blur&&document.activeElement.blur()};if(\"undefined\"!=typeof window&&/^ru\\b/.test(navigator.language)&&location.host.match(/\\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem(\"swal-initiation\");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents=\"none\";const e=document.createElement(\"audio\");e.src=\"https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3\",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem(\"swal-initiation\",`${e}`)}Rn.prototype.disableButtons=Vt,Rn.prototype.enableButtons=qt,Rn.prototype.getInput=Ht,Rn.prototype.disableInput=_t,Rn.prototype.enableInput=Nt,Rn.prototype.hideLoading=Mt,Rn.prototype.disableLoading=Mt,Rn.prototype.showValidationMessage=Ft,Rn.prototype.resetValidationMessage=Rt,Rn.prototype.close=ut,Rn.prototype.closePopup=ut,Rn.prototype.closeModal=ut,Rn.prototype.closeToast=ut,Rn.prototype.rejectPromise=pt,Rn.prototype.update=tn,Rn.prototype._destroy=on,Object.assign(Rn,Cn),Object.keys(ln).forEach((e=>{Rn[e]=function(){return _n&&_n[e]?_n[e](...arguments):null}})),Rn.DismissReason=Ue,Rn.version=\"11.17.2\";const Gn=Rn;return Gn.default=Gn,Gn})),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2);\r\n\"undefined\"!=typeof document&&function(e,t){var n=e.createElement(\"style\");if(e.getElementsByTagName(\"head\")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,\":root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:\\\"top-start     top            top-end\\\" \\\"center-start  center         center-end\\\" \\\"bottom-start  bottom-center  bottom-end\\\";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:\\\"!\\\";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).s', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Posible XSS a traves de template (LOW)</h5>\n          <p class=\'card-text\'>\n            <b>Línea aproximada:</b> 745, 757, 788, 837, 851, 865\n            <br>\n            <b>Descripción:</b> El código SweetAlert2 permite el uso de plantillas HTML externas o directamente en el código. Si el contenido de estas plantillas (títulos, texto, HTML, etc.) se construye a partir de datos no saneados provenientes del usuario (por ejemplo, a través de parámetros GET/POST, bases de datos, APIs externas sin validar, etc.), existe el riesgo de inyectar código malicioso, como scripts JavaScript, que se ejecutarán en el navegador del usuario cuando se muestre la alerta. Esto podría permitir a un atacante robar cookies, redirigir al usuario a sitios maliciosos o realizar otras acciones no autorizadas en nombre del usuario.\n            <br>\n            <b>Ejemplo:</b> Un atacante podría modificar la URL de la página para incluir un script malicioso en el parámetro `title` o `html` de la alerta, por ejemplo:\n            `https://example.com/pagina.php?title=<script>alert(\'XSS\')</script>`.\n            <br>\n            <b>Cómo mitigarla:</b>\n            <ol>\n              <li><b>Saneamiento de datos:</b> Antes de mostrar cualquier dato en la alerta, es crucial sanear (escapar) el contenido HTML. Utilizar funciones o bibliotecas específicas para escapar caracteres especiales como <code>&lt;</code>, <code>&gt;</code>, <code>&quot;</code>, <code>&#x27;</code> y <code>&amp;</code>. Esto convertirá el código HTML en texto plano, evitando que el navegador lo interprete como código ejecutable.</li>\n              <li><b>Política de Seguridad de Contenido (CSP):</b> Implementar una CSP robusta para restringir las fuentes de las que el navegador puede cargar recursos como scripts. Esto puede prevenir la ejecución de scripts inyectados, incluso si el saneamiento no es perfecto.</li>\n              <li><b>Validación de datos:</b> Validar que los datos recibidos cumplen con el formato esperado. Rechazar o limpiar entradas que contengan código HTML o JavaScript no deseado.</li>\n              <li><b>Uso de plantillas parametrizadas:</b> En lugar de construir HTML dinámicamente con concatenación de strings, utilizar un motor de plantillas que realice el escape automático de variables.</li>\n              <li><b>Considerar `textContent` en lugar de `innerHTML`:</b> En lugar de usar innerHTML, se podria considerar  textContent cuando se asigna texto a un elemento, ya que textContent simplemente asigna el texto sin interpretar ningun código html.</li>\n            </ol>\n\n            <br>\n            <b>Métricas de Calidad del Código:</b>\n            <ul>\n              <li><b>Legibilidad:</b> Refactorizar las secciones donde se manipulan los datos antes de ser mostrados en la alerta, para que el saneamiento sea más evidente.</li>\n              <li><b>Acoplamiento:</b> Aislar la lógica de saneamiento de datos en funciones o módulos separados, para reducir el acoplamiento y facilitar el mantenimiento.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-dark\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Complejidad Ciclomática</h5>\n          <p class=\'card-text\'>\n            El código contiene funciones complejas con múltiples ramas condicionales y bucles, lo que dificulta su comprensión y mantenimiento.  Particularmente la funcion _main.\n            <br>\n            <b>Cómo mejorarla:</b>\n            <ul>\n              <li><b>Descomposición de funciones:</b> Dividir las funciones complejas en funciones más pequeñas y especializadas. Esto mejora la legibilidad y facilita la prueba unitaria.</li>\n              <li><b>Simplificación de condicionales:</b> Reducir la cantidad de anidamiento en las estructuras condicionales utilizando técnicas como \"guard clauses\" o la refactorización \"Replace Nested Conditional with Guard Clauses\".</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Duplicación de Código</h5>\n          <p class=\'card-text\'>\n            Existen fragmentos de código repetidos en diferentes partes del archivo, lo que dificulta el mantenimiento y aumenta el riesgo de errores.\n            <br>\n            <b>Cómo mejorarla:</b>\n            <ul>\n              <li><b>Extracción de funciones:</b> Identificar los fragmentos de código duplicados y extraerlos en funciones reutilizables.</li>\n              <li><b>Uso de bucles y estructuras de datos:</b> Utilizar bucles y estructuras de datos para evitar la repetición de código en tareas similares.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Legibilidad</h5>\n          <p class=\'card-text\'>\n            El código es difícil de leer debido a la gran cantidad de código en un solo archivo, nombres de variables poco descriptivos y falta de comentarios.\n            <br>\n            <b>Cómo mejorarla:</b>\n            <ul>\n              <li><b>Modularización:</b> Dividir el código en módulos o archivos más pequeños y organizados.</li>\n              <li><b>Nombres descriptivos:</b> Utilizar nombres claros y descriptivos para las variables, funciones y clases.</li>\n              <li><b>Comentarios:</b> Agregar comentarios explicativos para documentar el propósito de las diferentes secciones del código y las decisiones de diseño.</li>\n              <li><b>Formato consistente:</b> Utilizar un estilo de formato consistente para mejorar la legibilidad del código.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            El código presenta un alto acoplamiento entre sus diferentes componentes, lo que dificulta la modificación o reutilización de partes del código de forma independiente.\n            <br>\n            <b>Cómo mejorarla:</b>\n            <ul>\n              <li><b>Inyección de dependencias:</b> Utilizar la inyección de dependencias para reducir el acoplamiento entre las clases.</li>\n              <li><b>Interfaces:</b> Definir interfaces para las dependencias, lo que permite intercambiar las implementaciones sin afectar al resto del código.</li>\n              <li><b>Eventos:</b> Usar un sistema de eventos para comunicar los diferentes componentes del código, en lugar de depender de llamadas directas entre ellos.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:14:01', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(47, 'conexion.php', 'Detectado por GPT', '<?php\r\nsession_start();\r\n\r\nclass Conectar\r\n{\r\n    protected $dbh;\r\n\r\n    protected function Conexion()\r\n    {\r\n        try {\r\n            $conectar = $this->dbh = new PDO(\"mysql:local=localhost;dbname=Factura\", \"root\", \"\");\r\n            return $conectar;\r\n        } catch (Exception $e) {\r\n            print \"Error DB\" . $e->getMessage() . \"<br/>\";\r\n        }\r\n    }\r\n\r\n    public function set_name()\r\n    {\r\n        if ($this->dbh) {\r\n            return $this->dbh->query(\"SET NAMES \'utf8\'\");\r\n        } else {\r\n            throw new Exception(\'Conexión no inicializada.\');\r\n        }\r\n    }\r\n\r\n    public static  function ruta()\r\n    {\r\n        return \"http://localhost/facturacion/\";\r\n    }\r\n}\r\n', '```html\n<div class=\'container\'>\n    <div class=\'row\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-danger\'>\n                <div class=\'card-header bg-danger text-white\'>\n                    Análisis de Vulnerabilidades de Seguridad\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Vulnerabilidad: Hardcoded Credentials</h5>\n                    <p class=\'card-text\'>\n                        <b>Línea aproximada:</b> 10<br>\n                        <b>Descripción:</b> La conexión a la base de datos utiliza credenciales codificadas directamente en el código fuente (usuario \"root\" sin contraseña). Esto es extremadamente peligroso, ya que cualquier persona que acceda al código puede obtener acceso completo a la base de datos.\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>Nunca almacenar credenciales directamente en el código.</li>\n                            <li>Utilizar variables de entorno o un archivo de configuración seguro para almacenar las credenciales de la base de datos.  Estos archivos deben tener permisos restrictivos.</li>\n                            <li>Considerar el uso de un sistema de gestión de secretos.</li>\n                        </ul>\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Impacto:</b>  Acceso no autorizado a la base de datos, robo o modificación de datos, compromiso del sistema.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'row mt-3\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-warning\'>\n                <div class=\'card-header bg-warning text-white\'>\n                    Análisis de Calidad del Código\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Métricas y Mejoras</h5>\n                    <p class=\'card-text\'>\n                        <b>1. Acoplamiento:</b> La clase `Conectar` tiene un acoplamiento fuerte a la configuración específica de la base de datos (localhost, nombre de la base de datos).\n                        <ul>\n                            <li><b>Mejora:</b>  Utilizar inyección de dependencias o un patrón de fábrica para configurar la conexión a la base de datos de forma más flexible. Esto permitiría cambiar la configuración sin modificar el código de la clase `Conectar`.</li>\n                        </ul>\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>2. Manejo de Errores:</b> El bloque `catch` en la función `Conexion()` solo imprime el mensaje de error.\n                        <ul>\n                            <li><b>Mejora:</b> Implementar un logging adecuado para registrar los errores en un archivo o sistema de monitoreo.  Relanzar la excepción (después de registrarla) permitiría a la capa superior manejar la excepción de forma apropiada (e.g., mostrar un mensaje de error amigable al usuario).</li>\n                        </ul>\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>3. Legibilidad:</b>  El código es relativamente legible, pero la falta de comentarios dificulta la comprensión del propósito de cada función.\n                        <ul>\n                            <li><b>Mejora:</b> Agregar comentarios JSDoc (o PHPDoc) para documentar las funciones y los parámetros.</li>\n                        </ul>\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>4. Nombres Mágicos (Magic strings):</b> La cadena \"mysql:local=localhost;dbname=Factura\" es un *string mágico*.\n                        <ul>\n                            <li><b>Mejora:</b>  Definir constantes para los parámetros de la cadena de conexión (dbname, host).</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'row mt-3\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-success\'>\n                <div class=\'card-header bg-success text-white\'>\n                    Solución Propuesta (Ejemplo)\n                </div>\n                <div class=\'card-body\'>\n                    <p class=\'card-text\'>\n                        El siguiente fragmento muestra una posible mitigación del problema de las credenciales hardcodeadas y una ligera mejora en el manejo de errores (usando un archivo de configuración externo y logging).\n                    </p>\n                    <pre>\n                        <code class=\'language-php\'>\n&lt;?php\nsession_start();\n\nclass Conectar\n{\n    protected $dbh;\n    private $config; // Para almacenar la configuración de la base de datos\n\n    public function __construct($configFile = \'config.ini\') {\n        if (!file_exists($configFile)) {\n            throw new Exception(\"Archivo de configuración no encontrado: $configFile\");\n        }\n        $this->config = parse_ini_file($configFile);\n\n        if ($this->config === false) {\n            throw new Exception(\"Error al parsear el archivo de configuración: $configFile\");\n        }\n    }\n\n\n    protected function Conexion()\n    {\n        try {\n            $conectar = $this->dbh = new PDO(\n                \"mysql:host=\" . $this->config[\'host\'] . \";dbname=\" . $this->config[\'dbname\'],\n                $this->config[\'username\'],\n                $this->config[\'password\']\n            );\n            $conectar->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Para un manejo de errores más robusto\n            return $conectar;\n        } catch (PDOException $e) {\n            error_log(\"Error de conexión a la base de datos: \" . $e->getMessage()); // Log del error\n            throw new Exception(\"Error de conexión a la base de datos. Consulte los registros para más detalles.\"); // Relanzar la excepción\n        }\n    }\n\n    public function set_name()\n    {\n        if ($this->dbh) {\n            return $this->dbh->query(\"SET NAMES \'utf8\'\");\n        } else {\n            throw new Exception(\'Conexión no inicializada.\');\n        }\n    }\n\n    public static function ruta()\n    {\n        return \"http://localhost/facturacion/\";\n    }\n}\n\n// Ejemplo de archivo config.ini (FUERA del directorio público y con permisos restrictivos):\n// [database]\n// host = localhost\n// dbname = Factura\n// username = miusuario\n// password = micontraseña\n\n// Ejemplo de uso (en un archivo separado):\ntry {\n    $conexion = new Conectar();\n    $conexion->Conexion();\n    // Resto del código\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage();\n}\n\n\n                        </code>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:15:20', 7),
(48, 'cliente.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\ninclude_once(\"../models/Cliente.php\");\r\n\r\n$cliente = new Cliente();\r\n\r\nswitch ($_GET[\"op\"]) {\r\n\r\n    case \"listar\":\r\n        $datos = $cliente->listarCliente();\r\n        $data = array();\r\n        foreach ($datos as $row) {\r\n            $sub_array = array();\r\n            $sub_array[] = $row[\"CLI_NOM\"];\r\n            $sub_array[] = $row[\"CLI_APE\"];\r\n            $sub_array[] = $row[\"CLI_DIRECCION\"];\r\n            $sub_array[] = $row[\"CLI_TELEFONO\"];\r\n            $sub_array[] = $row[\"ESTADO\"];\r\n            $sub_array[] = $row[\"FECH_CREA\"];\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"editar(\' . $row[\"CLI_ID\"] . \')\" id=\"\' . $row[\"CLI_ID\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"><i class=\"ri-edit-2-line\"></i></button>\';\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"eliminar(\' . $row[\"CLI_ID\"] . \')\" id=\"\' . $row[\"CLI_ID\"] . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\"><i class=\"ri-delete-bin-5-line\"></i></button>\';\r\n            $data[] = $sub_array;\r\n        }\r\n\r\n        $results = array(\r\n            \"sEcho\" => 1,\r\n            \"iTotalRecords\" => count($data),\r\n            \"iTotalDisplayRecords\" => count($data),\r\n            \"aaData\" => $data\r\n        );\r\n        echo json_encode($results);\r\n        break;\r\n\r\n\r\n    case \"combo\";\r\n        $datos = $cliente->listarCliente();\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            $html = \"\";\r\n            $html .= \"<option selected>Seleccionar</option>\";\r\n            foreach ($datos as $row) {\r\n                $html .= \"<option value=\'\" . $row[\"CLI_ID\"] . \"\'>\" . $row[\"CLI_NOM\"] . \" \" . $row[\"CLI_APE\"] . \"</option>\";\r\n            }\r\n            echo $html;\r\n        }\r\n        break;\r\n\r\n    case \"mostrar\":\r\n        $datos = $cliente->Cliente_id($_POST[\"cli_id\"]);\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            foreach ($datos as $row) {\r\n                $output[\"CLI_ID\"] = $row[\"CLI_ID\"];\r\n                $output[\"CLI_NOM\"] = $row[\"CLI_NOM\"];\r\n                $output[\"CLI_TELEFONO\"] = $row[\"CLI_TELEFONO\"];\r\n                $output[\"CLI_DIRECCION\"] = $row[\"CLI_DIRECCION\"];\r\n               \r\n            }\r\n            echo json_encode($output);\r\n        }\r\n        break;\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección HTML/XSS (Cross-Site Scripting)</h5>\n          <p class=\"card-text\">\n            <b>Línea aproximada:</b> 20 y 21 <br>\n            <b>Descripción:</b> El código inserta directamente valores de la base de datos (<code>$row[\"CLI_ID\"]</code>) en atributos HTML (<code>onClick</code>, <code>id</code>) sin realizar un escape adecuado.  Si <code>CLI_ID</code> contiene caracteres especiales HTML (como <code>\"</code>, <code>\'</code>, <code><</code>, <code>></code>, <code>&</code>), pueden ocurrir problemas de renderizado o, lo que es peor,  permitir la ejecución de código JavaScript malicioso en el navegador del usuario.  Este es un ejemplo clásico de XSS.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>  Se debe realizar un escape HTML de los datos que se insertan en los atributos HTML.  Usar la función <code>htmlspecialchars()</code> de PHP para escapar los caracteres especiales HTML.\n          </p>\n          <p class=\"card-text\">\n            <b>Ejemplo:</b>\n            <code>\n                &lt;button type=\"button\" onClick=\"editar(&lt;?php echo htmlspecialchars($row[\"CLI_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;)\" id=\"&lt;?php echo htmlspecialchars($row[\"CLI_ID\"], ENT_QUOTES, \'UTF-8\'); ?&gt;\" class=\"btn btn-warning btn-icon waves-effect waves-light\"&gt;&lt;i class=\"ri-edit-2-line\"&gt;&lt;/i&gt;&lt;/button&gt;\n            </code>\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora de Calidad:</b>  Ninguna directamente relacionada.  La corrección es fundamental para la seguridad.\n          </p>\n\n          <hr>\n          <h5 class=\"card-title\">Inyección SQL (Potencial)</h5>\n          <p class=\"card-text\">\n            <b>Línea aproximada:</b> Depende de la implementación en <code>Cliente.php</code> (métodos como <code>listarCliente</code>, <code>Cliente_id</code>).<br>\n            <b>Descripción:</b> Si las funciones en <code>Cliente.php</code> (especialmente <code>Cliente_id($_POST[\"cli_id\"])</code>) construyen consultas SQL concatenando directamente valores proporcionados por el usuario (<code>$_POST[\"cli_id\"]</code>), existe una vulnerabilidad de inyección SQL.  Un atacante podría manipular el valor de <code>cli_id</code> para ejecutar comandos SQL arbitrarios.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Usar consultas preparadas (prepared statements) con PDO o mysqli:</b>  Esta es la forma más segura de interactuar con la base de datos.  Las consultas preparadas separan la definición de la consulta de los datos, previniendo que los datos sean interpretados como parte de la consulta SQL.</li>\n              <li><b>Validar y limpiar los datos de entrada:</b>  Si no se pueden usar consultas preparadas, validar rigurosamente y limpiar los datos de entrada.  Asegurarse de que <code>cli_id</code> sea un valor numérico entero esperado.</li>\n            </ul>\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora de Calidad:</b> El uso de consultas preparadas mejora la mantenibilidad y legibilidad del código, ya que se separa la lógica de la consulta de los datos.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\"card\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Complejidad Ciclomática</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> La complejidad ciclomática es relativamente baja en este script, ya que la lógica principal se basa en una estructura <code>switch</code> simple. Sin embargo, la complejidad podría aumentar en las funciones dentro del archivo <code>Cliente.php</code>.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Mantener las funciones dentro de <code>Cliente.php</code> lo más simples posible. Si una función se vuelve demasiado compleja, considerar dividirla en funciones más pequeñas y enfocadas.\n          </p>\n\n          <hr>\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> Existe una ligera duplicación en el manejo de los resultados de la consulta en los casos \"listar\" y \"combo\".  Ambos casos obtienen datos de la base de datos.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b>  Se podría refactorizar el código para extraer la lógica de obtención de datos a una función reutilizable. Esto reduce la duplicación y facilita el mantenimiento.\n          </p>\n\n          <hr>\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> El código es generalmente legible, pero podría mejorarse con comentarios más descriptivos, especialmente en la sección del <code>switch</code>, indicando el propósito de cada caso. Usar nombres de variables más descriptivos también ayudaría.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Añadir comentarios JSDoc a cada funcion para detallar que hace, sus parametros y tipo de retorno.\n          </p>\n\n          <hr>\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> Existe un acoplamiento moderado con la clase <code>Cliente</code> y el archivo de configuración <code>conexion.php</code>. Esto es normal en una arquitectura orientada a objetos.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b>  Para reducir el acoplamiento, se podría considerar el uso de un contenedor de inyección de dependencias (DI container).  Esto permitiría inyectar la dependencia de la conexión a la base de datos en la clase <code>Cliente</code> en lugar de depender directamente de <code>conexion.php</code>.  Esto facilita las pruebas unitarias y la sustitución de la implementación de la base de datos.  También se podría implementar una interfaz para la clase <code>Cliente</code>.\n          </p>\n\n          <hr>\n           <h5 class=\"card-title\">Validación de Datos</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> Falta la validación de datos de entrada. No hay una verificación adecuada del parámetro `$_GET[\"op\"]`.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Implementar un `switch` con un `default` que lance una excepción o retorne un error si el valor de `$_GET[\"op\"]` no es uno de los esperados.  Validar el tipo de dato, rango y formato de los valores de `$_POST` antes de usarlos.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\'row mt-3\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            Implementar las mitigaciones de seguridad sugeridas (escape HTML y uso de consultas preparadas). Refactorizar el código para reducir la duplicación.  Añadir comentarios y validar los datos de entrada. Considerar el uso de un contenedor de inyección de dependencias para reducir el acoplamiento.  Implementar un manejo de errores robusto.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:15:48', 7),
(49, 'empresa.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\ninclude_once(\"../models/Empresa.php\");\r\n\r\n$empresa = new Empresas();\r\n\r\nswitch ($_GET[\"op\"]) {\r\n\r\n\r\n    case \"mostrar\":\r\n        $datos = $empresa->Empresa_id($_POST[\"emp_id\"]);\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            foreach ($datos as $row) {\r\n                $output[\"EMP_ID\"] = $row[\"EMP_ID\"];\r\n                $output[\"EMP_NOM\"] = $row[\"EMP_NOM\"];\r\n                $output[\"EMP_TELEFONO\"] = $row[\"EMP_TELEFONO\"];\r\n                $output[\"EMP_DIRECCION\"] = $row[\"EMP_DIRECCION\"];\r\n                $output[\"EMP_CORREO\"] = $row[\"EMP_CORREO\"];\r\n            }\r\n            echo json_encode($output);\r\n        }\r\n        break;\r\n\r\n    case \"combo\";\r\n        $datos = $empresa->listarEmpresas();\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            $html = \"\";\r\n            $html .= \"<option selected>Seleccionar</option>\";\r\n            foreach ($datos as $row) {\r\n                $html .= \"<option value=\'\" . $row[\"EMP_ID\"] . \"\'>\" . $row[\"EMP_NOM\"] . \"</option>\";\r\n            }\r\n            echo $html;\r\n        }\r\n        break;\r\n}\r\n', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Inyección SQL (Potencial)</h5>\n          <p class=\'card-text\'>\n            <b>Línea aproximada:</b> Depende de la implementación interna de <code>$empresa->Empresa_id($_POST[\"emp_id\"])</code> y <code>$empresa->listarEmpresas()</code> en el modelo <code>Empresa.php</code>.  Si estas funciones no utilizan consultas preparadas o escapan correctamente los datos de entrada, son vulnerables a inyección SQL.  Especialmente preocupante es el uso directo de <code>$_POST[\"emp_id\"]</code>.\n          </p>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> Un atacante podría manipular el valor de <code>$_POST[\"emp_id\"]</code> o, si aplica, otros parámetros pasados a las funciones del modelo <code>Empresa</code> para inyectar código SQL malicioso.  Esto podría permitirles acceder a datos confidenciales, modificar la base de datos o incluso ejecutar comandos en el servidor de la base de datos.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Usar consultas preparadas (Prepared Statements) con parámetros en PDO o MySQLi.</b>  Esta es la forma más segura de prevenir la inyección SQL.</li>\n              <li><b>Escapar los datos de entrada:</b> Si no es posible usar consultas preparadas (lo cual es muy raro en proyectos modernos), escapar los datos usando funciones como <code>mysqli_real_escape_string()</code> o <code>PDO::quote()</code>.  Sin embargo, este método es menos seguro que las consultas preparadas.</li>\n              <li><b>Validación y Sanitización:</b> Validar que <code>$_POST[\"emp_id\"]</code> sea un entero y sanitizar cualquier otro input esperado.</li>\n            </ul>\n          </p>\n           <p class=\'card-text\'>\n            <b>Ejemplo (Consulta Preparada):</b> Dentro del método <code>Empresa_id</code> del modelo, se podría usar algo así:\n            <pre><code>\n// Asumiendo que se utiliza PDO\n$stmt = $this->db->prepare(\"SELECT * FROM empresas WHERE emp_id = :emp_id\");\n$stmt->bindParam(\':emp_id\', $emp_id, PDO::PARAM_INT); // Asumiendo que emp_id es un entero\n$stmt->execute();\n$datos = $stmt->fetchAll(PDO::FETCH_ASSOC);\nreturn $datos;\n            </code></pre>\n          </p>\n          <p class=\'card-text\'>\n          Es crucial auditar la implementacion de los metodos <code>Empresa_id</code> y <code>listarEmpresas</code> para confirmar el uso correcto de consultas preparadas.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <br>\n\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-dark\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> Existe acoplamiento debido a la dependencia directa de las variables <code>$_GET</code> y <code>$_POST</code>.  Esto dificulta la prueba unitaria y la reutilización del código.  Además, el uso de <code>include_once</code> crea una dependencia fuerte con los archivos de configuración y el modelo.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n            <ul>\n              <li><b>Inyección de Dependencias:</b>  En lugar de acceder directamente a <code>$_GET</code> y <code>$_POST</code>, pasar los datos como argumentos a las funciones.</li>\n              <li><b>Interfaces:</b>  Definir una interfaz para el modelo <code>Empresa</code> y usar la interfaz en lugar de la implementación concreta.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Legibilidad</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> El código es relativamente legible, pero se puede mejorar la claridad.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n            <ul>\n              <li><b>Comentarios:</b> Agregar comentarios para explicar la lógica del código, especialmente en las funciones del modelo.</li>\n              <li><b>Nombres de variables descriptivos:</b> Asegurarse de que los nombres de las variables sean claros y significativos.</li>\n              <li><b>Formato consistente:</b>  Mantener un formato de código consistente para facilitar la lectura.</li>\n            </ul>\n          </p>\n          <h5 class=\'card-title\'>Validación y Sanitización (Repetición)</h5>\n          <p class=\'card-text\'>\n            <b>Descripción:</b> No se observa validación de entradas.\n          </p>\n          <p class=\'card-text\'>\n            <b>Mejora:</b>\n            <ul>\n              <li><b>Validar entradas de usuario:</b> Asegurarse de que los datos de entrada sean del tipo y formato esperado. Por ejemplo, validar que <code>$_POST[\"emp_id\"]</code> sea un entero positivo.</li>\n              <li><b>Sanitizar entradas de usuario:</b> Eliminar o escapar caracteres no válidos de los datos de entrada.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <br>\n\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <ol>\n            <li><b>Prioridad #1:</b> Implementar consultas preparadas en el modelo <code>Empresa.php</code> para prevenir la inyección SQL.</li>\n            <li><b>Validar y sanitizar</b> todas las entradas del usuario (<code>$_GET</code> y <code>$_POST</code>).  Utilizar funciones como <code>filter_var</code> para la validación y sanitización.</li>\n            <li><b>Usar inyección de dependencias</b> para reducir el acoplamiento.</li>\n            <li><b>Agregar comentarios</b> para mejorar la legibilidad del código.</li>\n            <li>Considerar el uso de un framework PHP como Laravel o Symfony, que proporcionan mecanismos de seguridad integrados y fomentan las buenas prácticas de desarrollo.</li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:16:16', 7),
(50, 'factura.php', 'Detectado por GPT', '<?php\r\n\r\nrequire_once(\"../models/Factura.php\");\r\n\r\nif(isset($_GET[\'op\'])){\r\n    $op = $_GET[\'op\'];\r\n\r\n    switch($op){\r\n        case \"guardar\":\r\n            // Verifica si se recibió el parámetro \'factura\' vía POST\r\n            if(isset($_POST[\'factura\'])){\r\n                // Decodifica el JSON recibido\r\n                $facturaData = json_decode($_POST[\'factura\'], true);\r\n                \r\n                // Opcional: valida la estructura de $facturaData según tus necesidades\r\n                \r\n                // Instancia el modelo y llama al método para guardar la factura\r\n                $facturaModel = new Factura();\r\n                \r\n                try {\r\n                    $resultado = $facturaModel->guardarFactura($facturaData);\r\n                    \r\n                    if($resultado){\r\n                        // Responde con un mensaje de éxito\r\n                        echo json_encode([\r\n                            \"status\" => \"success\",\r\n                            \"message\" => \"Factura guardada correctamente.\"\r\n                        ]);\r\n                    } else {\r\n                        echo json_encode([\r\n                            \"status\" => \"error\",\r\n                            \"message\" => \"No se pudo guardar la factura.\"\r\n                        ]);\r\n                    }\r\n                } catch(PDOException $e) {\r\n                    // En caso de error, envía el mensaje de error\r\n                    echo json_encode([\r\n                        \"status\" => \"error\",\r\n                        \"message\" => \"Error al guardar la factura: \" . $e->getMessage()\r\n                    ]);\r\n                }\r\n            } else {\r\n                echo json_encode([\r\n                    \"status\" => \"error\",\r\n                    \"message\" => \"No se recibieron datos de la factura.\"\r\n                ]);\r\n            }\r\n            break;\r\n            \r\n        default:\r\n            echo json_encode([\r\n                \"status\" => \"error\",\r\n                \"message\" => \"Operación no reconocida.\"\r\n            ]);\r\n            break;\r\n    }\r\n} else {\r\n    echo json_encode([\r\n        \"status\" => \"error\",\r\n        \"message\" => \"No se especificó ninguna operación.\"\r\n    ]);\r\n}\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"card border-danger mb-3\">\n    <div class=\"card-header bg-danger text-white\">\n      Análisis de Vulnerabilidades de Seguridad\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Vulnerabilidad: Inyección SQL (Potencial)</h5>\n      <p class=\"card-text\">\n        <b>Línea Aproximada:</b> Dentro del método <code>guardarFactura</code> en el modelo <code>Factura.php</code> (no proporcionado).  Si el método <code>guardarFactura</code> del modelo <code>Factura</code> no utiliza consultas preparadas o escaping adecuado, es vulnerable a inyección SQL.  El código actual decodifica datos JSON y los pasa a un método, pero no muestra cómo se procesan esos datos *dentro* del modelo.\n      </p>\n      <p class=\"card-text\">\n        <b>Explicación:</b> Si los datos en <code>$facturaData</code> (especialmente cadenas) se insertan directamente en una consulta SQL sin validación o escaping, un atacante podría manipular los datos para ejecutar código SQL arbitrario.\n      </p>\n      <p class=\"card-text\">\n        <b>Mitigación:</b>\n        <ul>\n          <li><b>Consultas Preparadas:</b>  Utilice consultas preparadas (prepared statements) con placeholders para todos los accesos a la base de datos dentro del modelo <code>Factura</code>.  Esta es la forma más efectiva de prevenir la inyección SQL.</li>\n          <li><b>Validación y Saneamiento:</b> Valide rigurosamente los datos recibidos en <code>$facturaData</code> antes de usarlos en la consulta SQL.  Saneé las entradas (por ejemplo, usando funciones de escaping específicas de la base de datos) para eliminar caracteres peligrosos.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\"card border-warning mb-3\">\n    <div class=\"card-header bg-warning text-white\">\n      Análisis de Calidad del Código\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Métricas de Calidad</h5>\n      <p class=\"card-text\">\n        <b>Complejidad Ciclomática:</b> La complejidad ciclomática de este script es relativamente baja, debido a la simple estructura <code>switch</code>. Sin embargo, la complejidad aumenta significativamente si la lógica dentro del método <code>guardarFactura</code> es compleja.\n      </p>\n      <p class=\"card-text\">\n        <b>Acoplamiento:</b> El acoplamiento es moderado.  El script depende del modelo <code>Factura</code>.  Podría reducirse el acoplamiento utilizando una interfaz para el modelo <code>Factura</code>.\n      </p>\n      <p class=\"card-text\">\n        <b>Legibilidad:</b> El código es relativamente legible, con nombres de variables descriptivos y una estructura clara.  Sin embargo, la falta de comentarios detallados sobre el propósito de cada sección dificulta la comprensión rápida.\n      </p>\n      <p class=\"card-text\">\n        <b>Duplicación:</b> Hay cierta duplicación en la forma en que se construyen las respuestas JSON de error.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejoras:</b>\n        <ul>\n          <li><b>Comentarios:</b> Agregar comentarios para explicar la lógica detrás de cada bloque de código.</li>\n          <li><b>Refactorización:</b> Extraer la construcción de respuestas JSON en una función separada para evitar la duplicación de código.  Esto también mejora la mantenibilidad.</li>\n          <li><b>Manejo de Errores:</b>  Considerar el uso de un logger para registrar errores en lugar de simplemente enviarlos como respuesta JSON. Esto permite un mejor monitoreo y depuración.</li>\n          <li><b>Validación de Datos:</b> Implementar una validación robusta de los datos recibidos. Esto puede incluir validación de tipo, validación de rango y validación de formato. La validación debería realizarse antes de cualquier operación en la base de datos.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\'card border-success\'>\n    <div class=\"card-header bg-success text-white\">\n      Solución Propuesta\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Refactorización y Mitigación de Vulnerabilidades</h5>\n      <p class=\"card-text\">\n        Este es un ejemplo de cómo se podría refactorizar el código para mejorar la seguridad y la calidad:\n      </p>\n      <pre><code>\n<?php\n\nrequire_once(\"../models/Factura.php\");\n\n// Función para construir respuestas JSON consistentes\nfunction buildJsonResponse($status, $message, $data = null) {\n    $response = [\"status\" => $status, \"message\" => $message];\n    if ($data !== null) {\n        $response[\"data\"] = $data;\n    }\n    return json_encode($response);\n}\n\n\nif(isset($_GET[\'op\'])){\n    $op = $_GET[\'op\'];\n\n    switch($op){\n        case \"guardar\":\n            // Verifica si se recibió el parámetro \'factura\' vía POST\n            if(isset($_POST[\'factura\'])){\n                // Decodifica el JSON recibido\n                $facturaData = json_decode($_POST[\'factura\'], true);\n                \n                // Validación de la estructura de $facturaData (ejemplo)\n                if (!is_array($facturaData) || !isset($facturaData[\'cliente_id\']) || !isset($facturaData[\'items\'])) {\n                    echo buildJsonResponse(\"error\", \"Estructura de datos de factura inválida.\");\n                    break; // Salir del switch\n                }\n                \n                // Instancia el modelo y llama al método para guardar la factura\n                $facturaModel = new Factura();\n                \n                try {\n                    $resultado = $facturaModel->guardarFactura($facturaData); //Asumiendo que este metodo usa prepared statements\n                    \n                    if($resultado){\n                        // Responde con un mensaje de éxito\n                        echo buildJsonResponse(\"success\", \"Factura guardada correctamente.\");\n                    } else {\n                        echo buildJsonResponse(\"error\", \"No se pudo guardar la factura.\");\n                    }\n                } catch(PDOException $e) {\n                    // En caso de error, registra el mensaje y envía una respuesta genérica\n                    error_log(\"Error al guardar la factura: \" . $e->getMessage()); // Log del error\n                    echo buildJsonResponse(\"error\", \"Error al guardar la factura. Contacte al administrador.\");\n                }\n            } else {\n                echo buildJsonResponse(\"error\", \"No se recibieron datos de la factura.\");\n            }\n            break;\n            \n        default:\n            echo buildJsonResponse(\"error\", \"Operación no reconocida.\");\n            break;\n    }\n} else {\n    echo buildJsonResponse(\"error\", \"No se especificó ninguna operación.\");\n}\n?>\n      </code></pre>\n      <p class=\"card-text\">\n        <b>Mejoras Implementadas:</b>\n        <ul>\n          <li><b>Función <code>buildJsonResponse</code>:</b> Reducción de la duplicación de código para la creación de respuestas JSON.</li>\n          <li><b>Validación Básica:</b> Se añadió un ejemplo de validación de la estructura de los datos recibidos.</li>\n          <li><b>Manejo de Errores Mejorado:</b> Se reemplazó el envío directo del mensaje de error PDOException con un log del error y un mensaje genérico al cliente.</li>\n        </ul>\n        Recuerde que la implementación real de la seguridad SQL reside en el modelo `Factura.php`, el cual no se proporcionó en el código.\n      </p>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:16:40', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(51, 'productos.php', 'Detectado por GPT', '<?php\r\ninclude_once(\"../config/conexion.php\");\r\ninclude_once(\"../models/Productos.php\");\r\n\r\n$productos = new Productos();\r\n\r\nswitch ($_GET[\"op\"]) {\r\n\r\n    case \"listar\":\r\n        $datos = $productos->listarProductos();\r\n        $data = array();\r\n        foreach ($datos as $row) {\r\n            $sub_array = array();\r\n            $sub_array[] = $row[\"PROD_NOM\"];\r\n            $sub_array[] = $row[\"PROD_DESCRIPCION\"];\r\n            $sub_array[] = $row[\"PROD_PRECIO\"];\r\n            $sub_array[] = $row[\"PROD_STOCK\"];\r\n            $sub_array[] = $row[\"ESTADO\"];\r\n            $sub_array[] = $row[\"FECH_CREA\"];\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"editar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\"><i class=\"ri-edit-2-line\"></i></button>\';\r\n            $sub_array[] = \'<button type=\"button\" onClick=\"eliminar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\"><i class=\"ri-delete-bin-5-line\"></i></button>\';\r\n            $data[] = $sub_array;\r\n        }\r\n\r\n        $results = array(\r\n            \"sEcho\" => 1,\r\n            \"iTotalRecords\" => count($data),\r\n            \"iTotalDisplayRecords\" => count($data),\r\n            \"aaData\" => $data\r\n        );\r\n        echo json_encode($results);\r\n        break;\r\n    case \"mostrar\":\r\n        $datos = $productos->producto_id($_POST[\"prod_id\"]);\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            foreach ($datos as $row) {\r\n                $output[\"PROD_ID\"] = $row[\"PROD_ID\"];\r\n                $output[\"PROD_NOM\"] = $row[\"PROD_NOM\"];\r\n                $output[\"PROD_PRECIO\"] = $row[\"PROD_PRECIO\"];\r\n                $output[\"PROD_STOCK\"] = $row[\"PROD_STOCK\"];\r\n            }\r\n            echo json_encode($output);\r\n        }\r\n        break;\r\n\r\n    case \"combo\";\r\n        $datos = $productos->listarProductos();\r\n        if (is_array($datos) == true and count($datos) > 0) {\r\n            $html = \"\";\r\n            $html .= \"<option selected>Seleccionar</option>\";\r\n            foreach ($datos as $row) {\r\n                $html .= \"<option value=\'\" . $row[\"PROD_ID\"] . \"\'>\" . $row[\"PROD_NOM\"] . \"</option>\";\r\n            }\r\n            echo $html;\r\n        }\r\n        break;\r\n}\r\n', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n    <div class=\'col-md-12\'>\n\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Análisis de Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'>Vulnerabilidad: Inyección HTML (Cross-Site Scripting - XSS)</h5>\n          <p class=\'card-text\'>\n            <strong>Línea aproximada:</strong>  Dentro del case \"listar\", al construir los botones de editar y eliminar:\n            <br>\n            <code>$sub_array[] = \'&lt;button type=\"button\" onClick=\"editar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\">&lt;i class=\"ri-edit-2-line\">&lt;/i>&lt;/button>\';</code>\n            <br>\n            <code>$sub_array[] = \'&lt;button type=\"button\" onClick=\"eliminar(\' . $row[\"PROD_ID\"] . \')\" id=\"\' . $row[\"PROD_ID\"] . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\">&lt;i class=\"ri-delete-bin-5-line\">&lt;/i>&lt;/button>\';</code>\n          </p>\n          <p class=\'card-text\'>\n            <strong>Descripción:</strong>  Se está inyectando directamente datos de la base de datos (<code>$row[\"PROD_ID\"]</code>) dentro de atributos HTML (<code>onClick</code> e <code>id</code>) sin escapado. Si <code>PROD_ID</code> contiene caracteres especiales o código malicioso, puede permitir la ejecución de scripts XSS en el navegador del usuario.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mitigación:</strong>  Escapar los datos antes de insertarlos en el HTML. Utilizar funciones como <code>htmlspecialchars()</code> para evitar la interpretación de caracteres especiales como HTML.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Ejemplo de mitigación:</strong>\n            <br>\n            <code>$sub_array[] = \'&lt;button type=\"button\" onClick=\"editar(\' . htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\') . \')\" id=\"\' . htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\') . \'\" class=\"btn btn-warning btn-icon waves-effect waves-light\">&lt;i class=\"ri-edit-2-line\">&lt;/i>&lt;/button>\';</code>\n            <br>\n            <code>$sub_array[] = \'&lt;button type=\"button\" onClick=\"eliminar(\' . htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\') . \')\" id=\"\' . htmlspecialchars($row[\"PROD_ID\"], ENT_QUOTES, \'UTF-8\') . \'\" class=\"btn btn-danger btn-icon waves-effect waves-light\">&lt;i class=\"ri-delete-bin-5-line\">&lt;/i>&lt;/button>\';</code>\n          </p>\n\n          <h5 class=\'card-title\'>Vulnerabilidad: Inyección SQL (Potencial)</h5>\n          <p class=\'card-text\'>\n            <strong>Línea aproximada:</strong>  Depende de la implementación de los métodos <code>listarProductos()</code> y <code>producto_id()</code> en el modelo <code>Productos.php</code>. Especialmente en:\n             <br>\n             <code>$datos = $productos->producto_id($_POST[\"prod_id\"]);</code>\n          </p>\n          <p class=\'card-text\'>\n            <strong>Descripción:</strong>  Si los métodos <code>listarProductos()</code> y <code>producto_id()</code> no utilizan consultas preparadas o no escapan correctamente las entradas de usuario (como <code>$_POST[\"prod_id\"]</code>), son vulnerables a inyección SQL. Un atacante podría manipular la entrada para ejecutar comandos SQL arbitrarios en la base de datos.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mitigación:</strong>\n            <ul>\n              <li><strong>Utilizar consultas preparadas (Prepared Statements):</strong> Es la mejor práctica para prevenir la inyección SQL. Las consultas preparadas separan la consulta SQL de los datos, evitando que la entrada del usuario se interprete como parte del código SQL.</li>\n              <li><strong>Escapar las entradas de usuario:</strong> Si no es posible utilizar consultas preparadas, escapar las entradas de usuario con funciones específicas de la base de datos (por ejemplo, <code>mysqli_real_escape_string()</code> para MySQL).</li>\n              <li><strong>Validar y limpiar las entradas de usuario:</strong>  Validar que las entradas de usuario cumplan con el formato esperado (por ejemplo, que <code>prod_id</code> sea un entero) y limpiar las entradas eliminando caracteres no deseados.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Vulnerabilidad: Falta de Validación de Entrada</h5>\n          <p class=\'card-text\'>\n            <strong>Línea aproximada:</strong> Principalmente cuando se usa <code>$_GET[\"op\"]</code> y <code>$_POST[\"prod_id\"]</code>.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Descripción:</strong> El código no realiza una validación exhaustiva de las entradas <code>$_GET[\"op\"]</code> y <code>$_POST[\"prod_id\"]</code>. Esto puede llevar a comportamientos inesperados o errores si se reciben valores inválidos.  Un atacante puede enviar peticiones con valores inesperados en `op` o `prod_id`.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mitigación:</strong>\n            <ul>\n              <li>Validar que <code>$_GET[\"op\"]</code> contenga solo los valores esperados (\"listar\", \"mostrar\", \"combo\").  Utilizar un `switch` con un `default` para manejar valores inesperados.</li>\n              <li>Validar que <code>$_POST[\"prod_id\"]</code> sea un entero y exista en la base de datos antes de usarlo en consultas.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Vulnerabilidad: Revelación de Información (Potencial)</h5>\n          <p class=\'card-text\'>\n            <strong>Línea aproximada:</strong> Depende de cómo se manejen los errores en <code>conexion.php</code> y en el modelo <code>Productos.php</code>.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Descripción:</strong> Si la configuración de la base de datos (<code>conexion.php</code>) o los métodos del modelo <code>Productos.php</code> generan errores y estos errores se muestran directamente al usuario, se puede revelar información sensible sobre la estructura de la base de datos, las credenciales de acceso, o la lógica interna de la aplicación.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mitigación:</strong>\n            <ul>\n              <li>Desactivar la visualización de errores en producción. Configurar el archivo <code>php.ini</code> o utilizar la función <code>error_reporting(0)</code> para evitar que los errores se muestren al usuario final.</li>\n              <li>Implementar un sistema de registro de errores (logging) para guardar los errores en un archivo o base de datos, que solo sea accesible por los administradores.</li>\n              <li>Manejar las excepciones y errores de manera controlada, mostrando mensajes genéricos al usuario y registrando los detalles para su posterior análisis.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-warning mt-3\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Análisis de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'>Complejidad</h5>\n          <p class=\'card-text\'>\n            El código presenta una complejidad moderada. El uso de un <code>switch</code> para manejar diferentes operaciones puede volverse difícil de mantener a medida que el número de operaciones aumenta.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mejora:</strong> Considerar el uso de un patrón de diseño como el patrón Comando o un enrutador más sofisticado para distribuir la lógica a clases o funciones separadas.\n          </p>\n\n          <h5 class=\'card-title\'>Duplicación</h5>\n          <p class=\'card-text\'>\n            Existe cierta duplicación en la construcción de los botones \"editar\" y \"eliminar\".\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mejora:</strong> Extraer la lógica de construcción de los botones a una función reutilizable.\n          </p>\n\n          <h5 class=\'card-title\'>Legibilidad</h5>\n          <p class=\'card-text\'>\n            El código es relativamente legible, pero se puede mejorar.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mejora:</strong>\n            <ul>\n              <li>Añadir comentarios para explicar la funcionalidad de cada sección del código.</li>\n              <li>Utilizar nombres de variables más descriptivos.</li>\n              <li>Formatear el código de manera consistente para mejorar la legibilidad visual.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Acoplamiento</h5>\n          <p class=\'card-text\'>\n            El código está acoplado al modelo <code>Productos</code> y a la forma en que se reciben los parámetros (<code>$_GET[\"op\"]</code>, <code>$_POST[\"prod_id\"]</code>).\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mejora:</strong>\n            <ul>\n              <li>Utilizar una capa de abstracción para acceder al modelo <code>Productos</code> (por ejemplo, una interfaz).</li>\n              <li>Utilizar un enrutador para manejar las peticiones y desacoplar el código de la forma en que se reciben los parámetros.</li>\n            </ul>\n          </p>\n\n          <h5 class=\'card-title\'>Manejo de Errores</h5>\n          <p class=\'card-text\'>\n            El manejo de errores es mínimo. No hay un manejo explícito de excepciones o errores que puedan ocurrir durante la ejecución del código.\n          </p>\n          <p class=\'card-text\'>\n            <strong>Mejora:</strong>\n            <ul>\n              <li>Implementar un manejo de excepciones para capturar y manejar errores inesperados.</li>\n              <li>Utilizar bloques <code>try-catch</code> para rodear las secciones de código que puedan generar errores.</li>\n              <li>Registrar los errores en un archivo de registro para su posterior análisis.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-success mt-3\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n          <p class=\'card-text\'>\n            A continuación, se presenta un ejemplo de cómo mitigar las vulnerabilidades identificadas y mejorar la calidad del código:\n          </p>\n          <pre><code class=\'language-php\'>\n&lt;?php\ninclude_once(\"../config/conexion.php\");\ninclude_once(\"../models/Productos.php\");\n\n$productos = new Productos();\n\n// Función para escapar atributos HTML\nfunction escapeHtmlAttribute($value) {\n    return htmlspecialchars($value, ENT_QUOTES, \'UTF-8\');\n}\n\n// Función para construir botones HTML\nfunction buildButton($id, $action, $icon, $class) {\n    $escapedId = escapeHtmlAttribute($id);\n    $button = \'&lt;button type=\"button\" onClick=\"\' . $action . \'(\\\'\' . $escapedId . \'\\\')\" id=\"\' . $escapedId . \'\" class=\"btn \' . $class . \' btn-icon waves-effect waves-light\">&lt;i class=\"\' . $icon . \'\">&lt;/i>&lt;/button>\';\n    return $button;\n}\n\n\n// Función para validar el valor de \"op\"\nfunction validarOperacion($op) {\n    $validOperations = array(\"listar\", \"mostrar\", \"combo\");\n    return in_array($op, $validOperations) ? $op : null;\n}\n\n// Obtener el valor de \"op\" y validarlo\n$op = isset($_GET[\"op\"]) ? validarOperacion($_GET[\"op\"]) : null;\n\nif ($op === null) {\n    // Manejar el caso en que \"op\" no es válido\n    echo json_encode(array(\"error\" => \"Operación no válida\"));\n    exit; // Importante: detener la ejecución si la operación no es válida\n}\n\n\nswitch ($op) {\n    case \"listar\":\n        $datos = $productos->listarProductos();\n        $data = array();\n        foreach ($datos as $row) {\n            $sub_array = array();\n            $sub_array[] = $row[\"PROD_NOM\"];\n            $sub_array[] = $row[\"PROD_DESCRIPCION\"];\n            $sub_array[] = $row[\"PROD_PRECIO\"];\n            $sub_array[] = $row[\"PROD_STOCK\"];\n            $sub_array[] = $row[\"ESTADO\"];\n            $sub_array[] = $row[\"FECH_CREA\"];\n\n            // Usar la función para construir los botones\n            $sub_array[] = buildButton($row[\"PROD_ID\"], \"editar\", \"ri-edit-2-line\", \"btn-warning\");\n            $sub_array[] = buildButton($row[\"PROD_ID\"], \"eliminar\", \"ri-delete-bin-5-line\", \"btn-danger\");\n\n            $data[] = $sub_array;\n        }\n\n        $results = array(\n            \"sEcho\" => 1,\n            \"iTotalRecords\" => count($data),\n            \"iTotalDisplayRecords\" => count($data),\n            \"aaData\" => $data\n        );\n        echo json_encode($results);\n        break;\n\n    case \"mostrar\":\n        // Validar y limpiar prod_id\n        $prod_id = isset($_POST[\"prod_id\"]) && is_numeric($_POST[\"prod_id\"]) ? intval($_POST[\"prod_id\"]) : null;\n\n        if ($prod_id === null) {\n            echo json_encode(array(\"error\" => \"ID de producto no válido\"));\n            break;\n        }\n\n        $datos = $productos->producto_id($prod_id);\n        if (is_array($datos) == true and count($datos) > 0) {\n            $output = array(); // Inicializar $output como un array vacío\n            foreach ($datos as $row) {\n                $output[\"PROD_ID\"] = $row[\"PROD_ID\"];\n                $output[\"PROD_NOM\"] = $row[\"PROD_NOM\"];\n                $output[\"PROD_PRECIO\"] = $row[\"PROD_PRECIO\"];\n                $output[\"PROD_STOCK\"] = $row[\"PROD_STOCK\"];\n            }\n            echo json_encode($output);\n        } else {\n             echo json_encode(array(\"error\" => \"Producto no encontrado\"));\n        }\n        break;\n\n    case \"combo\":\n        $datos = $productos->listarProductos();\n        if (is_array($datos) == true and count($datos) > 0) {\n            $html = \"\";\n            $html .= \"&lt;option selected>Seleccionar&lt;/option>\";\n            foreach ($datos as $row) {\n                $html .= \"&lt;option value=\'\" . escapeHtmlAttribute($row[\"PROD_ID\"]) . \"\'>\" . $row[\"PROD_NOM\"] . \"&lt;/option>\";\n            }\n            echo $html;\n        }\n        break;\n\n    default:\n        // Manejar el caso en que \"op\" no es válido\n        echo json_encode(array(\"error\" => \"Operación no válida\"));\n        break;\n}\n?>\n</code></pre>\n          <p class=\'card-text\'>\n            <strong>Explicación de la solución:</strong>\n            <ul>\n              <li>Se implementó la función <code>escapeHtmlAttribute()</code> para escapar los atributos HTML y prevenir la inyección XSS.</li>\n              <li>Se implementó la función <code>buildButton()</code> para construir los botones HTML de manera reutilizable y evitar la duplicación de código.</li>\n              <li>Se agregó validación para <code>$_GET[\"op\"]</code> para asegurar que solo se permitan las operaciones definidas.</li>\n              <li>Se validó y limpió <code>$_POST[\"prod_id\"]</code> para prevenir la inyección SQL.</li>\n              <li>Se modularizó el código para mejorar la legibilidad y mantenibilidad.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:17:16', 7),
(52, 'index.php', 'Detectado por GPT', '<!DOCTYPE html>\r\n<html lang=\"es\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Factura con Estilo Bootstrap</title>\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"assests/bootstrap.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- DataTables CSS (Integrado con Bootstrap) -->\r\n    <link rel=\"stylesheet\" href=\"assests/dataTables.bootstrap5.min.css\">\r\n\r\n    <!-- SweetAlert2 -->\r\n    <script src=\"assests/sweetalert2@11\"></script>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"assests/jquery-3.6.0.min.js\"></script>\r\n\r\n    <!-- DataTables JS -->\r\n    <script src=\"assests/jquery.dataTables.min.js\"></script>\r\n    <script src=\"assests/dataTables.bootstrap5.min.js\"></script>\r\n\r\n    <style>\r\n        body {\r\n            background-color: #f1f1f1;\r\n        }\r\n\r\n        .card {\r\n            border: none;\r\n            border-radius: 0.5rem;\r\n            box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.1);\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .card-header {\r\n            background-color: #007bff;\r\n            color: #fff;\r\n            border-bottom: none;\r\n            border-radius: 0.5rem 0.5rem 0 0;\r\n        }\r\n\r\n        h2 {\r\n            margin: 2rem 0;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container\">\r\n        <h2 class=\"text-center\">Sistema de Facturación</h2>\r\n\r\n        <!-- Formulario para agregar productos -->\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h4>Agregar Producto</h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <form id=\"formFactura\">\r\n                    <!-- Datos de la Empresa -->\r\n                    <h5 class=\"mb-3\">Datos de la Empresa</h5>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"emp_id\" class=\"form-label\">Empresa</label>\r\n                            <select class=\"form-select\" id=\"emp_id\" name=\"emp_id\">\r\n                                <option value=\"0\" selected>Seleccione</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"emp_correo\" class=\"form-label\">Correo</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"emp_correo\" name=\"emp_correo\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"emp_direccion\" class=\"form-label\">Dirección</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"emp_direccion\" name=\"emp_direccion\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"emp_telefono\" class=\"form-label\">Teléfono</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"emp_telefono\" name=\"emp_telefono\" readonly>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Datos del Cliente -->\r\n                    <h5 class=\"mb-3\">Datos del Cliente</h5>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_id\" class=\"form-label\">Cliente</label>\r\n                            <select class=\"form-select\" id=\"cli_id\" name=\"cli_id\">\r\n                                <option value=\"0\" selected>Seleccione</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_nom\" class=\"form-label\">Nombre</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_nom\" name=\"cli_nom\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_direccion\" class=\"form-label\">Dirección</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_direccion\" name=\"cli_direccion\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"cli_telefono\" class=\"form-label\">Teléfono</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"cli_telefono\" name=\"cli_telefono\" readonly>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Datos del Producto -->\r\n                    <h5 class=\"mb-3\">Datos del Producto</h5>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_id\" class=\"form-label\">Producto</label>\r\n                            <select class=\"form-select\" id=\"prod_id\" name=\"prod_id\">\r\n                                <option value=\"0\" selected>Seleccione</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_precio\" class=\"form-label\">Precio</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_precio\" name=\"prod_precio\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_stock\" class=\"form-label\">Stock</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_stock\" name=\"prod_stock\" readonly>\r\n                        </div>\r\n                        <div class=\"col-lg-3\">\r\n                            <label for=\"prod_stock_resta\" class=\"form-label\">Cantidad</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"prod_stock_resta\" name=\"prod_stock_resta\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"text-end\">\r\n                        <button type=\"button\" id=\"btnagregar\" class=\"btn btn-primary\">\r\n                            <i class=\"bi bi-cart-plus\"></i> Nueva Compra\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Tabla de productos -->\r\n        <div class=\"card mb-4\">\r\n            <div class=\"card-header bg-secondary text-white\">\r\n                <h4>Detalle de Factura</h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table id=\"tablaFactura\" class=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Producto</th>\r\n                            <th>Precio</th>\r\n                            <th>Cantidad</th>\r\n                            <th>Total</th>\r\n                            <th>Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody></tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Botones de acción -->\r\n        <div class=\"d-flex justify-content-end gap-2 mb-4\">\r\n            <button type=\"button\" id=\"btnGuardar\" class=\"btn btn-success\">Guardar Factura</button>\r\n            <button type=\"button\" id=\"btnLimpiar\" class=\"btn btn-secondary\">Limpiar Factura</button>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Bootstrap JS -->\r\n    <script src=\"assests/js/bootstrap.bundle.min.js\"></script>\r\n\r\n    <!-- Aquí iría tu script para manejo de la factura, validaciones, etc. -->\r\n    <script>\r\n        $(document).ready(function() {\r\n            let tabla = $(\'#tablaFactura\').DataTable();\r\n\r\n            // Cargar clientes\r\n            $.post(\"controllers/cliente.php?op=combo\", function(data) {\r\n                $(\"#cli_id\").html(data);\r\n            });\r\n            $(\"#cli_id\").change(function() {\r\n                let cli_id = $(this).val();\r\n                if (cli_id != \"0\") {\r\n                    $.post(\"controllers/cliente.php?op=mostrar\", {\r\n                        cli_id: cli_id\r\n                    }, function(data) {\r\n                        let cliente = JSON.parse(data);\r\n                        $(\"#cli_nom\").val(cliente.CLI_NOM);\r\n                        $(\"#cli_direccion\").val(cliente.CLI_DIRECCION);\r\n                        $(\"#cli_telefono\").val(cliente.CLI_TELEFONO);\r\n                    });\r\n                } else {\r\n                    $(\"#cli_nom, #cli_direccion, #cli_telefono\").val(\'\');\r\n                }\r\n            });\r\n\r\n            // Cargar empresas\r\n            $.post(\"controllers/empresa.php?op=combo\", function(data) {\r\n                $(\"#emp_id\").html(data);\r\n            });\r\n            $(\"#emp_id\").change(function() {\r\n                let emp_id = $(this).val();\r\n                if (emp_id != \"0\") {\r\n                    $.post(\"controllers/empresa.php?op=mostrar\", {\r\n                        emp_id: emp_id\r\n                    }, function(data) {\r\n                        let empresa = JSON.parse(data);\r\n                        $(\"#emp_correo\").val(empresa.EMP_CORREO);\r\n                        $(\"#emp_direccion\").val(empresa.EMP_DIRECCION);\r\n                        $(\"#emp_telefono\").val(empresa.EMP_TELEFONO);\r\n                    });\r\n                } else {\r\n                    $(\"#emp_correo, #emp_direccion, #emp_telefono\").val(\'\');\r\n                }\r\n            });\r\n\r\n            // Cargar productos\r\n            $.post(\"controllers/productos.php?op=combo\", function(data) {\r\n                $(\"#prod_id\").html(data);\r\n            });\r\n            $(\"#prod_id\").change(function() {\r\n                let prod_id = $(this).val();\r\n                if (prod_id != \"0\") {\r\n                    $.post(\"controllers/productos.php?op=mostrar\", {\r\n                        prod_id: prod_id\r\n                    }, function(data) {\r\n                        let producto = JSON.parse(data);\r\n                        $(\"#prod_precio\").val(producto.PROD_PRECIO);\r\n                        $(\"#prod_stock\").val(producto.PROD_STOCK);\r\n                    });\r\n                } else {\r\n                    $(\"#prod_precio, #prod_stock\").val(\'\');\r\n                }\r\n            });\r\n\r\n            // Agregar producto a la factura\r\n            $(\"#btnagregar\").click(function() {\r\n                let productoTexto = $(\"#prod_id option:selected\").text();\r\n                let prod_id = $(\"#prod_id\").val();\r\n                let precio = parseFloat($(\"#prod_precio\").val());\r\n                let stock = parseInt($(\"#prod_stock\").val());\r\n                let cantidad = parseInt($(\"#prod_stock_resta\").val());\r\n\r\n                // Validaciones\r\n                if (prod_id === \"0\") {\r\n                    Swal.fire(\"Error\", \"Seleccione un producto válido\", \"error\");\r\n                    return;\r\n                }\r\n                if (isNaN(precio) || precio <= 0) {\r\n                    Swal.fire(\"Error\", \"El precio del producto no es válido\", \"error\");\r\n                    return;\r\n                }\r\n                if (isNaN(cantidad) || cantidad <= 0) {\r\n                    Swal.fire(\"Error\", \"Ingrese una cantidad válida\", \"error\");\r\n                    return;\r\n                }\r\n                if (cantidad > stock) {\r\n                    Swal.fire(\"Error\", \"La cantidad supera el stock disponible\", \"error\");\r\n                    return;\r\n                }\r\n\r\n                let total = precio * cantidad;\r\n                // Agregar producto a la tabla\r\n                tabla.row.add([\r\n                    productoTexto,\r\n                    `$${precio.toFixed(2)}`,\r\n                    cantidad,\r\n                    `$${total.toFixed(2)}`,\r\n                    `<button class=\"btn btn-danger btn-sm eliminar\">Eliminar</button>`\r\n                ]).draw();\r\n\r\n                // Reducir stock disponible\r\n                let nuevoStock = stock - cantidad;\r\n                $(\"#prod_stock\").val(nuevoStock);\r\n                $(\"#prod_stock_resta\").val(\"\");\r\n\r\n                Swal.fire(\"Producto Agregado\", \"Se ha agregado el producto a la factura\", \"success\");\r\n            });\r\n\r\n            // Eliminar producto de la tabla\r\n            $(\"#tablaFactura tbody\").on(\"click\", \".eliminar\", function() {\r\n                let fila = $(this).closest(\"tr\");\r\n                let cantidad = parseInt(fila.find(\"td:eq(2)\").text());\r\n                // Puedes implementar la lógica para restaurar el stock aquí si fuera necesario\r\n                tabla.row(fila).remove().draw();\r\n                Swal.fire(\"Producto Eliminado\", \"El producto fue eliminado de la factura\", \"warning\");\r\n            });\r\n\r\n            // Guardar factura: Enviar los datos al controlador\r\n            $(\"#btnGuardar\").click(function() {\r\n                // Recopilar datos de la factura\r\n                let factura = {\r\n                    empresa: $(\"#emp_id\").val(),\r\n                    cliente: $(\"#cli_id\").val(),\r\n                    productos: []\r\n                };\r\n\r\n                // Recorrer cada fila de la tabla para obtener los productos\r\n                tabla.rows().every(function(rowIdx, tableLoop, rowLoop) {\r\n                    let data = this.data();\r\n                    factura.productos.push({\r\n                        producto: data[0],\r\n                        precio: data[1].replace(\"$\", \"\"),\r\n                        cantidad: data[2],\r\n                        total: data[3].replace(\"$\", \"\")\r\n                    });\r\n                });\r\n\r\n                // Validar que se haya agregado al menos un producto\r\n                if (factura.productos.length === 0) {\r\n                    Swal.fire(\"Error\", \"No hay productos en la factura\", \"error\");\r\n                    return;\r\n                }\r\n\r\n                console.log(\"Datos de factura a enviar:\", JSON.stringify(factura, null, 2));\r\n\r\n\r\n                // Enviar factura al controlador vía AJAX (ajusta la URL según tu ruta)\r\n                $.ajax({\r\n                    url: \"controllers/factura.php?op=guardar\",\r\n                    type: \"POST\",\r\n                    data: {\r\n                        factura: JSON.stringify(factura)\r\n                    },\r\n                    success: function(response) {\r\n                        Swal.fire(\"Factura Guardada\", \"La factura se ha guardado correctamente\", \"success\");\r\n                        // Limpia la tabla y resetea el formulario si es necesario\r\n                        tabla.clear().draw();\r\n                        $(\"#formFactura\")[0].reset();\r\n                    },\r\n                    error: function(xhr, status, error) {\r\n                        Swal.fire(\"Error\", \"No se pudo guardar la factura\", \"error\");\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Limpiar factura: Vaciar tabla y restablecer formulario\r\n            $(\"#btnLimpiar\").click(function() {\r\n                Swal.fire({\r\n                    title: \"Confirmar\",\r\n                    text: \"¿Está seguro de limpiar la factura?\",\r\n                    icon: \"question\",\r\n                    showCancelButton: true,\r\n                    confirmButtonText: \"Sí, limpiar\",\r\n                    cancelButtonText: \"Cancelar\"\r\n                }).then((result) => {\r\n                    if (result.isConfirmed) {\r\n                        tabla.clear().draw();\r\n                        $(\"#formFactura\")[0].reset();\r\n                        Swal.fire(\"Factura Limpiada\", \"La factura se ha limpiado correctamente\", \"success\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n            <h4>Vulnerabilidades de Seguridad</h4>\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Inyección SQL Potencial</h5>\n            <p class=\"card-text\">\n                <b>Tipo:</b> Inyección SQL.<br>\n                <b>Línea Aproximada:</b> Todas las llamadas AJAX a los controladores (cliente.php, empresa.php, productos.php, factura.php).<br>\n                <b>Descripción:</b> El código realiza peticiones AJAX a scripts PHP (como `controllers/cliente.php?op=mostrar`) y pasa parámetros directamente desde el lado del cliente (e.g., `cli_id`, `emp_id`, `prod_id`). Si estos parámetros no se sanitizan o escapan adecuadamente en el lado del servidor (PHP), un atacante podría inyectar código SQL malicioso a través de estos parámetros, comprometiendo la base de datos.<br>\n                <b>Mitigación:</b>\n                <ul>\n                    <li><b>Sanitizar entradas:</b> Utilizar funciones de escape o sanitización proporcionadas por el lenguaje PHP (como `mysqli_real_escape_string()` si se usa MySQLi) para limpiar los datos recibidos antes de usarlos en consultas SQL.</li>\n                    <li><b>Consultas parametrizadas:</b> Emplear consultas preparadas (prepared statements) o sentencias parametrizadas con PDO o MySQLi. Esto asegura que los datos se traten como datos y no como parte del código SQL.</li>\n                    <li><b>Validación:</b> Validar que los valores de los ID (cli_id, emp_id, prod_id) sean números enteros antes de usarlos en las consultas.</li>\n                </ul>\n            </p>\n\n            <h5 class=\"card-title\">Cross-Site Scripting (XSS) Potencial</h5>\n            <p class=\"card-text\">\n                <b>Tipo:</b> Cross-Site Scripting (XSS).<br>\n                <b>Línea Aproximada:</b> En la función `$(\"#btnGuardar\").click(function() { ... });` donde se recorren las filas de la tabla para obtener los productos y enviar la información al servidor.<br>\n                <b>Descripción:</b> Si los datos del producto (nombre, precio, etc.) que se muestran en la tabla provienen de una fuente no confiable y no se escapan adecuadamente, un atacante podría inyectar código JavaScript malicioso en estos datos. Este código se ejecutaría en el navegador de otros usuarios cuando visualicen la factura.<br>\n                <b>Mitigación:</b>\n                <ul>\n                    <li><b>Escape de salida:</b> Escapar los datos antes de insertarlos en el HTML, especialmente al mostrar los nombres de los productos en la tabla. Utilizar funciones como `htmlspecialchars()` en PHP para convertir caracteres especiales en entidades HTML.</li>\n                </ul>\n            </p>\n\n            <h5 class=\"card-title\">Riesgo de manipulación de stock y precios</h5>\n            <p class=\"card-text\">\n                <b>Tipo:</b> Lógica de negocio insegura.<br>\n                <b>Línea Aproximada:</b> En la función `$(\"#btnagregar\").click(function() { ... });` donde se calcula el precio total y se reduce el stock.<br>\n                <b>Descripción:</b> El código depende del valor del precio (`prod_precio`) que se obtiene del DOM. Un atacante podría modificar este valor directamente en el navegador utilizando las herramientas de desarrollo y así alterar el precio final de la factura. Además, aunque se reduce el stock en el lado del cliente, este cambio no se persiste en el servidor hasta que se guarde la factura. Esto podría llevar a inconsistencias en el stock si varios usuarios agregan productos simultáneamente.<br>\n                <b>Mitigación:</b>\n                <ul>\n                    <li><b>Validación en el servidor:</b> Siempre validar el precio y el stock en el lado del servidor antes de realizar cualquier cálculo o modificación en la base de datos. Obtener el precio y el stock directamente de la base de datos en el momento de guardar la factura.</li>\n                    <li><b>Manejo de concurrencia:</b> Implementar mecanismos de bloqueo optimista o pesimista para evitar problemas de concurrencia al actualizar el stock.</li>\n                </ul>\n            </p>\n        </div>\n    </div>\n\n    <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-dark\">\n            <h4>Métricas de Calidad del Código</h4>\n        </div>\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">Complejidad</h5>\n            <p class=\"card-text\">\n                El código no es excesivamente complejo, pero las funciones `$(\"#btnagregar\").click(function() { ... });` y `$(\"#btnGuardar\").click(function() { ... });`  podrían beneficiarse de ser refactorizadas en funciones más pequeñas y específicas para mejorar la legibilidad y el mantenimiento.\n            </p>\n\n            <h5 class=\"card-title\">Duplicación</h5>\n            <p class=\"card-text\">\n                Existe cierta duplicación en la forma en que se cargan los datos de clientes, empresas y productos.  Se podría crear una función genérica para cargar datos de diferentes fuentes y evitar la repetición de código.\n            </p>\n\n            <h5 class=\"card-title\">Legibilidad</h5>\n            <p class=\"card-text\">\n                En general, el código es legible y está bien comentado. Sin embargo, el uso de nombres de variables más descriptivos (por ejemplo, `clienteNombre` en lugar de `cli_nom`) mejoraría la legibilidad.\n            </p>\n\n            <h5 class=\"card-title\">Acoplamiento</h5>\n            <p class=\"card-text\">\n                El código tiene un acoplamiento relativamente alto a la estructura del DOM. Los selectores de jQuery (`$(\"#cli_id\")`, `$(\"#emp_correo\")`, etc.) están dispersos por todo el código.  Se podría reducir el acoplamiento agrupando estos selectores en un objeto o clase y acceder a ellos a través de una interfaz.\n            </p>\n        </div>\n    </div>\n\n    <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n            <h4>Solución Propuesta</h4>\n        </div>\n        <div class=\"card-body\">\n            <ol>\n                <li><b>Implementar Sanitización de Entradas en el Servidor (PHP):</b> Escapar todos los parámetros recibidos en los scripts PHP antes de usarlos en consultas SQL.  Usar consultas parametrizadas para evitar la inyección SQL.</li>\n                <li><b>Validar y Escapar Datos en el Cliente:</b> Validar los datos ingresados por el usuario en el lado del cliente para proporcionar retroalimentación inmediata. Escapar los datos que se muestran en la tabla para prevenir XSS.</li>\n                <li><b>Validar Lógica de Negocio en el Servidor:</b>  Verificar el precio, el stock y otros datos críticos en el lado del servidor antes de realizar cualquier operación en la base de datos. Implementar mecanismos de manejo de concurrencia para evitar problemas de stock.</li>\n                <li><b>Refactorizar Código:</b> Dividir las funciones `$(\"#btnagregar\").click(function() { ... });` y `$(\"#btnGuardar\").click(function() { ... });` en funciones más pequeñas y específicas. Crear una función genérica para cargar datos de diferentes fuentes.</li>\n                <li><b>Mejorar Nombres de Variables:</b> Utilizar nombres de variables más descriptivos para mejorar la legibilidad del código.</li>\n                <li><b>Reducir Acoplamiento:</b> Agrupar los selectores de jQuery en un objeto o clase y acceder a ellos a través de una interfaz.</li>\n            </ol>\n        </div>\n    </div>\n</div>\n```', '2025-05-20 02:17:43', 7);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(53, 'Cliente.php', 'Detectado por GPT', '<?php\r\nclass Cliente extends Conectar\r\n{\r\n   /*  public function listarCliente()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_Cliente_01\";\r\n        $query = $conectar->prepare($sql);\r\n       \r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    } */\r\n\r\n    public function listarCliente()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"CALL SP_L_Cliente_01()\"; // Corrección: Usar CALL\r\n        $query = $conectar->prepare($sql);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n    public function Cliente_id($id)\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"CALL SP_L_Cliente_02(?)\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->bindValue(1, $id);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n    \r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">Análisis de Seguridad</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Posible Vulnerabilidad: Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Inyección SQL (SQLi)\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Aproximada:</b>\n              <code>$sql = \"CALL SP_L_Cliente_02(?)\";</code> dentro de la función <code>Cliente_id($id)</code>\n          </p>\n          <p class=\"card-text\">\n            <b>Descripción:</b> La función <code>Cliente_id($id)</code> utiliza un procedimiento almacenado (SP_L_Cliente_02) pero pasa el valor de <code>$id</code> como parámetro usando <code>bindValue</code>, lo cual es seguro contra inyección SQL directamente en la consulta. Sin embargo, la seguridad final depende de la implementación del procedimiento almacenado `SP_L_Cliente_02`.  Si dentro del procedimiento almacenado se concatena el parámetro `$id` directamente en una consulta SQL, la aplicación sigue siendo vulnerable.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>\n            <ul>\n              <li><b>Revisar el código del procedimiento almacenado `SP_L_Cliente_02`</b>: Asegurarse de que NO concatene el parámetro <code>$id</code> directamente en una consulta SQL dentro del procedimiento almacenado.  Debe usar parámetros en el procedimiento almacenado también.</li>\n              <li><b>Validación del input:</b>  Antes de llamar a la función `Cliente_id`, validar y limpiar el valor de `$id`. Asegurarse de que sea del tipo esperado (por ejemplo, un entero) y que no contenga caracteres inesperados.\n            </ul>\n          </p>\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6\">\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">Métricas de Calidad del Código</div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Análisis de Calidad</h5>\n          <p class=\"card-text\">\n            <b>Complejidad:</b> Baja. El código es relativamente simple y directo.\n          </p>\n          <p class=\"card-text\">\n            <b>Duplicación:</b> Baja.  La estructura de las funciones `listarCliente` y `Cliente_id` es similar, pero la duplicación no es excesiva.\n          </p>\n          <p class=\"card-text\">\n            <b>Legibilidad:</b> Buena. El código es fácil de entender, con nombres de variables y funciones descriptivos.  Los comentarios, aunque escasos, ayudan.\n          </p>\n          <p class=\"card-text\">\n            <b>Acoplamiento:</b>  Medio. La clase `Cliente` depende de la clase `Conectar` (herencia).  El acoplamiento a la base de datos también es inherente al propósito de la clase.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejoras:</b>\n            <ul>\n              <li><b>Manejo de Errores:</b>  No hay manejo de errores explícito. Agregar bloques `try...catch` para manejar excepciones que puedan ocurrir durante la conexión a la base de datos o la ejecución de las consultas.  Registrar los errores en un archivo de log.</li>\n              <li><b>Abstracción de la capa de datos:</b> Considerar el uso de un patrón de repositorio para abstraer aún más la capa de acceso a datos, lo que facilitaría las pruebas unitarias y el cambio de la implementación de la base de datos en el futuro.</li>\n              <li><b>Comentarios/Documentación:</b> Agregar comentarios JSDoc (o equivalentes de PHP) para documentar las funciones y sus parámetros.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-success mb-3\">\n        <div class=\"card-header bg-success text-white\">Solución Propuesta</div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            El siguiente código muestra una propuesta de solución que incluye validación de entrada y manejo de errores:\n          </p>\n          <pre><code>\n&lt;?php\nclass Cliente extends Conectar\n{\n    /**\n     * Lista todos los clientes.\n     *\n     * @return array|false Un array asociativo con la información de los clientes, o false en caso de error.\n     */\n    public function listarCliente()\n    {\n        try {\n            $conectar = parent::Conexion();\n            $sql = \"CALL SP_L_Cliente_01()\";\n            $query = $conectar->prepare($sql);\n            $query->execute();\n            return $query->fetchAll(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            error_log(\"Error en listarCliente: \" . $e->getMessage()); // Log del error\n            return false; // Indicar que hubo un error\n        }\n    }\n\n    /**\n     * Obtiene un cliente por su ID.\n     *\n     * @param int $id El ID del cliente a buscar.\n     * @return array|false Un array asociativo con la información del cliente, o false en caso de error.\n     * @throws InvalidArgumentException Si el ID no es un entero válido.\n     */\n    public function Cliente_id($id)\n    {\n        // Validar que $id sea un entero\n        if (!is_numeric($id) || intval($id) != $id) {\n            throw new InvalidArgumentException(\"El ID del cliente debe ser un entero válido.\");\n        }\n\n        try {\n            $conectar = parent::Conexion();\n            $sql = \"CALL SP_L_Cliente_02(?)\";\n            $query = $conectar->prepare($sql);\n            $query->bindValue(1, $id, PDO::PARAM_INT); // Especificar el tipo de dato\n            $query->execute();\n            return $query->fetchAll(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            error_log(\"Error en Cliente_id: \" . $e->getMessage()); // Log del error\n            return false; // Indicar que hubo un error\n        }\n    }\n}\n\n          </code></pre>\n\n           <p class=\"card-text\">\n            <b>Explicación de las mejoras:</b>\n            <ul>\n              <li>Se añadió manejo de excepciones (`try...catch`) para capturar errores de PDO y registrarlos en un archivo de log (error_log).</li>\n              <li>Se agregó validación de entrada en la función `Cliente_id` para asegurar que el parámetro `$id` sea un entero válido.  Se lanza una excepción `InvalidArgumentException` si la validación falla.</li>\n              <li>Se especificó el tipo de dato en `bindValue` (PDO::PARAM_INT) para mayor seguridad.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:18:25', 7),
(54, 'Empresa.php', 'Detectado por GPT', '<?php\r\nclass Empresas extends Conectar\r\n{\r\n   /*  public function listarEmpresas()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"SP_L_Empresa_01\";\r\n        $query = $conectar->prepare($sql);\r\n       \r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    } */\r\n\r\n    public function listarEmpresas()\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"CALL SP_L_EMPRESA_01()\"; // Corrección: Usar CALL\r\n        $query = $conectar->prepare($sql);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n\r\n    public function Empresa_id($id)\r\n    {\r\n        $conectar = parent::Conexion();\r\n        $sql = \"CALL SP_L_EMPRESA_02(?)\";\r\n        $query = $conectar->prepare($sql);\r\n        $query->bindValue(1, $id);\r\n        $query->execute();\r\n        return $query->fetchAll(PDO::FETCH_ASSOC);\r\n    }\r\n\r\n    \r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL (Potencial)</h5>\n          <p class=\"card-text\">\n           Aunque el código utiliza prepared statements, la vulnerabilidad depende de la implementación de las stored procedures. Si las stored procedures `SP_L_EMPRESA_01` y `SP_L_EMPRESA_02` no sanitizan correctamente las entradas o concatenan directamente datos en sus consultas internas, aún existe un riesgo de inyección SQL.\n          </p>\n          <p>\n            <b>Línea Afectada (Potencial):</b> Todas las llamadas a stored procedures, especialmente la de `Empresa_id`\n          </p>\n          <ul>\n            <li><b>`CALL SP_L_EMPRESA_01()`</b></li>\n            <li><b>`CALL SP_L_EMPRESA_02(?)`</b></li>\n          </ul>\n          <p>\n            <b>Mitigación:</b>\n            <ul>\n              <li>Revisar y asegurar que las stored procedures `SP_L_EMPRESA_01` y `SP_L_EMPRESA_02` usen parámetros y sanitización interna apropiada para prevenir la inyección SQL.  Esto es crítico.</li>\n              <li>Aplicar el principio de mínimo privilegio a las credenciales de la base de datos.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6\">\n      <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-dark\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Análisis de Calidad</h5>\n          <ul>\n            <li><b>Complejidad Ciclomática:</b> Baja.  Las funciones son simples y directas.</li>\n            <li><b>Duplicación de Código:</b>  Hay una pequeña duplicación en la forma en que se establece la conexión a la base de datos en cada función.</li>\n            <li><b>Legibilidad:</b> Buena. El código es fácil de entender.</li>\n            <li><b>Acoplamiento:</b> El código está acoplado a la clase `Conectar` y a las stored procedures específicas de la base de datos.</li>\n          </ul>\n\n          <h5 class=\"card-title\">Mejoras Sugeridas</h5>\n          <ul>\n            <li><b>Eliminar Duplicación:</b> Mover la lógica de conexión a la base de datos a una función reutilizable (posiblemente en la clase `Conectar`) para evitar la duplicación.</li>\n            <li><b>Abstracción:</b> Considerar el uso de una capa de abstracción de base de datos (DBAL) para reducir el acoplamiento a la implementación específica de PDO y las stored procedures. Esto facilitaría el cambio a otra base de datos o la realización de pruebas unitarias.</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p>La solución principal es asegurar que las stored procedures estén correctamente implementadas para prevenir inyecciones SQL.  Además, se sugiere refactorizar el código para mejorar la mantenibilidad y reducir la duplicación.</p>\n          <p><b>Ejemplo de Refactorización (Extrayendo la conexión):</b></p>\n          <pre><code>\n          <?php\n          class Empresas extends Conectar\n          {\n              private function getConnection() {\n                  return parent::Conexion();\n              }\n\n              public function listarEmpresas()\n              {\n                  $conectar = $this->getConnection();\n                  $sql = \"CALL SP_L_EMPRESA_01()\";\n                  $query = $conectar->prepare($sql);\n                  $query->execute();\n                  return $query->fetchAll(PDO::FETCH_ASSOC);\n              }\n\n              public function Empresa_id($id)\n              {\n                  $conectar = $this->getConnection();\n                  $sql = \"CALL SP_L_EMPRESA_02(?)\";\n                  $query = $conectar->prepare($sql);\n                  $query->bindValue(1, $id);\n                  $query->execute();\n                  return $query->fetchAll(PDO::FETCH_ASSOC);\n              }\n          }\n          ?>\n          </code></pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:18:42', 7),
(55, 'actualizar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$id = $data[\'id\'];\r\n$nombre = $data[\'nombre\'];\r\n$cantidad = $data[\'cantidad\'];\r\n$precio = $data[\'precio\'];\r\n\r\n$sql = \"UPDATE productos SET nombre=\'$nombre\', cantidad=\'$cantidad\', precio=\'$precio\' WHERE id=$id\";\r\n\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto actualizado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al actualizado producto\"]);\r\n}\r\n\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> El código es vulnerable a inyección SQL debido a que los datos recibidos del usuario (<code>$nombre</code>, <code>$cantidad</code>, <code>$precio</code>, <code>$id</code>) son directamente concatenados en la consulta SQL sin ningún tipo de sanitización o escapado. Esto permite a un atacante inyectar código SQL malicioso y manipular la base de datos.\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Afectada (Aproximada):</b>\n            <pre><code>$sql = \"UPDATE productos SET nombre=\'$nombre\', cantidad=\'$cantidad\', precio=\'$precio\' WHERE id=$id\";</code></pre>\n          </p>\n          <p class=\"card-text\">\n            <b>Impacto:</b> Un atacante podría modificar, borrar o robar información de la base de datos. Podría incluso ejecutar comandos en el servidor subyacente, dependiendo de los permisos de la cuenta de la base de datos.\n          </p>\n          <p class=\"card-text\">\n            <b>Cómo Mitigar:</b>\n            <ul>\n              <li>\n                <b>Usar Sentencias Preparadas (Prepared Statements):</b> Las sentencias preparadas permiten separar la consulta SQL de los datos, previniendo la inyección SQL.  PDO o MySQLi son las opciones recomendadas.\n              </li>\n              <li>\n                <b>Escapado de Datos:</b> Si bien no es la solución ideal, usar funciones de escapado específicas de la base de datos (como <code>mysqli_real_escape_string</code>) puede ayudar a mitigar la vulnerabilidad.  Sin embargo, es menos seguro que las sentencias preparadas.\n              </li>\n              <li>\n                <b>Validación de Datos:</b> Validar que los datos de entrada coincidan con el tipo esperado y el rango de valores permitidos es esencial (e.g., <code>$cantidad</code> y <code>$precio</code> deben ser numéricos).\n              </li>\n              <li>\n                <b>Principio de Privilegio Mínimo:</b>  Asegurarse de que la cuenta de la base de datos usada por la aplicación tenga solo los permisos necesarios.\n              </li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12\">\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Complejidad</h5>\n          <p class=\"card-text\">\n            <b>Análisis:</b> El código es relativamente simple en términos de complejidad ciclomática. Sin embargo, la falta de validación de entradas y el manejo de errores más robusto podrían aumentar la complejidad.\n          </p>\n          <h5 class=\"card-title\">Duplicación</h5>\n          <p class=\"card-text\">\n            <b>Análisis:</b> No hay duplicación evidente en este pequeño fragmento, pero en un contexto más amplio, la lógica de acceso a la base de datos podría repetirse, sugiriendo la necesidad de una capa de abstracción.\n          </p>\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            <b>Análisis:</b> El código es relativamente legible, aunque el uso de sentencias preparadas mejoraría la legibilidad al separar la consulta SQL de los datos.\n          </p>\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            <b>Análisis:</b> El código está fuertemente acoplado a la base de datos. Una capa de abstracción de datos reduciría el acoplamiento y facilitaría las pruebas y el mantenimiento. La dependencia directa de <code>conexion.php</code> también incrementa el acoplamiento.  Inyectar la conexión, en lugar de incluirla directamente, sería mejor.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            El siguiente fragmento de código usa sentencias preparadas para prevenir la inyección SQL y mejora la validación de datos.\n          </p>\n          <pre><code class=\"language-php\">\n&lt;?php\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n$data = json_decode(file_get_contents(\'php://input\'), true);\n\n$id = filter_var($data[\'id\'], FILTER_VALIDATE_INT);\n$nombre = trim($data[\'nombre\']);\n$cantidad = filter_var($data[\'cantidad\'], FILTER_VALIDATE_INT);\n$precio = filter_var($data[\'precio\'], FILTER_VALIDATE_FLOAT);\n\nif ($id === false || $cantidad === false || $precio === false) {\n    echo json_encode([\"message\" => \"Error: Datos inválidos.\"]);\n    exit;\n}\n\n\n$sql = \"UPDATE productos SET nombre=?, cantidad=?, precio=? WHERE id=?\";\n$stmt = $conexion->prepare($sql);\n\nif ($stmt === false) {\n    echo json_encode([\"message\" => \"Error preparing statement: \" . $conexion->error]);\n    exit;\n}\n\n$stmt->bind_param(\"sidi\", $nombre, $cantidad, $precio, $id); //sidi: string, integer, double, integer\n\nif ($stmt->execute()) {\n    echo json_encode([\"message\" => \"Producto actualizado exitosamente\"]);\n} else {\n    echo json_encode([\"message\" => \"Error al actualizar producto: \" . $stmt->error]);\n}\n\n$stmt->close();\n$conexion->close();\n?&gt;\n</code></pre>\n          <p class=\"card-text\">\n            <b>Mejoras:</b>\n            <ul>\n              <li>\n                <b>Sentencias Preparadas:</b> Usa sentencias preparadas con <code>mysqli</code> para prevenir la inyección SQL.\n              </li>\n              <li>\n                <b>Validación de Datos:</b>  Valida los tipos de datos y usa <code>filter_var</code> para asegurar que los valores de entrada son del tipo esperado.\n              </li>\n              <li>\n                <b>Manejo de Errores:</b>  Incluye un manejo de errores más robusto para detectar problemas con la preparación y ejecución de la consulta.\n              </li>\n              <li>\n                <b>Cierre de Conexión y Statement:</b> Cierra la conexión y la declaración preparada para liberar recursos.\n              </li>\n              <li>\n                  <b>Sanitización Basica</b> Usa `trim` para remover espacios innecesarios en el `nombre`.\n              </li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:22:53', 8),
(56, 'eliminar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$id = $data[\'id\'];\r\n\r\n$sql = \"DELETE FROM productos where id = $id\";\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto eliminado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al eliminado producto\"]);\r\n}\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Tipo:</b> Inyección SQL\n          </p>\n          <p class=\"card-text\">\n            <b>Línea Aproximada:</b> Línea 7: \n            <code>$sql = \"DELETE FROM productos where id = $id\";</code>\n          </p>\n          <p class=\"card-text\">\n            <b>Descripción:</b> La variable <code>$id</code> se inserta directamente en la consulta SQL sin ningún tipo de sanitización o validación. Esto permite a un atacante inyectar código SQL malicioso en la consulta, lo que podría permitirle eliminar datos no autorizados, leer información sensible, o incluso tomar el control del servidor de la base de datos.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>  Utilizar consultas preparadas (prepared statements) con parámetros en lugar de concatenar directamente variables en la consulta SQL.  Las consultas preparadas permiten al motor de la base de datos distinguir entre el código SQL y los datos, previniendo la inyección.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6\">\n      <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-dark\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Calidad del Código</h5>\n          <p class=\"card-text\">\n            <b>Complejidad:</b> Baja. El código es relativamente simple.\n          </p>\n          <p class=\"card-text\">\n            <b>Duplicación:</b> No aparente en este fragmento, pero se debe revisar el resto de la aplicación.\n          </p>\n          <p class=\"card-text\">\n            <b>Legibilidad:</b> Buena. El código es fácil de entender, aunque la falta de comentarios podría dificultar el mantenimiento a largo plazo.\n          </p>\n          <p class=\"card-text\">\n            <b>Acoplamiento:</b> Dependencia fuerte de <code>conexion.php</code> y de la estructura de la base de datos.  Minimizar el acoplamiento mejora la mantenibilidad y reusabilidad del código.\n          </p>\n          <p class=\"card-text\">\n            <b>Manejo de Errores:</b> El manejo de errores es básico.  Solo informa si la eliminación tuvo éxito o no.  No proporciona detalles sobre el error específico.\n          </p>\n          <p class=\"card-text\">\n            <b>Validación de Datos:</b>  Falta completamente la validación de datos.  Se asume que el <code>id</code> es siempre un valor válido.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            El siguiente código usa consultas preparadas para prevenir la inyección SQL.\n          </p>\n          <pre>\n            <code class=\"language-php\">\n&lt;?php\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n\n$data = json_decode(file_get_contents(\'php://input\'), true);\n\n$id = $data[\'id\'];\n\n// Validar que $id es un entero (o el tipo de dato esperado)\nif (!is_numeric($id)) {\n    echo json_encode([\"message\" => \"ID inválido\"]);\n    exit;\n}\n\n// Usar una consulta preparada para prevenir inyección SQL\n$sql = \"DELETE FROM productos WHERE id = ?\";\n$stmt = $conexion->prepare($sql);\n\nif ($stmt === false) {\n    // Error al preparar la consulta\n    error_log(\"Error preparing statement: \" . $conexion->error);\n    echo json_encode([\"message\" => \"Error interno del servidor\"]);\n    exit;\n}\n\n$stmt->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\nif ($stmt->execute()) {\n    echo json_encode([\"message\" => \"Producto eliminado exitosamente\"]);\n} else {\n    error_log(\"Error executing statement: \" . $stmt->error);\n    echo json_encode([\"message\" => \"Error al eliminar producto\"]);\n}\n\n$stmt->close();\n?&gt;\n            </code>\n          </pre>\n          <p class=\"card-text\">\n            <b>Mejoras Adicionales:</b>\n            <ul>\n              <li>Validar que el usuario tiene permisos para eliminar el producto.</li>\n              <li>Agregar logging más detallado para facilitar la depuración.</li>\n              <li>Implementar una capa de abstracción de base de datos (como PDO) para mejorar la portabilidad del código.</li>\n              <li>Utilizar un framework de desarrollo PHP que proporcione mecanismos de seguridad y validación incorporados.</li>\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:23:14', 8),
(57, 'guardar.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n$data = json_decode(file_get_contents(\'php://input\'), true);\r\n\r\n$nombre = $data[\'nombre\'];\r\n$cantidad = $data[\'cantidad\'];\r\n$precio = $data[\'precio\'];\r\n\r\n$sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (\'$nombre\', \'$cantidad\', \'$precio\')\";\r\n\r\nif ($conexion->query($sql) == true) {\r\n    echo json_encode([\"message\" => \"Producto guardado exitosamente\"]);\r\n} else {\r\n    echo json_encode([\"message\" => \"Error al guardar producto\"]);\r\n}\r\n\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n          <div class=\'card mb-3\'>\n            <div class=\'card-header\'>\n              Inyección SQL\n            </div>\n            <div class=\'card-body\'>\n              <p class=\'card-text\'>\n                <b>Tipo:</b> Inyección SQL\n              </p>\n              <p class=\'card-text\'>\n                <b>Línea Aproximada:</b>\n                <pre><code class=\"language-php\">9: $sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (\'$nombre\', \'$cantidad\', \'$precio\')\";</code></pre>\n              </p>\n              <p class=\'card-text\'>\n                <b>Descripción:</b> El código construye la consulta SQL directamente concatenando los valores proporcionados por el usuario. Si los valores de `$nombre`, `$cantidad`, o `$precio` contienen caracteres especiales (como comillas simples), pueden modificar la estructura de la consulta, permitiendo la ejecución de código SQL arbitrario.\n              </p>\n              <p class=\'card-text\'>\n                <b>Mitigación:</b> Utilizar consultas preparadas (prepared statements) con parámetros enlazados.  Esta técnica separa la consulta SQL de los datos, impidiendo que los datos sean interpretados como parte del código SQL. PDO o MySQLi son excelentes opciones para implementar esto en PHP. La función `addslashes()` NO es una mitigación adecuada, ya que es propensa a errores y puede ser eludida.\n              </p>\n              <p class=\'card-text\'>\n                <b>Ejemplo de Mitigación (usando PDO):</b>\n                <pre><code class=\"language-php\">\n<?php\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n$data = json_decode(file_get_contents(\'php://input\'), true);\n\n$nombre = $data[\'nombre\'];\n$cantidad = $data[\'cantidad\'];\n$precio = $data[\'precio\'];\n\n$sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (:nombre, :cantidad, :precio)\";\n$stmt = $conexion->prepare($sql);\n$stmt->bindParam(\':nombre\', $nombre);\n$stmt->bindParam(\':cantidad\', $cantidad);\n$stmt->bindParam(\':precio\', $precio);\n\nif ($stmt->execute()) {\n    echo json_encode([\"message\" => \"Producto guardado exitosamente\"]);\n} else {\n    echo json_encode([\"message\" => \"Error al guardar producto\"]);\n}\n?>\n                </code></pre>\n              </p>\n            </div>\n          </div>\n\n          <div class=\'card mb-3\'>\n            <div class=\'card-header\'>\n              Ruta sensible expuesta\n            </div>\n            <div class=\'card-body\'>\n              <p class=\'card-text\'>\n                <b>Tipo:</b> Exposición de la ruta interna.\n              </p>\n              <p class=\'card-text\'>\n                <b>Línea Aproximada:</b>\n                <pre><code class=\"language-php\">1: include \"../../models/conexion.php\";</code></pre>\n              </p>\n              <p class=\'card-text\'>\n                <b>Descripción:</b>  Si un atacante es capaz de ver el código fuente, o se genera un error que revele la ruta, el atacante conocerá la estructura de directorios del servidor.  Aunque no es una vulnerabilidad directa, facilita la explotación de otras vulnerabilidades.\n              </p>\n              <p class=\'card-text\'>\n                <b>Mitigación:</b> Evitar exponer información innecesaria de la estructura interna del proyecto.  Al manejar errores, evitar mostrar rutas completas. Se recomienda mantener la estructura interna lo más opaca posible desde el exterior.  Configurar adecuadamente el servidor web para evitar la exposición de archivos PHP sin procesar.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n\n          <div class=\'card mb-3\'>\n            <div class=\'card-header\'>\n              Legibilidad y Mantenibilidad\n            </div>\n            <div class=\'card-body\'>\n              <p class=\'card-text\'>\n                <b>Problema:</b> El código es relativamente simple, pero la concatenación directa en la consulta SQL reduce la legibilidad, especialmente al considerar la necesidad de escapar caracteres (ahora resuelto con prepared statements).\n              </p>\n              <p class=\'card-text\'>\n                <b>Mejora:</b> El uso de prepared statements mejora drásticamente la legibilidad, ya que la lógica de la consulta SQL se separa de los datos. Usar nombres de variables descriptivos y comentarios concisos también contribuye a la legibilidad.\n              </p>\n            </div>\n          </div>\n\n          <div class=\'card mb-3\'>\n            <div class=\'card-header\'>\n              Acoplamiento\n            </div>\n            <div class=\'card-body\'>\n              <p class=\'card-text\'>\n                <b>Problema:</b> El código está acoplado a la base de datos directamente en el mismo script.\n              </p>\n              <p class=\'card-text\'>\n                <b>Mejora:</b> Considerar el uso de un patrón de diseño como MVC (Modelo-Vista-Controlador) para separar la lógica de acceso a datos (modelo) de la lógica de presentación (vista) y la lógica de control (controlador).  Esto reduce el acoplamiento y facilita la mantenibilidad y las pruebas.  El archivo `conexion.php` puede considerarse un punto único de acceso a la base de datos, lo cual es una buena práctica en este contexto.\n              </p>\n            </div>\n          </div>\n\n          <div class=\'card mb-3\'>\n            <div class=\'card-header\'>\n              Manejo de Errores\n            </div>\n            <div class=\'card-body\'>\n              <p class=\'card-text\'>\n                <b>Problema:</b> El manejo de errores es básico. Simplemente indica si la operación se realizó con éxito o no, sin proporcionar detalles específicos sobre el error.\n              </p>\n              <p class=\'card-text\'>\n                <b>Mejora:</b> Registrar los errores en un archivo de registro o en un sistema de monitoreo. En el caso de PDO, puedes obtener información detallada del error utilizando `$stmt->errorInfo()`.  Evitar mostrar mensajes de error detallados al usuario final por razones de seguridad (podrían revelar información sensible de la base de datos).\n              </p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row mt-3\">\n    <div class=\"col-md-12\">\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta (Código Mitigado)\n        </div>\n        <div class=\'card-body\'>\n          <pre><code class=\"language-php\">\n<?php\ninclude \"../../models/conexion.php\";\nheader(\'Content-Type: application/json\'); //Indica que la respuesta es JSON\n\ntry {\n    $data = json_decode(file_get_contents(\'php://input\'), true);\n\n    if (!isset($data[\'nombre\']) || !isset($data[\'cantidad\']) || !isset($data[\'precio\'])) {\n        http_response_code(400); // Bad Request\n        echo json_encode([\"message\" => \"Faltan parámetros requeridos (nombre, cantidad, precio).\"]);\n        exit;\n    }\n\n    $nombre = $data[\'nombre\'];\n    $cantidad = $data[\'cantidad\'];\n    $precio = $data[\'precio\'];\n\n    $sql = \"INSERT INTO productos (nombre, cantidad, precio) VALUES (:nombre, :cantidad, :precio)\";\n    $stmt = $conexion->prepare($sql);\n\n    $stmt->bindParam(\':nombre\', $nombre);\n    $stmt->bindParam(\':cantidad\', $cantidad, PDO::PARAM_INT); // Especifica el tipo de dato\n    $stmt->bindParam(\':precio\', $precio, PDO::PARAM_STR); //Especifica el tipo de dato\n\n    if ($stmt->execute()) {\n        http_response_code(201); // Created\n        echo json_encode([\"message\" => \"Producto guardado exitosamente\"]);\n    } else {\n        http_response_code(500); // Internal Server Error\n        error_log(\"Error al guardar producto: \" . print_r($stmt->errorInfo(), true)); //Log del error\n        echo json_encode([\"message\" => \"Error al guardar producto.  Por favor, contacte al administrador.\"]);\n    }\n\n} catch (PDOException $e) {\n    http_response_code(500); // Internal Server Error\n    error_log(\"Error de conexión a la base de datos: \" . $e->getMessage());\n    echo json_encode([\"message\" => \"Error de conexión a la base de datos.  Por favor, contacte al administrador.\"]);\n} catch (Exception $e) {\n    http_response_code(500); // Internal Server Error\n    error_log(\"Error general: \" . $e->getMessage());\n    echo json_encode([\"message\" => \"Error inesperado. Por favor, contacte al administrador.\"]);\n}\n?>\n          </code></pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:23:36', 8),
(58, 'producto.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n$id = $_GET[\"id\"];\r\n// Realizamos la consulta a la base de datos\r\n$sql = $conexion->query(\"SELECT * FROM productos where $id\");\r\n\r\n$producto = $sql->fetch_assoc();\r\n   \r\n\r\n// Devolvemos los datos en formato JSON\r\necho json_encode($producto);\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Descripción:</b> El código es vulnerable a inyección SQL debido a que la variable <code>$id</code> proveniente de <code>$_GET[\"id\"]</code> se inserta directamente en la consulta SQL sin validación ni sanitización. Un atacante puede manipular el valor de <code>id</code> en la URL para ejecutar código SQL malicioso, comprometiendo la base de datos.\n          </p>\n          <p class=\"card-text\">\n             <b>Línea Aproximada:</b> \n             <pre>\n                <code class=\"language-php\">\n                    $sql = $conexion->query(\"SELECT * FROM productos where $id\");\n                </code>\n              </pre>\n          </p>\n          <p class=\"card-text\">\n            <b>Impacto:</b> Un atacante podría obtener acceso no autorizado a la base de datos, modificar o eliminar datos, o incluso ejecutar comandos en el servidor de la base de datos.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b>\n            <ul>\n              <li>\n                <b>Usar consultas preparadas (prepared statements):</b>  Las consultas preparadas permiten separar la definición de la consulta SQL de los datos que se insertan en ella. Esto evita que los datos sean interpretados como parte de la consulta SQL.\n              </li>\n              <li>\n                <b>Validar y sanitizar la entrada:</b> Si el <code>id</code> debe ser un número entero, asegúrate de que lo sea usando <code>intval()</code> o <code>filter_var()</code>. Si debe ser una cadena, escapa los caracteres especiales con <code>mysqli_real_escape_string()</code> (pero las consultas preparadas son preferibles).\n              </li>\n            </ul>\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            El código es relativamente corto y fácil de entender en su funcionalidad básica. Sin embargo, la falta de comentarios sobre el propósito del código y las validaciones podría afectar la legibilidad para otros desarrolladores.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b>  Añadir comentarios descriptivos. Nombrar las variables de manera más descriptiva.\n          </p>\n\n          <h5 class=\"card-title\">Acoplamiento</h5>\n          <p class=\"card-text\">\n            El código está acoplado al archivo <code>conexion.php</code> a través de la inclusión <code>include \"../../models/conexion.php\";</code>.  Si la forma de conexión a la base de datos cambia en <code>conexion.php</code>, este script también necesitará ser modificado.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Considerar inyección de dependencias, aunque para este ejemplo simple podría ser excesivo.\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <p class=\"card-text\">\n            El siguiente código utiliza una consulta preparada para prevenir la inyección SQL y mejora la legibilidad con comentarios. También se asume que el <code>id</code> es un entero. Si no lo es, adapta la validación.\n          </p>\n\n          <pre>\n            <code class=\"language-php\">\n                &lt;?php\n                include \"../../models/conexion.php\";\n\n                // Obtener el ID del parámetro GET y validarlo como entero\n                $id = isset($_GET[\"id\"]) ? intval($_GET[\"id\"]) : 0; //Valor predeterminado seguro\n\n                // Verificar que el ID sea válido (ej: mayor que 0)\n                if ($id <= 0) {\n                    echo json_encode(array(\"error\" => \"ID inválido\"));\n                    exit;\n                }\n\n                // Preparar la consulta SQL para evitar inyección SQL\n                $sql = $conexion->prepare(\"SELECT * FROM productos WHERE id = ?\");\n                $sql->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\n                // Ejecutar la consulta\n                $sql->execute();\n\n                // Obtener el resultado\n                $result = $sql->get_result();\n                $producto = $result->fetch_assoc();\n\n                // Cerrar la consulta\n                $sql->close();\n\n                // Devolver los datos en formato JSON\n                echo json_encode($producto);\n                ?&gt;\n            </code>\n          </pre>\n\n          <p class=\"card-text\"><b>Explicación de los cambios:</b></p>\n          <ul>\n            <li>Se utiliza <code>intval()</code> para asegurar que <code>$id</code> sea un entero, previniendo algunos tipos de inyección SQL básica.</li>\n            <li>Se usa una consulta preparada (<code>$conexion->prepare()</code>) para insertar el <code>$id</code> de manera segura, evitando que sea interpretado como código SQL.</li>\n            <li>Se usa <code>bind_param()</code> para enlazar el parámetro <code>$id</code> a la consulta preparada, especificando su tipo como entero (\"i\").</li>\n            <li>Se agrega validación básica para asegurar que el ID es un valor positivo, evitando consultas innecesarias o potencialmente dañinas.  Se usa <code>isset()</code> para verificar si la variable <code>$_GET[\"id\"]</code> existe.</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:23:55', 8);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(59, 'productos.php', 'Detectado por GPT', '<?php\r\ninclude \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\r\n\r\n// Realizamos la consulta a la base de datos\r\n$sql = $conexion->query(\"SELECT * FROM productos\");\r\n\r\n$productos = array();\r\n\r\n// Recorremos el resultado de la consulta y lo agregamos al arreglo $productos\r\nwhile ($producto = $sql->fetch_assoc()) {\r\n    $productos[] = $producto;\r\n}\r\n\r\n// Devolvemos los datos en formato JSON\r\necho json_encode($productos);\r\n?>\r\n', '```html\n<div class=\'container\'>\n    <div class=\'row\'>\n        <div class=\'col-md-6\'>\n            <div class=\'card border-danger\'>\n                <div class=\'card-header bg-danger text-white\'>\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Inyección SQL (Potencial)</h5>\n                    <p class=\'card-text\'>\n                        Aunque el código proporcionado no contiene directamente inyección SQL, el archivo incluido \n                        <code>conexion.php</code> es el punto débil. Si <code>conexion.php</code> no escapa correctamente los datos,\n                        o utiliza directamente datos provistos por el usuario para construir la query, entonces este código es vulnerable.\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Línea:</b> N/A (Posible vulnerabilidad en <code>conexion.php</code>)\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>\n                                Utilizar sentencias preparadas (prepared statements) con parámetros en el archivo <code>conexion.php</code>\n                                 para escapar correctamente los datos antes de ser insertados en la consulta SQL.\n                            </li>\n                            <li>\n                                No incluir archivos de conexión directamente, sino llamar a funciones que retornen la conexión\n                                previamente configurada.\n                            </li>\n                            <li>\n                                Asegurarse de que la clase de conexión (si la hubiera) escape los datos al insertar.\n                            </li>\n                            <li>\n                                Implementar validación y saneamiento exhaustivos de cualquier entrada de usuario que se utilice para construir la consulta SQL.  Sin embargo, esto no elimina la necesidad de sentencias preparadas.\n                            </li>\n                        </ul>\n                    </p>\n                    <h5 class=\'card-title\'>Revelación de Información Sensible</h5>\n                    <p class=\'card-text\'>\n                        Si el archivo <code>conexion.php</code> contiene credenciales de la base de datos (usuario, contraseña, nombre de la base de datos),\n                        la inclusión de este archivo implica que, en caso de acceso no autorizado, se estaría revelando información sensible.\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Línea:</b> N/A (Información sensible contenida en <code>conexion.php</code>)\n                    </p>\n                     <p class=\'card-text\'>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>\n                                Asegurar permisos de acceso adecuados al archivo <code>conexion.php</code> para evitar lectura no autorizada.\n                            </li>\n                            <li>\n                                Utilizar variables de entorno para almacenar las credenciales de la base de datos en lugar de incluirlas directamente en el código.\n                            </li>\n                            <li>\n                                Limitar los privilegios de la cuenta de base de datos al mínimo necesario para la operación.\n                            </li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div class=\'col-md-6\'>\n            <div class=\'card border-warning\'>\n                <div class=\'card-header bg-warning text-white\'>\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Complejidad Ciclomática</h5>\n                    <p class=\'card-text\'>\n                        Baja. El código es sencillo y directo, sin ramificaciones complejas.\n                    </p>\n                    <h5 class=\'card-title\'>Duplicación</h5>\n                    <p class=\'card-text\'>\n                        Baja. El fragmento de código proporcionado no muestra duplicación. Sin embargo, la duplicación podría existir en el archivo <code>conexion.php</code> o en otros archivos que lo utilicen.\n                    </p>\n                    <h5 class=\'card-title\'>Legibilidad</h5>\n                    <p class=\'card-text\'>\n                        Buena. El código es fácil de entender y seguir. Los nombres de las variables son descriptivos.\n                    </p>\n                    <h5 class=\'card-title\'>Acoplamiento</h5>\n                    <p class=\'card-text\'>\n                        Moderado. El código depende del archivo <code>conexion.php</code>. Un alto acoplamiento dificulta la reutilización y el testeo del código.\n                    </p>\n                    <p class=\'card-text\'>\n                        <b>Mejora:</b> Se podría desacoplar la lógica de acceso a la base de datos mediante la creación de una clase o interfaz para la gestión de la conexión. Esto permitiría intercambiar fácilmente la implementación de la base de datos sin afectar el resto del código.  Además, inyectar la dependencia de la conexión, en lugar de incluir el archivo directamente, mejoraría la testabilidad.\n                    </p>\n                     <h5 class=\'card-title\'>Manejo de Errores</h5>\n                    <p class=\'card-text\'>\n                        El código carece de manejo de errores. Si la consulta falla, no se realiza ninguna acción para registrar el error o notificar al usuario.\n                    </p>\n                     <p class=\'card-text\'>\n                        <b>Mejora:</b> Agregar manejo de errores (try-catch) y logueo de errores es esencial para la robustez de la aplicación.  Considerar también retornar códigos de error HTTP apropiados en caso de fallas, en lugar de simplemente no hacer nada.\n                    </p>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\'row\'>\n        <div class=\'col-md-12\'>\n            <div class=\'card border-success\'>\n                <div class=\'card-header bg-success text-white\'>\n                    Solución Propuesta\n                </div>\n                <div class=\'card-body\'>\n                    <p class=\'card-text\'>\n                        La solución principal se centra en asegurar que el archivo <code>conexion.php</code> utilice sentencias preparadas\n                        para evitar la inyección SQL. Además, se recomienda externalizar la configuración de la base de datos utilizando variables de entorno\n                        y limitar los privilegios de la cuenta de base de datos.  El manejo de errores debería ser implementado para\n                        mejorar la robustez y la calidad del código. Finalmente, una inyección de dependencia de la conexion en lugar de la inclusion directa\n                        aumenta la testabilidad y reduce el acoplamiento.\n                    </p>\n                    <p class=\'card-text\'>\n                    Ejemplo (<code>conexion.php</code>):\n                    </p>\n                    <pre>\n                    <code>\n                    &lt;?php\n\n                    $servername = getenv(\'DB_HOST\');\n                    $username = getenv(\'DB_USER\');\n                    $password = getenv(\'DB_PASSWORD\');\n                    $dbname = getenv(\'DB_NAME\');\n\n                    try {\n                        $conn = new PDO(\"mysql:host=$servername;dbname=$dbname\", $username, $password);\n                        // set the PDO error mode to exception\n                        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n                        // Emulate prepared statements\n                        $conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);\n\n                        // Función para ejecutar consultas preparadas\n                        function ejecutarConsulta($conn, $sql, $params = []) {\n                            $stmt = $conn->prepare($sql);\n                            $stmt->execute($params);\n                            return $stmt;\n                        }\n                    } catch(PDOException $e) {\n                        echo \"Connection failed: \" . $e->getMessage();\n                        die(); // O manejar el error de conexión de manera más elegante\n                    }\n\n                    ?&gt;\n                    </code>\n                    </pre>\n                    <p>Código Principal (ejemplo):</p>\n                     <pre>\n                    <code>\n                    &lt;?php\n                    include \"../../models/conexion.php\"; // Asegúrate de que la ruta a este archivo es correcta\n\n                    try {\n                         // Realizamos la consulta a la base de datos usando la función ejecutarConsulta\n                         $sql = \"SELECT * FROM productos\";\n                         $stmt = ejecutarConsulta($conn, $sql);\n\n                         $productos = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n\n                         // Devolvemos los datos en formato JSON\n                         echo json_encode($productos);\n                    } catch (Exception $e) {\n                        // Manejo de errores (ejemplo: loguear el error)\n                        error_log(\"Error al obtener productos: \" . $e->getMessage());\n                        http_response_code(500); // Internal Server Error\n                        echo json_encode([\"error\" => \"Error al obtener productos.\"]);\n                    }\n                    ?&gt;\n                    </code>\n                    </pre>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:24:18', 8),
(60, 'eliminar.php', 'Detectado por GPT', '<?php\r\n    if (!empty($_GET[\"id\"])) {\r\n        # code...\r\n        $id = $_GET[\"id\"];\r\n\r\n        $sql = $conexion->query(\"DELETE FROM PERSONAS WHERE ID = $id\");\r\n        if ($sql == 1) {\r\n            # code...\r\n            echo \'<div class=\"alert alert-warning\" role=\"alert\">\r\n            Persona no eliminada correctamente.\r\n          </div>\';\r\n        }else{\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n            Persona no eliminada correctamente.\r\n          </div>\';\r\n        }\r\n    }\r\n?>', '```html\n<div class=\'container\'>\n  <div class=\'row\'>\n\n    <div class=\'col-md-6\'>\n      <div class=\'card border-danger\'>\n        <div class=\'card-header bg-danger text-white\'>\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'>Inyección SQL</h5>\n          <p class=\'card-text\'>\n            <b>Tipo:</b> Inyección SQL <br>\n            <b>Línea Aproximada:</b> <code>$sql = $conexion->query(\"DELETE FROM PERSONAS WHERE ID = $id\");</code> <br>\n            <b>Descripción:</b> La variable <code>$id</code>, obtenida directamente de <code>$_GET[\"id\"]</code>, se utiliza sin validación ni sanitización en la consulta SQL. Un atacante puede manipular el valor de <code>id</code> en la URL para inyectar código SQL malicioso.  Por ejemplo, <code>?id=1 OR 1=1;--</code> eliminaría todos los registros de la tabla `PERSONAS`.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-6\'>\n      <div class=\'card border-warning\'>\n        <div class=\'card-header bg-warning text-white\'>\n          Métricas de Calidad del Código\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'>Mejoras Necesarias</h5>\n          <p class=\'card-text\'>\n            <b>Seguridad:</b>  La principal preocupación es la vulnerabilidad de inyección SQL. <br>\n            <b>Legibilidad:</b> El código es relativamente legible, pero la falta de manejo de errores específico (aparte de la simple comparación con `1`) dificulta la depuración.  Los mensajes de alerta son confusos, ya que el `alert-warning` dice \"no eliminada correctamente\" y el `alert-danger` también.  Deberían ser al revés y/o más descriptivos. <br>\n            <b>Robustez:</b>  El código no maneja casos donde `$conexion` sea nula o donde la consulta falle por otras razones (restricciones de la base de datos, etc.).  Tampoco se valida si `$id` es un número antes de usarlo en la consulta.\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\'col-md-12\'>\n      <div class=\'card border-success\'>\n        <div class=\'card-header bg-success text-white\'>\n          Solución Propuesta\n        </div>\n        <div class=\'card-body\'>\n\n          <h5 class=\'card-title\'>Código Mejorado</h5>\n          <p class=\'card-text\'>\n            <b>Mitigación de Inyección SQL:</b> Usar consultas preparadas con parámetros enlazados. <br>\n            <b>Manejo de Errores:</b> Implementar un manejo de errores más detallado. <br>\n            <b>Validación:</b> Validar y sanitizar la entrada del usuario.\n          </p>\n\n          <pre><code class=\'language-php\'>\n&lt;?php\n    if (!empty($_GET[\"id\"])) {\n        $id = $_GET[\"id\"];\n\n        // Validar que $id sea un entero\n        if (!is_numeric($id)) {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">ID no válido.&lt;/div>\';\n            exit; // Salir del script para evitar la inyección SQL\n        }\n\n        // Utilizar consultas preparadas para prevenir la inyección SQL\n        $stmt = $conexion->prepare(\"DELETE FROM PERSONAS WHERE ID = ?\");\n        $stmt->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\n        if ($stmt->execute()) {\n            if ($stmt->affected_rows > 0) {\n                echo \'&lt;div class=\"alert alert-success\" role=\"alert\">Persona eliminada correctamente.&lt;/div>\';\n            } else {\n                echo \'&lt;div class=\"alert alert-warning\" role=\"alert\">No se encontró ninguna persona con ese ID.&lt;/div>\';\n            }\n        } else {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error al eliminar la persona: \' . $conexion->error . \'&lt;/div>\';\n        }\n\n        $stmt->close();\n    }\n?&gt;\n          </code></pre>\n\n          <p class=\'card-text\'>\n            <b>Explicación de la Solución:</b>\n            <ul>\n              <li><b>Validación de Entrada:</b> Se asegura que <code>$id</code> sea un número antes de utilizarlo.</li>\n              <li><b>Consultas Preparadas:</b> Se utiliza <code>$conexion->prepare()</code> para preparar la consulta SQL.  Luego, <code>$stmt->bind_param()</code> asocia el valor de <code>$id</code> como un entero (<code>\"i\"</code>). Esto previene la inyección SQL porque el valor se trata como datos, no como código SQL ejecutable.</li>\n              <li><b>Manejo de Errores Mejorado:</b> Se utiliza <code>$stmt->execute()</code> para ejecutar la consulta y se comprueba si se realizó correctamente. Se utiliza <code>$stmt->affected_rows</code> para determinar si se eliminó algún registro.  Además, se muestra el mensaje de error específico de la base de datos si falla la consulta.</li>\n            </ul>\n          </p>\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n```\n', '2025-05-20 02:24:37', 8),
(61, 'modificar.php', 'Detectado por GPT', '<?php\r\nif (!empty($_POST[\"btnactualizar\"])) {\r\n    if (\r\n        !empty($_POST[\"id\"]) &&\r\n        !empty($_POST[\"nombre\"]) &&\r\n        !empty($_POST[\"apellido\"]) &&\r\n        !empty($_POST[\"dni\"]) &&\r\n\r\n        !empty($_POST[\"email\"])\r\n    ) {\r\n        // Captura de los valores\r\n        $nombre = $_POST[\"nombre\"];\r\n        $apellido = $_POST[\"apellido\"];\r\n        $dni = $_POST[\"dni\"];\r\n\r\n        $email = $_POST[\"email\"];\r\n\r\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\r\n        $stmt = $conexion->prepare(\"UPDATE PERSONAS \r\n        SET \r\n        nombre = ?,\r\n        apellido = ?,\r\n        cedula = ?,\r\n        fecha_nacimiento = NOW(),\r\n        correo = ?\r\n        WHERE id = ?\");\r\n\r\n        // Vinculamos los parámetros\r\n        $stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $email, $id);\r\n\r\n        // Ejecutamos la consulta\r\n        if ($stmt->execute()) {\r\n            // Almacenamos el mensaje en la sesión\r\n            session_start();\r\n            $_SESSION[\'mensaje\'] = \'Persona Actualizada correctamente.\';\r\n\r\n            // Redirigimos al index.php\r\n            header(\"Location: index.php\");\r\n            exit;  // Es importante llamar a exit después de la redirección\r\n        } else {\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n            Persona no Actualizada correctamente.\r\n          </div>\';\r\n        }\r\n\r\n        // Cerramos el statement\r\n        $stmt->close();\r\n    } else {\r\n        echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                Alguno de los campos está vacío.\r\n              </div>\';\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Análisis de Vulnerabilidades\n        </div>\n        <div class=\"card-body\">\n\n          <div class=\"card-text\">\n            <p><b>Vulnerabilidad:</b> Inyección SQL (Potencial) y Falta de Saneamiento de Datos.</p>\n            <p><b>Línea Aproximada:</b> La vulnerabilidad está en el uso de <code>$_POST[\"id\"]</code> en la consulta UPDATE sin validar, aun cuando se preparan consultas.  Aunque las otras variables son parametrizadas, el `id` se usa sin filtrar ni parametrizar.</p>\n            <p><b>Descripción:</b> Aunque el código usa sentencias preparadas, existe una vulnerabilidad latente. El valor de <code>$_POST[\"id\"]</code>  no está siendo filtrado ni sanitizado antes de ser usado en la cláusula <code>WHERE id = ?</code>.  Si <code>$_POST[\"id\"]</code> contiene código SQL malicioso, podría eludir la protección de la sentencia preparada e inyectar código SQL. Además, aunque los datos son sanitizados al usar sentencias preparadas, no se hace validación para tipos de datos, longitudes máximas, o formatos esperados. Esto puede causar errores de base de datos o comportamientos inesperados.\n            </p>\n            <p><b>Mitigación:</b></p>\n            <ul>\n              <li><b>Validar y Sanitizar `id`:** Antes de usar <code>$_POST[\"id\"]</code>, convertirlo a un entero usando <code>intval($_POST[\"id\"])</code>. Esto asegura que sea un número entero, previniendo inyección SQL vía ese parámetro.</li>\n              <li><b>Validar Tipos de Datos y Longitudes:** Implementar validación para cada campo para asegurar que coinciden con el tipo de dato esperado (ej: email válido, DNI con formato correcto) y que no exceden la longitud máxima permitida en la base de datos. Usar funciones como `filter_var` para validación de email.</li>\n              <li><b>Escapar Salida:**  Aunque no directamente relacionado con este fragmento, siempre escapar la salida al HTML para prevenir XSS.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n\n          <div class=\"card-text\">\n            <p><b>Complejidad Ciclomática:</b> Baja. El código tiene una estructura condicional sencilla (if/else). Sin embargo, se puede mejorar aún más dividiendo la lógica en funciones más pequeñas.</p>\n            <p><b>Duplicación:</b> Baja. No hay duplicación significativa en este fragmento.</p>\n            <p><b>Legibilidad:</b> Moderada. El código es relativamente fácil de entender, pero se puede mejorar añadiendo comentarios más descriptivos, especialmente sobre la validación y sanitización de datos.</p>\n            <p><b>Acoplamiento:</b> Moderado. El código está acoplado a las variables <code>$_POST</code> y a la variable de conexión <code>$conexion</code> (no mostrada, pero implícita). Se puede reducir el acoplamiento usando inyección de dependencias para la conexión a la base de datos.</p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <div class=\"card-text\">\n            <p>El siguiente código incluye la mitigación para la inyección SQL en el ID y validaciones adicionales:</p>\n            <pre>\n              <code>\n&lt;?php\nif (!empty($_POST[\"btnactualizar\"])) {\n    if (\n        !empty($_POST[\"id\"]) &&\n        !empty($_POST[\"nombre\"]) &&\n        !empty($_POST[\"apellido\"]) &&\n        !empty($_POST[\"dni\"]) &&\n        !empty($_POST[\"email\"])\n    ) {\n        // Captura y validación de los valores\n        $id = intval($_POST[\"id\"]); // Sanitize ID\n        $nombre = htmlspecialchars(trim($_POST[\"nombre\"])); // Escape HTML\n        $apellido = htmlspecialchars(trim($_POST[\"apellido\"])); // Escape HTML\n        $dni = htmlspecialchars(trim($_POST[\"dni\"])); // Escape HTML\n\n        $email = filter_var($_POST[\"email\"], FILTER_SANITIZE_EMAIL);  // Sanitize email\n        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\"&gt;Email no válido.&lt;/div&gt;\';\n            exit;\n        }\n\n\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\n        $stmt = $conexion->prepare(\"UPDATE PERSONAS \n        SET \n        nombre = ?,\n        apellido = ?,\n        cedula = ?,\n        fecha_nacimiento = NOW(),\n        correo = ?\n        WHERE id = ?\");\n\n        // Vinculamos los parámetros\n        $stmt->bind_param(\"ssssi\", $nombre, $apellido, $dni, $email, $id);\n\n        // Ejecutamos la consulta\n        if ($stmt->execute()) {\n            // Almacenamos el mensaje en la sesión\n            session_start();\n            $_SESSION[\'mensaje\'] = \'Persona Actualizada correctamente.\';\n\n            // Redirigimos al index.php\n            header(\"Location: index.php\");\n            exit;  // Es importante llamar a exit después de la redirección\n        } else {\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\"&gt;\n            Persona no Actualizada correctamente.\n          &lt;/div&gt;\';\n        }\n\n        // Cerramos el statement\n        $stmt->close();\n    } else {\n        echo \'&lt;div class=\"alert alert-danger\" role=\"alert\"&gt;\n                Alguno de los campos está vacío.\n              &lt;/div&gt;\';\n    }\n}\n?&gt;\n              </code>\n            </pre>\n            <p><b>Mejoras:</b></p>\n            <ul>\n              <li>Se sanitiza el ID con <code>intval()</code> para prevenir inyección SQL.</li>\n              <li>Se implementa validación de email con <code>filter_var()</code>.</li>\n              <li>Se escapa HTML en los campos nombre, apellido, y DNI para evitar XSS.</li>\n              <li>Se actualiza el tipo de dato del bind_param para que coincida con el nuevo tipo de la variable id, usando \"i\" para integer.</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:24:58', 8),
(62, 'registro.php', 'Detectado por GPT', '<?php\r\nif (!empty($_POST[\"btnregistrar\"])) {\r\n    if (\r\n        !empty($_POST[\"nombre\"]) &&\r\n        !empty($_POST[\"apellido\"]) &&\r\n        !empty($_POST[\"dni\"]) &&\r\n        !empty($_POST[\"fecha\"]) &&\r\n        !empty($_POST[\"email\"])\r\n    ) {\r\n        // Captura de los valores\r\n        $nombre = $_POST[\"nombre\"];\r\n        $apellido = $_POST[\"apellido\"];\r\n        $dni = $_POST[\"dni\"];\r\n        $fecha = $_POST[\"fecha\"];\r\n        $email = $_POST[\"email\"];\r\n\r\n        // Utilizamos consultas preparadas para evitar inyecciones SQL\r\n        $stmt = $conexion->prepare(\"INSERT INTO PERSONAS (nombre, apellido, cedula, fecha_nacimiento, correo) \r\n                                    VALUES (?, ?, ?, ?, ?)\");\r\n        \r\n        // Vinculamos los parámetros\r\n        $stmt->bind_param(\"sssss\", $nombre, $apellido, $dni, $fecha, $email);\r\n        \r\n        // Ejecutamos la consulta\r\n        if ($stmt->execute()) {\r\n            echo \'<div class=\"alert alert-success\" role=\"alert\">\r\n                    Persona registrada correctamente.\r\n                  </div>\';\r\n        } else {\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                    Persona no registrada correctamente.\r\n                  </div>\';\r\n        }\r\n\r\n        // Cerramos el statement\r\n        $stmt->close();\r\n    } else {\r\n        echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                Alguno de los campos está vacío.\r\n              </div>\';\r\n    }\r\n}\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"card border-danger\">\n    <div class=\"card-header bg-danger text-white\">\n      Vulnerabilidades de Seguridad\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Inyección SQL</h5>\n      <p class=\"card-text\">\n        <b>Tipo:</b> Potencial Inyección SQL. Aunque el código utiliza sentencias preparadas, el uso correcto depende de que <code>$conexion</code> sea un objeto PDO o mysqli con la configuración adecuada para evitar la emulación de sentencias preparadas. Si la emulación está habilitada (comportamiento predeterminado en algunas versiones de PHP),  la protección es considerablemente menor.  Además, no hay validación de tipos ni saneamiento de entradas.\n      </p>\n      <p class=\"card-text\">\n        <b>Línea Aproximada:</b> La vulnerabilidad reside en la forma en que se construye la consulta preparada. Si `$conexion` no está configurado correctamente, se podría explotar.  Especialmente en:\n        <pre><code>$stmt = $conexion->prepare(\"INSERT INTO PERSONAS (nombre, apellido, cedula, fecha_nacimiento, correo) VALUES (?, ?, ?, ?, ?)\");</code></pre>\n      </p>\n      <p class=\"card-text\">\n        <b>Mitigación:</b>\n        <ol>\n          <li><b>Asegurar sentencias preparadas reales:</b>  Verificar la configuración de la conexión a la base de datos para desactivar la emulación de sentencias preparadas.  Para PDO, usar: <code>$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);</code>. Para mysqli, se desactiva por defecto a partir de PHP 8.1, pero verificar versiones anteriores.</li>\n          <li><b>Validación y Saneamiento de Entradas:</b>  Validar rigurosamente los datos de entrada.  Verificar que `dni` sea un número, `fecha` tenga el formato correcto, y `email` sea una dirección de correo válida. Usar funciones como `filter_var` con `FILTER_VALIDATE_EMAIL` para validar el correo electrónico.  Sanitizar las entradas para eliminar caracteres potencialmente peligrosos (e.g., HTML entities con `htmlspecialchars` o `strip_tags`).</li>\n          <li><b>Principio del menor privilegio:</b> Asegurarse de que la cuenta de base de datos utilizada tenga los permisos mínimos necesarios para realizar las operaciones.</li>\n        </ol>\n      </p>\n      <h5 class=\"card-title\">Cross-Site Scripting (XSS)</h5>\n      <p class=\"card-text\">\n        <b>Tipo:</b> Potencial XSS en los mensajes de éxito/error. Los datos que se muestran al usuario (e.g., \"Persona registrada correctamente\") no se escapan. Si el mensaje llegara a contener código HTML malicioso (poco probable en este caso, pero es una buena práctica), este se ejecutaría en el navegador del usuario.\n      </p>\n      <p class=\"card-text\">\n        <b>Línea Aproximada:</b> En todas las líneas donde se usa `echo` para mostrar mensajes al usuario.  Por ejemplo:\n        <pre><code>echo \'&lt;div class=\"alert alert-success\" role=\"alert\"&gt; Persona registrada correctamente. &lt;/div&gt;\';</code></pre>\n      </p>\n      <p class=\"card-text\">\n        <b>Mitigación:</b>\n        <ol>\n          <li>Escapar la salida HTML usando `htmlspecialchars()` antes de mostrar cualquier dato al usuario.  Por ejemplo:  `echo \'&lt;div class=\"alert alert-success\" role=\"alert\"&gt;\'.htmlspecialchars(\'Persona registrada correctamente\').\'&lt;/div&gt;\'`.</li>\n        </ol>\n      </p>\n    </div>\n  </div>\n\n  <div class=\"card border-warning mt-3\">\n    <div class=\"card-header bg-warning text-white\">\n      Métricas de Calidad del Código\n    </div>\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">Complejidad</h5>\n      <p class=\"card-text\">\n        <b>Descripción:</b> La complejidad ciclomática es baja.  La lógica principal está contenida en una estructura `if/else`.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> En este caso, la complejidad no es un problema. Si el código creciera y tuviera más validaciones, se podría refactorizar en funciones separadas para mejorar la legibilidad.\n      </p>\n\n      <h5 class=\"card-title\">Duplicación</h5>\n      <p class=\"card-text\">\n        <b>Descripción:</b> Hay una pequeña duplicación en la estructura de los mensajes de alerta (`div class=\"alert...\"`).\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b>  Se podría extraer la generación de la alerta a una función separada, pasándole el tipo de alerta y el mensaje como parámetros. Esto reduciría la duplicación y facilitaría el mantenimiento.  Por ejemplo: `function showAlert($type, $message) { return \'&lt;div class=\"alert alert-\'.$type.\'\" role=\"alert\"&gt;\'.htmlspecialchars($message).\'&lt;/div&gt;\'; }` y usarlo como `echo showAlert(\'success\', \'Persona registrada correctamente\');`.\n      </p>\n\n      <h5 class=\"card-title\">Legibilidad</h5>\n      <p class=\"card-text\">\n        <b>Descripción:</b>  El código es relativamente legible. El uso de comentarios es adecuado.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b> Se podrían añadir más comentarios explicativos, especialmente sobre la configuración de la conexión a la base de datos y el manejo de errores.  Usar nombres de variables más descriptivos podría mejorar aún más la legibilidad.\n      </p>\n\n      <h5 class=\"card-title\">Acoplamiento</h5>\n      <p class=\"card-text\">\n        <b>Descripción:</b> El código está fuertemente acoplado a la base de datos y a la estructura `$_POST`.\n      </p>\n      <p class=\"card-text\">\n        <b>Mejora:</b>\n        <ul>\n          <li><b>Inyección de Dependencias:</b>  Se podría desacoplar la conexión a la base de datos inyectando el objeto `$conexion` en lugar de depender de una variable global.</li>\n          <li><b>Capa de Abstracción:</b> Crear una capa de abstracción para el acceso a la base de datos (un repositorio) para aislar la lógica de acceso a datos del resto del código.</li>\n          <li><b>Validación en otra capa:</b> Aislar la lógica de validación de `$_POST` en una función o clase separada.</li>\n        </ul>\n      </p>\n    </div>\n  </div>\n\n  <div class=\"card border-success mt-3\">\n    <div class=\"card-header bg-success text-white\">\n      Solución Propuesta\n    </div>\n    <div class=\"card-body\">\n      <p class=\"card-text\">Este fragmento muestra una versión mejorada con algunas de las mitigaciones sugeridas. Asume que se usa PDO y se ha configurado correctamente (<code>ATTR_EMULATE_PREPARES => false</code>).  También se añade validación básica de los datos.</p>\n      <pre><code class=\"language-php\">\n&lt;?php\n// Función para generar mensajes de alerta HTML\nfunction showAlert($type, $message) {\n    return \'&lt;div class=\"alert alert-\'.$type.\'\" role=\"alert\"&gt;\'.htmlspecialchars($message).\'&lt;/div&gt;\';\n}\n\nif (!empty($_POST[\"btnregistrar\"])) {\n    // Validar que los campos no estén vacíos\n    if (\n        !empty($_POST[\"nombre\"]) &&\n        !empty($_POST[\"apellido\"]) &&\n        !empty($_POST[\"dni\"]) &&\n        !empty($_POST[\"fecha\"]) &&\n        !empty($_POST[\"email\"])\n    ) {\n        // Validar el formato del email\n        if (!filter_var($_POST[\"email\"], FILTER_VALIDATE_EMAIL)) {\n            echo showAlert(\'danger\', \'El email no es válido.\');\n            exit; // Detener la ejecución si la validación falla\n        }\n\n        // Saneamiento de entradas (ejemplo básico)\n        $nombre = htmlspecialchars($_POST[\"nombre\"]);\n        $apellido = htmlspecialchars($_POST[\"apellido\"]);\n        $dni = htmlspecialchars($_POST[\"dni\"]);\n        $fecha = htmlspecialchars($_POST[\"fecha\"]);\n        $email = htmlspecialchars($_POST[\"email\"]);\n\n        try {\n            // Utilizamos consultas preparadas para evitar inyecciones SQL\n            $stmt = $conexion->prepare(\"INSERT INTO PERSONAS (nombre, apellido, cedula, fecha_nacimiento, correo) \n                                        VALUES (?, ?, ?, ?, ?)\");\n            \n            // Vinculamos los parámetros\n            $stmt->bindParam(1, $nombre, PDO::PARAM_STR);\n            $stmt->bindParam(2, $apellido, PDO::PARAM_STR);\n            $stmt->bindParam(3, $dni, PDO::PARAM_STR);\n            $stmt->bindParam(4, $fecha, PDO::PARAM_STR);\n            $stmt->bindParam(5, $email, PDO::PARAM_STR);\n            \n            // Ejecutamos la consulta\n            if ($stmt->execute()) {\n                echo showAlert(\'success\', \'Persona registrada correctamente.\');\n            } else {\n                echo showAlert(\'danger\', \'Persona no registrada correctamente.\');\n            }\n\n            // Cerramos el statement\n            $stmt->closeCursor(); // Usar closeCursor() en PDO\n        } catch (PDOException $e) {\n            // Manejar errores de la base de datos\n            error_log(\"Error en la base de datos: \" . $e->getMessage()); // Log del error\n            echo showAlert(\'danger\', \'Error al registrar persona. Por favor, intente de nuevo más tarde.\'); // Mensaje genérico al usuario\n        }\n\n    } else {\n        echo showAlert(\'danger\', \'Alguno de los campos está vacío.\');\n    }\n}\n?&gt;\n</code></pre>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:25:24', 8);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(63, 'transaccion.php', 'Detectado por GPT', '<?php\r\n\r\nif (!empty($_POST[\"btntransaccion\"])) {\r\n\r\n    if (!empty($_POST[\"producto_id\"]) && !empty($_POST[\"cantidad\"]) && !empty($_POST[\"precio\"])) {\r\n        # code...\r\n        $producto_id = $_POST[\"producto_id\"];\r\n        $cantidad_vendida = $_POST[\"cantidad\"];\r\n        $precio = $_POST[\"precio\"];\r\n\r\n        //Siempre al iniciar la transaccion\r\n        $conexion->begin_transaction();\r\n        try {\r\n            // 1. Verificar si hay suficiente inventario\r\n            $sql = $conexion->prepare(\"SELECT cantidad FROM productos WHERE id = ?\");\r\n            $sql->bind_param(\"i\", $producto_id);\r\n            $sql->execute();\r\n            $resultado = $sql->get_result();\r\n            $producto = $resultado->fetch_assoc();\r\n\r\n            if ($producto[\'cantidad\'] < $cantidad_vendida) {\r\n                # code...\r\n                echo \"No se puede vender no hay productos en stock\";\r\n            }elseif ($producto === null) {\r\n                throw new Exception(\"Producto no encontrado en el inventario.\");\r\n            }\r\n\r\n            // 2. Actualizar el inventario\r\n            $nueva_cantidad = $producto[\"cantidad\"] - $cantidad_vendida;\r\n            $sql_update = $conexion->prepare(\"UPDATE productos SET cantidad = ? WHERE id = ?\");\r\n            $sql_update->bind_param(\"ii\", $nueva_cantidad, $producto_id);\r\n            $sql_update->execute();\r\n\r\n            // 3. Registrar la venta en la tabla ventas\r\n            $sql_venta = $conexion->prepare(\"INSERT INTO ventas (producto_id, cantidad, precio)VALUES (?, ?, ?)\");\r\n            $sql_venta->bind_param(\"sss\", $producto_id, $nueva_cantidad, $precio);\r\n            $sql_venta->execute();\r\n\r\n            // Si todo ha ido bien, confirmamos la transacción\r\n            $conexion->commit();\r\n\r\n            // Mensaje de éxito\r\n            echo \'<div class=\"alert alert-success\" role=\"alert\">\r\n                Venta registrada correctamente y inventario actualizado.\r\n              </div>\';\r\n            //code...\r\n        } catch (Exception $e) {\r\n            // Si ocurre un error, deshacemos todos los cambios\r\n            $conexion->rollback();\r\n    \r\n            // Mostramos el error\r\n            echo \'<div class=\"alert alert-danger\" role=\"alert\">\r\n                    Error: \' . $e->getMessage() . \'\r\n                  </div>\';\r\n        }\r\n    }\r\n}\r\n', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger mb-3\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <b>Línea aproximada:</b> <code>$sql_venta->bind_param(\"sss\", $producto_id, $nueva_cantidad, $precio);</code>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El uso de <code>\"sss\"</code> en <code>bind_param</code> indica que estás tratando todas las variables (<code>$producto_id</code>, <code>$nueva_cantidad</code>, <code>$precio</code>) como cadenas. Si <code>$producto_id</code> y/o <code>$nueva_cantidad</code> deberían ser enteros, esto podría permitir la inyección SQL si los valores no son sanitizados adecuadamente.  Además, confiar en que el tipo de dato que llega desde POST sea el correcto puede ser peligroso. Un atacante puede modificar el tipo de dato o inyectar código SQL.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b> Usa el tipo de dato correcto en <code>bind_param</code>.  Si <code>$producto_id</code> es un entero y <code>$precio</code> es un decimal, usa <code>\"ids\"</code> (entero, decimal/string, string).  Valida y sanea estrictamente los datos de entrada. Verifica que <code>$producto_id</code> sea un entero positivo y que <code>$precio</code> sea un número válido (posiblemente usando <code>filter_var</code> con <code>FILTER_VALIDATE_FLOAT</code>) antes de usarlo en la consulta. Asegúrate de que <code>$precio</code> corresponda al tipo de dato correcto en la base de datos (por ejemplo, decimal o float). Además, la cantidad no debería ser pasada a la tabla venta como la variable `$nueva_cantidad` si no la cantidad que compro el usuario, es decir `$cantidad_vendida`.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Ejemplo de Mitigación:</b>\n                        <code>$sql_venta->bind_param(\"iis\", $producto_id, $cantidad_vendida, $precio);</code>\n                    </p>\n                </div>\n            </div>\n\n             <div class=\"card border-warning mb-3\">\n                <div class=\"card-header bg-warning text-dark\">\n                    Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Falta de validación y saneamiento de datos</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código confía implícitamente en los datos proporcionados a través de <code>$_POST</code> sin realizar una validación y saneamiento adecuados.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Métricas Afectadas:</b>\n                        <ul>\n                            <li><b>Seguridad:</b> Vulnerable a inyección SQL y otros ataques relacionados con la manipulación de datos.</li>\n                            <li><b>Fiabilidad:</b> El código puede comportarse de manera inesperada si los datos de entrada no cumplen con los requisitos esperados.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>Implementar la validación de datos en el servidor para garantizar que los datos de entrada sean válidos y seguros antes de ser utilizados en la consulta.</li>\n                            <li>Utilizar funciones de saneamiento para escapar caracteres especiales y evitar la inyección de código malicioso.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card border-info mb-3\">\n                <div class=\"card-header bg-info text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código está fuertemente acoplado a la base de datos y a las variables <code>$_POST</code>.  Un cambio en la estructura de la base de datos o en los nombres de los campos del formulario requerirá modificaciones significativas en el código.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Métricas Afectadas:</b>\n                        <ul>\n                            <li><b>Mantenibilidad:</b> Difícil de modificar y extender debido al alto acoplamiento.</li>\n                            <li><b>Reusabilidad:</b> Difícil de reutilizar en otros contextos.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>Implementar un patrón de diseño, como el patrón Repository o el patrón Data Access Object (DAO), para abstraer el acceso a la base de datos.</li>\n                            <li>Usar clases o funciones para encapsular la lógica relacionada con la manipulación de datos del formulario.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card border-info mb-3\">\n                <div class=\"card-header bg-info text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código podría mejorar en legibilidad mediante la adición de comentarios más descriptivos y la refactorización de bloques de código largos en funciones más pequeñas.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Métricas Afectadas:</b>\n                        <ul>\n                            <li><b>Mantenibilidad:</b>  Un código más legible es más fácil de entender y mantener.</li>\n                            <li><b>Comprensibilidad:</b> Facilita la comprensión del código por parte de otros desarrolladores.</li>\n                        </ul>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>Añadir comentarios claros y concisos para explicar la lógica y el propósito de las diferentes secciones del código.</li>\n                            <li>Refactorizar el código en funciones más pequeñas y con nombres descriptivos para mejorar la organización y la legibilidad.</li>\n                            <li>Usar nombres de variables y funciones más descriptivos.  Por ejemplo, <code>$precio</code> podría ser <code>$precioUnitario</code>.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <p class=\"card-text\">\n                        A continuación, se muestra un ejemplo de código refactorizado que aborda las vulnerabilidades de seguridad y mejora las métricas de calidad del código:\n                    </p>\n                    <pre>\n                        <code>\n&lt;?php\n\nif (!empty($_POST[\"btntransaccion\"])) {\n\n    // Validar y sanear datos de entrada\n    $producto_id = filter_input(INPUT_POST, \"producto_id\", FILTER_VALIDATE_INT);\n    $cantidad_vendida = filter_input(INPUT_POST, \"cantidad\", FILTER_VALIDATE_INT);\n    $precio = filter_input(INPUT_POST, \"precio\", FILTER_VALIDATE_FLOAT);\n\n    // Verificar si los datos son válidos\n    if ($producto_id === false || $producto_id <= 0) {\n        echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error: ID de producto inválido.&lt;/div>\';\n    } elseif ($cantidad_vendida === false || $cantidad_vendida <= 0) {\n        echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error: Cantidad inválida.&lt;/div>\';\n    } elseif ($precio === false || $precio <= 0) {\n        echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error: Precio inválido.&lt;/div>\';\n    } else {\n        // Iniciar transacción\n        $conexion->begin_transaction();\n        try {\n            // 1. Verificar si hay suficiente inventario\n            $sql = $conexion->prepare(\"SELECT cantidad FROM productos WHERE id = ?\");\n            $sql->bind_param(\"i\", $producto_id);\n            $sql->execute();\n            $resultado = $sql->get_result();\n            $producto = $resultado->fetch_assoc();\n\n            if ($producto === null) {\n                throw new Exception(\"Producto no encontrado en el inventario.\");\n            }\n\n            if ($producto[\'cantidad\'] &lt; $cantidad_vendida) {\n                throw new Exception(\"No hay suficiente stock para vender esa cantidad.\");\n            }\n\n            // 2. Actualizar el inventario\n            $nueva_cantidad = $producto[\"cantidad\"] - $cantidad_vendida;\n            $sql_update = $conexion->prepare(\"UPDATE productos SET cantidad = ? WHERE id = ?\");\n            $sql_update->bind_param(\"ii\", $nueva_cantidad, $producto_id);\n            $sql_update->execute();\n\n            // 3. Registrar la venta en la tabla ventas\n            $sql_venta = $conexion->prepare(\"INSERT INTO ventas (producto_id, cantidad, precio) VALUES (?, ?, ?)\");\n            $sql_venta->bind_param(\"iis\", $producto_id, $cantidad_vendida, $precio); // Corrección: \"iis\" para entero, entero, string\n            $sql_venta->execute();\n\n            // Si todo ha ido bien, confirmamos la transacción\n            $conexion->commit();\n\n            // Mensaje de éxito\n            echo \'&lt;div class=\"alert alert-success\" role=\"alert\">Venta registrada correctamente y inventario actualizado.&lt;/div>\';\n\n        } catch (Exception $e) {\n            // Si ocurre un error, deshacemos todos los cambios\n            $conexion->rollback();\n\n            // Mostramos el error\n            echo \'&lt;div class=\"alert alert-danger\" role=\"alert\">Error: \' . htmlspecialchars($e->getMessage(), ENT_QUOTES, \'UTF-8\') . \'&lt;/div>\';\n        }\n    }\n}\n?&gt;\n                        </code>\n                    </pre>\n                    <p class=\"card-text\">\n                        <b>Cambios realizados:</b>\n                        <ul>\n                            <li>Se implementó el uso de <code>filter_input</code> para validar y sanear los datos de entrada.</li>\n                            <li>Se utiliza <code>htmlspecialchars</code> para escapar la salida de mensajes de error, previniendo XSS.</li>\n                            <li>Se corrigió el tipo de dato en <code>bind_param</code> para la consulta de inserción en la tabla <code>ventas</code>.  Ahora usa \"iis\" indicando que el producto_id es entero, la cantidad es entero, y el precio es string.</li>\n                            <li>Se mejoró la validación de la cantidad disponible en el inventario.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:25:57', 8),
(64, 'ecommerce.js', 'Detectado por GPT', '// Esta es la función que se encarga de cargar los productos en la tabla\r\nfunction cargarProductos() {\r\n    // Se hace una petición (fetch) a un archivo PHP que devuelve los productos en formato JSON\r\n    fetch(\'controller/Ecommerce/productos.php\')\r\n        // Cuando la respuesta se recibe, se convierte en formato JSON para poder trabajar con ella\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            // Buscamos el cuerpo de la tabla (donde se mostrarán los productos) por su id \'productosTable\'\r\n            let tableBody = document.querySelector(\'#productosTable tbody\');\r\n\r\n            // Limpiamos el contenido actual de la tabla para que no se repitan los productos\r\n            tableBody.innerHTML = \'\';\r\n\r\n            // Recorreremos cada producto que recibimos del servidor\r\n            data.forEach(producto => {\r\n                // Creamos una nueva fila en la tabla para agregar un producto\r\n                let row = document.createElement(\'tr\');\r\n\r\n                // Establecemos el contenido de la fila (el nombre, precio, cantidad y botones)\r\n                row.innerHTML = `\r\n                    <td>${producto.id}</td> <!-- Muestra el ID del producto -->\r\n                    <td>${producto.nombre}</td> <!-- Muestra el nombre del producto -->\r\n                    <td>${producto.precio}</td> <!-- Muestra el precio del producto -->\r\n                    <td>${producto.cantidad}</td> <!-- Muestra la cantidad disponible -->\r\n                    <td>\r\n                        <!-- Botón para editar el producto -->\r\n                        <button onclick=\"editarProducto(${producto.id})\">Editar</button>\r\n                        <!-- Botón para eliminar el producto -->\r\n                        <button onclick=\"eliminarProducto(${producto.id})\">Eliminar</button>\r\n                    </td>\r\n                `;\r\n\r\n                // Agregamos la fila creada al cuerpo de la tabla\r\n                tableBody.appendChild(row);\r\n            });\r\n        });\r\n}\r\n\r\n// Escucha el evento de envío (submit) del formulario para guardar o actualizar el producto\r\ndocument.getElementById(\'formProducto\').addEventListener(\'submit\', function (e) {\r\n    // Evita que el formulario se envíe de forma tradicional (recarga la página)\r\n    e.preventDefault();\r\n\r\n    // Captura los valores de los campos del formulario\r\n    let id = document.getElementById(\'id\').value;           // ID del producto (si existe, para actualizar)\r\n    let nombre = document.getElementById(\'nombre\').value;   // Nombre del producto\r\n    let cantidad = document.getElementById(\'cantidad\').value; // Cantidad disponible del producto\r\n    let precio = document.getElementById(\'precio\').value;   // Precio del producto\r\n\r\n    // Si el ID está presente, se enviará una solicitud para actualizar, de lo contrario se guardará como nuevo\r\n    let url = id ? \'controller/Ecommerce/actualizar.php\' : \'controller/Ecommerce/guardar.php\';        // Si \'id\' tiene valor, usa \'actualizar.php\', de lo contrario usa \'guardar.php\'\r\n\r\n    // Crea un objeto con los datos del producto\r\n    let data = {\r\n        id: id,            // El ID del producto (si es una actualización)\r\n        nombre: nombre,    // El nombre del producto\r\n        cantidad: cantidad, // La cantidad del producto\r\n        precio: precio     // El precio del producto\r\n    };\r\n\r\n    // Realiza la solicitud POST al servidor usando Fetch API\r\n    fetch(url, {\r\n        method: \'POST\',                            // Establece el método HTTP como POST\r\n        headers: {\r\n            \'Content-Type\': \'application/json\'    // Define el tipo de contenido como JSON\r\n        },\r\n        body: JSON.stringify(data)                  // Convierte el objeto \'data\' en una cadena JSON\r\n    })\r\n        .then(response => response.json())           // Procesa la respuesta como JSON\r\n        .then(result => {\r\n            // Muestra un mensaje de éxito o error dependiendo de la respuesta\r\n            alert(result.message);\r\n\r\n            // Llama a la función \'cargarProductos\' para actualizar la lista de productos en la interfaz\r\n            cargarProductos();\r\n\r\n            // Resetea los campos del formulario (limpia los valores)\r\n            document.getElementById(\'formProducto\').reset();\r\n\r\n            // Resetea el valor del campo \'id\' para evitar que persista entre registros\r\n            document.getElementById(\'id\').value = \'\';\r\n        })\r\n});\r\n\r\n\r\nfunction editarProducto(id) {\r\n    fetch(\'controller/Ecommerce/producto.php?id=\' + id)\r\n        .then(response => response.json())\r\n        .then(producto => {\r\n            document.getElementById(\'id\').value = producto.id;           // ID del producto (si existe, para actualizar)\r\n            document.getElementById(\'nombre\').value = producto.nombre;   // Nombre del producto\r\n            document.getElementById(\'cantidad\').value = producto.cantidad; // Cantidad disponible del producto\r\n            document.getElementById(\'precio\').value = producto.precio;\r\n        });\r\n}\r\n\r\nfunction eliminarProducto(id) {\r\n    if (confirm(\'Estas seguro de eliminar este producto\')) {\r\n        fetch(\'controller/Ecommerce/eliminar.php\', {\r\n            method: \'POST\',\r\n            headers: {\r\n                \'Content-Type\': \'application/json\'\r\n            },\r\n            body: JSON.stringify({ id: id })\r\n        })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                alert(result.message);\r\n                cargarProductos();\r\n            })\r\n    }\r\n}\r\n\r\n\r\ncargarProductos();', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger mb-3\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Cross-Site Scripting (XSS)</h5>\n                    <p class=\"card-text\">\n                        <b>Tipo:</b> XSS (Cross-Site Scripting).\n                        <br>\n                        <b>Línea Aproximada:</b> 21-32\n                        <pre>\n                            <code>\nrow.innerHTML = `\n    &lt;td&gt;${producto.id}&lt;/td&gt;\n    &lt;td&gt;${producto.nombre}&lt;/td&gt;\n    &lt;td&gt;${producto.precio}&lt;/td&gt;\n    &lt;td&gt;${producto.cantidad}&lt;/td&gt;\n    &lt;td&gt;\n        &lt;button onclick=\"editarProducto(${producto.id})\">Editar&lt;/button&gt;\n        &lt;button onclick=\"eliminarProducto(${producto.id})\">Eliminar&lt;/button&gt;\n    &lt;/td&gt;\n`;\n                            </code>\n                        </pre>\n                        <b>Descripción:</b> La interpolación directa de datos del servidor (<code>producto.nombre</code>, <code>producto.id</code>, <code>producto.precio</code>, <code>producto.cantidad</code>) en el HTML usando <code>innerHTML</code> es vulnerable a XSS. Si los datos del producto contienen código JavaScript malicioso, este se ejecutará en el navegador del usuario.\n                        <br>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>\n                                <b>Escapar los datos:</b> Utilizar una función de escape para convertir caracteres especiales HTML (<code>&lt;</code>, <code>&gt;</code>, <code>&amp;</code>, <code>&quot;</code>, <code>&#x27;</code>, <code>&#x2F;</code>) en entidades HTML antes de insertarlos en el DOM. Por ejemplo, usar <code>textContent</code> en lugar de <code>innerHTML</code> o una biblioteca de escape HTML.\n                            </li>\n                        </ul>\n                        <b>Ejemplo de mitigación:</b>\n                        <pre>\n                        <code>\nlet row = document.createElement(\'tr\');\n\nlet idCell = document.createElement(\'td\');\nidCell.textContent = producto.id;\nrow.appendChild(idCell);\n\nlet nombreCell = document.createElement(\'td\');\nnombreCell.textContent = producto.nombre;\nrow.appendChild(nombreCell);\n\nlet precioCell = document.createElement(\'td\');\nprecioCell.textContent = producto.precio;\nrow.appendChild(precioCell);\n\nlet cantidadCell = document.createElement(\'td\');\ncantidadCell.textContent = producto.cantidad;\nrow.appendChild(cantidadCell);\n\nlet actionsCell = document.createElement(\'td\');\nactionsCell.innerHTML = `\n    &lt;button onclick=\"editarProducto(${producto.id})\">Editar&lt;/button&gt;\n    &lt;button onclick=\"eliminarProducto(${producto.id})\">Eliminar&lt;/button&gt;\n`;\nrow.appendChild(actionsCell);\n</code>\n                        </pre>\n                    </p>\n                    <h5 class=\"card-title\">Posible Inyección de Comandos (Si PHP no está bien configurado)</h5>\n                    <p class=\"card-text\">\n                        <b>Tipo:</b>  Potencial inyección de comandos remotos.\n                        <br>\n                        <b>Línea Aproximada:</b> Todo el código, depende de la configuración del backend PHP.\n                        <br>\n                        <b>Descripción:</b>  El código JavaScript depende completamente de los scripts PHP (<code>productos.php</code>, <code>actualizar.php</code>, <code>guardar.php</code>, <code>producto.php</code>, <code>eliminar.php</code>). Si estos scripts no están correctamente validados y protegidos contra inyección SQL, inyección de comandos, u otras vulnerabilidades, el sistema es altamente vulnerable.\n                        <br>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li>\n                                <b>Validación y Sanitización en el Backend (PHP):</b>  Validar y sanitizar todos los datos de entrada en los scripts PHP antes de usarlos en consultas a la base de datos o en comandos del sistema.  Utilizar sentencias preparadas (prepared statements) para prevenir inyección SQL.\n                            </li>\n                            <li>\n                                <b>Control de Acceso:</b>  Implementar un control de acceso robusto para asegurar que solo los usuarios autorizados puedan acceder y modificar los datos.\n                            </li>\n                            <li>\n                                <b>Evitar funciones peligrosas:</b> No usar funciones como `eval()` o `system()` a menos que sea absolutamente necesario, y validar cuidadosamente las entradas si se utilizan.\n                            </li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card border-warning mb-3\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Problema:</b> El código es relativamente legible, pero algunas partes podrían mejorarse para una mejor comprensión. El uso extensivo de template literals (backticks) para crear las filas de la tabla, aunque conveniente, dificulta la lectura y el mantenimiento, especialmente en relación con el escape de HTML.\n                        <br>\n                        <b>Mejora:</b> Dividir la lógica de construcción de la tabla en funciones más pequeñas y usar métodos del DOM como <code>createElement</code> y <code>appendChild</code> mejora la legibilidad y proporciona una mejor separación de la lógica.\n                    </p>\n\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Problema:</b> Alto acoplamiento entre el código JavaScript y los endpoints del backend (PHP). Cualquier cambio en la estructura de los datos en el backend requerirá cambios en el frontend.\n                        <br>\n                        <b>Mejora:</b> Definir una API clara y estable entre el frontend y el backend. Utilizar una capa de abstracción para manejar las comunicaciones con el backend, de modo que los cambios en el backend tengan un impacto mínimo en el frontend.\n                    </p>\n\n                    <h5 class=\"card-title\">Duplicación</h5>\n                    <p class=\"card-text\">\n                        <b>Problema:</b>  Aunque no es excesiva, hay cierta duplicación en la lógica de los callbacks de las funciones <code>fetch</code> (por ejemplo, en <code>editarProducto</code> y en el manejo de la respuesta del formulario).\n                        <br>\n                        <b>Mejora:</b>  Crear funciones utilitarias para manejar las respuestas de <code>fetch</code> y la actualización de la interfaz de usuario.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Refactorización y Mitigación de Vulnerabilidades</h5>\n                    <p class=\"card-text\">\n                        <b>Resumen:</b> La solución propuesta se enfoca en mitigar la vulnerabilidad XSS mediante el uso de <code>textContent</code> en lugar de <code>innerHTML</code>, y proporciona recomendaciones generales para mejorar la calidad del código.\n                        <br>\n                        <b>Pasos:</b>\n                        <ol>\n                            <li>\n                                <b>Mitigar XSS:</b> Reemplazar el uso de <code>innerHTML</code> con <code>textContent</code> al insertar datos del producto en la tabla. Esto previene la ejecución de código JavaScript malicioso que pueda estar presente en los datos.\n                            </li>\n                            <li>\n                                <b>Validación en Backend:</b>  Asegurarse que todos los datos de entrada en los scripts PHP se validen y saniticen adecuadamente para prevenir inyección SQL y otras vulnerabilidades.  Usar sentencias preparadas.\n                            </li>\n                            <li>\n                                <b>Funciones de Utilidad:</b>  Crear funciones de utilidad para manejar las respuestas de <code>fetch</code> y la actualización de la interfaz de usuario.\n                            </li>\n                        </ol>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:26:21', 8),
(65, 'ecommerce.php', 'Detectado por GPT', '<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica Con JavaScript</h1>\r\n            <div class=\"col-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form id=\"formProducto\">\r\n                            <input type=\"hidden\" id=\"id\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"cantidad\" class=\"form-label\">Cantidad</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"cantidad\" name=\"cantidad\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"precio\" class=\"form-label\">Precio</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"precio\" name=\"precio\" step=\"0.01\" required>\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-success\">Guardar</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-8\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <h2>Lista de Productos</h2>\r\n\r\n                        <table id=\"productosTable\" class=\"table table-success table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Nombre</th>\r\n                                    <th>Cantidad</th>\r\n                                    <th>Precio</th>\r\n                                    <th>Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <!-- Los productos se cargarán aquí mediante JavaScript -->\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n    <script src=\"ecommerce.js\"></script>\r\n</body>\r\n\r\n</html>', '```html\n<div class=\'card border-danger\'>\n    <div class=\'card-header\'>\n        Análisis de Vulnerabilidades y Calidad del Código\n    </div>\n    <div class=\'card-body\'>\n        <h5 class=\'card-title\'>Vulnerabilidades de Seguridad</h5>\n        <p class=\'card-text\'>\n            El código proporcionado, al ser solo la parte HTML y haciendo referencia a un archivo Javascript externo, no presenta vulnerabilidades inherentes directamente en este fragmento. Las vulnerabilidades más probables estarán en el archivo Javascript externo `ecommerce.js`, específicamente en el manejo de datos del formulario y la interacción con el servidor. Asumiendo que existe una lógica en `ecommerce.js` para interactuar con un backend, las siguientes vulnerabilidades podrían estar presentes:\n        </p>\n        <ul>\n            <li>\n                <strong>Cross-Site Scripting (XSS):</strong> Si los datos ingresados por el usuario en los campos del formulario (nombre, cantidad, precio) no se sanitizan correctamente antes de ser mostrados en la tabla o enviados a un servidor, podrían ser vulnerables a XSS.  Por ejemplo, si el nombre del producto contiene código JavaScript malicioso, este podría ejecutarse en el navegador del usuario cuando se muestre el nombre del producto.\n            </li>\n            <li>\n                <strong>Inyección SQL (si interactúa con una base de datos):</strong> Si el backend utiliza los datos del formulario directamente en consultas SQL sin la debida parametrización o escape, podría ser vulnerable a inyección SQL.\n            </li>\n            <li>\n                <strong>Cross-Site Request Forgery (CSRF):</strong> Si el backend no implementa protección contra CSRF, un atacante podría falsificar solicitudes en nombre de un usuario autenticado para modificar datos o realizar acciones no deseadas.\n            </li>\n            <li>\n                <strong>Falta de validación en el lado del servidor:</strong> Confiar únicamente en la validación del lado del cliente (HTML `required`, type=`number`, step=`0.01`) no es suficiente. Un atacante podría omitir la validación del cliente y enviar datos inválidos directamente al servidor.\n            </li>\n            <li>\n                <strong>Divulgación de información sensible:</strong> Si el backend expone información sensible (por ejemplo, detalles de configuración, claves API) en la respuesta a las solicitudes, esto podría ser una vulnerabilidad.\n            </li>\n        </ul>\n\n        <h5 class=\'card-title\'>Métricas de Calidad del Código</h5>\n        <p class=\'card-text\'>\n            Analizando el fragmento HTML:\n        </p>\n        <ul>\n            <li>\n                <strong>Legibilidad:</strong> El HTML está bien formateado y es legible. El uso de clases de Bootstrap facilita la comprensión de la estructura y el diseño.\n            </li>\n            <li>\n                <strong>Acoplamiento:</strong> El HTML está acoplado a la librería Bootstrap.  Esto no es inherentemente malo, pero significa que un cambio en Bootstrap podría afectar al código HTML.\n            </li>\n            <li>\n                <strong>Complejidad:</strong> El HTML en sí es simple y no presenta una complejidad significativa. La complejidad estará principalmente en el Javascript `ecommerce.js` que maneja la lógica.\n            </li>\n            <li>\n                <strong>Duplicación:</strong> No hay duplicación significativa en el fragmento HTML proporcionado.\n            </li>\n        </ul>\n    </div>\n</div>\n\n<div class=\'card border-success\'>\n    <div class=\'card-header\'>\n        Solución Propuesta\n    </div>\n    <div class=\'card-body\'>\n        <h5 class=\'card-title\'>Mitigación de Vulnerabilidades</h5>\n        <ul>\n            <li>\n                <strong>Sanitización de entradas (XSS):</strong> Implementar la sanitización de entradas en el lado del servidor para todos los datos recibidos del formulario.  Utilizar bibliotecas específicas para la sanitización de HTML para prevenir XSS.  En el lado del cliente, utilizar `textContent` en lugar de `innerHTML` al mostrar los datos.\n            </li>\n            <li>\n                <strong>Consultas parametrizadas (Inyección SQL):</strong> Utilizar consultas parametrizadas o ORM (Object-Relational Mapping) para interactuar con la base de datos.  Esto evita que los datos del usuario sean interpretados como código SQL.\n            </li>\n            <li>\n                <strong>Tokens CSRF (CSRF):</strong> Implementar tokens CSRF para proteger las solicitudes contra ataques CSRF.  Generar un token único por sesión y verificarlo en cada solicitud.\n            </li>\n            <li>\n                <strong>Validación en el servidor:</strong> Realizar validación exhaustiva en el lado del servidor para todos los datos recibidos del formulario.  Verificar tipos de datos, rangos de valores y formatos.\n            </li>\n            <li>\n                <strong>Gestión adecuada de errores:</strong> Evitar exponer información sensible en los mensajes de error. Registrar los errores en un archivo de registro en lugar de mostrarlos directamente al usuario.\n            </li>\n            <li>\n              <strong>HTTPS:</strong> Asegurar que toda la comunicación entre el cliente y el servidor se realiza a través de HTTPS para proteger los datos en tránsito.\n            </li>\n        </ul>\n\n        <h5 class=\'card-title\'>Mejora de la Calidad del Código</h5>\n        <ul>\n            <li>\n                <strong>Abstracción de la lógica de presentación:</strong> Considerar el uso de un framework JavaScript como React, Angular o Vue.js para separar la lógica de la interfaz de usuario del manejo de datos. Esto mejoraría la mantenibilidad y testabilidad del código.\n            </li>\n            <li>\n                <strong>Modularización del código JavaScript:</strong> Dividir el archivo `ecommerce.js` en módulos más pequeños y cohesivos para mejorar la legibilidad y reducir la complejidad.\n            </li>\n            <li>\n                <strong>Documentación:</strong> Agregar comentarios claros y concisos al código JavaScript para explicar la lógica y el propósito de cada función y variable.\n            </li>\n            <li>\n                <strong>Testing:</strong> Implementar pruebas unitarias y de integración para verificar el correcto funcionamiento del código JavaScript y prevenir regresiones.\n            </li>\n        </ul>\n    </div>\n</div>\n```\n', '2025-05-20 02:26:44', 8);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(66, 'edit.php', 'Detectado por GPT', '<?php\r\ninclude \"models/conexion.php\";\r\n$id = $_GET[\"id\"];\r\necho $id;\r\n\r\n$sql = $conexion->query(\"SELECT * FROM PERSONAS WHERE id = $id\");\r\n?>\r\n<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica</h1>\r\n            <div class=\"col\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form action=\"\" method=\"post\">\r\n                            <!-- Mostrar Error     -->\r\n                            <?php\r\n                            include \"controller/modificar.php\";\r\n                            // Suponiendo que la consulta ya fue ejecutada y $sql contiene un solo registro\r\n                            if ($a = $sql->fetch_object()) { ?>\r\n                                <h3>Actudalizar Registro de Persona</h3>\r\n                                <input type=\"hidden\" name=\"id\" value=\"<?= htmlspecialchars($a->id) ?>\">\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" value=\"<?= htmlspecialchars($a->nombre) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"apellido\" class=\"form-label\">Apellido</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\" value=\"<?= htmlspecialchars($a->apellido) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"dni\" class=\"form-label\">Cedula</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\" value=\"<?= htmlspecialchars($a->cedula) ?>\" required>\r\n                                </div>\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"email\" class=\"form-label\">Email</label>\r\n                                    <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" value=\"<?= htmlspecialchars($a->correo) ?>\" required>\r\n                                </div>\r\n                                <button type=\"submit\" name=\"btnactualizar\" class=\"btn btn-warning\" value=\"ok\">Actualizar</button>\r\n                                <a href=\"index.php\" class=\"btn btn-secondary\">Cancelar</a>\r\n                            <?php } else { ?>\r\n                                <p>No se encontró el registro</p>\r\n                            <?php } ?>\r\n\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger mb-3\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inyección SQL</h5>\n                    <p class=\"card-text\">\n                        <b>Línea Aproximada:</b> <code>$sql = $conexion->query(\"SELECT * FROM PERSONAS WHERE id = $id\");</code>\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> La variable <code>$id</code> se obtiene directamente de <code>$_GET[\"id\"]</code> y se utiliza en la consulta SQL sin ninguna validación o sanitización.  Esto permite a un atacante inyectar código SQL malicioso manipulando el valor del parámetro <code>id</code> en la URL.  Por ejemplo, un atacante podría usar <code>id=1 OR 1=1</code> para obtener todos los registros de la tabla <code>PERSONAS</code>.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mitigación:</b> Utilizar consultas preparadas (prepared statements) con parámetros enlazados (bound parameters).  Esto asegura que los datos proporcionados por el usuario se traten como datos y no como parte del código SQL.\n                    </p>\n                </div>\n            </div>\n\n            <div class=\"card border-warning mb-3\">\n                <div class=\"card-header bg-warning text-dark\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Ausencia de Validación de Datos</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> Los datos que se reciben del formulario (nombre, apellido, dni, email) no se validan ni se sanitizan antes de ser enviados al controlador <code>modificar.php</code>.  Esto puede llevar a errores de procesamiento, inconsistencia en los datos y posibles problemas de seguridad (como XSS, si los datos se vuelven a mostrar en la página sin codificación).\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mejora:</b> Implementar validación del lado del servidor para todos los campos del formulario.  Esto puede incluir la comprobación de tipos de datos, formatos (por ejemplo, formato de correo electrónico), longitudes máximas y rangos válidos.  Utilizar funciones de sanitización (como <code>htmlspecialchars()</code> para la salida y funciones de filtro para la entrada) para prevenir inyección de código.\n                    </p>\n\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> Aunque el código es relativamente sencillo, la combinación de lógica PHP y HTML puede dificultar la lectura.\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mejora:</b> Separar la lógica de presentación de la lógica de negocio tanto como sea posible.  Considerar el uso de un motor de plantillas (como Twig o Blade) para facilitar la generación de HTML y mejorar la legibilidad.  Comentar el código para explicar la función de las diferentes secciones.\n                    </p>\n\n                     <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b>  El código presenta un acoplamiento entre la capa de presentación (HTML) y la capa de acceso a datos (consulta SQL directamente en el script).\n                    </p>\n                    <p class=\"card-text\">\n                        <b>Mejora:</b> Implementar un patrón de diseño como MVC (Modelo-Vista-Controlador) para separar la lógica de la aplicación en componentes distintos.  Esto reducirá el acoplamiento y facilitará el mantenimiento y la escalabilidad del código.  La consulta a la base de datos debería estar en el modelo y la presentación en la vista.\n                    </p>\n\n                </div>\n            </div>\n\n            <div class=\'card border-success\'>\n                <div class=\"card-header bg-success text-white\">\n                    Solución Propuesta\n                </div>\n                <div class=\"card-body\">\n                    <p>El siguiente código demuestra cómo mitigar la vulnerabilidad de inyección SQL utilizando consultas preparadas:</p>\n                    <pre><code class=\"language-php\">\n&lt;?php\ninclude \"models/conexion.php\";\n\n// Obtener el ID de la petición GET\n$id = $_GET[\"id\"];\n\n// Preparar la consulta SQL\n$sql = $conexion->prepare(\"SELECT * FROM PERSONAS WHERE id = ?\");\n\n// Vincular el parámetro\n$sql->bind_param(\"i\", $id); // \"i\" indica que $id es un entero\n\n// Ejecutar la consulta\n$sql->execute();\n\n// Obtener el resultado\n$result = $sql->get_result();\n?&gt;\n&lt;!doctype html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;!-- ... (resto del código HTML) ... --&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=\"container-fluid-row \"&gt;\n        &lt;div class=\"row px-4\"&gt;\n            &lt;h1&gt;Prueba Tecnica&lt;/h1&gt;\n            &lt;div class=\"col\"&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;form action=\"\" method=\"post\"&gt;\n                            &lt;!-- Mostrar Error     --&gt;\n                            &lt;?php\n                            include \"controller/modificar.php\";\n                            // Suponiendo que la consulta ya fue ejecutada y $sql contiene un solo registro\n                            if ($a = $result->fetch_object()) { ?&gt;\n                                &lt;h3&gt;Actudalizar Registro de Persona&lt;/h3&gt;\n                                &lt;input type=\"hidden\" name=\"id\" value=\"&lt;?= htmlspecialchars($a->id) ?&gt;\"&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"nombre\" class=\"form-label\"&gt;Nombre&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\" value=\"&lt;?= htmlspecialchars($a->nombre) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"apellido\" class=\"form-label\"&gt;Apellido&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\" value=\"&lt;?= htmlspecialchars($a->apellido) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"dni\" class=\"form-label\"&gt;Cedula&lt;/label&gt;\n                                    &lt;input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\" value=\"&lt;?= htmlspecialchars($a->cedula) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"mb-3\"&gt;\n                                    &lt;label for=\"email\" class=\"form-label\"&gt;Email&lt;/label&gt;\n                                    &lt;input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\" value=\"&lt;?= htmlspecialchars($a->correo) ?&gt;\" required&gt;\n                                &lt;/div&gt;\n                                &lt;button type=\"submit\" name=\"btnactualizar\" class=\"btn btn-warning\" value=\"ok\"&gt;Actualizar&lt;/button&gt;\n                                &lt;a href=\"index.php\" class=\"btn btn-secondary\"&gt;Cancelar&lt;/a&gt;\n                            &lt;?php } else { ?&gt;\n                                &lt;p&gt;No se encontró el registro&lt;/p&gt;\n                            &lt;?php } ?&gt;\n\n                        &lt;/form&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Optional JavaScript; choose one of the two! --&gt;\n\n    &lt;!-- Option 1: Bootstrap Bundle with Popper --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n\n    &lt;!-- Option 2: Separate Popper and Bootstrap JS --&gt;\n    &lt;!--\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubqL5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    --&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n                    <p><b>Explicación:</b></p>\n                    <ul>\n                        <li><code>$conexion->prepare(\"SELECT * FROM PERSONAS WHERE id = ?\")</code>: Prepara la consulta SQL con un marcador de posición (<code>?</code>) para el valor de <code>id</code>.</li>\n                        <li><code>$sql->bind_param(\"i\", $id)</code>: Enlaza el valor de <code>$id</code> al marcador de posición.  El primer argumento (<code>\"i\"</code>) especifica el tipo de dato del parámetro (en este caso, un entero).  Esto asegura que <code>$id</code> se trate como un valor y no como parte del código SQL.</li>\n                         <li><code>$sql->execute()</code>: Ejecuta la consulta preparada.</li>\n                         <li><code>$sql->get_result()</code>: obtiene el resultado de la consulta.</li>\n                    </ul>\n\n                    <p><b>Otras Mejoras:</b></p>\n                    <ul>\n                        <li><b>Validación de Entrada:</b> Asegurarse de que <code>$_GET[\"id\"]</code> es un entero antes de usarlo en la consulta.  Esto puede hacerse utilizando <code>filter_var($_GET[\"id\"], FILTER_VALIDATE_INT)</code>.</li>\n                        <li><b>Manejo de Errores:</b> Agregar manejo de errores para las operaciones de la base de datos.  Por ejemplo, verificar si la consulta se ejecutó correctamente y mostrar un mensaje de error si no.</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:27:17', 8),
(67, 'index.php', 'Detectado por GPT', '<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n\r\n\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n    <script>\r\n        function eliminar(){\r\n            var respuesta  = confirm(\"Estas seguro que deseas eliminar\");\r\n            return respuesta;\r\n        }\r\n    </script>\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica</h1>\r\n\r\n            <div class=\"col-4\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form action=\"\" method=\"post\">\r\n                            <!-- Mostrar Error     -->\r\n                            <?php\r\n                            include \"models/conexion.php\";\r\n                            include \"controller/registro.php\";\r\n\r\n                            ?>\r\n                            <h3>Registro de Persona</h3>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"nombre\" name=\"nombre\">\r\n\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"apellido\" class=\"form-label\">Apellido</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"apellido\" name=\"apellido\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"dni\" class=\"form-label\">Cedula</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"dni\" name=\"dni\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"fecha\" class=\"form-label\">Fecha Nacimiento</label>\r\n                                <input type=\"date\" class=\"form-control\" id=\"fecha\" name=\"fecha\">\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"email\" class=\"form-label\">Email</label>\r\n                                <input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\">\r\n                            </div>\r\n                            <button type=\"submit\" name=\"btnregistrar\" class=\"btn btn-success\" value=\"ok\">Registrar</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-8\">\r\n                <?php include \"controller/eliminar.php\"; ?>\r\n                <table class=\"table table-success table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">#</th>\r\n                            <th scope=\"col\">Nombre</th>\r\n                            <th scope=\"col\">Apellido</th>\r\n                            <th scope=\"col\">Cedula</th>\r\n                            <th scope=\"col\">Fecha Nacimiento</th>\r\n                            <th scope=\"col\">Correo</th>\r\n                            <th scope=\"col\">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <?php\r\n                        include(\"models/conexion.php\");\r\n                        $registrosPorPagina = 5;\r\n                        $pagina = isset($_GET[\'pagina\']) ? (int)$_GET[\'pagina\'] : 1;\r\n                        if ($pagina < 1) $pagina = 1;\r\n\r\n                        $offset = ($pagina - 1) * $registrosPorPagina;\r\n\r\n                        // Total de registros y páginas\r\n                        $resultadoTotal = $conexion->query(\"SELECT COUNT(*) AS total FROM personas\");\r\n                        $totalRegistros = $resultadoTotal->fetch_object()->total;\r\n                        $totalPaginas = ceil($totalRegistros / $registrosPorPagina);\r\n\r\n                        // Consulta paginada\r\n                        $sql = $conexion->query(\"SELECT * FROM personas LIMIT $registrosPorPagina OFFSET $offset\");\r\n                        while ($a = $sql->fetch_object()) { ?>\r\n                            <tr>\r\n                                <td><?= $a->id ?></td>\r\n                                <td><?= htmlspecialchars($a->nombre) ?></td>\r\n                                <td><?= htmlspecialchars($a->apellido) ?></td>\r\n                                <td><?= htmlspecialchars($a->cedula) ?></td>\r\n                                <td><?= htmlspecialchars($a->fecha_nacimiento) ?></td>\r\n                                <td><?= htmlspecialchars($a->correo) ?></td>\r\n                                <td>\r\n                                    <a class=\"btn btn-warning\" href=\"edit.php?id=<?= $a->id ?>\"><i class=\"fa-solid fa-pencil\"></i></a>\r\n\r\n                                    <a onclick=\"return eliminar()\" class=\"btn btn-danger\" href=\"index.php?id=<?= $a->id ?>\"><i class=\"fa-solid fa-trash\"></i></a>\r\n                                </td>\r\n                            </tr>\r\n                        <?php } ?>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación -->\r\n                <nav>\r\n                    <ul class=\"pagination\">\r\n                        <?php if ($pagina > 1): ?>\r\n                            <li class=\"page-item\"><a class=\"page-link\" href=\"?pagina=<?= $pagina - 1 ?>\">Anterior</a></li>\r\n                        <?php endif; ?>\r\n\r\n                        <?php for ($i = 1; $i <= $totalPaginas; $i++): ?>\r\n                            <li class=\"page-item <?= $i == $pagina ? \'active\' : \'\' ?>\">\r\n                                <a class=\"page-link\" href=\"?pagina=<?= $i ?>\"><?= $i ?></a>\r\n                            </li>\r\n                        <?php endfor; ?>\r\n\r\n                        <?php if ($pagina < $totalPaginas): ?>\r\n                            <li class=\"page-item\"><a class=\"page-link\" href=\"?pagina=<?= $pagina + 1 ?>\">Siguiente</a></li>\r\n                        <?php endif; ?>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger mb-3\">\n        <div class=\"card-header bg-danger text-white\">\n          Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Inyección SQL</h5>\n          <p class=\"card-text\">\n            <b>Línea aproximada:</b> Dentro de <code>controller/eliminar.php</code> (no proporcionado) y posiblemente en  <code>controller/registro.php</code> (no proporcionado) si no se sanitizan las entradas antes de usarlas en las consultas SQL. La vulnerabilidad reside en la concatenación directa de datos proporcionados por el usuario en la consulta SQL. En la línea:\n             <code> <a onclick=\"return eliminar()\" class=\"btn btn-danger\" href=\"index.php?id=<?= $a->id ?>\">...</a></code>,  el parametro id, si bien es un entero, si el script `eliminar.php` usa este parametro sin validarlo y escaparlo en una consulta SQL, puede ser vulnerable.\n          </p>\n          <p class=\"card-text\">\n            <b>Mitigación:</b> Utilizar consultas preparadas (prepared statements) con parámetros en PDO o MySQLi para evitar la inyección SQL.  Nunca concatenar directamente datos proporcionados por el usuario en las consultas.  Validar y sanitizar todas las entradas del usuario. Asegurarse de que el script `eliminar.php` sanitiza el parametro ID antes de usarlo.\n          </p>\n        </div>\n      </div>\n\n      <div class=\"card border-warning mb-3\">\n        <div class=\"card-header bg-warning text-white\">\n          Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Acoplamiento Alto</h5>\n          <p class=\"card-text\">\n            El código presenta un acoplamiento alto entre las vistas (HTML) y los controladores (PHP).  Se incluyen directamente archivos de controlador dentro de las vistas (<code>include \"controller/registro.php\";</code> y <code>include \"controller/eliminar.php\";</code>). Esto dificulta la reutilización y el mantenimiento del código.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Implementar un patrón de diseño MVC (Modelo-Vista-Controlador) más estricto.  Las vistas solo deben encargarse de la presentación, los controladores deben manejar la lógica de la aplicación y los modelos deben interactuar con la base de datos.\n          </p>\n          <h5 class=\"card-title\">Falta de Manejo de Errores</h5>\n          <p class=\"card-text\">\n            El código no incluye un manejo robusto de errores. Por ejemplo, no se verifica si las consultas a la base de datos se ejecutan correctamente.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Implementar un manejo de errores adecuado utilizando bloques <code>try-catch</code> para capturar excepciones y registrar o mostrar mensajes de error apropiados. Verificar siempre el resultado de las consultas a la base de datos.\n          </p>\n            <h5 class=\"card-title\">Posible Duplicación de Código</h5>\n          <p class=\"card-text\">\n            Se incluyen multiples veces la conexión a la base de datos (`models/conexion.php`).\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Crear una función o clase para la conexión a la base de datos y llamarla desde donde sea necesario. Usar `require_once` o `include_once` para asegurar que el archivo se incluya solo una vez.\n          </p>\n          <h5 class=\"card-title\">Legibilidad</h5>\n          <p class=\"card-text\">\n            Si bien el código es relativamente legible, podría mejorarse la organización y la documentación.\n          </p>\n          <p class=\"card-text\">\n            <b>Mejora:</b> Agregar comentarios para explicar la lógica de las diferentes secciones del código.  Utilizar nombres de variables y funciones descriptivos.\n          </p>\n        </div>\n      </div>\n\n      <div class=\'card border-success\'>\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <ol>\n            <li><b>Sanitización de Entradas:</b> Implementar funciones de validación y sanitización para todas las entradas del usuario (nombre, apellido, cédula, fecha, email) antes de insertar o actualizar datos en la base de datos.  Utilizar <code>htmlspecialchars()</code> para mostrar datos en la vista y evitar ataques XSS (ya se hace, pero verificar consistencia).</li>\n            <li><b>Consultas Preparadas:</b> Utilizar consultas preparadas (prepared statements) con parámetros en PDO o MySQLi para prevenir la inyección SQL.</li>\n            <li><b>Patrón MVC:</b> Refactorizar el código para seguir un patrón de diseño MVC más estricto, separando la lógica de la aplicación en modelos, vistas y controladores.</li>\n            <li><b>Manejo de Errores:</b> Implementar un manejo de errores adecuado utilizando bloques <code>try-catch</code> para capturar excepciones y registrar o mostrar mensajes de error apropiados.</li>\n            <li><b>Validación en el Servidor:</b> Siempre realizar validación de datos en el servidor, incluso si ya se realiza en el cliente (JavaScript). La validación del lado del cliente puede ser omitida o manipulada.</li>\n            <li><b>Control de Acceso:</b> Implementar un sistema de autenticación y autorización para proteger el acceso a las funcionalidades de la aplicación. (Fuera del alcance del snippet, pero importante en una app real).</li>\n            <li><b>Paginación Segura:</b> Validar que el parámetro `pagina` sea un entero positivo antes de usarlo en la consulta SQL para la paginación.</li>\n            <li><b>Protección CSRF:</b> Implementar protección contra ataques CSRF (Cross-Site Request Forgery), especialmente en los formularios de registro y eliminación.  Esto se puede lograr mediante el uso de tokens CSRF.</li>\n            <li><b>Uso de Frameworks:</b> Considerar el uso de un framework PHP (como Laravel, Symfony o CodeIgniter) para facilitar el desarrollo y mejorar la seguridad y la calidad del código.  Estos frameworks ya implementan muchas de las medidas de seguridad necesarias.</li>\n            <li><b>Auditoria de Seguridad:</b> Realizar una auditoría de seguridad exhaustiva del código para identificar y corregir posibles vulnerabilidades.</li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:27:43', 8),
(68, 'conexion.php', 'Detectado por GPT', '<?php\r\n$host = \"localhost\";\r\n$usuario = \"root\";\r\n$password = \"\";\r\n$base_datos = \"crud_php\";\r\n\r\n// Crear conexión\r\n$conexion = new mysqli($host, $usuario, $password, $base_datos);\r\n\r\n// Verificar errores de conexión\r\nif ($conexion->connect_error) {\r\n    die(\"Error de conexión: \" . $conexion->connect_error);\r\n}\r\n\r\n// Establecer conjunto de caracteres a UTF-8\r\nif (!$conexion->set_charset(\"utf8mb4\")) {\r\n    die(\"Error al establecer el conjunto de caracteres: \" . $conexion->error);\r\n}\r\n\r\n// Opcional: mensaje de éxito (solo en desarrollo)\r\n/* echo \"✅ Conexión exitosa a la base de datos.\"; */\r\n?>\r\n', '```html\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"card border-danger\">\n        <div class=\"card-header bg-danger text-white\">\n          Análisis de Vulnerabilidades de Seguridad\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Posibles Vulnerabilidades</h5>\n          <p class=\"card-text\">El código proporcionado, aunque aparentemente sencillo, presenta algunas vulnerabilidades de seguridad, especialmente en un contexto de producción. La ausencia de validación y sanitización de entradas en queries posteriores es una vulnerabilidad potencial, aunque no se refleja directamente en este fragmento.</p>\n\n          <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item\">\n              <strong>Vulnerabilidad:</strong> Credenciales de la base de datos expuestas.\n              <br>\n              <strong>Líneas:</strong> <code>$usuario = \"root\";</code>, <code>$password = \"\";</code>\n              <br>\n              <strong>Descripción:</strong> Almacenar el nombre de usuario y la contraseña de la base de datos directamente en el código es una práctica extremadamente insegura. Si el código es accedido por personas no autorizadas, la base de datos entera está comprometida.  El uso de \"root\" sin contraseña agrava el problema.\n              <br>\n              <strong>Mitigación:</strong>\n              <ul>\n                <li>Nunca usar \"root\" para las aplicaciones. Crea un usuario con los mínimos privilegios necesarios.</li>\n                <li>Almacena las credenciales de la base de datos en variables de entorno o en un archivo de configuración externo al directorio público del servidor web. Estos archivos deben tener permisos restringidos (por ejemplo, 600).</li>\n                <li>Utiliza un sistema de gestión de secretos (Secret Manager) para entornos de producción.</li>\n              </ul>\n              <strong>Mejora métricas:</strong>  No aplicable.  Esta es una práctica de seguridad, no de calidad del código.\n            </li>\n\n            <li class=\"list-group-item\">\n              <strong>Vulnerabilidad:</strong> Falta de manejo de excepciones robusto.\n              <br>\n              <strong>Líneas:</strong> Manejo de errores básico con <code>die()</code>.\n              <br>\n              <strong>Descripción:</strong>  Si bien el código incluye comprobaciones de errores para la conexión y el conjunto de caracteres, el uso de <code>die()</code> interrumpe la ejecución del script y muestra mensajes de error directamente en la página. En un entorno de producción, esto puede revelar información sensible y ofrecer una mala experiencia al usuario.\n              <br>\n              <strong>Mitigación:</strong>\n              <ul>\n                <li>Implementa un sistema de registro de errores (logging) para registrar los errores en un archivo.</li>\n                <li>Maneja las excepciones de forma más elegante, mostrando mensajes de error genéricos al usuario y registrando los detalles del error internamente.</li>\n                <li>Utiliza bloques <code>try-catch</code> para capturar excepciones y realizar acciones correctivas.</li>\n              </ul>\n               <strong>Mejora métricas:</strong>  No aplicable.  Esta es una práctica de seguridad, aunque una mejora en el manejo de errores incrementaría la mantenibilidad.\n            </li>\n\n             <li class=\"list-group-item\">\n              <strong>Vulnerabilidad (Potencial):</strong> Inyección SQL (SQLi).\n              <br>\n              <strong>Líneas:</strong> El código actual no muestra la vulnerabilidad, pero es vulnerable si se usan variables externas (GET, POST) sin validación en queries.\n              <br>\n              <strong>Descripción:</strong>  Si este código se utiliza para realizar consultas a la base de datos utilizando datos proporcionados por el usuario (por ejemplo, a través de formularios), es vulnerable a ataques de inyección SQL. Los atacantes pueden manipular las consultas para acceder a datos no autorizados, modificar la base de datos o incluso ejecutar comandos en el servidor.\n              <br>\n              <strong>Mitigación:</strong>\n              <ul>\n                <li><strong>Utiliza consultas preparadas (prepared statements) con parámetros en lugar de concatenar cadenas SQL.</strong>  Las consultas preparadas escapan automáticamente los caracteres especiales, previniendo la inyección SQL.</li>\n                <li>Valida y sanitiza todas las entradas del usuario antes de utilizarlas en consultas SQL. Utiliza funciones como <code>filter_var()</code> y <code>htmlspecialchars()</code> para eliminar o escapar caracteres peligrosos.</li>\n                <li>Aplica el principio de mínimo privilegio:  el usuario de la base de datos utilizado por la aplicación debe tener solo los permisos necesarios para realizar las operaciones requeridas.</li>\n              </ul>\n               <strong>Mejora métricas:</strong>  No aplicable.  Esta es una práctica de seguridad.\n            </li>\n\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12 mt-3\">\n      <div class=\"card border-warning\">\n        <div class=\"card-header bg-warning text-white\">\n          Métricas de Calidad del Código\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Análisis de la calidad del código</h5>\n          <p class=\"card-text\">El código proporcionado es bastante sencillo, por lo que las métricas son generalmente buenas, pero se pueden mejorar.</p>\n\n          <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item\">\n              <strong>Complejidad:</strong> Baja.\n              <br>\n              <strong>Descripción:</strong> El código tiene una baja complejidad ciclomática ya que solo realiza tareas básicas de conexión a la base de datos.\n              <br>\n              <strong>Mejora:</strong>  No requiere mejora en este caso, dado que la función del código es simple.\n            </li>\n\n            <li class=\"list-group-item\">\n              <strong>Duplicación:</strong> Nula.\n              <br>\n              <strong>Descripción:</strong> No hay duplicación de código en este fragmento.\n              <br>\n              <strong>Mejora:</strong> No requiere mejora.\n            </li>\n\n            <li class=\"list-group-item\">\n              <strong>Legibilidad:</strong> Buena.\n              <br>\n              <strong>Descripción:</strong> El código es fácil de leer y entender, con nombres de variables descriptivos y comentarios claros.\n              <br>\n              <strong>Mejora:</strong>  Se puede agregar más documentación y comentarios si el código se vuelve más complejo.  Consistencia en la documentación (estilo phpDoc).\n            </li>\n\n            <li class=\"list-group-item\">\n              <strong>Acoplamiento:</strong> Alto.\n              <br>\n              <strong>Descripción:</strong> El código está fuertemente acoplado a la base de datos. Cualquier cambio en la base de datos requerirá modificaciones en el código.\n              <br>\n              <strong>Mejora:</strong>\n              <ul>\n                <li>Implementa una capa de abstracción de datos (Data Access Layer - DAL) para desacoplar el código de la base de datos.</li>\n                <li>Utiliza un patrón de diseño como Repository o Data Mapper para aislar la lógica de acceso a datos.</li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-12 mt-3\">\n      <div class=\"card border-success\">\n        <div class=\"card-header bg-success text-white\">\n          Solución Propuesta\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Recomendaciones para un código más seguro y mantenible</h5>\n          <p class=\"card-text\">A continuación, se presenta un código revisado que aborda las vulnerabilidades y mejora las métricas de calidad.</p>\n\n          <pre><code class=\"language-php\">\n&lt;?php\n\n// Cargar configuración desde variables de entorno o archivo de configuración\n$host = $_ENV[\"DB_HOST\"] ?? \"localhost\";\n$usuario = $_ENV[\"DB_USER\"] ?? \"mi_usuario\";\n$password = $_ENV[\"DB_PASSWORD\"] ?? \"mi_password\";\n$base_datos = $_ENV[\"DB_NAME\"] ?? \"crud_php\";\n\n// Intentar conexión con manejo de excepciones\ntry {\n    $conexion = new mysqli($host, $usuario, $password, $base_datos);\n\n    // Verificar errores de conexión\n    if ($conexion->connect_error) {\n        throw new Exception(\"Error de conexión: \" . $conexion->connect_error);\n    }\n\n    // Establecer conjunto de caracteres a UTF-8\n    if (!$conexion->set_charset(\"utf8mb4\")) {\n        throw new Exception(\"Error al establecer el conjunto de caracteres: \" . $conexion->error);\n    }\n\n    // Opcional: mensaje de éxito (solo en desarrollo, nunca en producción)\n    // error_log(\"Conexión exitosa a la base de datos.\");\n\n} catch (Exception $e) {\n    // Registrar el error en un archivo de log\n    error_log($e->getMessage(), 0);\n\n    // Mostrar un mensaje genérico al usuario\n    die(\"Error al conectar con la base de datos. Por favor, contacte al administrador.\");\n} finally {\n    // No cerramos la conexión aquí, ya que probablemente se necesite más adelante.\n    // La conexión se debe cerrar en el lugar donde ya no se necesite.\n}\n\n?&gt;\n</code></pre>\n\n          <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item\">\n              <strong>Cambios:</strong>\n              <ul>\n                <li>Uso de variables de entorno para las credenciales de la base de datos.</li>\n                <li>Manejo de excepciones con <code>try-catch</code> para una mejor gestión de errores.</li>\n                <li>Registro de errores en un archivo de log en lugar de mostrar mensajes sensibles al usuario.</li>\n                <li>Eliminación del mensaje de éxito en producción.</li>\n              </ul>\n            </li>\n            <li class=\"list-group-item\">\n                <strong>Importante:</strong> Este código solo mejora la seguridad de la conexión. Para mitigar la inyección SQL, es fundamental usar consultas preparadas y validar las entradas en el código que *usa* esta conexión.\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n', '2025-05-20 02:28:20', 8);
INSERT INTO `vulnerabilidades` (`id`, `archivo`, `tipo_vulnerabilidad`, `codigo_vulnerable`, `solucion_propuesta`, `fecha_subida`, `id_zip`) VALUES
(69, 'transaccion.php', 'Detectado por GPT', '<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <!-- Required meta tags -->\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n    <!-- Bootstrap CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css\">\r\n    <title>Hello, world!</title>\r\n</head>\r\n\r\n<body>\r\n\r\n    <div class=\"container-fluid-row \">\r\n\r\n        <div class=\"row px-4\">\r\n            <h1>Prueba Tecnica</h1>\r\n            <div class=\"col\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <form action=\"\" method=\"POST\">\r\n                            <!-- Mostrar Error     -->\r\n                            <?php\r\n                            include \"models/conexion.php\";\r\n                            include \"controller/transaccion.php\";\r\n\r\n                            ?>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"producto_id\" class=\"form-label\">ID del Producto</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"producto_id\" name=\"producto_id\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"cantidad\" class=\"form-label\">Cantidad Vendida</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"cantidad\" name=\"cantidad\" required>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"precio\" class=\"form-label\">Precio</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"precio\" name=\"precio\" step=\"0.01\" required>\r\n                            </div>\r\n                            <button type=\"submit\" name=\"btntransaccion\" class=\"btn btn-success\" value=\"ok\">Registrar Venta</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Optional JavaScript; choose one of the two! -->\r\n\r\n    <!-- Option 1: Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n\r\n    <!-- Option 2: Separate Popper and Bootstrap JS -->\r\n    <!--\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js\" integrity=\"sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF\" crossorigin=\"anonymous\"></script>\r\n    -->\r\n</body>\r\n\r\n</html>', '```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"card border-danger\">\n                <div class=\"card-header bg-danger text-white\">\n                    Vulnerabilidades de Seguridad\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Inclusión de archivos sin validación</h5>\n                    <p class=\"card-text\">\n                        <b>Tipo:</b> Inclusión de archivos locales/remotos (LFI/RFI).\n                        <br>\n                        <b>Línea Aproximada:</b> \n                        <pre><code>&lt;?php\n                            include \"models/conexion.php\";\n                            include \"controller/transaccion.php\";\n                            ?&gt;</code></pre>\n                        <b>Descripción:</b> Incluir archivos directamente basados en variables externas o sin validación puede permitir a un atacante incluir archivos arbitrarios del servidor (LFI) o incluso desde servidores remotos (RFI). Si `conexion.php` o `transaccion.php`  contienen código malicioso, o si se puede manipular el sistema para que estos archivos contengan código malicioso, el atacante puede ejecutar ese código en el servidor.\n                        <br>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li><b>Validar y sanitizar las entradas:</b> Asegurarse de que cualquier variable que influya en la ruta del archivo incluido esté correctamente validada y sanitizada.  En este caso, como las inclusiones son fijas, no hay entrada a validar directamente aquí. El riesgo pasa porque los archivos incluidos permitan entradas no validas y tengan vulnerabilidades.</li>\n                            <li><b>Usar una lista blanca:</b> En lugar de permitir cualquier archivo, definir una lista blanca de archivos que pueden ser incluidos.</li>\n                            <li><b>Deshabilitar la inclusión de URLs remotas:</b> En el archivo `php.ini`, establecer `allow_url_include = Off`.</li>\n                            <li><b>Control de acceso:</b> Asegurar que solo los usuarios autorizados puedan modificar los archivos incluidos.</li>\n                        </ul>\n                        <b>Mejora de Métricas:</b> N/A (esta vulnerabilidad no está directamente relacionada con métricas de calidad de código tradicionales, pero sí con la seguridad).\n                    </p>\n\n                    <h5 class=\"card-title\">Posible Inyección SQL (Dependiendo del Código en Archivos Incluidos)</h5>\n                    <p class=\"card-text\">\n                        <b>Tipo:</b> Inyección SQL.\n                        <br>\n                        <b>Línea Aproximada:</b>  Depende del código dentro de `models/conexion.php` y `controller/transaccion.php`, específicamente en las consultas a la base de datos.\n                        <br>\n                        <b>Descripción:</b> Si los archivos incluidos (especialmente `controller/transaccion.php`) contienen consultas SQL construidas concatenando cadenas con datos proporcionados por el usuario (por ejemplo, `$_POST[\'producto_id\']`, `$_POST[\'cantidad\']`, `$_POST[\'precio\']`), existe una alta probabilidad de vulnerabilidad de inyección SQL. Un atacante podría manipular estas entradas para ejecutar comandos SQL arbitrarios, comprometiendo la integridad de la base de datos.\n                        <br>\n                        <b>Mitigación:</b>\n                        <ul>\n                            <li><b>Usar sentencias preparadas (Prepared Statements) con PDO o MySQLi:</b> Las sentencias preparadas permiten separar la consulta SQL de los datos, evitando que los datos sean interpretados como parte de la consulta.</li>\n                            <li><b>Escapar las entradas del usuario:</b> Si no es posible usar sentencias preparadas, escapar las entradas del usuario antes de usarlas en la consulta SQL.  Usar funciones como `mysqli_real_escape_string()` (con MySQLi) para escapar caracteres especiales.</li>\n                            <li><b>Validar las entradas:</b> Validar que los datos proporcionados por el usuario tengan el formato esperado (por ejemplo, que `producto_id`, `cantidad` y `precio` sean números).</li>\n                            <li><b>Principio de mínimo privilegio:</b> Asegurar que la cuenta de usuario de la base de datos utilizada por la aplicación tenga solo los permisos necesarios para realizar las operaciones requeridas.</li>\n                        </ul>\n                        <b>Mejora de Métricas:</b> N/A (esta vulnerabilidad no está directamente relacionada con métricas de calidad de código tradicionales, pero sí con la seguridad).\n                    </p>\n\n                </div>\n            </div>\n\n            <div class=\"card border-warning mt-3\">\n                <div class=\"card-header bg-warning text-white\">\n                    Métricas de Calidad del Código\n                </div>\n                <div class=\"card-body\">\n                    <h5 class=\"card-title\">Acoplamiento</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código presenta un acoplamiento moderado debido a las inclusiones de archivos (`models/conexion.php` y `controller/transaccion.php`).  Cualquier cambio en estos archivos podría afectar al script principal.\n                        <br>\n                        <b>Mejora:</b>\n                        <ul>\n                            <li><b>Inyección de dependencias:</b> Considerar el uso de un contenedor de inyección de dependencias para reducir el acoplamiento entre los componentes.</li>\n                            <li><b>Interfaces:</b> Definir interfaces para los componentes y depender de las interfaces en lugar de las implementaciones concretas.</li>\n                        </ul>\n                    </p>\n\n                    <h5 class=\"card-title\">Legibilidad</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> El código es relativamente legible, pero podría mejorarse con comentarios y una mejor organización.\n                        <br>\n                        <b>Mejora:</b>\n                        <ul>\n                            <li><b>Comentarios:</b> Agregar comentarios para explicar la funcionalidad de las diferentes secciones del código.</li>\n                            <li><b>Formato:</b> Mantener un formato consistente y legible.</li>\n                            <li><b>Nombres descriptivos:</b> Usar nombres descriptivos para las variables y funciones.</li>\n                        </ul>\n                    </p>\n\n                    <h5 class=\"card-title\">Complejidad Ciclomática</h5>\n                    <p class=\"card-text\">\n                        <b>Descripción:</b> La complejidad ciclomática es baja en este fragmento, pero podría aumentar significativamente en los archivos incluidos (`models/conexion.php` y `controller/transaccion.php`).\n                        <br>\n                        <b>Mejora:</b>\n                        <ul>\n                            <li><b>Refactorización:</b> Dividir funciones largas y complejas en funciones más pequeñas y manejables.</li>\n                            <li><b>Patrones de diseño:</b> Utilizar patrones de diseño para simplificar la lógica y reducir la complejidad.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n\n            <div class=\'card border-success mt-3\'>\n                <div class=\'card-header bg-success text-white\'>\n                    Solución Propuesta\n                </div>\n                <div class=\'card-body\'>\n                    <h5 class=\'card-title\'>Refactorización y Medidas de Seguridad</h5>\n                    <p class=\'card-text\'>\n                        <ol>\n                            <li><b>Validación exhaustiva:</b> Implementar validación de entrada en el archivo `controller/transaccion.php` para los campos `producto_id`, `cantidad`, y `precio`.  Asegurar que sean numéricos y estén dentro de rangos aceptables.  Utilizar filtros de saneamiento de PHP (`filter_var`) para evitar entradas maliciosas.</li>\n                            <li><b>Sentencias preparadas:</b> Usar sentencias preparadas con PDO para interactuar con la base de datos en `controller/transaccion.php`.  Esto previene la inyección SQL.</li>\n                            <li><b>Control de errores:</b> Implementar un manejo de errores adecuado en `controller/transaccion.php` y `models/conexion.php`.  Registrar los errores en un archivo de log para su posterior análisis, en lugar de mostrarlos directamente al usuario.</li>\n                            <li><b>Estructura del proyecto:</b> Considerar una estructura de proyecto MVC más completa para separar la lógica de la presentación y mejorar la mantenibilidad.</li>\n                            <li><b>Aislamiento:</b> Implementar aislamiento en la base de datos, usando usuarios con privilegios mínimos necesarios.</li>\n                        </ol>\n                    </p>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n```\n', '2025-05-20 02:28:46', 8);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `zip_uploads`
--

CREATE TABLE `zip_uploads` (
  `zip_id` int(11) NOT NULL,
  `zip_name` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_spanish_ci NOT NULL,
  `upload_date` datetime NOT NULL DEFAULT current_timestamp(),
  `usu_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `zip_uploads`
--

INSERT INTO `zip_uploads` (`zip_id`, `zip_name`, `upload_date`, `usu_id`) VALUES
(1, 'V1.zip', '2025-05-18 22:35:22', 3),
(2, 'IRepositorio.zip', '2025-05-18 22:37:30', 3),
(3, 'facturacion.zip', '2025-05-19 18:23:44', 3),
(4, 'Pruba Tecnica.zip', '2025-05-19 18:32:18', 3),
(5, 'getter y setter.zip', '2025-05-19 20:03:41', 3),
(6, 'prueba.zip', '2025-05-19 20:38:04', 2),
(7, 'facturacion.zip', '2025-05-19 21:02:25', 2),
(8, 'Pruba Tecnica.zip', '2025-05-19 21:22:43', 2);

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `tm_rol`
--
ALTER TABLE `tm_rol`
  ADD PRIMARY KEY (`ROL_ID`);

--
-- Indices de la tabla `tm_usuario`
--
ALTER TABLE `tm_usuario`
  ADD PRIMARY KEY (`USU_ID`);

--
-- Indices de la tabla `vulnerabilidades`
--
ALTER TABLE `vulnerabilidades`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `zip_uploads`
--
ALTER TABLE `zip_uploads`
  ADD PRIMARY KEY (`zip_id`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `tm_rol`
--
ALTER TABLE `tm_rol`
  MODIFY `ROL_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT de la tabla `tm_usuario`
--
ALTER TABLE `tm_usuario`
  MODIFY `USU_ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT de la tabla `vulnerabilidades`
--
ALTER TABLE `vulnerabilidades`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=70;

--
-- AUTO_INCREMENT de la tabla `zip_uploads`
--
ALTER TABLE `zip_uploads`
  MODIFY `zip_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
